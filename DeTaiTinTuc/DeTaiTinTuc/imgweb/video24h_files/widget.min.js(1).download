require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c,d,e,f,g;c=window.$,a("infinite-swipe"),g=a("./itemManager.coffee"),f=g.omitItem,e=g.handleImgErr,d=function(){function a(a){var b,c,d;this.options=a,null==(b=this.options).total&&(b.total=Number(this.options.$wrap.attr("data-total"))),null==(c=this.options).item_total&&(c.item_total=Number(this.options.$wrap.attr("data-item_total"))),null==(d=this.options).item_count&&(d.item_count=Number(this.options.$wrap.attr("data-item_count"))),this.initSwipe(this.options.$wrap),this.initThumbnailChecker(this.options.$wrap)}return a.prototype.options={$wrap:null,total:null,item_total:null,item_count:null,onPage:null},a.prototype.onPage=function(a){return this.options.onPage=a},a.prototype.onExpose=function(){var a,b;if(!this._exposed)return this._exposed=!0,a=this.options.$wrap,b=Number(a.attr("data-autoswipe_seconds")),"true"!==a.attr("data-infinitefeed")&&this.options.total>1&&b>0?a.find(".list").infiniteSwipe("initAutoswipe",b):void 0},a.prototype.initSwipe=function(a){return"true"!==a.attr("data-infinitefeed")&&this.options.total>1?a.find(".list").infiniteSwipe("destroy").infiniteSwipe({$target_wrap:a.find(".target-wrap"),$target:a.find(".target"),total:this.options.total,$prev:a.find(".prev"),$next:a.find(".next"),$curr:a.find(".current-page"),infinite:navigator.userAgent.indexOf("Chrome/85")>-1||navigator.userAgent.indexOf("CriOS/85")>-1?!1:"true"===a.attr("data-infinite"),animation_type:a.attr("data-animation_type"),$autoswipe_pause_el:a,onPage:function(a){return function(b){return a.setPage(b),a.options.onPage?a.options.onPage(b):void 0}}(this)}):a.find(".prev, .next").addClass("disabled"),this.setPage(1)},a.prototype.initThumbnailChecker=function(a){var b,c;return b=a.find(".target"),c=a.find(".target:not(.infinite-swipe-target-clone)"),c.find("img.thumbnail").on("error",e),c.find("img[err]").each(e)},a.prototype.setPage=function(a){var b,d,e,f,g,h;if(h=this,b=this.options.$wrap,d=b.find(".page-positions"),d.length>0){for(d.html("").data("page",a),e=f=0,g=this.options.total;g>=0?g>f:f>g;e=g>=0?++f:--f)d.append(c("<span class='page-position' data-page='"+(e+1)+"'>"+("<span class='page-position-num' data-page='"+(e+1)+"'>"+(e+1))+"</span></span>"));d.find(".page-position").eq(a-1).addClass("current"),d.find(".page-position").on("click",function(){return a=c(this).data("page"),b.find(".list").trigger("swipe_page",a),h.setPage(a)})}return b.trigger("page",a)},a}(),b.exports=d},{"./itemManager.coffee":10,"infinite-swipe":"infinite-swipe"}],2:[function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;c=window.$,g=a("./thumbnailManager.coffee").adjustImgSizeContain,j=a("./frameSynchronizer.coffee"),y=a("./util.js"),q=a("./tabManager.coffee").initTabTitle,d="6049845540285",e="481869948690673",x=function(a){var b,c,d,f,g;return d=a.content_name,b=a.content_category,c=a.content_id,f=encodeURIComponent,g=document.createElement("img"),g.src="https://www.facebook.com/tr?id="+e+("&ev=ViewContent&cd[content_name]="+f(d))+("&cd[content_category]="+f(b))+"&cd[content_type]=product&cd[content_ids]="+f(c),document.body.appendChild(g)},u=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;for(n=(null!=a?a.split("/"):void 0)||[],k=n[4],b=n[8],c=n[10],m=(null!=a&&null!=(h=a.split("?"))&&null!=(i=h[1])?i.split("&"):void 0)||[],l={},e=0,g=m.length;g>e;e++)d=m[e],j=d.split("="),f=j[0],o=j[1],l[f]=o;return{content_name:k,content_category:l.channel,content_id:b+"-"+c}},v=function(a,b){var d;return d=new Image,d.src=a,c(d).on("load",function(){return b(d.width||0)})},k=function(a,b){var c,d,e,f,g,h,i,j;h=b.service_name,j=b.widget_id,f=b.channel,c=b.ad_default_request_id,d=b.ad_req,e="https://sp-api.dable.io/services/"+encodeURIComponent(h)+"/"+("users/"+d.uid+"/campaigns/"+a.campaign_id+"/contents/"+a.content_id+"/click_redirect?")+("method="+a.method+"&expired="+encodeURIComponent(Date().toString()))+("&channel="+encodeURIComponent(f)+"&widget_id="+j+"&request_id="+c+"&rtb_cpc=0");for(g in d)i=d[g],"uid"!==g&&"user_info"!==g&&i&&(e+="&"+g+"="+encodeURIComponent(i));return e},m=function(a,b){var c,d,e,f,g,h,i,j;h=b.service_name,j=b.widget_id,e=b.channel,c=b.ad_default_request_id,d=b.ad_req,f="https://sp-api.dable.io/services/"+encodeURIComponent(h)+"/"+("users/"+d.uid+"/campaigns/"+a.campaign_id+"/contents/"+a.content_id+"/request?")+("method="+a.method+"&expired="+encodeURIComponent(Date().toString()))+("&channel="+encodeURIComponent(e)+"&widget_id="+j+"&request_id="+c),delete d.uid,delete d.user_info;for(g in d)i=d[g],("uid"!==g&&"user_info"!==g||i)&&(f+="&"+g+"="+encodeURIComponent(i));return f},l=function(a,b){var c,d,e,f,g,h,i,j;h=b.service_name,j=b.widget_id,e=b.channel,c=b.ad_default_request_id,d=b.ad_req,f="https://sp-api.dable.io/services/"+encodeURIComponent(h)+"/"+("users/"+d.uid+"/campaigns/"+a.campaign_id+"/contents/"+a.content_id+"/expose?")+("method="+a.method+"&expired="+encodeURIComponent(Date().toString()))+("&channel="+encodeURIComponent(e)+"&widget_id="+j+"&request_id="+c),delete d.uid,delete d.user_info;for(g in d)i=d[g],("uid"!==g&&"user_info"!==g||i)&&(f+="&"+g+"="+encodeURIComponent(i));return f},t=function(a){return y.logByHiddenImg("//sp-api.dable.io/util/count?k=criteo_id_"+a+"&is_gif=1")},i=function(a){return a?(a.find(".category").remove(),a.find(".author").remove(),a.find(".published_time").remove()):void 0},f=function(a){var b,c,d,e,f;return null==a&&(a={}),c={TEXT:"text",BOX:"box",CLIENT_NAME:"client_name",CUSTOM:"custom"},d="A&#x200b;D",b=a.$el,e=a.ad_box_type,f=a.sp_mark_custom,b&&e?e===c.TEXT||e===c.CUSTOM?b.find(".sp-mark, .sp-mark-v2").html(d):e===c.BOX?b.find(".sp-mark-box").html(d):e===c.CLIENT_NAME?b.find(".sp-mark-v2").html('<div class="sp-mark-custom">'+f+"</div>"):void 0:void 0},r=function(a,b){var d,e,h,n,o,p,r,s,u,w;return u=b.service_name,e=b.ad_exposelog_links,h=b.ad_implog_links,n=b.ad_size,r=b.lang,d=b.ad_box_type,p=!1,"id"===r&&t("request"),s=function(o){var s,u,w,x,z,A,B,C,D,E,F,G,H,I,J;return p?void("id"===r&&t("timeout")):(H=null!=o&&null!=(D=o[0])?D.nativePayload:void 0,H&&(null!=H&&null!=(E=H.products)?E[0]:void 0)?(F=H.products[0],J=F.title,u=F.description,B=F.price,s=F.click_url,w=F.image,z=H.impression_pixels,C=H.privacy,I=(null!=(G=H.advertiser)?G.description:void 0)||"A&#x200b;D",A=a.method,x=w.url,v(x,function(o){var p,v,x,B,D,E,F,G,H,K,L;if(100>=o)return void("id"===r&&t("toosmallimage"));if(p=0,c(".target:not([data-infinitefeed])").each(function(){var e,h,j,l,m,n;return e=c(this).find(".item[data-criteo_slot]"),0!==!e.length?(p=e.attr("data-ad_idx")||0,j=e.find(".name"),j.text(J),e.find(".description").text(u),e.find(".sp-mark-custom").html(I),e.find(".tab-title").html("A&#x200b;D"),e.find(".thumbnail-wrap").addClass("img-size-contain"),h=e.find(".thumbnail"),h.attr("data-org-src")?h.attr("data-org-src",w.url):(h.attr("src",w.url),g(h)),i(e),e.attr("data-ad_id")?l=e.find("a").attr("href").replace(/campaigns\/[^\/]+/,"campaigns/"+a.campaign_id).replace(/contents\/[^\/]+/,"contents/"+a.content_id).replace(/method=[^\&]+/,"method="+A)+("&custom_link_url="+encodeURIComponent(s)):(e.attr("data-ad_id","ad_"+a.campaign_id+"_"+a.content_id+"_"+e.attr("data-idx")).find(".sp-mark, .sp-mark-v2, .sp-mark-box").removeClass("hidden"),e.addClass("item-sp"),l=k(a,b)+("&custom_link_url="+encodeURIComponent(s)),q(),f({$el:e,ad_box_type:d,sp_mark_custom:I})),-1===l.indexOf("method=")&&(l+="&method="+A),e.find("a").attr("href",l).attr("target","_blank"),C?(m=e.find(".sp-crit-mark"),n=function(a){return a.preventDefault(),window.open(C.optout_click_url,"new_window")},m.click(n),m.keydown(function(a){return 13===a.keyCode?n(a):void 0}),m.removeClass("hidden")):void 0):void 0}),B=h.length?[((null!=(K=h[p])?K[0]:void 0)||h[p]).replace(/campaigns\/[^\/]+/,"campaigns/"+a.campaign_id).replace(/contents\/[^\/]+/,"contents/"+a.content_id).replace(/method=[^\&]+/,"method="+A)]:[m(a,b)],v=e.length?[((null!=(L=e[p])?L[0]:void 0)||e[p]).replace(/campaigns\/[^\/]+/,"campaigns/"+a.campaign_id).replace(/contents\/[^\/]+/,"contents/"+a.content_id).replace(/method=[^\&]+/,"method="+A)]:[l(a,b)],-1===B[0].indexOf("method=")&&(B[0]+="&method="+A),-1===v[0].indexOf("method=")&&(v[0]+="&method="+A),D=n>p)for(x=0,F=z.length;F>x;x++)H=z[x],y.logByHiddenImg(H.url);else for(E=0,G=z.length;G>E;E++)H=z[E],v.push(H.url);return h[p]=B,e[p]=v,j.setAdExchangeFilled()})):(j.setAdExchangeFilled(),void("id"===r&&t("nodata"))))},w="id"===r?5e3:2e3,null==window.Criteo&&(window.Criteo={}),null==(o=window.Criteo).events&&(o.events=[]),Criteo.events.push(function(){return Criteo.RequestBids({placements:[{slotid:"native-ad-unit-"+a.zoneid,zoneid:a.zoneid,nativeCallback:function(){}}]},s,w)}),setTimeout(function(){return p=!0,j.setAdExchangeFilled()},w)},s=!1,w=function(){var a;if(!s)return a=document.createElement("script"),a.type="text/javascript",a.src="//static.criteo.net/js/ld/publishertag.js",a.async="async",document.getElementsByTagName("head")[0].appendChild(a),s=!0},p=function(a){var b,c,d,e,f,g,h,i,k;return f=a.crit,k=a.widget_id,h=a.service_name,i=a.service_type,c=a.ad_exposelog_links,e=a.cookieoff,d=a.ad_size,g=a.lang,b=a.ad_box_type,!f||e||window.location.search.indexOf("&ad_campaign_id=")>-1?void j.setAdExchangeFilled():(w(),r(f,a))},h=function(a,b,c){var d,e,f,g,h,i,j;if(!b.data("_cd"))return b.data("_cd",1),d=b.parents(".item"),i=a.pageX,j=a.pageY,f=i-d.offset().left,g=j-d.offset().top,e=b.attr("href")+("&item_x="+f+"&item_y="+g)+("&widget_x="+i+"&widget_y="+j),h=(new Date).valueOf(),c.request&&(e+="&from_request_ms="+(h-c.request)),c.expose&&(e+="&from_expose_ms="+(h-c.expose)),b.attr("href",e)},o=function(){var a;return a=[{request:(new Date).valueOf(),expose:null}],c(window).on("expose",function(){return a[0].expose=(new Date).valueOf()}),c(".recommendations").on("page",function(b,c){var d;return a[c-1]?void 0:(d=(new Date).valueOf(),a[c-1]={request:d,expose:d})}),c("body").on("click",".item-sp a",function(b){var d,e;return d=c(this).attr("href"),e=Number(c(this).parents("[data-page]").data("page")),x(u(d)),h(b,c(this),a[e-1]||{})})},n=function(a){return p(a),o(a)},b.exports={init:n}},{"./frameSynchronizer.coffee":7,"./tabManager.coffee":16,"./thumbnailManager.coffee":17,"./util.js":19}],3:[function(a,b){function c(a){return a.getElementsByTagName("img")[0].src}function d(){function a(a){return d.some(function(b){return b.item_id===a})}function b(a){return"https://static.dable.io/static/i/f6f6f6.gif"===a}var d=[],e=document.getElementsByClassName("item");if(!e.length)return[];var f;for(f=0;f<e.length;f++){var g=e[f].getAttribute("data-item_id"),h=c(e[f]);!g||"undefined"===g||a(g)||b(h)||d.push({item_id:g,src:h})}return d}function e(a){return a.length&&a[0].body?"HeavyAdIntervention"===a[0].body.id:!1}function f(a){var b=h.getProtocol()+"//"+h.api_server_domain()+"/widget_issue/heavy_ad_block/block";i.ajax({method:"POST",url:b,data:a})}function g(a){if(window.ReportingObserver){var b=new window.ReportingObserver(function(b){if(e(b)){var c=d();if(c.length){var g={options:a,items:c};f(g)}}},{buffered:!0});b.observe()}}var h=a("./util"),i=window.$,j=function(a){g(a)};b.exports={init:j}},{"./util":19}],4:[function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;c=window.$,h=a("./frameSynchronizer.coffee"),o=a("./itemManager.coffee").omitItem;try{s=window.localStorage}catch(t){f=t,s=null}l=function(a){return function(b){var c;return s&&(c=s.getItem(a+":"+b)),(null!=c?c.length:void 0)?c.split("|||"):[]}},r=function(a){return function(b,c){return s?s.setItem(a+":"+b,c.join("|||")):void 0}},j=l("dable_block_item"),q=r("dable_block_item"),i=l("dable_block_ad"),p=r("dable_block_ad"),g=function(a){var b,d,e,f,g;return g=a.service_name,b=a.$wrap,e=j(g),d=i(g),0===e.length&&0===d.length?b:(f=[],b.find(".item").filter(function(a,b){var c;return c=b.className,c&&-1===f.indexOf(c)?(f.push(c),!0):!1}).each(function(){var a,b,f;return a=c(this),f=a.attr("data-item_id"),b=a.attr("data-ad_id"),f&&e.indexOf(f)>-1?o(a):b&&d.indexOf(b)>-1?o(a):void 0}),b)},k=function(a){var b,c;try{a=a.toLowerCase()}catch(d){f=d,a="en"}return b="ko"===a.substr(0,2)?"해당 콘텐츠는 추천에서 제외됩니다.":"zh-tw"===a||"zh-hant"===a.substr(0,7)||"zh-hk"===a?"這個內容將不會再顯示":"zh"===a.substr(0,2)?"这个内容将不会再显示":"ja"===a.substr(0,2)?"このコンテンツはレコメンドされなくなります":"id"===a.substr(0,2)?"Konten ini tidak lagi ditampilkan":"vi"===a.substr(0,2)?"Nội dung này sẽ không được hiển thị":"ms"===a.substr(0,2)?"Konten ini tidak akan ditampilkan lagi.":"th"===a.substr(0,2)?"เนื้อหานี้จะไม่แสดงอีกต่อไป":"This content will no longer be shown.",c='<div class="block-item-message">'+b+"</div>"},e=function(a){return function(b){var d,e,f,g,h,i;return b.preventDefault(),e=a.$wrap,i=a.service_name,h=a.lang,d=c(this).parents(".item"),g=d.attr("data-item_id"),o(d,{messagebox:k(h)}),f=j(i),g&&-1===f.indexOf(g)&&(f.push(g),q(i,f)),10===f.length?c.ajax({method:"POST",url:"/util/exclude_item_count",data:{service_name:i}}):void 0}},d=function(a){return function(b){var d,e,f,g,h,j;return b.preventDefault(),e=a.$wrap,j=a.service_name,h=a.lang,d=c(this).parents(".item"),f=d.attr("data-ad_id"),o(d,{messagebox:k(h)}),g=i(j),f&&-1===g.indexOf(f)&&(g.push(f),p(j,g)),10===g.length?c.ajax({method:"POST",url:"/util/exclude_ad_count",data:{service_name:j}}):void 0}},n=function(a){var b,c,f,h;return c=a.from,h=a.service_name,b=a.$wrap,f=a.lang,b=g(a),b.find(".item:not(.item-sp) .block-btn-wrap").on("click",e(a)),b.find(".item-sp .block-btn-wrap").on("click",d(a))},m=function(a){return c(window).on("onload_responsive_group",function(){return n(a)}),n(a)},b.exports={init:m}},{"./frameSynchronizer.coffee":7,"./itemManager.coffee":10}],5:[function(a,b){var c,d,e,f;c=window.$,d=a("./frameSynchronizer.coffee"),e=a("./util").getUrlParameter,f=function(a){var b,f,g;return b=a.from,g=a.newsx_detail_page_url_pattern,f=a.is_test,c("body").on("click",".item-bridge a",function(a){var h,i,j;return a.preventDefault(),i=c(this).data("org-href"),j=e(i,"pick"),d.sendPostMessage({from:b,newsx_detail_page_url_pattern:g,on_bridge_item_clicked:j}),h=i.replace("click_redirect","click"),f||c.getJSON(h+"&callback=?",function(){}),!1})},b.exports={init:f}},{"./frameSynchronizer.coffee":7,"./util":19}],6:[function(a,b){var c,d,e,f,g,h;c=window.$,e=a("./frameSynchronizer.coffee"),g=function(a){return 0===a.indexOf("http")&&-1===a.indexOf("daumcdn.net")},d=encodeURIComponent,h=window.self!==window.top,f=function(a){var b,f,i,j,k,l;return i=a.id,f=a.from,k=a.uid,j=a.service_id,l=a.widget_id,b=a.ads,b=JSON.stringify(b),c(".powered-by, .sp-info a").on("click",function(a){return g(f)?(a.preventDefault(),e.sendPostMessage({id:i,from:f,show_dable_popup:"1",is_geniee:this.href.indexOf("geniee")>-1?"1":void 0,uid:k,service_id:j,widget_id:l,ads:b})):(window.open(this.href+"?from="+d(f)+"&uid="+k+"&service_id="+j+"&widget_id="+d(l)+"&wrapped="+h+"&ads="+d(b)),a.preventDefault())})},b.exports={init:f}},{"./frameSynchronizer.coffee":7}],7:[function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;c=window.$,p=a("./simplePostMessage.js"),e=a("./ga.coffee"),r=a("./util.js"),i=!1,h=!1,k=function(a,b){return a.replace(new RegExp("^.*"+b+"=([^&]+).*$"),"$1")},n=function(a){var b,c,d;b=a.from,d=[];for(c in a)"from"!==c&&d.push(c+"="+a[c]);return 0===b.indexOf("http")?p.postMessage(d.join("&"),b):void 0},j=function(a,b){var d,e;null==b&&(b=0),d=c("img.thumbnail:visible"),d.length>0&&0===d.height()&&10>b?setTimeout(function(){return j(a,b+1)},100):(e=c("body").outerHeight(!0)||1,a(e))},g=function(){return"function"==typeof window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)").matches:void 0},m=function(a){var b,d,e,f,h,i,j,k,l,m,n,o;for(f=a.from,k=a.log_url,b=null!=(l=a.ad_log_urls)?l:[],d=a.ad_size,e=function(a){return a=a.replace(/^https?:/,""),-1===a.indexOf("?")&&(a+="?"),g()&&(a+="&is_dark_mode=1"),a},k&&r.logByHiddenImg(e(k)),m=[],h=i=0,j=b.length;j>i;h=++i)o=b[h],c.isArray(o)||(o=[o]),h>=d||m.push(function(){var a,b,c;for(c=[],a=0,b=o.length;b>a;a++)n=o[a],c.push(r.logByHiddenImg(e(n)));return c}());return m},l=function(a,b,d){var e,f,g,h,i,j,k,l,m,n,o;for(null==b&&(b=[]),o=d.wrapped,e=d.ad_size,m=d.widget_x,n=d.widget_y,f=function(a){return a=a.replace(/^https?:/,""),-1===a.indexOf("?")&&(a+="?"),o&&(a+="&is_wrapped=1"),m>-1&&(a+="&widget_x="+m),n>-1&&(a+="&widget_y="+n),a},a&&r.logByHiddenImg(f(a)),j=[],g=h=0,i=b.length;i>h;g=++h)l=b[g],c.isArray(l)||(l=[l]),g>=e||j.push(function(){var a,b,c;for(c=[],a=0,b=l.length;b>a;a++)k=l[a],c.push(r.logByHiddenImg(f(k)));return c}());return j},d=null,q=function(a,b){return null==b&&(b=!1),j(function(c){return b&&d===c?void 0:(a.if_height=c,d=c,n(a))})},f=function(a){var b,d,f,g,o,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S;return P=a.service_name,J=a.messages,F=a.impressionlog_link,A=a.exposelog_link,f=a.ad_exposelog_links,g=a.ad_implog_links,s=a.ads,o=a.ad_size,C=a.ga_action_sample_rate,H=a.is_secret_widget,L=a.pre_expose,S=a.wrapped_frame,O=a.service_id,E=J.id,B=J.from,Q=J.sliding,Q&&(n({id:E,from:B,sliding:Q}),delete J.sliding),c(window).on("syncheight",function(){return q({id:E,from:B},!0)}),c(window).on("load",function(){var a;return j(function(a){return J.if_height=a,J.has_recom=a>1&&1||0,n(J)}),a=function(){return setTimeout(function(){return h?(q({id:E,from:B,init:"1"}),m({from:B,log_url:F,ad_log_urls:g,ad_size:o})):a()},300)},a(),setTimeout(function(){return q({id:E,from:B},!0),c(window).on("orientationchange resize",function(){return q({id:E,from:B},!0)})},3e3)}),-1===window.location.href.indexOf("test=1")&&c(".recommendations").on("page",function(a,b){return n({id:E,from:B,check_and_page_expose:1,page:b})}),L&&setTimeout(function(){return c(window).trigger("pre-expose")},0),M=!1,u=function(a){var b,d,g;return null==a&&(a={}),i||window.location.href.indexOf("test=1")>-1||H&&!M?void 0:(b=a.widget_x,d=a.widget_y,g=a.wrapped,c(window).trigger("expose"),l(A,f,{wrapped:g,ad_size:o,widget_x:b,widget_y:d}),e.sendGaExposeLog(P,s,C,O),e.attachGaUidToClickLinks(),i=!0)},z=[1],N=function(a,b){var d,e,f,g,h,i,j;for(h=[],e=f=0,g=a.length;g>f;e=++f)j=a[e],c.isArray(j)||(j=[j]),d=Math.floor(e/o)+1,b===d&&h.push(function(){var a,b,c;for(c=[],a=0,b=j.length;b>a;a++)i=j[a],i=i.replace(/^https?:/,""),S&&(i+=(i.indexOf("?")>-1&&"&"||"?")+"is_wrapped=1"),c.push(r.logByHiddenImg(i));return c}());return h},v=function(a){var b,c,d;for(b=0,c=z.length;c>b;b++)if(d=z[b],a===d)return;return z.push(a),N(f,a),N(g,a)},t=function(a){return c(".recommendations .item").each(function(){var b,d;return b=c(this),d=b.attr("data-ad_id"),(null!=d?d.indexOf(a):void 0)>-1?b.children(".item-link").hide():void 0})},I=!0,K=function(a){var b,d,e,f,g,h,i,j;if(d=a.data,d&&d.indexOf){if(d.indexOf("resume_dable_widget")>-1)return I=!0;if(I)return d.indexOf("update_height")>-1?q({id:E,from:B},!0):0===d.indexOf("expose")?(h=(null!=(f=d.split("="))&&null!=(g=f[1])?g.split(","):void 0)||[],i=h[0],j=h[1],u({widget_x:i,widget_y:j})):0===d.indexOf("page_expose")?(e=Number(k(d,"page_expose")),v(e)):d.indexOf("show_secret_widget")>-1?(M=!0,u()):d.indexOf("pre_expose")>-1&&!L?c(window).trigger("pre-expose"):0===d.indexOf("block_content")?(b=k(d,"block_content"),t(b)):d.indexOf("exposure_start")>-1?c(window).trigger("exposure_start"):d.indexOf("exposure_end")>-1?c(window).trigger("exposure_end"):c(window).trigger("receive-message",d)}else;},c(window).on("close_dable_widget",function(){var a;return a=c.extend({},J),a.close_dable_widget=1,n(a),I=!1}),x=function(){return c(window).off("mouseover",x),u()},c(window).on("mouseover",x),p.receiveMessage(K),w=function(a,b){var c,d;return c=b.entry,d=b.observer,a.expose_duration_ms=a.expose_duration_ms+100,a.expose_duration_ms>=1e3?(a.expose_duration_ms=0,clearInterval(a.timer_id),a.timer_id=null,u({wrapped:!0}),d.unobserve(c.target)):void 0},S&&("undefined"!=typeof window&&null!==window?window.IntersectionObserver:void 0)?(R=[],y={expose_duration_ms:0,timer_id:null},G=new IntersectionObserver(function(a,b){return a.forEach(function(a){return a.isIntersecting?i?b.unobserve(a.target):R.indexOf(O)>-1?y.timer_id?void 0:y.timer_id=setInterval(w.bind(null,y,{entry:a,observer:b}),100):(u({wrapped:!0}),b.unobserve(a.target)):void(y.timer_id&&0!==y.timer_id&&(y.expose_duration_ms=0,clearInterval(y.timer_id),y.timer_id=null))})}),R.indexOf(O)>-1?(D=document.body.offsetHeight,b=c("<div />").css({position:"fixed",top:D/2+"px",left:0,width:"1px",height:"1px"}).appendTo(document.body),G.observe(b.get(0))):(b=c("<div />").css({position:"fixed",top:"200px",left:0,width:"1px",height:"1px"}).appendTo(document.body),d=c("<div />").css({position:"fixed",left:0,bottom:0,width:"1px",height:"1px"}).appendTo(document.body),G.observe(b.get(0)),G.observe(d.get(0)))):void 0},o=function(){return h=!0},b.exports={init:f,sendPostMessage:n,setAdExchangeFilled:o,syncHeight:q}},{"./ga.coffee":8,"./simplePostMessage.js":15,"./util.js":19}],8:[function(a,b){var c,d,e,f,g,h,i,j;f="UA",c=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],e=400,d=20,h=function(){return window.ga?void 0:function(a,b,c,d,e,f,g){return a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){return(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g&&g.parentNode.insertBefore(f,g)}(window,document,"script","//www.google-analytics.com/analytics.js","ga")},i=function(a){return h(),ga(function(){return a(ga.getAll()[0].get("clientId"))})},g=function(){return i(function(a){return $(".item-sp a").each(function(){var b;return b=$(this).attr("href"),-1===b.indexOf("sp-api")||b.indexOf("ga_uid")>-1?void 0:(b+="&ga_uid="+a,$(this).attr("href",b))})})},j=function(a,b,g,i){var j,k,l,m,n,o,p;if(!(0>=g||void 0===a||void 0===i)&&(h(),null!=b?b.length:void 0)){for(p=i>0?Math.floor(i/e):0,p>=d&&(p=d-1),l=f+"-112834822-"+c[p],ga("create",l,"auto",{name:"dableadexpose",sampleRate:g}),o=[],m=0,n=b.length;n>m;m++)j=b[m],k={},k.dimension1=i,k.dimension2=j.campaign_id,k.dimension3=j.content_id,o.push(ga("dableadexpose.send","pageview",k));return o}},b.exports={attachGaUidToClickLinks:g,sendGaExposeLog:j}},{}],9:[function(a,b){var c,d,e,f,g,h,i,j,k,l,m;c=window.$,d=a("./frameSynchronizer.coffee"),m=a("./itemManager.coffee"),k=m.omitItem,f=m.handleImgErr,c.fn.shuffle=function(){var a,b,d;return a=this.get(),b=function(a){return Math.floor(Math.random()*a)},d=c.map(a,function(){var d,e;return e=b(a.length),d=c(a[e]).clone(!0)[0],a.splice(e,1),d}),this.each(function(a){return c(this).replaceWith(c(d[a]))}),c(d)},h=0,l="",e=function(a,b){var c;return c=a%b-b+1,"n"+b+(c||"")},j=function(a){var b,c;return c=a.index(),-1!==c?(b=[e(c,2),e(c,3),e(c,4)].join(" "),a.addClass(b)):void 0},i=function(){var a,b,d,e,g;return a=c(".target-wrap[hidden]:eq(0)"),1===a.length?(a.removeAttr("hidden"),g=a.index()+1,c(".recommendations").trigger("page",g)):(g=c(".target-wrap").size()+1,b=c(".target-wrap:last"),e=c(".target-wrap:eq("+h+")").clone().attr("class",l).insertAfter(b),j(e),e.find(".item:not(.item-sp)").shuffle(),e.find(".item-sp").shuffle(),e.find("[data-page]").each(function(){return c(this).attr("data-page",g)}),d=e.find(".target:not(.infinite-swipe-target-clone)"),d.find("img.thumbnail").on("error",f),d.find("img[err]").each(f),c(".recommendations").trigger("page",g),h++),c(window).trigger("syncheight")},g=function(a){var b,e,f,g;return e=a.id,b=a.from,f=a.infinite_feed_scroll_amount,(g=a.is_test)?void("undefined"!=typeof console&&null!==console&&console.info("Dable DEBUG: Infinite feed widget do not works on test mode")):(l=c(".target-wrap:eq(0)").attr("class"),c(".target-wrap").each(function(){return j(c(this))}),d.sendPostMessage({id:e,from:b,is_infinite_feed:"1",infinite_feed_scroll_amount:f}),c(window).on("receive-message",function(a,b){return-1!==b.indexOf("load_infinite_feed")?i():void 0}))},b.exports={init:g}},{"./frameSynchronizer.coffee":7,"./itemManager.coffee":10}],10:[function(a,b){var c,d,e,f,g,h,i,j,k,l,m;m=a("./thumbnailManager.coffee"),g=m.adjustImgRatioTo16x10,h=m.adjustImgSizeContain,i={},e=function(a){return"TR"===a.parent().prop("tagName")?a.prop("className","empty").html("&nbsp;"):a.remove()},c=function(a){var b;return b=a.find("img.thumbnail").attr("data-org-src"),b?a.find("img.thumbnail").attr("src",b):void 0},f=function(a,b,c){var d,e,f,j,k,l,m;return null==c&&(c={}),f=null!=(l=c.messagebox)?l:!1,d=null,m=function(){var c;return d=a.clone({deepWithDataAndEvents:!0}),b.replaceWith(d),c=b.find("img"),i.thumbnail_fix_16x10&&g(c),h(c)},f?(k=b.parent().prop("tagName"),e=$(f),b.html(e),setTimeout(function(){return b.fadeOut("slow",function(){return m(),d.fadeIn("slow")})},1e3)):(m(),b.has("data-page")?(j=b.attr("data-page"),d.attr("data-page",j)):void 0)},d=function(a){var b,c,d;return d=a.find(".list-sub"),b=d.find('.item-sub:not(:has([err="1"]))').not(".empty").eq(0),b.length?(c=b.clone({deepWithDataAndEvents:!0}),b.parent().append(b)):c=null,c},l=function(a,b){var g,h,i,j;return null==b&&(b={}),h=a.parents(".target-wrap"),i=a.attr("data-idx"),j=h.attr("data-item_total"),i.indexOf("sub")>-1?void e(a):(g=d(h),h.find(".target").each(function(){var d,h,k,l,m,n,o,p,q,r;if(l=$(this),a=l.find(".item[data-idx="+i+"]"),g)return h=g,c(h),h.attr("data-idx",i),h.addClass("item"+i),f(h,a,b);for(d=null,r=Number(i)+1,m=Number(j),n=o=p=m,q=r;q>=p?q>=o:o>=q;n=q>=p?++o:--o)if(k=l.find(".item[data-idx="+n+"]"),k.length&&!k.has("[err=1]").length){d=k;break}return(null!=d?d.length:void 0)>0?(h=d.clone({deepWithDataAndEvents:!0}),h.attr("data-idx",i),e(d),c(h),f(h,a,b)):e(a)}),h.length&&0===h.find(".item").length?$("body").html(""):void 0)},j=function(){var a;return a=$(this).parents(".item"),l(a)},k=function(a){var b;return b=a.thumbnail_fix_16x10,i=a},b.exports={omitItem:l,handleImgErr:j,init:k}},{"./thumbnailManager.coffee":17}],11:[function(a,b){var c,d,e;c=window.$,d=a("./frameSynchronizer.coffee"),e=function(a){var b,e,f;return b=a.from,e=a.service_id,f=a.service_name,c("body").on("click",".item-minicontent a",function(a){var g,h,i,j,k,l;return a.preventDefault(),j=c(this).data("org-href"),g=null!=(k=j.match(/campaigns\/([^\/]+)\//))?k[1]:void 0,i=null!=(l=j.match(/contents\/([^\/]+)\//))?l[1]:void 0,d.sendPostMessage({from:b,show_minicontent:g+"--"+i+"--"+e+"--"+f}),h=j.replace(/campaigns\/([^\/]+)\/contents\/[^\/]+\/click_redirect/,"campaigns/"+g+"/contents/"+i+"/click_without_redirect"),"1"===c(this).data("clicked")&&(h+="&force_click_cache=1&nolog=1"),c.getJSON(h+"&callback=?",function(){}),c(this).data("clicked","1")})},b.exports={init:e}},{"./frameSynchronizer.coffee":7}],12:[function(a,b){var c,d,e,f,g,h,i;c=window.$,i=a("./recommendations.coffee"),g=function(a,b){var c,d;if((null!=a?a.length:void 0)&&a.text()!==String(b))return d=function(b){return a.text(b)},c=function(a,c){return setTimeout(function(){return d(Math.max(0,b+a))},c)},c(4,50),c(-3,100),c(3,150),c(-2,200),c(2,250),c(-1,325),c(1,400),c(0,500)},d=c(".realtime-refresh-counter"),e=c(".realtime-refresh-counter-value"),f=function(){function a(a){var b;this.item_id=a.item_id,this.service_name=a.service_name,this.settings_group=a.settings_group,this.post_param=a.post_param,this.$list=c(".list");try{this.$list.mixItUp({layout:{display:"block"}})}catch(d){b=d}this.updateCount()}return a.prototype.startTimer=function(a){var b,c;if(!(0>=a))return b=10,(c=function(f){return function(){return d.attr("data-count",b),e.text(b),b--,b>=0?setTimeout(c,1e3):(f.updateCount(),f.updateRecommendations(),setTimeout(function(){return f.startTimer(a-1)},1e3))}}(this))()},a.prototype.updateCount=function(){var a;return a=encodeURIComponent,c.getJSON("/items/services/"+a(this.service_name)+"/id/"+a(this.item_id)+"/recent_user_count").done(function(a){var b,d;return b=(null!=a&&null!=(d=a.result)?d.count:void 0)||0,g(c(".realtime-count-value"),Math.max(1,b))})},a.prototype.updateRecommendations=function(){var a,b;return b=function(a,b){return b.before(a),a.slideDown(500)},a=this.$list,i.read({item_id:this.item_id,responsive_group:this.responsive_group,post_param:this.post_param,settings_group:this.settings_group,nolog:!0,nocache:!0}).then(function(b){var d,e,f,g;d=a.find(".item"),e=b.find(".list .item:not(.item-sp)"),g=d.length-1,e.each(function(){var b,e,f,h,i;return h=c(this).data("item_id"),f=d.filter("[data-item_id='"+h+"']"),f.length>0?(i=c(this).find(".item-score-number").text(),f.attr("data-item_score",i).find(".item-score-number").text(i)):(e=c(this).clone(),b=function(){for(var a;;)if(a=d.eq(g),g--,!(null!=a?a.hasClass("item-sp"):void 0))return a}(),b.replaceWith(e)),d=a.find(".item")}),a.find(".item-sp").each(function(){var a;return c(this).attr("data-item_score",(null!=(a=c(this).next())?a.attr("data-item_score"):void 0)||0)});try{return a.mixItUp("sort","item_score:desc")}catch(h){f=h}})},a}(),h=function(a){return new f(a)},b.exports={init:h,Counter:f}},{"./recommendations.coffee":13}],13:[function(a,b){var c,d,e,f;c=window.$,d={},f=function(a){var b,e,f,g,h,i,j,k,l,m;return f=a.item_id,k=a.responsive_group,h=a.nolog,i=a.post_param,l=a.settings_group,g=null!=(j=a.nocache)?j:!1,b=f+"--"+k,d[b]&&!g?c.when(d[b]):(m=window.location.href,m=m.replace(/\&client_width=[0-9]+/,""),-1===m.indexOf("?")&&(m+="?"),i?(e=c.extend({},i),f&&(e.item_id=f),null!=k&&(e.responsive_group=k),h&&(e.nolog=1),e.abtest_index=l,delete e.client_width,m=m.replace("?","/recommendations?"),c.when(c.post(m,e)).then(function(a){var e;return e=c(a),d[b]=e,e})):(f&&(m.indexOf("item_id=")>-1?m=m.replace(/item_id=[^\&]*/,"item_id="+f):m+="&item_id="+f),null!==k&&(m+="&responsive_group="+k),h&&(m+="&nolog=1"),m+="&abtest_index="+l,m=m.replace("?","/recommendations?"),c.when(c.get(m)).then(function(a){var e;return e=c(a),d[b]=e,e})))},e=function(a,b,c){var e;return e=a+"--"+b,d[e]=c.clone()},b.exports={read:f,cache:e}},{}],14:[function(a,b){var c,d,e,f;c="undefined"!=typeof window&&null!==window?window.$:void 0,f=null,d=function(a,b){var d,e,g,h,i,j,k;for(k=c("body").width(),i=-1,e=d=0,g=a.length;g>d;e=++d)if(h=a[e],k>(h.min_width||0)&&k<(h.max_width||9999)){i=e;break}return j=f!==i,f=i,b(j,i)},e=function(a,b,e){var g;return null==b&&(b=null),f=b,d(a,e),b>-1&&c(".widget").attr("data-responsive-group",b+1),g=null,c(window).on("resize orientationchange",function(){return g&&clearTimeout(),g=setTimeout(function(){return d(a,e),clearTimeout(g),g=null},300)})},b.exports={init:e}},{}],15:[function(a,b){var c={};!function(a){"$:nomunge";var b,c,d,e,f=1,g=!1,h="postMessage",i="addEventListener",j=window[h];"undefined"!=typeof window.opera&&window.opera.version&&9==parseInt(window.opera.version())&&Event.prototype.__defineGetter__("origin",function(){return"http://"+this.domain}),a[h]=function(a,b,c){b&&(a=encodeURIComponent("string"==typeof a?a:JSON.stringify(a)),c=c||parent,j?c[h](a,b.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):b&&(c.location=b.replace(/#.*$/,"")+"#"+ +new Date+f++ +"&"+a))},a.receiveMessage=e=function(a,f,h){j?(a&&(d&&e(),d=function(b){if("string"==typeof f&&b.origin!==f||"function"==typeof f&&f(b.origin)===g)return g;var c={};for(var d in b)c[d]=b[d];c.data=decodeURIComponent(c.data);try{c.data=JSON.parse(c.data)}catch(e){}a(c)}),window[i]?window[a?i:"removeEventListener"]("message",d,g):window[a?"attachEvent":"detachEvent"]("onmessage",d)):(b&&clearInterval(b),b=null,a&&(h="number"==typeof f?f:"number"==typeof h?h:100,b=setInterval(function(){var b=document.location.hash,d=/^#?\d+&/;b!==c&&d.test(b)&&(c=b,a({data:b.replace(d,"")}))},h)))}}(c),b.exports=c},{}],16:[function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;c="undefined"!=typeof window&&null!==window?window.$:void 0,f={end:35,home:36,left:37,up:38,right:39,down:40,enter:13,space:32},n=function(){
var a,b,c,d,e,f;if(!("undefined"!=typeof document&&null!==document?document.createElement:void 0))return!1;for(d=document.createElement("div"),e="transform WebkitTransform MozTransform OTransform msTransform".split(" "),f="transition WebkitTransition MozTransition OTransition msTransition".split(" "),a=b=0,c=e.length;c>=0?c>=b:b>=c;a=c>=0?++b:--b)if(void 0!==d.style[e[a]]&&void 0!==d.style[f[a]])return!0;return!1}(),d=null,e=null,q=null,h=function(a){return d.not(":eq("+a+")").removeClass("selected").attr("aria-selected","false"),d.eq(a).addClass("selected").attr("aria-selected","true"),e.not(":eq("+a+")").removeClass("selected").find("a").attr("tabindex",-1),e.eq(a).addClass("selected").find("a").removeAttr("tabindex")},l=function(a){var b;return d=c(".recommendations .tab"),e=c(".recommendations .tab-content"),b=e.length||1,q=b-1,n?(e.parent().css({width:100*b+"%"}),e.removeAttr("hidden"),e.css({width:100/b+"%",display:"block","float":"left"})):(e.eq(0).addClass("selected").removeAttr("hidden").attr("aria-hidden","false"),e.not(":eq(0)").attr({hidden:"true","aria-hidden":"true"})),g(a)},g=function(a){return h(a),n?e.css({"-webkit-transform":"translate3D(-"+100*a+"%, 0, 0)","-moz-transform":"translate3D(-"+100*a+"%, 0, 0)","-ms-transform":"translate3D(-"+100*a+"%, 0, 0)","-o-transform":"translate3D(-"+100*a+"%, 0, 0)",transform:"translate3D(-"+100*a+"%, 0, 0)"}):(e.eq(a).addClass("selected").removeAttr("hidden").attr("aria-hidden","false"),e.not(":eq("+a+")").attr("hidden","true").attr("aria-hidden","true")),c(window).trigger("syncheight"),c(".recommendations").trigger("page",a+1)},i=function(){var a;return a=Number(c(this).attr("data-tab-index")),g(a)},o=function(a){var b;return b=a.keyCode,b===f.end?(a.preventDefault(),g(q)):b===f.home?(a.preventDefault(),g(0)):void 0},p=function(a){var b,d,e;return d=a.keyCode,b=Number(c(this).attr("data-tab-index")),d===f.left?(e=0===b?q:--b,g(e)):d===f.right?(e=b===q?0:++b,g(e)):d===f.enter||d===f.space?g(b):void 0},j=function(a,b){return a=Math.ceil(a),b=Math.floor(b),Math.floor(Math.random()*(b-a+1))+a},m=function(){return c(".tab-content").each(function(){return c(this).find(".item:not(.item-sp):not(.item-sub)").each(function(a){return c(this).find(".tab-title").html(a+1)})})},k=function(a){var b;return b=a.init_tab_idx<0?j(0,3):a.init_tab_idx,l(b),d.on("click",i),d.on("keydown",o),d.on("keyup",p),c(window).on("onload_responsive_group",function(){return k(a)}),m()},b.exports={init:k,initTabTitle:m}},{}],17:[function(a,b){var c,d,e,f,g,h;e=function(a,b){var c;return c=function(a,b){return a.complete?b($(a)):setTimeout(function(){return c(a,b)},100)},a.each(function(){return c(this,b)})},h=function(a){var b,c,d;if(a.is(":visible"))return d=a.width(),b=a.height(),c=a.parent().height(),c>=b?(d=parseInt(d*c/b,10),a.css({width:d+"px",height:c+"px"})):1.2>d/b&&d/b>.35&&400>=d&&(d=parseInt(d*(d/b/1.2),10),a.css({width:d+"px"})),a.attr("data-adjusted","1")},f=function(a){var b,c,d,e,f,g;if(b=a.parent(),b.hasClass("img-size-contain")){b.css({"text-align":"center"}),a.css({margin:"0 auto",height:"auto",width:"auto","max-width":"100%","max-height":"100%","min-width":"5px","min-height":"5px",left:0,right:0}),g=a.outerWidth(),c=a.outerHeight(),e=b.outerWidth(),d=b.outerHeight();try{return f=g/c>e/d,a.css({width:f?"100%":"auto",height:f?"auto":"100%"})}catch(h){}}},c=function(a){return e(a,h)},d=function(a){return e(a,f)},g=function(a){var b,e,f,g,h,i;return i=a.thumbnail_fix_16x10,g=a.is_secret_widget,e=$(".recommendations"),f=$(".selfitems"),h=function(a){var b;return b=$('[data-page="'+a+'"]').parent().find("img[data-org-src]"),b.each(function(){var a;return a=$(this).attr("data-org-src"),$(this).attr("src",a).removeAttr("data-org-src")}),i&&c(b),d(b)},$(window).on("pre-expose expose check-thumbnail",function(a){return"pre-expose"===(null!=a?a.type:void 0)&&g?void 0:h(1)}),e.on("page",function(a,b){return h(b)}),f.on("page",function(a,b){return h(b)}),b=$("img.thumbnail:not([data-org-src])"),i&&c(b),d(b),window.top===window&&h(1),document.documentMode&&document.documentMode<=7?$("body").on("click",".thumbnail",function(a){return a.preventDefault(),$(this).parents(".item-link").get(0).click()}):void 0},b.exports={init:g,adjustImgRatioTo16x10:c,adjustImgSizeContain:d}},{}],18:[function(a,b){var c,d,e;c=window.$,d=a("./frameSynchronizer.coffee"),e=function(a){var b,c;return b=a.messages,c=a.updown_widget,d.sendPostMessage({from:b.from,id:b.id,is_updown_widget:"1",link_widget:c.link_widget_id,threshold_top:c.threshold_top,threshold_bottom:c.threshold_bottom})},b.exports={init:e}},{"./frameSynchronizer.coffee":7}],19:[function(a,b){var c=window.$,d=function(a){var b,c,d=0;if(0===a.length)return d;for(b=0;b<a.length;b++)c=a.charCodeAt(b),d=(d<<5)-d+c,d|=0;return Math.abs(d)},e=function(a){if("#?"!==a){-1===a.indexOf("is_gif=1")&&(a+=(a.indexOf("?")>-1&&"&"||"?")+"is_gif=1");var b=d(a),e="beacon-"+b;0===c("#"+e).length&&c("body").append('<img id="'+e+'" width="1" height="1" src="'+a+'" style="display:none">'),c("#"+e).on("load",function(){c("#"+e).remove()})}},f=function(a,b){var c=new RegExp("[?&]"+b+"=([^&#]*)").exec(a);return c?decodeURIComponent(c[1])||0:null},g=function(){return window.TEST_API_SERVER_DOMAIN||"api.dable.io"},h=function(){return window.TEST_RECO_LOGGING_SERVER_DOMAIN||"r-log.dable.io"},i=function(){return"https:"===window.location.protocol?"https:":"http:"};b.exports={simpleStringHash:d,logByHiddenImg:e,getUrlParameter:f,getProtocol:i,api_server_domain:g,reco_logging_server_domain:h}},{}],20:[function(a,b){var c=a("./util"),d=window.$,e=3,f=15,g=function(a){return Number(a.getAttribute("playCount"))||0},h=function(a){var b=g(a);b+=1,a.setAttribute("playCount",b)},i=function(a){return"true"===a.getAttribute("charged")},j=function(a){a.setAttribute("charged",!0)},k=function(a){var b=g(a);return e>b},l=function(a){var b=Math.abs(a.currentTime).toFixed(0);a.setAttribute("playTime",b)},m=function(a){return Number(a.getAttribute("playTime"))||0},n=function(a){var b=0;a.setAttribute("playTime",b)},o=function(a){var b=a.split("_");return b.length>3?[b[1],b[2]]:[null,null]},p=function(a,b){var e=b.service_name,f=b.widget_id,g=b.uid,h=b.channel,i=o(a.getAttribute("video-ad-id")),j=i[0],k=i[1],l=a.getAttribute("playCount"),m=a.getAttribute("playTime"),n=a.duration,p=Math.abs(m/n).toFixed(2)>1?1:Math.abs(m/n).toFixed(2),q=c.getProtocol()+"//"+c.api_server_domain()+"/";q+="logs/services/"+encodeURIComponent(e)+"/",q+="users/"+g+"/video";var r={channel:h,widget_id:f,campaign_id:j,content_id:k,play_count:l,play_time:m,duration:n,viewing_ratio:p,event_type:"playLog"};d.ajax({method:"POST",url:q,data:r})},q=function(a,b){var e=b.service_name,f=b.widget_id,g=b.uid,h=b.channel,i=o(a.getAttribute("video-ad-id")),j=i[0],k=i[1],l=a.getAttribute("playCount"),m=a.duration,n=c.getProtocol()+"//"+c.api_server_domain()+"/";n+="logs/services/"+encodeURIComponent(e)+"/",n+="users/"+g+"/video";var p={channel:h,widget_id:f,campaign_id:j,content_id:k,play_count:l,duration:m,event_type:"completePlayLog"};d.ajax({method:"POST",url:n,data:p})},r=function(a,b,e){var f=b.service_name,g=b.widget_id,h=b.uid,i=b.channel,j=o(a.getAttribute("video-ad-id")),k=j[0],l=j[1],m=a.duration,n=c.getProtocol()+"//"+c.api_server_domain()+"/";n+="logs/services/"+encodeURIComponent(f)+"/",n+="users/"+h+"/video";var p={channel:i,widget_id:g,campaign_id:k,content_id:l,duration:m,charging_type:e,event_type:"chargingLog"};d.ajax({method:"POST",url:n,data:p})},s=function(a){for(var b=0,c=a.length;c>b;b+=1){var d=a[b];0===g(d)&&h(d),d.play()}},t=function(a){for(var b=0,c=a.length;c>b;b+=1){var d=a[b];d.pause()}},u=function(a){k(a)?(h(a),n(a),a.play()):a.load()},v=function(a){for(var b=a.service_name,c=a.service_id,e=a.widget_id,g=a.uid,h=a.channel,k={service_id:c,service_name:b,widget_id:e,uid:g,channel:h},n=d("div[data-is_video_slot='1']"),o=d("video.thumbnail"),v=0,w=n.length;w>v;v+=1)n[v].onclick=function(){var a=d(this).find("video"),b=a[0]||null,c=i(b);b&&(c||(r(b,k,"click"),j(b)),t(o))};for(var x=0,y=o.length;y>x;x+=1)o[x].onended=function(){var a=i(this);u(this),q(this,k),a||(j(this),r(this,k,"view"))},o[x].ontimeupdate=function(){var a=Math.abs(this.currentTime).toFixed(0),b=m(this),c=i(this);a>b&&(l(this),p(this,k)),!c&&a>=f&&(j(this),r(this,k,"view"))};d(window).on("expose",function(){var a=d("video.thumbnail");s(a)}),d(window).on("exposure_start",function(){var a=d("video.thumbnail");s(a)}),d(window).on("exposure_end",function(){var a=d("video.thumbnail");t(a)})};b.exports={init:v}},{"./util":19}],21:[function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;b=window.$,a("infinite-swipe"),c=a("./lib/Widget.coffee"),q=a("./lib/recommendations.coffee"),l=a("./lib/frameSynchronizer.coffee"),s=a("./lib/responsiveManager.coffee"),u=a("./lib/thumbnailManager.coffee"),n=a("./lib/itemManager.coffee"),p=a("./lib/realtimeCounter.coffee"),k=a("./lib/dablePopup.coffee"),i=a("./lib/blockItem.coffee"),d=a("./lib/ad.coffee"),m=a("./lib/infiniteFeed.coffee"),o=a("./lib/miniContent.coffee"),j=a("./lib/bridge.coffee"),t=a("./lib/tabManager.coffee"),v=a("./lib/upDown.coffee"),w=a("./lib/videoManager"),e=a("./lib/adBlockObserver"),f=function(){var a,c;return a=b(".thumbnail").eq(0),c=a.length?a.offset().top+a.height()/2-20:50,b(".prev, .next").css("top",c)},g=function(){var a,c;if(b(".selfitems").length){switch(c=b(".selfitems").data("selftype")){case"cart":a="131.1.1";break;case"buy":a="132.1.1";break;default:a="130.1.1"}return b(".selfitems a").each(function(){var c,d,e,f,g;return c=b(this),c.attr("href").indexOf("click_redirect")>-1?void 0:(c.data("orglink")||c.data("orglink",c.attr("href")),f=c.data("orglink"),e=c.parents(".item").data("item_id"),g=b(".recommendations a").attr("href"),d=function(){var b;return b=g,b=b.replace(/\&pick=[^\&]+/,"&pick="+e),b=b.replace(/\&cm=[^\&]+/,"&cm="+a),b=f?b.replace(/\&url=[^\&]+/,"&url="+f):b.replace(/\&url=[^\&]+/,"")}(),c.attr("href",d))})}},h=function(){var a,c,d,e,f;if(b(".selfitems").length)return a=parseInt(b(".recommendations .target-wrap").attr("data-item_count"),10),d=b(window).width(),c=parseInt(b(".list").css("margin-left"))+parseInt(b(".list").css("margin-right")),e=100*(c*a+d-c)/(a+1)/d,f=100-e,b(".selfitems").css("width",parseInt(100*e-10)/100+"%"),b(".recommendations").css("width",parseInt(100*f-10)/100+"%")},r=function(a,d){var e,i,j,k,l,m,n;return e=a.item_id,m=a.responsive_group,i=null!=(k=a.nolog)?k:!1,j=a.post_param,n=null!=(l=a.settings_group)?l:0,b(".recommendations").addClass("loading"),q.read({item_id:e,responsive_group:m,post_param:j,settings_group:n,nolog:i}).then(function(a){var e,i,j,k;return e=b(".recommendations"),a.find(".list-sub").length?(e.find(".list-sub").html("").replaceWith(a.find(".list-sub").clone()),e.find(".list").infiniteSwipe("destroy").html("").replaceWith(a.find(".list").clone())):e.find(".list").infiniteSwipe("destroy").html("").replaceWith(a.find(".list").clone()),i=e.find(".target-wrap"),j=Math.ceil(Number(i.attr("data-data_count"))/Number(i.attr("data-item_count"))),e.find(".total").text(j),k=new c({$wrap:e,total:j}),b(window).on("expose",function(){return k.onExpose()}),b(".recommendations").removeClass("loading"),null!=m?b(".widget").attr("data-responsive-group",m+1):b(".widget").attr("data-responsive-group",0),g(),h(),f(),b(window).trigger("syncheight").trigger("onload_responsive_group"),d?d():void 0})},window.initWidgetPage=function(a){var q,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma;return ja=a.widget_id,ka=a.widget_name,E=a.channel,V=a.lang,ca=a.service_name,H=a.country,da=a.service_type,U=a.item_id,D=a.ads,I=a.crit,W=a.messages,M=a.impressionlog_link,J=a.exposelog_link,Y=a.post_param,z=a.ad_exposelog_links,A=a.ad_implog_links,K=a.ga_action_sample_rate,ea=a.settings_group,N=a.init_responsive_group,R=a.is_realtime_widget,S=a.is_secret_widget,Q=a.is_infinite_feed,fa=a.thumbnail_fix_16x10,Z=a.pre_expose,la=a.wrapped_by_tab,O=a.init_tab_idx,P=a.is_block_item,F=a.cookieoff,ma=a.wrapped_frame,ba=a.service_id,C=a.ad_size,B=a.ad_req,y=a.ad_default_request_id,ha=a.updown_widget,ga=a.uid,x=a.ad_box_type,X=a.newsx_detail_page_url_pattern,T=a.is_test,aa=a.responsive,_=N,(null!=aa?aa.length:void 0)>0&&s.init(aa,_,function(a,c){return _=c,a?r({item_id:null,responsive_group:c,post_param:Y,settings_group:ea},function(){return b(".widget").css("opacity",1)}):b(".widget").css("opacity",1)}),q=b(".selfitems"),L=q.length>0,L&&(new c({$wrap:q,onPage:function(a){return U=b(".selfitems [data-idx="+(a-1)+"]").attr("data-item_id"),r({item_id:U,responsive_group:_,nolog:!1,post_param:Y}),q.trigger("page",a)}}),g(),h()),$=null,b(window).on("pre-expose load resize orientationchange",function(){return $&&clearTimeout($),$=setTimeout(function(){return L&&h(),f(),b(window).trigger("syncheight"),$=null},100)}),ia=new c({$wrap:b(".recommendations")}),b(window).on("expose",function(){return ia.onExpose()}),f(),R&&(G=new p.Counter({service_name:ca,item_id:U,settings_group:ea,post_param:Y}),b(window).on("expose",function(){return G.startTimer(15)})),o.init({from:W.from,wrapped_frame:ma,ad_exposelog_links:z,service_id:ba,service_name:ca}),j.init({from:W.from,is_test:T,newsx_detail_page_url_pattern:X}),Q&&m.init({id:W.id,infinite_feed_scroll_amount:W.infinite_feed_scroll_amount,from:W.from,is_test:T}),l.init({service_name:ca,ads:D,messages:W,impressionlog_link:M,exposelog_link:J,ad_exposelog_links:z,ad_implog_links:A,ga_action_sample_rate:K,is_secret_widget:S,pre_expose:Z,wrapped_frame:ma,service_id:ba,ad_size:C}),u.init({thumbnail_fix_16x10:fa,is_secret_widget:S}),la&&t.init({init_tab_idx:O}),k.init({id:W.id,from:W.from,wrapped_frame:ma,service_id:ba,uid:ga,widget_id:ja,ads:D}),P&&i.init({from:W.from,service_name:ca,$wrap:b(".recommendations"),lang:V}),d.init({crit:I,widget_id:ja,channel:E,ad_default_request_id:y,service_name:ca,service_type:da,ad_exposelog_links:z,ad_implog_links:A,cookieoff:F,ad_size:C,ad_req:B,lang:V,ad_box_type:x}),w.init({service_name:ca,service_id:ba,widget_id:ja,uid:ga,channel:E}),e.init({service_id:ba,service_name:ca,country:H,widget_id:ja,widget_name:ka}),n.init({thumbnail_fix_16x10:fa}),ha&&ha.enabled?v.init({messages:W,updown_widget:ha}):void 0}},{"./lib/Widget.coffee":1,"./lib/ad.coffee":2,"./lib/adBlockObserver":3,"./lib/blockItem.coffee":4,"./lib/bridge.coffee":5,"./lib/dablePopup.coffee":6,"./lib/frameSynchronizer.coffee":7,"./lib/infiniteFeed.coffee":9,"./lib/itemManager.coffee":10,"./lib/miniContent.coffee":11,"./lib/realtimeCounter.coffee":12,"./lib/recommendations.coffee":13,"./lib/responsiveManager.coffee":14,"./lib/tabManager.coffee":16,"./lib/thumbnailManager.coffee":17,"./lib/upDown.coffee":18,"./lib/videoManager":20,"infinite-swipe":"infinite-swipe"}],"infinite-swipe":[function(a,b,c){function d(a){"@babel/helpers - typeof";return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}!function(b){"use strict";"function"==typeof define&&define.amd?define(["jquery"],b):b("object"==("undefined"==typeof c?"undefined":d(c))?a("jquery"):jQuery)}(function(a){"use strict";var b=function(){for(var a=document.createElement("div"),b="transform WebkitTransform MozTransform OTransform msTransform".split(" "),c="transition WebkitTransition MozTransition OTransition msTransition".split(" "),d=0;d<b.length;d++)if(void 0!==a.style[b[d]]&&void 0!==a.style[c[d]])return!0;return!1}(),c=function(a,c,d){b?a.css({"-webkit-transform":"translate3D("+c+"px, 0, 0)","-moz-transform":"translate3D("+c+"px, 0, 0)","-ms-transform":"translate3D("+c+"px, 0, 0)","-o-transform":"translate3D("+c+"px, 0, 0)",transform:"translate3D("+c+"px, 0, 0)"}):a.css("opacity",.7).animate({"margin-left":c+"px",opacity:1},d.transition_ms)},d=function(b,c,d,e,f){e&&!f&&b.animate({opacity:0},d.transition_ms,function(){a(this).css({"margin-left":c+"px"}),a(this).animate({opacity:1},d.transition_ms+200)})},e=function(a,b){a.css({"margin-left":b+"px"})},f=function(a){switch(a){case"none":return e;case"slide":return c;case"fadeIn":return d;default:return c}},g=function(a){a.preventDefault(),a.stopPropagation()},h=function(b,c){c=a.extend({$target_wrap:null,$target:null,$prev:null,$next:null,$curr:null,$autoswipe_pause_el:null,total:1,transition_ms:null,animation_type:"slide",infinite:!1,autoswipe_seconds:0,onPage:null},c),null===c.transition_ms&&(c.transition_ms="slide"===c.animation_type?200:0),this.$el=b,this.$target_wrap=c.$target_wrap||b,this.$target=c.$target||b,this.$autoswipe_pause_el=c.$autoswipe_pause_el||b,this.p=1,this.offset=0,this.total=c.total,this.curr_px=0,this.options=c,this._drag_ended=!0,this._drag_blocked=!1,this.init()};h.prototype={_setTransitionDuration:function(a){var b=this.$target_wrap.get(0);b.style.webkitTransitionDuration=a+"ms",b.style.mozTransitionDuration=a+"ms",b.style.msTransitionDuration=a+"ms",b.style.oTransitionDuration=a+"ms",b.style.transitionDuration=a+"ms"},init:function(){if(this.$el.addClass("infinite-swipe-stage"),this.$target_wrap.addClass("infinite-swipe-target-wrap"),this._setTransitionDuration(this.options.transition_ms),this.$target.addClass("infinite-swipe-target"),this.options.infinite){var a=this.$target.clone().attr("aria-hidden",!0).addClass("infinite-swipe-target-clone").css("left","-"+this.getWidth(!0)+"px").find("a").attr("tabindex",-1).end(),b=this.$target.clone().attr("aria-hidden",!0).addClass("infinite-swipe-target-clone").css("left",this.getWidth(!0)+"px").find("a").attr("tabindex",-1).end();a.insertBefore(this.$target),b.insertBefore(this.$target),this.$target=this.$target.parent().find(".infinite-swipe-target")}this.addListeners(),!this.options.infinite&&this.options.$prev&&this.options.$prev.toggleClass("disabled",1===this.p),this.options.autoswipe_seconds>0&&this.initAutoswipe()},initAutoswipe:function(a){a&&(this.options.autoswipe_seconds=a);var b=this;this._as_next=function(){return b._drag_blocked=!1,b._as_timeout_id||b.p===b.total&&!b.options.infinite?void clearTimeout(b._as_timeout_id):void(b._as_timeout_id=setTimeout(function(){b._as_pause||b.swipeNext(),b._as_timeout_id=null,b._as_next()},1e3*b.options.autoswipe_seconds))},this._as_resume_event=function(){b._as_next()},this._as_pause_event=function(){b._as_timeout_id&&(clearTimeout(b._as_timeout_id),b._as_timeout_id=null)},this._as_next(),this.$autoswipe_pause_el.on("mouseenter focusin",this._as_pause_event).on("mouseleave focusout",this._as_resume_event)},onPrev:function(a){a.preventDefault(),a.stopPropagation(),this._drag_blocked=!1,(1!==this.p||this.options.infinite)&&this.swipePrev()},onNext:function(a){a.preventDefault(),a.stopPropagation(),this._drag_blocked=!1,(this.p!==this.total||this.options.infinite)&&this.swipeNext()},onDragLeft:function(a,b,c){if(!this._swiped){if(this.p===this.total&&!this.options.infinite)return void(this._drag_blocked=!0);if(this._drag_blocked=!1,window.addEventListener("touchmove",g,{passive:!1}),Math.abs(b)>5&&(this.p!==this.total||this.options.infinite))return a.preventDefault(),a.stopPropagation(),this._drag_ended=!0,this._swiped=!0,this.curr_px=0,this._setTransitionDuration(0),void this.swipeNext();var d=c;this.animate_px(d)}},onDragRight:function(a,b,c){if(!this._swiped){if(1===this.p&&!this.options.infinite)return void(this._drag_blocked=!0);if(this._drag_blocked=!1,window.addEventListener("touchmove",g,{passive:!1}),Math.abs(b)>5&&(1!==this.p||this.options.infinite))return a.preventDefault(),a.stopPropagation(),this._drag_ended=!0,this._swiped=!0,this.curr_px=0,this._setTransitionDuration(0),void this.swipePrev();var d=c;this.animate_px(d)}},onDragStart:function(){this._drag_ended=!1,this._setTransitionDuration(0)},onDragEnd:function(){this._drag_ended=!0,this._setTransitionDuration(this.options.transition_ms),this._swiped||this.animate(),this._swiped=!1,window.removeEventListener("touchmove",g,{passive:!1})},onSwipeTotal:function(b,c){var d=this;this.total!==c&&(this.total=c,this.p>this.total&&(this.p=this.total),this.getWidth(!0),this.offset=0,this.animate(),this.$target.each(function(b){a(this).css("left",d.getWidth(!0)*(d.offset+b)+"px")}))},onSwipePage:function(a,b){this._drag_blocked=!1,1>b||b>this.total||(this.p=b,this.animate())},onWindowResize:function(){var a=this;setTimeout(function(){a.getWidth()!==a.getWidth(!0)&&(a.$target_wrap.addClass("infinite-swipe-resizing"),a.animate(0,function(){a.$target_wrap.removeClass("infinite-swipe-resizing")}))},200)},addListeners:function(){var b=this,c="touchstart click";navigator.userAgent.indexOf("Android")>=0&&(c="touchstart"),this.options.$prev&&this.options.$prev.on(c,a.proxy(this.onPrev,this)),this.options.$next&&this.options.$next.on(c,a.proxy(this.onNext,this)),this._dragleft_event=function(){b.onDragLeft.apply(b,arguments)},this._dragright_event=function(){b.onDragRight.apply(b,arguments)},this._dragstart_event=function(){b.onDragStart.apply(b,arguments)},this._dragend_event=function(){b.onDragEnd.apply(b,arguments)},this._swipetotal_event=function(){b.onSwipeTotal.apply(b,arguments)},this._swipepage_event=function(){b.onSwipePage.apply(b,arguments)},this.$el.on("dragleft",this._dragleft_event).on("dragright",this._dragright_event).on("dragstart",this._dragstart_event).on("dragend",this._dragend_event).on("swipe_total",this._swipetotal_event).on("swipe_page",this._swipepage_event),this._resize_event=function(){b.onWindowResize()},a(window).on("resize orientationchange",this._resize_event)},removeListeners:function(){var b="touchstart click";navigator.userAgent.indexOf("Android")>=0&&(b="touchstart"),this.options.$prev&&this.options.$prev.off(b,a.proxy(this.onPrev,this)),this.options.$next&&this.options.$next.off(b,a.proxy(this.onNext,this)),this.$el.off("dragleft",this._dragleft_event).off("dragright",this._dragright_event).off("dragstart",this._dragstart_event).off("dragend",this._dragend_event).off("swipe_total",this._swipetotal_event).off("swipe_page",this._swipepage_event),a(window).off("resize orientationchange",this._resize_event)},getWidth:function(a){return!a&&this._w||(this._w=this.options.getWidth?this.options.getWidth():this.$target.width()),this._w},swipePrev:function(){this.animate(-1)},swipeNext:function(){this.animate(1)},animate:function(b,c){var d=this,e=this.p;b&&(this.p+=b),this.curr_px>30?this.p--:this.curr_px<-30&&this.p++,this.options.infinite?(this.p===this.total+1?(this.p=1,this.offset++):0===this.p&&(this.p=this.total,this.offset--),this.$target.each(function(b){var c=d.getWidth(!0)*(d.offset+b-1);a(this).css("left",c+"px")})):this.p=Math.max(Math.min(this.p,this.total),1),this.curr_px=0;var g=-(this.p-1+this.offset*this.total)*this.getWidth(!0)/this.total;f(this.options.animation_type)(this.$target_wrap,g,this.options,this._drag_ended,this._drag_blocked),this.options.infinite||(this.options.$prev&&this.options.$prev.toggleClass("disabled",1===this.p),this.options.$next&&this.options.$next.toggleClass("disabled",this.p===this.total)),this.options.$curr&&this.options.$curr.text(this.p),e!=this.p&&this.options.onPage&&this.options.onPage(this.p),c&&setTimeout(c,this.options.transition_ms)},animate_px:function(a){this.curr_px=a;var b=-(this.p-1+this.offset*this.total)*this.getWidth()/this.total+a;f(this.options.animation_type)(this.$target_wrap,b,this.options,this._drag_ended,this._drag_blocked)},destroy:function(){this.$el.removeClass("infinite-swipe-stage"),this.$target_wrap.removeClass("infinite-swipe-target-wrap"),this.$target.filter(".infinite-swipe-target-clone").remove(),this.$el.find(".infinite-swipe-target").removeClass("infinite-swipe-target"),this.removeListeners(),this.options.autoswipe_seconds>0&&(this._as_timeout_id&&(clearTimeout(this._as_timeout_id),this._as_timeout_id=null),this.$el.off("mouseenter focusin",this._as_pause_event).off("mouseleave focusout",this._as_resume_event))},pause:function(){this._as_pause=!0},resume:function(){this._as_pause=!1,this._as_next()}},a.fn.infiniteSwipeEvent=function(){var b,c=a(this),d=!1,e=null,f={x:null,y:null},g={x:null,y:null};c.on("touchstart",function(a){var c=a.originalEvent.touches[0].pageX,h=a.originalEvent.touches[0].pageY;d=!0,e=null,f.x=g.x=c,f.y=g.y=h,b=a.timeStamp}).on("touchend touchleave",function(){d&&"y"!==e&&c.trigger("dragend"),d=!1}).on("touchmove",function(a){if(d&&"y"!==e){var h=a.originalEvent.touches[0].pageX,i=a.originalEvent.touches[0].pageY,j={x:g.x-h,y:g.y-i};if(!e){if("y"==(e=Math.abs(j.x)>=Math.abs(j.y)?"x":"y"))return;c.trigger("dragstart")}var k=a.timeStamp-b,l={x:f.x-h,y:f.y-i},m=Math.abs(j.x/k);j.x>0?c.trigger("dragleft",[m,-l.x]):j.x<0&&c.trigger("dragright",[m,-l.x]),g.x=h,g.y=i,b=a.timeStamp}})},a.fn.infiniteSwipe=function(b,c){return this.each(function(){if("string"==typeof b){var d=a(this).data("infiniteswipe");d&&d[b](c)}else a(this).infiniteSwipeEvent(),a(this).data("infiniteswipe",new h(a(this),b))})}})},{jquery:"jquery"}],jquery:[function(a,b){b.exports=window.$},{}]},{},[21]);