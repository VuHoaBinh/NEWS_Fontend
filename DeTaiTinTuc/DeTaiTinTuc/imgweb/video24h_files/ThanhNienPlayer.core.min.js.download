/**
 * ThanhNienPlayer - v0.0.1 - 00:57:48 25-06-2021
 */
var a={window:window,document:document};(function(){var define=void 0,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};!function(a,b){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?module.exports=b():"function"==typeof define&&define.amd?define("aes-wasm",[],b):"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?exports["aes-wasm"]=b():a["aes-wasm"]=b()}("undefined"==typeof self?void 0:self,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=1)}([function(a){"use strict";function b(a){var b,c,d,f,g,h=.75*a.length,i=a.length,j=0;"="===a[a.length-1]&&(h--,"="===a[a.length-2]&&h--);var k=new ArrayBuffer(h),l=new Uint8Array(k);for(b=0;b<i;b+=4)c=e[a.charCodeAt(b)],d=e[a.charCodeAt(b+1)],f=e[a.charCodeAt(b+2)],g=e[a.charCodeAt(b+3)],l[j++]=c<<2|d>>4,l[j++]=(15&d)<<4|f>>2,l[j++]=(3&f)<<6|63&g;return k}for(var c="AGFzbQEAAAABKwdgAABgAX8AYAJ/fwBgA39/fwBgBH9/f38AYAV/f39/fwBgBn9/f39/fwACEAEBYQZtZW1vcnkCAYACgAIDCAcEAwEFBgIABgkBfwFB4NHAAgsHFQUBYQAGAWIAAQFjAAUBZAAEAWUAAwryPQf+EgEKfyAAKAIEIgVBEGohBCACKAAMIAUoAgxzIQYgAigACCAFKAIIcyEHIAIoAAQgBSgCBHMhCCACKAAAIAUoAgBzIQIgACgCACEAAn8gAUUEQCAAQQROBEAgAEEBdiEJA0AgCEEWdkH8B3FBwCJqKAIAIAdBDnZB/AdxQcAaaigCACAGQQZ2QfwHcUHAEmooAgAgAkH/AXFBAnRBwApqKAIAIAQoAgBzc3NzIgBBFnZB/AdxQcAiaigCACAHQRZ2QfwHcUHAImooAgAgBkEOdkH8B3FBwBpqKAIAIAJBBnZB/AdxQcASaigCACAIQf8BcUECdEHACmooAgAgBCgCBHNzc3MiAUEOdkH8B3FBwBpqKAIAIAZBFnZB/AdxQcAiaigCACACQQ52QfwHcUHAGmooAgAgCEEGdkH8B3FBwBJqKAIAIAdB/wFxQQJ0QcAKaigCACAEKAIIc3NzcyIFQQZ2QfwHcUHAEmooAgAgAkEWdkH8B3FBwCJqKAIAIAhBDnZB/AdxQcAaaigCACAHQQZ2QfwHcUHAEmooAgAgBkH/AXFBAnRBwApqKAIAIAQoAgxzc3NzIgJB/wFxQQJ0QcAKaigCACAEKAIcc3NzcyEGIAJBFnZB/AdxQcAiaigCACAAQQ52QfwHcUHAGmooAgAgAUEGdkH8B3FBwBJqKAIAIAVB/wFxQQJ0QcAKaigCACAEKAIYc3NzcyEHIAVBFnZB/AdxQcAiaigCACACQQ52QfwHcUHAGmooAgAgAEEGdkH8B3FBwBJqKAIAIAFB/wFxQQJ0QcAKaigCACAEKAIUc3NzcyEIIAFBFnZB/AdxQcAiaigCACAFQQ52QfwHcUHAGmooAgAgAkEGdkH8B3FBwBJqKAIAIABB/wFxQQJ0QcAKaigCACAEKAIQc3NzcyECIARBIGohBCAJQQJKIQAgCUF/aiEJIAANAAsLQcAqIQUgB0EWdkH8B3FBwCJqKAIAIAZBDnZB/AdxQcAaaigCACACQQZ2QfwHcUHAEmooAgAgCEH/AXFBAnRBwApqKAIAIAQoAgRzc3NzIgAhASAIQRZ2QfwHcUHAImooAgAgB0EOdkH8B3FBwBpqKAIAIAZBBnZB/AdxQcASaigCACACQf8BcUECdEHACmooAgAgBCgCAHNzc3MiCSEKIAJBFnZB/AdxQcAiaigCACAIQQ52QfwHcUHAGmooAgAgB0EGdkH8B3FBwBJqKAIAIAZB/wFxQQJ0QcAKaigCACAEKAIMc3NzcyILIQwgBkEWdkH8B3FBwCJqKAIAIAJBDnZB/AdxQcAaaigCACAIQQZ2QfwHcUHAEmooAgAgB0H/AXFBAnRBwApqKAIAIAQoAghzc3NzIg0MAQsgAEEETgRAIABBAXYhCQNAIAhBFnZB/AdxQcDEAGooAgAgAkEOdkH8B3FBwDxqKAIAIAZBBnZB/AdxQcA0aigCACAHQf8BcUECdEHALGooAgAgBCgCCHNzc3MiAEEWdkH8B3FBwMQAaigCACACQRZ2QfwHcUHAxABqKAIAIAZBDnZB/AdxQcA8aigCACAHQQZ2QfwHcUHANGooAgAgCEH/AXFBAnRBwCxqKAIAIAQoAgRzc3NzIgFBDnZB/AdxQcA8aigCACAGQRZ2QfwHcUHAxABqKAIAIAdBDnZB/AdxQcA8aigCACAIQQZ2QfwHcUHANGooAgAgAkH/AXFBAnRBwCxqKAIAIAQoAgBzc3NzIgVBBnZB/AdxQcA0aigCACAHQRZ2QfwHcUHAxABqKAIAIAhBDnZB/AdxQcA8aigCACACQQZ2QfwHcUHANGooAgAgBkH/AXFBAnRBwCxqKAIAIAQoAgxzc3NzIgJB/wFxQQJ0QcAsaigCACAEKAIcc3NzcyEGIAFBFnZB/AdxQcDEAGooAgAgBUEOdkH8B3FBwDxqKAIAIAJBBnZB/AdxQcA0aigCACAAQf8BcUECdEHALGooAgAgBCgCGHNzc3MhByAFQRZ2QfwHcUHAxABqKAIAIAJBDnZB/AdxQcA8aigCACAAQQZ2QfwHcUHANGooAgAgAUH/AXFBAnRBwCxqKAIAIAQoAhRzc3NzIQggAkEWdkH8B3FBwMQAaigCACAAQQ52QfwHcUHAPGooAgAgAUEGdkH8B3FBwDRqKAIAIAVB/wFxQQJ0QcAsaigCACAEKAIQc3NzcyECIARBIGohBCAJQQJKIQAgCUF/aiEJIAANAAsLQbAIIQUgAkEWdkH8B3FBwMQAaigCACAGQQ52QfwHcUHAPGooAgAgB0EGdkH8B3FBwDRqKAIAIAhB/wFxQQJ0QcAsaigCACAEKAIEc3NzcyILIQEgCEEWdkH8B3FBwMQAaigCACACQQ52QfwHcUHAPGooAgAgBkEGdkH8B3FBwDRqKAIAIAdB/wFxQQJ0QcAsaigCACAEKAIIc3NzcyINIQogB0EWdkH8B3FBwMQAaigCACAIQQ52QfwHcUHAPGooAgAgAkEGdkH8B3FBwDRqKAIAIAZB/wFxQQJ0QcAsaigCACAEKAIMc3NzcyIAIQwgBkEWdkH8B3FBwMQAaigCACAHQQ52QfwHcUHAPGooAgAgCEEGdkH8B3FBwDRqKAIAIAJB/wFxQQJ0QcAsaigCACAEKAIAc3NzcyIJCyECIAQoAhAhBiAEKAIUIQcgBCgCGCEIIAMgBCgCHCIEIAUgDEH/AXFqLQAAczoADCADIAggBSANQf8BcWotAABzOgAIIAMgByAFIAFB/wFxai0AAHM6AAQgAyAGIAUgCUH/AXFqLQAAczoAACADIAQgBSAKQRh2ai0AAEEYdHNBGHY6AA8gAyAIIAUgC0EYdmotAABBGHRzQRh2OgALIAMgByAFIAJBGHZqLQAAQRh0c0EYdjoAByADIAYgBSAAQRh2ai0AAEEYdHNBGHY6AAMgAyAEIAUgAUEQdkH/AXFqLQAAQRB0c0EQdjoADiADIAQgBSACQQh2Qf8BcWotAABBCHRzQQh2OgANIAMgCCAFIAlBEHZB/wFxai0AAEEQdHNBEHY6AAogAyAIIAUgAEEIdkH/AXFqLQAAQQh0c0EIdjoACSADIAcgBSAMQRB2Qf8BcWotAABBEHRzQRB2OgAGIAMgByAFIApBCHZB/wFxai0AAEEIdHNBCHY6AAUgAyAGIAUgDUEQdkH/AXFqLQAAQRB0c0EQdjoAAiADIAYgBSALQQh2Qf8BcWotAABBCHRzQQh2OgABC74WAQZ/AkAgAAJ/QQogAkGAAUYNABogAkGAAkcEQCACQcABRw0CQQwMAQtBDgsiBDYCACAAIABBCGoiAzYCBCACQQV2IgJBASACQQFLGyEGQQAhAgNAIAAgAkECdCIFaiABIAVqLQAAIAEgBUEBcmotAABBCHRyIAEgBUECcmotAABBEHRyIAEgBUEDcmotAABBGHRyNgIIIAJBAWoiAiAGRw0ACwJAAkACQCAEQXZqDgUBAwADAgMLIAAgACgCCCAAKAIcIgFBCHZB/wFxQbAIai0AAHMgAUEQdkH/AXFBsAhqLQAAQQh0cyABQRh2QbAIai0AAEEQdHMgAUH/AXFBsAhqLQAAQRh0c0EBcyICNgIgIAAgAiAAKAIMcyIDNgIkIAAgACgCECIHIANzIgQ2AiggACAAKAIUIARzIgQ2AiwgACAAKAIYIgYgBHMiBTYCMCAAIAEgBXMiATYCNCAAIAIgAUEIdkH/AXFBsAhqLQAAcyABQRB2Qf8BcUGwCGotAABBCHRzIAFBGHZBsAhqLQAAQRB0cyABQf8BcUGwCGotAABBGHRzQQJzIgU2AjggAEFAayAFIAdzIgI2AgAgACADIAVzIgg2AjwgACACIAZzIgc2AkggACACIARzNgJEIAAgASAHcyIDNgJMIAAgBSADQQh2Qf8BcUGwCGotAABzIANBEHZB/wFxQbAIai0AAEEIdHMgA0EYdkGwCGotAABBEHRzIANB/wFxQbAIai0AAEEYdHNBBHMiAzYCUCAAIAMgCHMiBTYCVCAAIAQgBXMiBDYCXCAAIAIgBXM2AlggACABIARzIgE2AmQgACAEIAdzNgJgIAAgAyABQQh2Qf8BcUGwCGotAABzIAFBEHZB/wFxQbAIai0AAEEIdHMgAUEYdkGwCGotAABBEHRzIAFB/wFxQbAIai0AAEEYdHNBCHMiAzYCaCAAIAMgBnMiBjYCeCAAIAIgA3MiAjYCcCAAIAMgBXMiBTYCbCAAIAEgBnMiATYCfCAAIAIgBHMiBzYCdCAAIAMgAUEIdkH/AXFBsAhqLQAAcyABQRB2Qf8BcUGwCGotAABBCHRzIAFBGHZBsAhqLQAAQRB0cyABQf8BcUGwCGotAABBGHRzQRBzIgM2AoABIAAgAyAFcyIENgKEASAAIAIgBHMiAjYCiAEgACACIAdzIgU2AowBIAAgBSAGcyIGNgKQASAAIAEgBnMiATYClAEgACADIAFBCHZB/wFxQbAIai0AAHMgAUEQdkH/AXFBsAhqLQAAQQh0cyABQRh2QbAIai0AAEEQdHMgAUH/AXFBsAhqLQAAQRh0c0EgcyIDNgKYASAAIAMgBHMiBDYCnAEgACACIARzIgI2AqABIAAgAiAFcyIFNgKkASAAIAUgBnMiBjYCqAEgACABIAZzIgE2AqwBIAAgAyABQQh2Qf8BcUGwCGotAABzIAFBEHZB/wFxQbAIai0AAEEIdHMgAUEYdkGwCGotAABBEHRzIAFB/wFxQbAIai0AAEEYdHNBwABzIgM2ArABIAAgAyAEcyIENgK0ASAAIAIgBHMiAjYCuAEgACACIAVzIgU2ArwBIAAgBSAGcyIGNgLAASAAIAEgBnMiATYCxAEgACADIAFBCHZB/wFxQbAIai0AAHMgAUEQdkH/AXFBsAhqLQAAQQh0cyABQRh2QbAIai0AAEEQdHMgAUH/AXFBsAhqLQAAQRh0c0GAAXMiAzYCyAEgACADIARzIgM2AswBIAAgAiADcyICNgLQASAAIAIgBXMiAjYC1AEgACACIAZzIgI2AtgBIAAgASACczYC3AEPCyAAIAAoAgggACgCFCIBQQh2Qf8BcUGwCGotAABzIAFBEHZB/wFxQbAIai0AAEEIdHMgAUEYdkGwCGotAABBEHRzIAFB/wFxQbAIai0AAEEYdHNBAXMiAjYCGCAAIAIgACgCDHMiAzYCHCAAIAAoAhAgA3MiBDYCICAAIAEgBHMiATYCJCAAIAIgAUEIdkH/AXFBsAhqLQAAcyABQRB2Qf8BcUGwCGotAABBCHRzIAFBGHZBsAhqLQAAQRB0cyABQf8BcUGwCGotAABBGHRzQQJzIgI2AiggACACIANzIgM2AiwgACADIARzIgQ2AjAgACABIARzIgE2AjQgACACIAFBCHZB/wFxQbAIai0AAHMgAUEQdkH/AXFBsAhqLQAAQQh0cyABQRh2QbAIai0AAEEQdHMgAUH/AXFBsAhqLQAAQRh0c0EEcyICNgI4IAAgAiADcyIDNgI8IABBQGsgAyAEcyIENgIAIAAgASAEcyIBNgJEIAAgAiABQQh2Qf8BcUGwCGotAABzIAFBEHZB/wFxQbAIai0AAEEIdHMgAUEYdkGwCGotAABBEHRzIAFB/wFxQbAIai0AAEEYdHNBCHMiAjYCSCAAIAIgA3MiAzYCTCAAIAMgBHMiBDYCUCAAIAEgBHMiATYCVCAAIAIgAUEIdkH/AXFBsAhqLQAAcyABQRB2Qf8BcUGwCGotAABBCHRzIAFBGHZBsAhqLQAAQRB0cyABQf8BcUGwCGotAABBGHRzQRBzIgI2AlggACACIANzIgM2AlwgACADIARzIgQ2AmAgACABIARzIgE2AmQgACACIAFBCHZB/wFxQbAIai0AAHMgAUEQdkH/AXFBsAhqLQAAQQh0cyABQRh2QbAIai0AAEEQdHMgAUH/AXFBsAhqLQAAQRh0c0EgcyICNgJoIAAgAiADcyIDNgJsIAAgAyAEcyIENgJwIAAgASAEcyIBNgJ0IAAgAiABQQh2Qf8BcUGwCGotAABzIAFBEHZB/wFxQbAIai0AAEEIdHMgAUEYdkGwCGotAABBEHRzIAFB/wFxQbAIai0AAEEYdHNBwABzIgI2AnggACACIANzIgM2AnwgACADIARzIgQ2AoABIAAgASAEcyIBNgKEASAAIAIgAUEIdkH/AXFBsAhqLQAAcyABQRB2Qf8BcUGwCGotAABBCHRzIAFBGHZBsAhqLQAAQRB0cyABQf8BcUGwCGotAABBGHRzQYABcyICNgKIASAAIAIgA3MiAzYCjAEgACADIARzIgQ2ApABIAAgASAEcyIBNgKUASAAIAIgAUEIdkH/AXFBsAhqLQAAcyABQRB2Qf8BcUGwCGotAABBCHRzIAFBGHZBsAhqLQAAQRB0cyABQf8BcUGwCGotAABBGHRzQRtzIgI2ApgBIAAgAiADcyIDNgKcASAAIAMgBHMiBDYCoAEgACABIARzIgE2AqQBIAAgAiABQQh2Qf8BcUGwCGotAABzIAFBEHZB/wFxQbAIai0AAEEIdHMgAUEYdkGwCGotAABBEHRzIAFB/wFxQbAIai0AAEEYdHNBNnMiAjYCqAEgACACIANzIgI2AqwBIAAgAiAEcyICNgKwASAAIAEgAnM2ArQBDwsgAygCACECQQAhAANAIAMgAygCHCIBQQh2Qf8BcUGwCGotAAAgAEECdEGACGooAgAgAnNzIAFBEHZB/wFxQbAIai0AAEEIdHMgAUEYdkGwCGotAABBEHRzIAFB/wFxQbAIai0AAEEYdHMiAjYCICADIAIgAygCBHMiBDYCJCADIAMoAgggBHMiBDYCKCADIAMoAgwgBHMiBDYCLCADIAMoAhAgBEH/AXFBsAhqLQAAcyAEQQh2Qf8BcUGwCGotAABBCHRzIARBEHZB/wFxQbAIai0AAEEQdHMgBEEYdkGwCGotAABBGHRzIgQ2AjAgAyAEIAMoAhRzIgQ2AjQgAyADKAIYIARzIgQ2AjggAyABIARzNgI8IANBIGohAyAAQQFqIgBBB0cNAAsLC74CAQJ/IABBmAJqIgFBf2pBADoAACAAQQA6AAAgAUF+akEAOgAAIABBADoAASABQX1qQQA6AAAgAEEAOgACIAFBfGpBADoAACAAQQA6AAMgAEEAIABrQQNxIgFqIgBBADYCACAAQZgCIAFrQXxxIgJqIgFBfGpBADYCAAJAIAJBCUkNACAAQQA2AgggAEEANgIEIAFBeGpBADYCACABQXRqQQA2AgAgAkEZSQ0AIABBADYCGCAAQQA2AhQgAEEANgIQIABBADYCDCABQXBqQQA2AgAgAUFsakEANgIAIAFBaGpBADYCACABQWRqQQA2AgAgAiAAQQRxQRhyIgJrIgFBIEkNACAAIAJqIQADQCAAQgA3AxggAEIANwMQIABCADcDCCAAQgA3AwAgAEEgaiEAIAFBYGoiAUEfSw0ACwsLwgYBEn8jAEEQayIFJAAgAUEBTgRAIAJBAWohFiACQQJqIQggAkEDaiEJIAJBBGohCiACQQVqIQsgAkEGaiEMIAJBB2ohDSACQQhqIQ4gAkEJaiEPIAJBCmohECACQQtqIREgAkEMaiESIAJBDWohEyACQQ5qIRQgAkEPaiEVA0AgAEEBIAIgBRAAIAQgBS0AACADLQAAczoAACAEIAUtAAEgAy0AAXM6AAEgBCAFLQACIAMtAAJzOgACIAQgBS0AAyADLQADczoAAyAEIAUtAAQgAy0ABHM6AAQgBCAFLQAFIAMtAAVzOgAFIAQgBS0ABiADLQAGczoABiAEIAUtAAcgAy0AB3M6AAcgBCAFLQAIIAMtAAhzOgAIIAQgBS0ACSADLQAJczoACSAEIAUtAAogAy0ACnM6AAogBCAFLQALIAMtAAtzOgALIAQgBS0ADCADLQAMczoADCAEIAUtAA0gAy0ADXM6AA0gBCAFLQAOIAMtAA5zOgAOIAQgBS0ADyADLQAPczoADyAVIQYCQAJAIAItAA8iB0H/AUcNACAVQQA6AAAgFCEGIBQtAAAiB0H/AUcNACAUQQA6AAAgEyEGIBMtAAAiB0H/AUcNACATQQA6AAAgEiEGIBItAAAiB0H/AUcNACASQQA6AAAgESEGIBEtAAAiB0H/AUcNACARQQA6AAAgECEGIBAtAAAiB0H/AUcNACAQQQA6AAAgDyEGIA8tAAAiB0H/AUcNACAPQQA6AAAgDiEGIA4tAAAiB0H/AUcNACAOQQA6AAAgDSEGIA0tAAAiB0H/AUcNACANQQA6AAAgDCEGIAwtAAAiB0H/AUcNACAMQQA6AAAgCyEGIAstAAAiB0H/AUcNACALQQA6AAAgCiEGIAotAAAiB0H/AUcNACAKQQA6AAAgCSEGIAktAAAiB0H/AUcNACAJQQA6AAAgCCEGIAgtAAAiB0H/AUcNACAIQQA6AAAgFiIGLQAAIgdB/wFHDQAgAkEAOgABIAIhBiACLQAAIgdB/wFHDQAgAkEAOgAADAELIAYgB0EBajoAAAsgBEEQaiEEIANBEGohAyABQRBKIQYgAUFwaiEBIAYNAAsLIAVBEGokAAvCBQECfyMAQRBrIgYkAAJAIAEEQCACQQFIDQEDQCAFIAMtAAAgBC0AAHM6AAAgBSADLQABIAQtAAFzOgABIAUgAy0AAiAELQACczoAAiAFIAMtAAMgBC0AA3M6AAMgBSADLQAEIAQtAARzOgAEIAUgAy0ABSAELQAFczoABSAFIAMtAAYgBC0ABnM6AAYgBSADLQAHIAQtAAdzOgAHIAUgAy0ACCAELQAIczoACCAFIAMtAAkgBC0ACXM6AAkgBSADLQAKIAQtAApzOgAKIAUgAy0ACyAELQALczoACyAFIAMtAAwgBC0ADHM6AAwgBSADLQANIAQtAA1zOgANIAUgAy0ADiAELQAOczoADiAFIAMtAA8gBC0AD3M6AA8gACABIAUgBRAAIAMgBSkACDcACCADIAUpAAA3AAAgBUEQaiEFIARBEGohBCACQRBKIQcgAkFwaiECIAcNAAsMAQsgAkEBSA0AA0AgBiAEKQAANwMAIAYgBCkACDcDCCAAQQAgBCAFEAAgBSADLQAAIAUtAABzOgAAIAUgAy0AASAFLQABczoAASAFIAMtAAIgBS0AAnM6AAIgBSADLQADIAUtAANzOgADIAUgAy0ABCAFLQAEczoABCAFIAMtAAUgBS0ABXM6AAUgBSADLQAGIAUtAAZzOgAGIAUgAy0AByAFLQAHczoAByAFIAMtAAggBS0ACHM6AAggBSADLQAJIAUtAAlzOgAJIAUgAy0ACiAFLQAKczoACiAFIAMtAAsgBS0AC3M6AAsgBSADLQAMIAUtAAxzOgAMIAUgAy0ADSAFLQANczoADSAFIAMtAA4gBS0ADnM6AA4gBSADLQAPIAUtAA9zOgAPIAMgBikDCDcACCADIAYpAwA3AAAgBUEQaiEFIARBEGohBCACQRBKIQEgAkFwaiECIAENAAsLIAZBEGokAAvjBQEEfyMAQbACayIDJAAgA0G4CikDADcDCCADQbAKKQMANwMAAkAgAAJ/QQogAUGAAUYNABogAUGAAkcEQCABQcABRw0CQQwMAQtBDgs2AgAgACAAQQhqNgIEIANBGGogAyABEAEgACADKAIcIAMoAhhBBHRqIgQoAgA2AgggACAEKAIENgIMIAAgBCgCCDYCECAAIAQoAgw2AhQgAEEYaiEBIARBcGohAgJ/IARBEGogACgCACIFQQJIDQAaA0AgASACIgAoAgAiAkEIdkH/AXFBsAhqLQAAQQJ0QcASaigCACACQf8BcUGwCGotAABBAnRBwApqKAIAcyACQRB2Qf8BcUGwCGotAABBAnRBwBpqKAIAcyACQRh2QbAIai0AAEECdEHAImooAgBzNgIAIAEgACgCBCICQQh2Qf8BcUGwCGotAABBAnRBwBJqKAIAIAJB/wFxQbAIai0AAEECdEHACmooAgBzIAJBEHZB/wFxQbAIai0AAEECdEHAGmooAgBzIAJBGHZBsAhqLQAAQQJ0QcAiaigCAHM2AgQgASAAKAIIIgJBCHZB/wFxQbAIai0AAEECdEHAEmooAgAgAkH/AXFBsAhqLQAAQQJ0QcAKaigCAHMgAkEQdkH/AXFBsAhqLQAAQQJ0QcAaaigCAHMgAkEYdkGwCGotAABBAnRBwCJqKAIAczYCCCABIAAoAgwiAkEIdkH/AXFBsAhqLQAAQQJ0QcASaigCACACQf8BcUGwCGotAABBAnRBwApqKAIAcyACQRB2Qf8BcUGwCGotAABBAnRBwBpqKAIAcyACQRh2QbAIai0AAEECdEHAImooAgBzNgIMIABBcGohAiABQRBqIQEgBUECSiEEIAVBf2ohBSAEDQALIABBEGoLIQAgASACKAIANgIAIAEgAEFkaigCADYCBCABIABBaGooAgA2AgggASAAQWxqKAIANgIMIANBGGoQAgsgA0GwAmokAAsDAAELC8NEAgBBgAgLJQEAAAACAAAABAAAAAgAAAAQAAAAIAAAAEAAAACAAAAAGwAAADYAQbAIC5BEY3x3e/Jrb8UwAWcr/terdsqCyX36WUfwrdSir5ykcsC3/ZMmNj/3zDSl5fFx2DEVBMcjwxiWBZoHEoDi6yeydQmDLBobblqgUjvWsynjL4RT0QDtIPyxW2rLvjlKTFjP0O+q+0NNM4VF+QJ/UDyfqFGjQI+SnTj1vLbaIRD/89LNDBPsX5dEF8Snfj1kXRlzYIFP3CIqkIhG7rgU3l4L2+AyOgpJBiRcwtOsYpGV5HnnyDdtjdVOqWxW9Opleq4IunglLhymtMbo3XQfS72LinA+tWZIA/YOYTVXuYbBHZ7h+JgRadmOlJseh+nOVSjfjKGJDb/mQmhBmS0PsFS7FlR4NVNMalIyMU5STGxxZVZR9KdQfkFlUxoXpMM6J16WO6tryx+dRfGs+lirS+MDkyAw+lWtdm32iMx2kfUCTCVP5df8xSrL1yY1RIC1YqOP3rFaSSW6G2dF6g6YXf7A4cMvdQKBTPASjUaXo2vT+cYDj1/nFZKclb9teuuVUlna1L6DLVh0IdNJ4GkpjsnIRHXCiWr0jnl4mVg+aye5cd2+4U+28IitF8kgrGZ9zjq0Y99KGOUaMYKXUTNgYlN/RbFkd+C7a66E/oGgHPkIK5RwSGhYj0X9GZTebIdSe/i3q3PTI3JLAuLjH49XZlWrKrLrKAcvtcIDhsV7mtM3CKUwKIfyI7+lsgIDarrtFoJcis8cK6d5tJLzB/LwTmnioWXa9M0GBb7V0TRiH8Sm/oo0LlOdovNVoAWK4TKk9ut1C4PsOUBg76pecZ8GvW4QUT4hivmW3QY93T4Frk3mvUaRVI21ccRdBQQG1G9gUBX/GZj7JNa96ZeJQEPMZ9med7DoQr0HiYuI5xlbOHnI7tuhfApHfEIP6fiEHskAAAAACYCGgzIr7UgeEXCsbFpyTv0O//sPhThWPa7VHjYtOScKD9lkaFymIZtbVNEkNi46DApnsZNX5w+07pbSG5uRnoDAxU9h3CCiWndLaRwSGhbik7oKwKAq5Twi4EMSGxcdDgkNC/KLx60ttqi5FB6pyFfxGYWvdQdM7pndu6N/YP33ASafXHL1vERmO8Vb+340i0Mpdssjxty27fxouOTxY9cx3MpCY4UQE5ciQITGESCFSiR90rs9+K75MhHHKaFtHZ4vS9yyMPMNhlLsd8Hj0CuzFmypcLmZEZRI+kfpZCKo/IzEoPA/GlZ9LNgiM5Dvh0lOx9k40cGMyqL+mNQLNqb1gc+let4o2reOJj+tv6QsOp3kUHiSDWpfzJtUfkZi9o0TwpDYuOguOfdegsOv9Z9dgL5p0JN8b9Utqc8lErPIrJk7EBh9p+icY27bO7t7zSZ4CW5ZGPTsmrcBg0+aqOaVbmWq/+Z+IbzPCO8V6Oa655vZSm82zuqfCdQpsHzWMaSyryo/IzHGpZQwNaJmwHROvDf8gsqm4JDQsDOn2BXxBJhKQeza93/NUA4XkfYvdk3WjUPvsE3Mqk1U5JYE357RteNMaogbwSwfuEZlUX+dXuoEAYw1XfqHdHP7C0Eus2cdWpLb0lLpEFYzbdZHE5rXYYw3oQx6WfgUjusTPInOqSfut2HJNeEc5e16R7E8nNLfWVXycz8YFM55c8c3v1P3zepf/apb3z1vFHhE24bKr/OBuWjEPjgkNCzCo0BfFh3DcrziJQwoPEmL/w2VQTmoAXEIDLPe2LTknGRWwZB7y4Rh1TK2cEhsXHTQuFdCUFH0p1N+QWXDGhekljonXss7q2vxH51Fq6z6WJNL4wNVIDD69q12bZGIzHYl9QJM/E/l19fFKsuAJjVEj7Vio0nesVpnJbobmEXqDuFd/sACwy91EoFM8KONRpfGa9P55wOPX5UVkpzrv2162pVSWS3UvoPTWHQhKUngaUSOychqdcKJePSOeWuZWD7dJ7lxtr7hTxfwiK1mySCstH3OOhhj30qC5RoxYJdRM0ViU3/gsWR3hLtrrhz+gaCU+QgrWHBIaBmPRf2HlN5st1J7+COrc9PicksCV+MfjypmVasHsusoAy+1wpqGxXul0zcI8jAoh7Ijv6W6AgNqXO0WgiuKzxySp3m08PMH8qFOaeLNZdr01QYFvh/RNGKKxKb+nTQuU6Ci81UyBYrhdaT26zkLg+yqQGDvBl5xn1G9bhD5PiGKPZbdBq7dPgVGTea9tZFUjQVxxF1vBAbU/2BQFSQZmPuX1r3pzIlAQ3dn2Z69sOhCiAeJizjnGVvbecjuR6F8Cul8Qg/J+IQeAAAAAIMJgIZIMivtrB4RcE5sWnL7/Q7/Vg+FOB49rtUnNi05ZAoP2SFoXKbRm1tUOiQ2LrEMCmcPk1fn0rTulp4bm5FPgMDFomHcIGlad0sWHBIaCuKTuuXAoCpDPCLgHRIbFwsOCQ2t8ovHuS22qMgUHqmFV/EZTK91B7vumd39o39gn/cBJrxccvXFRGY7NFv7fnaLQyncyyPGaLbt/GO45PHK1zHcEEJjhUATlyIghMYRfYVKJPjSuz0RrvkybccpoUsdni/z3LIw7A2GUtB3weNsK7MWmalwufoRlEgiR+lkxKj8jBqg8D/YVn0s7yIzkMeHSU7B2TjR/ozKojaY1AvPpvWBKKV63ibat46kP62/5Cw6nQ1QeJKbal/MYlR+RsL2jRPokNi4Xi459/WCw6++n12AfGnQk6lv1S2zzyUSO8ismacQGH1u6Jxje9s7uwnNJnj0blkYAeyat6iDT5pl5pVufqr/5gghvM/m7xXo2brnm85KbzbU6p8J1imwfK8xpLIxKj8jMMallMA1omY3dE68pvyCyrDgkNAVM6fYSvEEmPdB7NoOf81QLxeR9o12TdZNQ++wVMyqTd/klgTjntG1G0xqiLjBLB9/RmVRBJ1e6l0BjDVz+od0LvsLQVqzZx1SktvSM+kQVhNt1keMmtdhejehDI5Z+BSJ6xM87s6pJzW3Ycnt4RzlPHpHsVmc0t8/VfJzeRgUzr9zxzfqU/fNW1/9qhTfPW+GeETbgcqv8z65aMQsOCQ0X8KjQHIWHcMMvOIliyg8SUH/DZVxOagB3ggMs5zYtOSQZFbBYXvLhHDVMrZ0SGxcQtC4V6dQUfRlU35BpMMaF16WOidryzurRfEfnVirrPoDk0vj+lUgMG32rXZ2kYjMTCX1Atf8T+XL18UqRIAmNaOPtWJaSd6xG2clug6YRerA4V3+dQLDL/ASgUyXo41G+cZr01/nA4+clRWSeuu/bVnalVKDLdS+IdNYdGkpSeDIRI7JiWp1wnl49I4+a5lYcd0nuU+2vuGtF/CIrGbJIDq0fc5KGGPfMYLlGjNgl1F/RWJTd+CxZK6Eu2ugHP6BK5T5CGhYcEj9GY9FbIeU3vi3UnvTI6tzAuJyS49X4x+rKmZVKAey68IDL7V7mobFCKXTN4fyMCilsiO/aroCA4Jc7RYcK4rPtJKnefLw8wfioU5p9M1l2r7VBgViH9E0/orEplOdNC5VoKLz4TIFiut1pPbsOQuD76pAYJ8GXnEQUb1uivk+IQY9lt0Frt0+vUZN5o21kVRdBXHE1G8EBhX/YFD7JBmY6ZfWvUPMiUCed2fZQr2w6IuIB4lbOOcZ7tt5yApHoXwP6XxCHsn4hAAAAACGgwmA7UgyK3CsHhFyTmxa//v9DjhWD4XVHj2uOSc2LdlkCg+mIWhcVNGbWy46JDZnsQwK5w+TV5bStO6RnhubxU+AwCCiYdxLaVp3GhYcEroK4pMq5cCg4EM8IhcdEhsNCw4Jx63yi6i5LbapyBQeGYVX8QdMr3Xdu+6ZYP2jfyaf9wH1vFxyO8VEZn40W/spdotDxtzLI/xotu3xY7jk3MrXMYUQQmMiQBOXESCExiR9hUo9+NK7MhGu+aFtxykvSx2eMPPcslLsDYbj0HfBFmwrs7mZqXBI+hGUZCJH6YzEqPw/GqDwLNhWfZDvIjNOx4dJ0cHZOKL+jMoLNpjUgc+m9d4opXqOJtq3v6Q/rZ3kLDqSDVB4zJtqX0ZiVH4TwvaNuOiQ2PdeLjmv9YLDgL6fXZN8adAtqW/VErPPJZk7yKx9pxAYY27onLt72zt4Cc0mGPRuWbcB7JqaqINPbmXmleZ+qv/PCCG86ObvFZvZuuc2zkpvCdTqn3zWKbCyrzGkIzEqP5QwxqVmwDWivDd0Tsqm/ILQsOCQ2BUzp5hK8QTa90HsUA5/zfYvF5HWjXZNsE1D701UzKoE3+SWteOe0YgbTGofuMEsUX9GZeoEnV41XQGMdHP6h0Eu+wsdWrNn0lKS21Yz6RBHE23WYYya1wx6N6EUjln4PInrEyfuzqnJNbdh5e3hHLE8ekffWZzScz9V8s55GBQ3v3PHzepT96pbX/1vFN8924Z4RPOByq/EPrloNCw4JEBfwqPDchYdJQy84kmLKDyVQf8NAXE5qLPeCAzknNi0wZBkVoRhe8u2cNUyXHRIbFdC0Lj0p1BRQWVTfhekwxonXpY6q2vLO51F8R/6WKus4wOTSzD6VSB2bfatzHaRiAJMJfXl1/xPKsvXxTVEgCZio4+1sVpJ3robZyXqDphF/sDhXS91AsNM8BKBRpejjdP5xmuPX+cDkpyVFW16679SWdqVvoMt1HQh01jgaSlJychEjsKJanWOeXj0WD5rmblx3SfhT7a+iK0X8CCsZsnOOrR930oYYxoxguVRM2CXU39FYmR34LFrroS7gaAc/ggrlPlIaFhwRf0Zj95sh5R7+LdSc9Mjq0sC4nIfj1fjVasqZusoB7K1wgMvxXuahjcIpdMoh/Iwv6WyIwNqugIWglztzxwrinm0kqcH8vDzaeKhTtr0zWUFvtUGNGIf0ab+isQuU50081WgoorhMgX263Wkg+w5C2DvqkBxnwZebhBRvSGK+T7dBj2WPgWu3ea9Rk1UjbWRxF0FcQbUbwRQFf9gmPskGb3pl9ZAQ8yJ2Z53Z+hCvbCJi4gHGVs458ju23l8CkehQg/pfIQeyfgAAAAAgIaDCSvtSDIRcKweWnJObA7/+/2FOFYPrtUePS05JzYP2WQKXKYhaFtU0Zs2LjokCmexDFfnD5PultK0m5GeG8DFT4DcIKJhd0tpWhIaFhyTugrioCrlwCLgQzwbFx0SCQ0LDovHrfK2qLktHqnIFPEZhVd1B0yvmd277n9g/aMBJp/3cvW8XGY7xUT7fjRbQyl2iyPG3Mvt/Gi25PFjuDHcytdjhRBClyJAE8YRIIRKJH2Fuz340vkyEa4poW3Hni9LHbIw89yGUuwNwePQd7MWbCtwuZmplEj6EelkIkf8jMSo8D8aoH0s2FYzkO8iSU7HhzjRwdnKov6M1As2mPWBz6Z63iilt44m2q2/pD86neQseJINUF/Mm2p+RmJUjRPC9ti46JA5914uw6/1gl2Avp/Qk3xp1S2pbyUSs8+smTvIGH2nEJxjbug7u3vbJngJzVkY9G6atwHsT5qog5VuZeb/5n6qvM8IIRXo5u/nm9m6bzbOSp8J1OqwfNYppLKvMT8jMSqllDDGombANU68N3SCyqb8kNCw4KfYFTMEmErx7Nr3Qc1QDn+R9i8XTdaNdu+wTUOqTVTMlgTf5NG1455qiBtMLB+4wWVRf0Ze6gSdjDVdAYd0c/oLQS77Zx1as9vSUpIQVjPp1kcTbddhjJqhDHo3+BSOWRM8ieupJ+7OYck1txzl7eFHsTx60t9ZnPJzP1UUznkYxze/c/fN6lP9qltfPW8U30Tbhniv84HKaMQ+uSQ0LDijQF/CHcNyFuIlDLw8SYsoDZVB/6gBcTkMs94ItOSc2FbBkGTLhGF7MrZw1WxcdEi4V0LQUglq1TA2pTi/QKOegfPX+3zjOYKbL/+HNI5DRMTe6ctUe5QypsIjPe5MlQtC+sNOCC6hZijZJLJ2W6JJbYvRJXL49mSGaJgW1KRczF1ltpJscEhQ/e252l4VRlenjZ2EkNirAIy80wr35FgFuLNFBtAsHo/KPw8Cwa+9AwETims6kRFBT2fc6pfyz87wtOZzlqx0IuetNYXi+TfoHHXfbkfxGnEdKcWJb7diDqoYvhv8Vj5LxtJ5IJrbwP54zVr0H92oM4gHxzGxEhBZJ4DsX2BRf6kZtUoNLeV6n5PJnO+g4DtNrir1sMjruzyDU5lhFysEfrp31ibhaRRjVSEMfcZjY6X4fHyE7nd3mfZ7e43/8vIN1mtrvd5vb7GRxcVUYDAwUAIBAQPOZ2epVisrfef+/hm119diTaur5ux2dpqPyspFH4KCnYnJyUD6fX2H7/r6FbJZWeuOR0fJ+/DwC0Gtreyz1NRnX6Ki/UWvr+ojnJy/U6Sk9+RycpabwMBbdbe3wuH9/Rw9k5OuTCYmamw2Nlp+Pz9B9ff3AoPMzE9oNDRcUaWl9NHl5TT58fEI4nFxk6vY2HNiMTFTKhUVPwgEBAyVx8dSRiMjZZ3Dw14wGBgoN5aWoQoFBQ8vmpq1DgcHCSQSEjYbgICb3+LiPc3r6yZOJydpf7Kyzep1dZ8SCQkbHYODnlgsLHQ0GhouNhsbLdxubrK0WlruW6Cg+6RSUvZ2OztNt9bWYX2zs85SKSl73ePjPl4vL3EThISXplNT9bnR0WgAAAAAwe3tLEAgIGDj/PwfebGxyLZbW+3Uamq+jcvLRme+vtlyOTlLlEpK3phMTNSwWFjohc/PSrvQ0GvF7+8qT6qq5e37+xaGQ0PFmk1N12YzM1URhYWUikVFz+n5+RAEAgIG/n9/gaBQUPB4PDxEJZ+fukuoqOOiUVHzXaOj/oBAQMAFj4+KP5KSrSGdnbxwODhI8fX1BGO8vN93trbBr9radUIhIWMgEBAw5f//Gv3z8w6/0tJtgc3NTBgMDBQmExM1w+zsL75fX+E1l5eiiEREzC4XFzmTxMRXVaen8vx+foJ6PT1HyGRkrLpdXecyGRkr5nNzlcBgYKAZgYGYnk9P0aPc3H9EIiJmVCoqfjuQkKsLiIiDjEZGysfu7ilruLjTKBQUPKfe3nm8Xl7iFgsLHa3b23bb4OA7ZDIyVnQ6Ok4UCgoekklJ2wwGBgpIJCRsuFxc5J/Cwl2909NuQ6ys78RiYqY5kZGoMZWVpNPk5DfyeXmL1efnMovIyENuNzdZ2m1ttwGNjYyx1dVknE5O0kmpqeDYbGy0rFZW+vP09AfP6uolymVlr/R6eo5Hrq7pEAgIGG+6utXweHiISiUlb1wuLnI4HBwkV6am8XO0tMeXxsZRy+joI6Hd3XzodHScPh8fIZZLS91hvb3cDYuLhg+KioXgcHCQfD4+QnG1tcTMZmaqkEhI2AYDAwX39vYBHA4OEsJhYaNqNTVfrldX+Wm5udAXhoaRmcHBWDodHScnnp652eHhOOv4+BMrmJizIhERM9Jpabup2dlwB46OiTOUlKctm5u2PB4eIhWHh5LJ6ekgh87OSapVVf9QKCh4pd/fegOMjI9ZoaH4CYmJgBoNDRdlv7/a1+bmMYRCQsbQaGi4gkFBwymZmbBaLS13Hg8PEXuwsMuoVFT8bbu71iwWFjqlxmNjhPh8fJnud3eN9nt7Df/y8r3Wa2ux3m9vVJHFxVBgMDADAgEBqc5nZ31WKysZ5/7+YrXX1+ZNq6ua7HZ2RY/Kyp0fgoJAicnJh/p9fRXv+vrrsllZyY5HRwv78PDsQa2tZ7PU1P1foqLqRa+vvyOcnPdTpKSW5HJyW5vAwMJ1t7cc4f39rj2Tk2pMJiZabDY2QX4/PwL19/dPg8zMXGg0NPRRpaU00eXlCPnx8ZPicXFzq9jYU2IxMT8qFRUMCAQEUpXHx2VGIyNencPDKDAYGKE3lpYPCgUFtS+amgkOBwc2JBISmxuAgD3f4uImzevraU4nJ81/srKf6nV1GxIJCZ4dg4N0WCwsLjQaGi02Gxuy3G5u7rRaWvtboKD2pFJSTXY7O2G31tbOfbOze1IpKT7d4+NxXi8vlxOEhPWmU1NoudHRAAAAACzB7e1gQCAgH+P8/Mh5sbHttltbvtRqakaNy8vZZ76+S3I5Od6USkrUmExM6LBYWEqFz89ru9DQKsXv7+VPqqoW7fv7xYZDQ9eaTU1VZjMzlBGFhc+KRUUQ6fn5BgQCAoH+f3/woFBQRHg8PLoln5/jS6io86JRUf5do6PAgEBAigWPj60/kpK8IZ2dSHA4OATx9fXfY7y8wXe2tnWv2tpjQiEhMCAQEBrl//8O/fPzbb/S0kyBzc0UGAwMNSYTEy/D7Ozhvl9fojWXl8yIREQ5LhcXV5PExPJVp6eC/H5+R3o9PazIZGTnul1dKzIZGZXmc3OgwGBgmBmBgdGeT09/o9zcZkQiIn5UKiqrO5CQgwuIiMqMRkYpx+7u02u4uDwoFBR5p97e4rxeXh0WCwt2rdvbO9vg4FZkMjJOdDo6HhQKCtuSSUkKDAYGbEgkJOS4XFxdn8LCbr3T0+9DrKymxGJiqDmRkaQxlZU30+Tki/J5eTLV5+dDi8jIWW43N7fabW2MAY2NZLHV1dKcTk7gSamptNhsbPqsVlYH8/T0Jc/q6q/KZWWO9Hp66UeurhgQCAjVb7q6iPB4eG9KJSVyXC4uJDgcHPFXpqbHc7S0UZfGxiPL6Oh8od3dnOh0dCE+Hx/dlktL3GG9vYYNi4uFD4qKkOBwcEJ8Pj7EcbW1qsxmZtiQSEgFBgMDAff29hIcDg6jwmFhX2o1NfmuV1fQabm5kReGhliZwcEnOh0duSeenjjZ4eET6/j4syuYmDMiERG70mlpcKnZ2YkHjo6nM5SUti2bmyI8Hh6SFYeHIMnp6UmHzs7/qlVVeFAoKHql39+PA4yM+FmhoYAJiYkXGg0N2mW/vzHX5ubGhEJCuNBoaMOCQUGwKZmZd1otLREeDw/Le7Cw/KhUVNZtu7s6LBYWY6XGY3yE+Hx3me53e432e/IN//JrvdZrb7Heb8VUkcUwUGAwAQMCAWepzmcrfVYr/hnn/tditder5k2rdprsdspFj8qCnR+CyUCJyX2H+n36Fe/6WeuyWUfJjkfwC/vwrexBrdRns9Si/V+ir+pFr5y/I5yk91OkcpbkcsBbm8C3wnW3/Rzh/ZOuPZMmakwmNlpsNj9Bfj/3AvX3zE+DzDRcaDSl9FGl5TTR5fEI+fFxk+Jx2HOr2DFTYjEVPyoVBAwIBMdSlccjZUYjw16dwxgoMBiWoTeWBQ8KBZq1L5oHCQ4HEjYkEoCbG4DiPd/i6ybN6ydpTieyzX+ydZ/qdQkbEgmDnh2DLHRYLBouNBobLTYbbrLcblrutFqg+1ugUvakUjtNdjvWYbfWs859syl7UinjPt3jL3FeL4SXE4RT9aZT0Wi50QAAAADtLMHtIGBAIPwf4/yxyHmxW+22W2q+1GrLRo3LvtlnvjlLcjlK3pRKTNSYTFjosFjPSoXP0Gu70O8qxe+q5U+q+xbt+0PFhkNN15pNM1VmM4WUEYVFz4pF+RDp+QIGBAJ/gf5/UPCgUDxEeDyfuiWfqONLqFHzolGj/l2jQMCAQI+KBY+SrT+SnbwhnThIcDj1BPH1vN9jvLbBd7bada/aIWNCIRAwIBD/GuX/8w7989Jtv9LNTIHNDBQYDBM1JhPsL8PsX+G+X5eiNZdEzIhEFzkuF8RXk8Sn8lWnfoL8fj1Hej1krMhkXee6XRkrMhlzleZzYKDAYIGYGYFP0Z5P3H+j3CJmRCIqflQqkKs7kIiDC4hGyoxG7inH7rjTa7gUPCgU3nmn3l7ivF4LHRYL23at2+A72+AyVmQyOk50OgoeFApJ25JJBgoMBiRsSCRc5Lhcwl2fwtNuvdOs70OsYqbEYpGoOZGVpDGV5DfT5HmL8nnnMtXnyEOLyDdZbjdtt9ptjYwBjdVksdVO0pxOqeBJqWy02GxW+qxW9Afz9Oolz+plr8pleo70eq7pR64IGBAIutVvuniI8Hglb0olLnJcLhwkOBym8VemtMdztMZRl8boI8vo3Xyh3XSc6HQfIT4fS92WS73cYb2Lhg2LioUPinCQ4HA+Qnw+tcRxtWaqzGZI2JBIAwUGA/YB9/YOEhwOYaPCYTVfajVX+a5XudBpuYaRF4bBWJnBHSc6HZ65J57hONnh+BPr+JizK5gRMyIRabvSadlwqdmOiQeOlKczlJu2LZseIjweh5IVh+kgyenOSYfOVf+qVSh4UCjfeqXfjI8DjKH4WaGJgAmJDRcaDb/aZb/mMdfmQsaEQmi40GhBw4JBmbApmS13Wi0PER4PsMt7sFT8qFS71m27FjosFmNjpcZ8fIT4d3eZ7nt7jfby8g3/a2u91m9vsd7FxVSRMDBQYAEBAwJnZ6nOKyt9Vv7+GefX12K1q6vmTXZ2muzKykWPgoKdH8nJQIl9fYf6+voV71lZ67JHR8mO8PAL+62t7EHU1GezoqL9X6+v6kWcnL8jpKT3U3JyluTAwFubt7fCdf39HOGTk649JiZqTDY2Wmw/P0F+9/cC9czMT4M0NFxopaX0UeXlNNHx8Qj5cXGT4tjYc6sxMVNiFRU/KgQEDAjHx1KVIyNlRsPDXp0YGCgwlpahNwUFDwqamrUvBwcJDhISNiSAgJsb4uI93+vrJs0nJ2lOsrLNf3V1n+oJCRsSg4OeHSwsdFgaGi40GxstNm5ustxaWu60oKD7W1JS9qQ7O0121tZht7Ozzn0pKXtS4+M+3S8vcV6EhJcTU1P1ptHRaLkAAAAA7e0swSAgYED8/B/jsbHIeVtb7bZqar7Uy8tGjb6+2Wc5OUtySkrelExM1JhYWOiwz89KhdDQa7vv7yrFqqrlT/v7Fu1DQ8WGTU3XmjMzVWaFhZQRRUXPivn5EOkCAgYEf3+B/lBQ8KA8PER4n5+6Jaio40tRUfOio6P+XUBAwICPj4oFkpKtP52dvCE4OEhw9fUE8by832O2tsF32tp1ryEhY0IQEDAg//8a5fPzDv3S0m2/zc1MgQwMFBgTEzUm7Owvw19f4b6Xl6I1RETMiBcXOS7ExFeTp6fyVX5+gvw9PUd6ZGSsyF1d57oZGSsyc3OV5mBgoMCBgZgZT0/Rntzcf6MiImZEKip+VJCQqzuIiIMLRkbKjO7uKce4uNNrFBQ8KN7eeadeXuK8CwsdFtvbdq3g4DvbMjJWZDo6TnQKCh4USUnbkgYGCgwkJGxIXFzkuMLCXZ/T0269rKzvQ2JipsSRkag5lZWkMeTkN9N5eYvy5+cy1cjIQ4s3N1lubW232o2NjAHV1WSxTk7SnKmp4ElsbLTYVlb6rPT0B/Pq6iXPZWWvynp6jvSurulHCAgYELq61W94eIjwJSVvSi4uclwcHCQ4pqbxV7S0x3PGxlGX6Ogjy93dfKF0dJzoHx8hPktL3Za9vdxhi4uGDYqKhQ9wcJDgPj5CfLW1xHFmZqrMSEjYkAMDBQb29gH3Dg4SHGFho8I1NV9qV1f5rrm50GmGhpEXwcFYmR0dJzqenrkn4eE42fj4E+uYmLMrEREzImlpu9LZ2XCpjo6JB5SUpzObm7YtHh4iPIeHkhXp6SDJzs5Jh1VV/6ooKHhQ3996pYyMjwOhofhZiYmACQ0NFxq/v9pl5uYx10JCxoRoaLjQQUHDgpmZsCktLXdaDw8RHrCwy3tUVPyou7vWbRYWOiw=",d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),f=0;f<d.length;f++)e[d.charCodeAt(f)]=f;var g=WebAssembly,h=(g.Module,g.instantiate),i=g.Memory,j=g.Table;a.exports=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{global:{},env:{memory:new i({initial:10,limit:100}),table:new j({initial:0,element:"anyfunc"})}};return h(b(c),a)}},function(a,b,c){a.exports=c(2)},function(a,b,c){"use strict";function d(a){return parseInt(a)===a}function e(a){if(!d(a.length))return!1;for(var b=0;b<a.length;b++)if(!d(a[b])||0>a[b]||255<a[b])return!1;return!0}function f(a,b){if(a.buffer&&ArrayBuffer.isView(a))return b&&(a=a.slice?a.slice():Array.prototype.slice.call(a)),a;if(Array.isArray(a)){if(!e(a))throw new Error("Array contains invalid value: "+a);return new Uint8Array(a)}if(d(a.length)&&e(a))return new Uint8Array(a);throw new Error("unsupported array-like object")}function g(){var a=new WebAssembly.Memory({initial:256,maximum:256});return{a:{memory:a,STACKTOP:0}}}function h(){var a=16384;return function(b){return a+=b,a-b}}Object.defineProperty(b,"__esModule",{value:!0});var i=function(a,b){return function(){var c=h(),d=g();return a(d).then(function(a){function e(a){var b=f(a);h.set(b,l)}var g=a.instance,h=new Uint8Array(d.a.memory.buffer),i=c(276),j=c(276),k=c(16),l=c(0),m=void 0;return{init:function(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"CBC";h.set(a,k),g.exports.c(j,b),m=c},encrypt:function(a){return e(a),"CBC"===m?g.exports.d(i,1,a.length,k,l,l):g.exports.e(i,a.length,k,l,l),h.subarray(l,l+a.length).slice()},decrypt:function(a){return e(a),"CBC"===m?g.exports.d(j,0,a.length,k,l,l):g.exports.e(i,a.length,k,l,l),h.subarray(l,l+a.length).slice()}}})}},j=c(0),k=c.n(j),l=i(k.a,128),m=i(k.a,192),n=i(k.a,256);c.d(b,"aes128",function(){return l}),c.d(b,"aes192",function(){return m}),c.d(b,"aes256",function(){return n})}])}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):(a=a||self,b(a.React={}))}(this,function(a){function b(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(a,b,c){this.props=a,this.context=b,this.refs=S,this.updater=c||R}function d(){}function e(a,b,c){this.props=a,this.context=b,this.refs=S,this.updater=c||R}function f(a,b,c){var d,e={},f=null,g=null;if(null!=b)for(d in void 0!==b.ref&&(g=b.ref),void 0!==b.key&&(f=""+b.key),b)V.call(b,d)&&!W.hasOwnProperty(d)&&(e[d]=b[d]);var h=arguments.length-2;if(1===h)e.children=c;else if(1<h){for(var i=Array(h),j=0;j<h;j++)i[j]=arguments[j+2];e.children=i}if(a&&a.defaultProps)for(d in h=a.defaultProps)void 0===e[d]&&(e[d]=h[d]);return{$$typeof:B,type:a,key:f,ref:g,props:e,_owner:U.current}}function g(a,b){return{$$typeof:B,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function h(a){return"object"==typeof a&&null!==a&&a.$$typeof===B}function i(a){var b={"=":"=0",":":"=2"};return"$"+(""+a).replace(/[=:]/g,function(a){return b[a]})}function j(a,b,c,d){if(Y.length){var e=Y.pop();return e.result=a,e.keyPrefix=b,e.func=c,e.context=d,e.count=0,e}return{result:a,keyPrefix:b,func:c,context:d,count:0}}function k(a){a.result=null,a.keyPrefix=null,a.func=null,a.context=null,a.count=0,10>Y.length&&Y.push(a)}function l(a,c,d,e){var f=typeof a;"undefined"!==f&&"boolean"!==f||(a=null);var g=!1;if(null===a)g=!0;else switch(f){case"string":case"number":g=!0;break;case"object":switch(a.$$typeof){case B:case C:g=!0}}if(g)return d(e,a,""===c?"."+n(a,0):c),1;if(g=0,c=""===c?".":c+":",Array.isArray(a))for(var h=0;h<a.length;h++){f=a[h];var i=c+n(f,h);g+=l(f,i,d,e)}else if(null===a||"object"!=typeof a?i=null:(i=M&&a[M]||a["@@iterator"],i="function"==typeof i?i:null),"function"==typeof i)for(a=i.call(a),h=0;!(f=a.next()).done;)f=f.value,i=c+n(f,h++),g+=l(f,i,d,e);else if("object"===f)throw d=""+a,Error(b(31,"[object Object]"===d?"object with keys {"+Object.keys(a).join(", ")+"}":d,""));return g}function m(a,b,c){return null==a?0:l(a,"",b,c)}function n(a,b){return"object"==typeof a&&null!==a&&null!=a.key?i(a.key):b.toString(36)}function o(a,b,c){a.func.call(a.context,b,a.count++)}function p(a,b,c){var d=a.result,e=a.keyPrefix;a=a.func.call(a.context,b,a.count++),Array.isArray(a)?q(a,d,c,function(a){return a}):null!=a&&(h(a)&&(a=g(a,e+(!a.key||b&&b.key===a.key?"":(""+a.key).replace(X,"$&/")+"/")+c)),d.push(a))}function q(a,b,c,d,e){var f="";null!=c&&(f=(""+c).replace(X,"$&/")+"/"),b=j(b,f,d,e),m(a,p,b),k(b)}function r(){var a=Z.current;if(null===a)throw Error(b(321));return a}function s(a,b){var c=a.length;a.push(b);a:for(;;){var d=c-1>>>1,e=a[d];if(!(void 0!==e&&0<v(e,b)))break a;a[d]=b,a[c]=e,c=d}}function t(a){return a=a[0],void 0===a?null:a}function u(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length;d<e;){var f=2*(d+1)-1,g=a[f],h=f+1,i=a[h];if(void 0!==g&&0>v(g,c))void 0!==i&&0>v(i,g)?(a[d]=i,a[h]=c,d=h):(a[d]=g,a[f]=c,d=f);else{if(!(void 0!==i&&0>v(i,c)))break a;a[d]=i,a[h]=c,d=h}}}return b}return null}function v(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}function w(a){for(var b=t(ua);null!==b;){if(null===b.callback)u(ua);else{if(!(b.startTime<=a))break;u(ua),b.sortIndex=b.expirationTime,s(ta,b)}b=t(ua)}}function x(a){if(Aa=!1,w(a),!za)if(null!==t(ta))za=!0,da(y);else{var b=t(ua);null!==b&&ea(x,b.startTime-a)}}function y(a,b){za=!1,Aa&&(Aa=!1,fa()),ya=!0;var c=xa;try{for(w(b),wa=t(ta);null!==wa&&(!(wa.expirationTime>b)||a&&!ga());){var d=wa.callback;if(null!==d){wa.callback=null,xa=wa.priorityLevel;var e=d(wa.expirationTime<=b);b=ca(),"function"==typeof e?wa.callback=e:wa===t(ta)&&u(ta),w(b)}else u(ta);wa=t(ta)}if(null!==wa)var f=!0;else{var g=t(ua);null!==g&&ea(x,g.startTime-b),f=!1}return f}finally{wa=null,xa=c,ya=!1}}function z(a){switch(a){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var A="function"==typeof Symbol&&Symbol.for,B=A?Symbol.for("react.element"):60103,C=A?Symbol.for("react.portal"):60106,D=A?Symbol.for("react.fragment"):60107,E=A?Symbol.for("react.strict_mode"):60108,F=A?Symbol.for("react.profiler"):60114,G=A?Symbol.for("react.provider"):60109,H=A?Symbol.for("react.context"):60110,I=A?Symbol.for("react.forward_ref"):60112,J=A?Symbol.for("react.suspense"):60113,K=A?Symbol.for("react.memo"):60115,L=A?Symbol.for("react.lazy"):60116,M="function"==typeof Symbol&&Symbol.iterator,N=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,Q=function(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de","5"===Object.getOwnPropertyNames(a)[0])return!1;var b={};for(a=0;10>a;a++)b["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;var c={};return"abcdefghijklmnopqrst".split("").forEach(function(a){c[a]=a}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},c)).join("")}catch(a){return!1}}()?Object.assign:function(a,b){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");for(var c,d=Object(a),e=1;e<arguments.length;e++){var f=Object(arguments[e]);for(var g in f)O.call(f,g)&&(d[g]=f[g]);if(N){c=N(f);for(var h=0;h<c.length;h++)P.call(f,c[h])&&(d[c[h]]=f[c[h]])}}return d},R={isMounted:function(a){return!1},enqueueForceUpdate:function(a,b,c){},enqueueReplaceState:function(a,b,c,d){},enqueueSetState:function(a,b,c,d){}},S={};c.prototype.isReactComponent={},c.prototype.setState=function(a,c){if("object"!=typeof a&&"function"!=typeof a&&null!=a)throw Error(b(85));this.updater.enqueueSetState(this,a,c,"setState")},c.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")},d.prototype=c.prototype,A=e.prototype=new d,A.constructor=e,Q(A,c.prototype),
A.isPureReactComponent=!0;var T,U={current:null},V=Object.prototype.hasOwnProperty,W={key:!0,ref:!0,__self:!0,__source:!0},X=/\/+/g,Y=[],Z={current:null};if("undefined"==typeof window||"function"!=typeof MessageChannel){var $=null,_=null,aa=function(){if(null!==$)try{var a=ca();$(!0,a),$=null}catch(a){throw setTimeout(aa,0),a}},ba=Date.now(),ca=function(){return Date.now()-ba},da=function(a){null!==$?setTimeout(da,0,a):($=a,setTimeout(aa,0))},ea=function(a,b){_=setTimeout(a,b)},fa=function(){clearTimeout(_)},ga=function(){return!1};A=T=function(){}}else{var ha=window.performance,ia=window.Date,ja=window.setTimeout,ka=window.clearTimeout;if("undefined"!=typeof console&&(A=window.cancelAnimationFrame,"function"!=typeof window.requestAnimationFrame&&void 0,"function"!=typeof A&&void 0),"object"==typeof ha&&"function"==typeof ha.now)ca=function(){return ha.now()};else{var la=ia.now();ca=function(){return ia.now()-la}}var ma=!1,na=null,oa=-1,pa=5,qa=0;ga=function(){return ca()>=qa},A=function(){},T=function(a){0>a||125<a?void 0:pa=0<a?Math.floor(1e3/a):5};var ra=new MessageChannel,sa=ra.port2;ra.port1.onmessage=function(){if(null!==na){var a=ca();qa=a+pa;try{na(!0,a)?sa.postMessage(null):(ma=!1,na=null)}catch(a){throw sa.postMessage(null),a}}else ma=!1},da=function(a){na=a,ma||(ma=!0,sa.postMessage(null))},ea=function(a,b){oa=ja(function(){a(ca())},b)},fa=function(){ka(oa),oa=-1}}var ta=[],ua=[],va=1,wa=null,xa=3,ya=!1,za=!1,Aa=!1,Ba=0;ra={ReactCurrentDispatcher:Z,ReactCurrentOwner:U,IsSomeRendererActing:{current:!1},assign:Q},Q(ra,{Scheduler:{__proto__:null,unstable_ImmediatePriority:1,unstable_UserBlockingPriority:2,unstable_NormalPriority:3,unstable_IdlePriority:5,unstable_LowPriority:4,unstable_runWithPriority:function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=xa;xa=a;try{return b()}finally{xa=c}},unstable_next:function(a){switch(xa){case 1:case 2:case 3:var b=3;break;default:b=xa}var c=xa;xa=b;try{return a()}finally{xa=c}},unstable_scheduleCallback:function(a,b,c){var d=ca();if("object"==typeof c&&null!==c){var e=c.delay;e="number"==typeof e&&0<e?d+e:d,c="number"==typeof c.timeout?c.timeout:z(a)}else c=z(a),e=d;return c=e+c,a={id:va++,callback:b,priorityLevel:a,startTime:e,expirationTime:c,sortIndex:-1},e>d?(a.sortIndex=e,s(ua,a),null===t(ta)&&a===t(ua)&&(Aa?fa():Aa=!0,ea(x,e-d))):(a.sortIndex=c,s(ta,a),za||ya||(za=!0,da(y))),a},unstable_cancelCallback:function(a){a.callback=null},unstable_wrapCallback:function(a){var b=xa;return function(){var c=xa;xa=b;try{return a.apply(this,arguments)}finally{xa=c}}},unstable_getCurrentPriorityLevel:function(){return xa},unstable_shouldYield:function(){var a=ca();w(a);var b=t(ta);return b!==wa&&null!==wa&&null!==b&&null!==b.callback&&b.startTime<=a&&b.expirationTime<wa.expirationTime||ga()},unstable_requestPaint:A,unstable_continueExecution:function(){za||ya||(za=!0,da(y))},unstable_pauseExecution:function(){},unstable_getFirstCallbackNode:function(){return t(ta)},get unstable_now(){return ca},get unstable_forceFrameRate(){return T},unstable_Profiling:null},SchedulerTracing:{__proto__:null,__interactionsRef:null,__subscriberRef:null,unstable_clear:function(a){return a()},unstable_getCurrent:function(){return null},unstable_getThreadID:function(){return++Ba},unstable_trace:function(a,b,c){return c()},unstable_wrap:function(a){return a},unstable_subscribe:function(a){},unstable_unsubscribe:function(a){}}}),a.Children={map:function(a,b,c){if(null==a)return a;var d=[];return q(a,d,null,b,c),d},forEach:function(a,b,c){return null==a?a:(b=j(null,null,b,c),m(a,o,b),void k(b))},count:function(a){return m(a,function(){return null},null)},toArray:function(a){var b=[];return q(a,b,null,function(a){return a}),b},only:function(a){if(!h(a))throw Error(b(143));return a}},a.Component=c,a.Fragment=D,a.Profiler=F,a.PureComponent=e,a.StrictMode=E,a.Suspense=J,a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ra,a.cloneElement=function(a,c,d){if(null===a||void 0===a)throw Error(b(267,a));var e=Q({},a.props),f=a.key,g=a.ref,h=a._owner;if(null!=c){if(void 0!==c.ref&&(g=c.ref,h=U.current),void 0!==c.key&&(f=""+c.key),a.type&&a.type.defaultProps)var i=a.type.defaultProps;for(j in c)V.call(c,j)&&!W.hasOwnProperty(j)&&(e[j]=void 0===c[j]&&void 0!==i?i[j]:c[j])}var j=arguments.length-2;if(1===j)e.children=d;else if(1<j){i=Array(j);for(var k=0;k<j;k++)i[k]=arguments[k+2];e.children=i}return{$$typeof:B,type:a.type,key:f,ref:g,props:e,_owner:h}},a.createContext=function(a,b){return void 0===b&&(b=null),a={$$typeof:H,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null},a.Provider={$$typeof:G,_context:a},a.Consumer=a},a.createElement=f,a.createFactory=function(a){var b=f.bind(null,a);return b.type=a,b},a.createRef=function(){return{current:null}},a.forwardRef=function(a){return{$$typeof:I,render:a}},a.isValidElement=h,a.lazy=function(a){return{$$typeof:L,_ctor:a,_status:-1,_result:null}},a.memo=function(a,b){return{$$typeof:K,type:a,compare:void 0===b?null:b}},a.useCallback=function(a,b){return r().useCallback(a,b)},a.useContext=function(a,b){return r().useContext(a,b)},a.useDebugValue=function(a,b){},a.useEffect=function(a,b){return r().useEffect(a,b)},a.useImperativeHandle=function(a,b,c){return r().useImperativeHandle(a,b,c)},a.useLayoutEffect=function(a,b){return r().useLayoutEffect(a,b)},a.useMemo=function(a,b){return r().useMemo(a,b)},a.useReducer=function(a,b,c){return r().useReducer(a,b,c)},a.useRef=function(a){return r().useRef(a)},a.useState=function(a){return r().useState(a)},a.version="16.13.1"}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],b):(a=a||self,b(a.ReactDOM={},a.React))}(this,function(a,b){function c(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(a,b,c,d,e,f,g,h,i){Be=!1,Ce=null,Ae.apply(Fe,arguments)}function e(a,b,e,f,g,h,i,j,k){if(d.apply(this,arguments),Be){if(!Be)throw Error(c(198));var l=Ce;Be=!1,Ce=null,De||(De=!0,Ee=l)}}function f(a,b,c){var d=a.type||"unknown-event";a.currentTarget=Ie(c),e(d,b,void 0,a),a.currentTarget=null}function g(){if(Je)for(var a in Ke){var b=Ke[a],d=Je.indexOf(a);if(!(-1<d))throw Error(c(96,a));if(!Le[d]){if(!b.extractEvents)throw Error(c(97,a));Le[d]=b,d=b.eventTypes;for(var e in d){var f=void 0,g=d[e],i=b,j=e;if(Me.hasOwnProperty(j))throw Error(c(99,j));Me[j]=g;var k=g.phasedRegistrationNames;if(k){for(f in k)k.hasOwnProperty(f)&&h(k[f],i,j);f=!0}else g.registrationName?(h(g.registrationName,i,j),f=!0):f=!1;if(!f)throw Error(c(98,e,a))}}}}function h(a,b,d){if(Ne[a])throw Error(c(100,a));Ne[a]=b,Oe[a]=b.eventTypes[d].dependencies}function i(a){var b,d=!1;for(b in a)if(a.hasOwnProperty(b)){var e=a[b];if(!Ke.hasOwnProperty(b)||Ke[b]!==e){if(Ke[b])throw Error(c(102,b));Ke[b]=e,d=!0}}d&&g()}function j(a){if(a=He(a)){if("function"!=typeof Re)throw Error(c(280));var b=a.stateNode;b&&(b=Ge(b),Re(a.stateNode,a.type,b))}}function k(a){Se?Te?Te.push(a):Te=[a]:Se=a}function l(){if(Se){var a=Se,b=Te;if(Te=Se=null,j(a),b)for(a=0;a<b.length;a++)j(b[a])}}function m(){null===Se&&null===Te||(We(),l())}function n(a,b,c){if(Ze)return a(b,c);Ze=!0;try{return Xe(a,b,c)}finally{Ze=!1,m()}}function o(a){return!!nf.call(pf,a)||!nf.call(of,a)&&(mf.test(a)?pf[a]=!0:(of[a]=!0,!1))}function p(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case"function":case"symbol":return!0;case"boolean":return!d&&(null!==c?!c.acceptsBooleans:(a=a.toLowerCase().slice(0,5),"data-"!==a&&"aria-"!==a));default:return!1}}function q(a,b,c,d){if(null===b||"undefined"==typeof b||p(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function r(a,b,c,d,e,f){this.acceptsBooleans=2===b||3===b||4===b,this.attributeName=d,this.attributeNamespace=e,this.mustUseProperty=c,this.propertyName=a,this.type=b,this.sanitizeURL=f}function s(a,b,c,d){var e=qf.hasOwnProperty(b)?qf[b]:null,f=null!==e?0===e.type:!d&&(2<b.length&&("o"===b[0]||"O"===b[0])&&("n"===b[1]||"N"===b[1]));f||(q(b,c,e,d)&&(c=null),d||null===e?o(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,""+c)):e.mustUseProperty?a[e.propertyName]=null===c?3!==e.type&&"":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?"":""+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}function t(a){return null===a||"object"!=typeof a?null:(a=Lf&&a[Lf]||a["@@iterator"],"function"==typeof a?a:null)}function u(a){if(-1===a._status){a._status=0;var b=a._ctor;b=b(),a._result=b,b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)})}}function v(a){if(null==a)return null;if("function"==typeof a)return a.displayName||a.name||null;if("string"==typeof a)return a;switch(a){case zf:return"Fragment";case yf:return"Portal";case Bf:return"Profiler";case Af:return"StrictMode";case Gf:return"Suspense";case Hf:return"SuspenseList"}if("object"==typeof a)switch(a.$$typeof){case Df:return"Context.Consumer";case Cf:return"Context.Provider";case Ff:var b=a.render;return b=b.displayName||b.name||"",a.displayName||(""!==b?"ForwardRef("+b+")":"ForwardRef");case If:return v(a.type);case Kf:return v(a.render);case Jf:if(a=1===a._status?a._result:null)return v(a)}return null}function w(a){var b="";do{a:switch(a.tag){case 3:case 4:case 6:case 7:case 10:case 9:var c="";break a;default:var d=a._debugOwner,e=a._debugSource,f=v(a.type);c=null,d&&(c=v(d.type)),d=f,f="",e?f=" (at "+e.fileName.replace(vf,"")+":"+e.lineNumber+")":c&&(f=" (created by "+c+")"),c="\n    in "+(d||"Unknown")+f}b+=c,a=a.return}while(a);return b}function x(a){switch(typeof a){case"boolean":case"number":case"object":case"string":case"undefined":return a;default:return""}}function y(a){var b=a.type;return(a=a.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===b||"radio"===b)}function z(a){var b=y(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=""+a[b];if(!a.hasOwnProperty(b)&&"undefined"!=typeof c&&"function"==typeof c.get&&"function"==typeof c.set){var e=c.get,f=c.set;return Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=""+a,f.call(this,a)}}),Object.defineProperty(a,b,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(a){d=""+a},stopTracking:function(){a._valueTracker=null,delete a[b]}}}}function A(a){a._valueTracker||(a._valueTracker=z(a))}function B(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue(),d="";return a&&(d=y(a)?a.checked?"true":"false":a.value),a=d,a!==c&&(b.setValue(a),!0)}function C(a,b){var c=b.checked;return Qe({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function D(a,b){var c=null==b.defaultValue?"":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=x(null!=b.value?b.value:c),a._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===b.type||"radio"===b.type?null!=b.checked:null!=b.value}}function E(a,b){b=b.checked,null!=b&&s(a,"checked",b,!1)}function F(a,b){E(a,b);var c=x(b.value),d=b.type;if(null!=c)"number"===d?(0===c&&""===a.value||a.value!=c)&&(a.value=""+c):a.value!==""+c&&(a.value=""+c);else if("submit"===d||"reset"===d)return void a.removeAttribute("value");b.hasOwnProperty("value")?H(a,b.type,c):b.hasOwnProperty("defaultValue")&&H(a,b.type,x(b.defaultValue)),null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}function G(a,b,c){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var d=b.type;if(!("submit"!==d&&"reset"!==d||void 0!==b.value&&null!==b.value))return;b=""+a._wrapperState.initialValue,c||b===a.value||(a.value=b),a.defaultValue=b}c=a.name,""!==c&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,""!==c&&(a.name=c)}function H(a,b,c){"number"===b&&a.ownerDocument.activeElement===a||(null==c?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c))}function I(a){var c="";return b.Children.forEach(a,function(a){null!=a&&(c+=a)}),c}function J(a,b){return a=Qe({children:void 0},b),(b=I(b.children))&&(a.children=b),a}function K(a,b,c,d){if(a=a.options,b){b={};for(var e=0;e<c.length;e++)b["$"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty("$"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{for(c=""+x(c),b=null,e=0;e<a.length;e++){if(a[e].value===c)return a[e].selected=!0,void(d&&(a[e].defaultSelected=!0));null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}function L(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(c(91));return Qe({},b,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function M(a,b){var d=b.value;if(null==d){if(d=b.children,b=b.defaultValue,null!=d){if(null!=b)throw Error(c(92));if(Array.isArray(d)){if(!(1>=d.length))throw Error(c(93));d=d[0]}b=d}null==b&&(b=""),d=b}a._wrapperState={initialValue:x(d)}}function N(a,b){var c=x(b.value),d=x(b.defaultValue);null!=c&&(c=""+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c)),null!=d&&(a.defaultValue=""+d)}function O(a,b){b=a.textContent,b===a._wrapperState.initialValue&&""!==b&&null!==b&&(a.value=b)}function P(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Q(a,b){return null==a||"http://www.w3.org/1999/xhtml"===a?P(b):"http://www.w3.org/2000/svg"===a&&"foreignObject"===b?"http://www.w3.org/1999/xhtml":a}function R(a,b){var c={};return c[a.toLowerCase()]=b.toLowerCase(),c["Webkit"+a]="webkit"+b,c["Moz"+a]="moz"+b,c}function S(a){if(Pf[a])return Pf[a];if(!Of[a])return a;var b,c=Of[a];for(b in c)if(c.hasOwnProperty(b)&&b in Qf)return Pf[a]=c[b];return a}function T(a){var b=Wf.get(a);return void 0===b&&(b=new Map,Wf.set(a,b)),b}function U(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(1026&b.effectTag)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function V(a){if(13===a.tag){var b=a.memoizedState;if(null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState)),null!==b)return b.dehydrated}return null}function W(a){if(U(a)!==a)throw Error(c(188))}function X(a){var b=a.alternate;if(!b){if(b=U(a),null===b)throw Error(c(188));return b!==a?null:a}for(var d=a,e=b;;){var f=d.return;if(null===f)break;var g=f.alternate;if(null===g){if(e=f.return,null!==e){d=e;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===d)return W(f),a;if(g===e)return W(f),b;g=g.sibling}throw Error(c(188))}if(d.return!==e.return)d=f,e=g;else{for(var h=!1,i=f.child;i;){if(i===d){h=!0,d=f,e=g;break}if(i===e){h=!0,e=f,d=g;break}i=i.sibling}if(!h){for(i=g.child;i;){if(i===d){h=!0,d=g,e=f;break}if(i===e){h=!0,e=g,d=f;break}i=i.sibling}if(!h)throw Error(c(189))}}if(d.alternate!==e)throw Error(c(190))}if(3!==d.tag)throw Error(c(188));return d.stateNode.current===d?a:b}function Y(a){if(a=X(a),!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}}return null}function Z(a,b){if(null==b)throw Error(c(30));return null==a?b:Array.isArray(a)?Array.isArray(b)?(a.push.apply(a,b),a):(a.push(b),a):Array.isArray(b)?[a].concat(b):[a,b]}function $(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}function _(a){if(null!==a&&(Xf=Z(Xf,a)),a=Xf,Xf=null,a){if($(a,Yf),Xf)throw Error(c(95));if(De)throw a=Ee,De=!1,Ee=null,a}}function aa(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),3===a.nodeType?a.parentNode:a}function ba(a){if(!Pe)return!1;a="on"+a;var b=a in document;return b||(b=document.createElement("div"),b.setAttribute(a,"return;"),b="function"==typeof b[a]),b}function ca(a){a.topLevelType=null,a.nativeEvent=null,a.targetInst=null,a.ancestors.length=0,10>Zf.length&&Zf.push(a)}function da(a,b,c,d){if(Zf.length){var e=Zf.pop();return e.topLevelType=a,e.eventSystemFlags=d,e.nativeEvent=b,e.targetInst=c,e}return{topLevelType:a,eventSystemFlags:d,nativeEvent:b,targetInst:c,ancestors:[]}}function ea(a){var b=a.targetInst,c=b;do{if(!c){a.ancestors.push(c);break}var d=c;if(3===d.tag)d=d.stateNode.containerInfo;else{for(;d.return;)d=d.return;d=3!==d.tag?null:d.stateNode.containerInfo}if(!d)break;b=c.tag,5!==b&&6!==b||a.ancestors.push(c),c=Oa(d)}while(c);for(c=0;c<a.ancestors.length;c++){b=a.ancestors[c];var e=aa(a.nativeEvent);d=a.topLevelType;var f=a.nativeEvent,g=a.eventSystemFlags;0===c&&(g|=64);for(var h=null,i=0;i<Le.length;i++){var j=Le[i];j&&(j=j.extractEvents(d,b,f,e,g))&&(h=Z(h,j))}_(h)}}function fa(a,b,c){if(!c.has(a)){switch(a){case"scroll":ta(b,"scroll",!0);break;case"focus":case"blur":ta(b,"focus",!0),ta(b,"blur",!0),c.set("blur",null),c.set("focus",null);break;case"cancel":case"close":ba(a)&&ta(b,a,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Vf.indexOf(a)&&sa(a,b)}c.set(a,null)}}function ga(a,b){var c=T(b);gg.forEach(function(a){fa(a,b,c)}),hg.forEach(function(a){fa(a,b,c)})}function ha(a,b,c,d,e){return{blockedOn:a,topLevelType:b,eventSystemFlags:32|c,nativeEvent:e,container:d}}function ia(a,b){switch(a){case"focus":case"blur":ag=null;break;case"dragenter":case"dragleave":bg=null;break;case"mouseover":case"mouseout":cg=null;break;case"pointerover":case"pointerout":dg.delete(b.pointerId);break;case"gotpointercapture":case"lostpointercapture":eg.delete(b.pointerId)}}function ja(a,b,c,d,e,f){return null===a||a.nativeEvent!==f?(a=ha(b,c,d,e,f),null!==b&&(b=Pa(b),null!==b&&Aj(b)),a):(a.eventSystemFlags|=d,a)}function ka(a,b,c,d,e){switch(b){case"focus":return ag=ja(ag,a,b,c,d,e),!0;case"dragenter":return bg=ja(bg,a,b,c,d,e),!0;case"mouseover":return cg=ja(cg,a,b,c,d,e),!0;case"pointerover":var f=e.pointerId;return dg.set(f,ja(dg.get(f)||null,a,b,c,d,e)),!0;case"gotpointercapture":return f=e.pointerId,eg.set(f,ja(eg.get(f)||null,a,b,c,d,e)),!0}return!1}function la(a){var b=Oa(a.target);if(null!==b){var c=U(b);if(null!==c)if(b=c.tag,13===b){if(b=V(c),null!==b)return a.blockedOn=b,void ef(a.priority,function(){Bj(c)})}else if(3===b&&c.stateNode.hydrate)return void(a.blockedOn=3===c.tag?c.stateNode.containerInfo:null)}a.blockedOn=null}function ma(a){if(null!==a.blockedOn)return!1;var b=xa(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);if(null!==b){var c=Pa(b);return null!==c&&Aj(c),a.blockedOn=b,!1}return!0}function na(a,b,c){ma(a)&&c.delete(b)}function oa(){for($f=!1;0<_f.length;){var a=_f[0];if(null!==a.blockedOn){a=Pa(a.blockedOn),null!==a&&zj(a);break}var b=xa(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);null!==b?a.blockedOn=b:_f.shift()}null!==ag&&ma(ag)&&(ag=null),null!==bg&&ma(bg)&&(bg=null),null!==cg&&ma(cg)&&(cg=null),dg.forEach(na),eg.forEach(na)}function pa(a,b){a.blockedOn===b&&(a.blockedOn=null,$f||($f=!0,bf(jf,oa)))}function qa(a){if(0<_f.length){pa(_f[0],a);for(var b=1;b<_f.length;b++){var c=_f[b];c.blockedOn===a&&(c.blockedOn=null)}}for(null!==ag&&pa(ag,a),null!==bg&&pa(bg,a),null!==cg&&pa(cg,a),b=function(b){return pa(b,a)},dg.forEach(b),eg.forEach(b),b=0;b<fg.length;b++)c=fg[b],c.blockedOn===a&&(c.blockedOn=null);for(;0<fg.length&&(b=fg[0],null===b.blockedOn);)la(b),null===b.blockedOn&&fg.shift()}function ra(a,b){for(var c=0;c<a.length;c+=2){var d=a[c],e=a[c+1],f="on"+(e[0].toUpperCase()+e.slice(1));f={phasedRegistrationNames:{bubbled:f,captured:f+"Capture"},dependencies:[d],eventPriority:b},kg.set(d,b),jg.set(d,f),ig[e]=f}}function sa(a,b){ta(b,a,!1)}function ta(a,b,c){var d=kg.get(b);switch(void 0===d?2:d){case 0:d=ua.bind(null,b,1,a);break;case 1:d=va.bind(null,b,1,a);break;default:d=wa.bind(null,b,1,a)}c?a.addEventListener(b,d,!0):a.addEventListener(b,d,!1)}function ua(a,b,c,d){Ye||We();var e=wa,f=Ye;Ye=!0;try{Ve(e,a,b,c,d)}finally{(Ye=f)||m()}}function va(a,b,c,d){ng(mg,wa.bind(null,a,b,c,d))}function wa(a,b,c,d){if(og)if(0<_f.length&&-1<gg.indexOf(a))a=ha(null,a,b,c,d),_f.push(a);else{var e=xa(a,b,c,d);if(null===e)ia(a,d);else if(-1<gg.indexOf(a))a=ha(e,a,b,c,d),_f.push(a);else if(!ka(e,a,b,c,d)){ia(a,d),a=da(a,d,null,b);try{n(ea,a)}finally{ca(a)}}}}function xa(a,b,c,d){if(c=aa(d),c=Oa(c),null!==c){var e=U(c);if(null===e)c=null;else{var f=e.tag;if(13===f){if(c=V(e),null!==c)return c;c=null}else if(3===f){if(e.stateNode.hydrate)return 3===e.tag?e.stateNode.containerInfo:null;c=null}else e!==c&&(c=null)}}a=da(a,d,c,b);try{n(ea,a)}finally{ca(a)}return null}function ya(a,b,c){return null==b||"boolean"==typeof b||""===b?"":c||"number"!=typeof b||0===b||pg.hasOwnProperty(a)&&pg[a]?(""+b).trim():b+"px"}function za(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf("--"),e=ya(c,b[c],d);"float"===c&&(c="cssFloat"),d?a.setProperty(c,e):a[c]=e}}function Aa(a,b){if(b){if(rg[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(c(137,a,""));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(c(60));if(!("object"==typeof b.dangerouslySetInnerHTML&&"__html"in b.dangerouslySetInnerHTML))throw Error(c(61))}if(null!=b.style&&"object"!=typeof b.style)throw Error(c(62,""))}}function Ba(a,b){if(-1===a.indexOf("-"))return"string"==typeof b.is;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Ca(a,b){a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument;var c=T(a);b=Oe[b];for(var d=0;d<b.length;d++)fa(b[d],a,c)}function Da(){}function Ea(a){if(a=a||("undefined"!=typeof document?document:void 0),"undefined"==typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}function Fa(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ga(a,b){var c=Fa(a);a=0;for(var d;c;){if(3===c.nodeType){if(d=a+c.textContent.length,a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Fa(c)}}function Ha(a,b){return!(!a||!b)&&(a===b||(!a||3!==a.nodeType)&&(b&&3===b.nodeType?Ha(a,b.parentNode):"contains"in a?a.contains(b):!!a.compareDocumentPosition&&!!(16&a.compareDocumentPosition(b))))}function Ia(){for(var a=window,b=Ea();b instanceof a.HTMLIFrameElement;){try{var c="string"==typeof b.contentWindow.location.href}catch(a){c=!1}if(!c)break;a=b.contentWindow,b=Ea(a.document)}return b}function Ja(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&("input"===b&&("text"===a.type||"search"===a.type||"tel"===a.type||"url"===a.type||"password"===a.type)||"textarea"===b||"true"===a.contentEditable)}function Ka(a,b){switch(a){case"button":case"input":case"select":case"textarea":return!!b.autoFocus}return!1}function La(a,b){return"textarea"===a||"option"===a||"noscript"===a||"string"==typeof b.children||"number"==typeof b.children||"object"==typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}function Ma(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}function Na(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(c===sg||c===vg||c===ug){if(0===b)return a;b--}else c===tg&&b++}a=a.previousSibling}return null}function Oa(a){var b=a[Bg];if(b)return b;for(var c=a.parentNode;c;){if(b=c[Dg]||c[Bg]){if(c=b.alternate,null!==b.child||null!==c&&null!==c.child)for(a=Na(a);null!==a;){if(c=a[Bg])return c;a=Na(a)}return b}a=c,c=a.parentNode}return null}function Pa(a){return a=a[Bg]||a[Dg],!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function Qa(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(c(33))}function Ra(a){return a[Cg]||null}function Sa(a){do a=a.return;while(a&&5!==a.tag);return a?a:null}function Ta(a,b){var d=a.stateNode;if(!d)return null;var e=Ge(d);if(!e)return null;d=e[b];a:switch(b){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(e=!e.disabled)||(a=a.type,e=!("button"===a||"input"===a||"select"===a||"textarea"===a)),a=!e;break a;default:a=!1}if(a)return null;if(d&&"function"!=typeof d)throw Error(c(231,b,typeof d));return d}function Ua(a,b,c){(b=Ta(a,c.dispatchConfig.phasedRegistrationNames[b]))&&(c._dispatchListeners=Z(c._dispatchListeners,b),c._dispatchInstances=Z(c._dispatchInstances,a))}function Va(a){if(a&&a.dispatchConfig.phasedRegistrationNames){for(var b=a._targetInst,c=[];b;)c.push(b),b=Sa(b);for(b=c.length;0<b--;)Ua(c[b],"captured",a);for(b=0;b<c.length;b++)Ua(c[b],"bubbled",a)}}function Wa(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=Ta(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=Z(c._dispatchListeners,b),c._dispatchInstances=Z(c._dispatchInstances,a))}function Xa(a){a&&a.dispatchConfig.registrationName&&Wa(a._targetInst,null,a)}function Ya(a){$(a,Va)}function Za(){if(Gg)return Gg;var a,b,c=Fg,d=c.length,e="value"in Eg?Eg.value:Eg.textContent,f=e.length;for(a=0;a<d&&c[a]===e[a];a++);var g=d-a;for(b=1;b<=g&&c[d-b]===e[f-b];b++);return Gg=e.slice(a,1<b?1-b:void 0)}function $a(){return!0}function _a(){return!1}function ab(a,b,c,d){this.dispatchConfig=a,this._targetInst=b,this.nativeEvent=c,a=this.constructor.Interface;for(var e in a)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):"target"===e?this.target=d:this[e]=c[e]);return this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?$a:_a,this.isPropagationStopped=_a,this}function bb(a,b,c,d){if(this.eventPool.length){var e=this.eventPool.pop();return this.call(e,a,b,c,d),e}return new this(a,b,c,d)}function cb(a){if(!(a instanceof this))throw Error(c(279));a.destructor(),10>this.eventPool.length&&this.eventPool.push(a)}function db(a){a.eventPool=[],a.getPooled=bb,a.release=cb}function eb(a,b){switch(a){case"keyup":return-1!==Jg.indexOf(b.keyCode);case"keydown":return 229!==b.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function fb(a){return a=a.detail,"object"==typeof a&&"data"in a?a.data:null}function gb(a,b){switch(a){case"compositionend":return fb(b);case"keypress":return 32!==b.which?null:(Qg=!0,Og);case"textInput":return a=b.data,a===Og&&Qg?null:a;default:return null}}function hb(a,b){if(Rg)return"compositionend"===a||!Kg&&eb(a,b)?(a=Za(),Gg=Fg=Eg=null,Rg=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case"compositionend":return Ng&&"ko"!==b.locale?null:b.data;default:return null}}function ib(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return"input"===b?!!Tg[a.type]:"textarea"===b}function jb(a,b,c){return a=ab.getPooled(Ug.change,a,b,c),a.type="change",k(c),Ya(a),a}function kb(a){_(a)}function lb(a){var b=Qa(a);if(B(b))return a}function mb(a,b){if("change"===a)return b}function nb(){Vg&&(Vg.detachEvent("onpropertychange",ob),Wg=Vg=null)}function ob(a){if("value"===a.propertyName&&lb(Wg))if(a=jb(Wg,a,aa(a)),Ye)_(a);else{Ye=!0;try{Ue(kb,a)}finally{Ye=!1,m()}}}function pb(a,b,c){"focus"===a?(nb(),Vg=b,Wg=c,Vg.attachEvent("onpropertychange",ob)):"blur"===a&&nb()}function qb(a,b){if("selectionchange"===a||"keyup"===a||"keydown"===a)return lb(Wg)}function rb(a,b){if("click"===a)return lb(b)}function sb(a,b){if("input"===a||"change"===a)return lb(b)}function tb(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):!!(a=$g[a])&&!!b[a]}function ub(a){return tb}function vb(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}function wb(a,b){if(hh(a,b))return!0;if("object"!=typeof a||null===a||"object"!=typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!ih.call(b,c[d])||!hh(a[c[d]],b[c[d]]))return!1;return!0}function xb(a,b){var c=b.window===b?b.document:9===b.nodeType?b:b.ownerDocument;return oh||null==lh||lh!==Ea(c)?null:(c=lh,"selectionStart"in c&&Ja(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),nh&&wb(nh,c)?null:(nh=c,a=ab.getPooled(kh.select,mh,a,b),a.type="select",a.target=lh,Ya(a),a))}function yb(a){var b=a.keyCode;return"charCode"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b,10===a&&(a=13),32<=a||13===a?a:0}function zb(a,b){0>Ch||(a.current=Bh[Ch],Bh[Ch]=null,Ch--)}function Ab(a,b,c){Ch++,Bh[Ch]=a.current,a.current=b}function Bb(a,b){var c=a.type.contextTypes;if(!c)return Dh;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e,f={};for(e in c)f[e]=b[e];return d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=f),f}function Cb(a){return a=a.childContextTypes,null!==a&&void 0!==a}function Db(a,b,d){if(Eh.current!==Dh)throw Error(c(168));Ab(Eh,b),Ab(Fh,d)}function Eb(a,b,d){var e=a.stateNode;if(a=b.childContextTypes,"function"!=typeof e.getChildContext)return d;e=e.getChildContext();for(var f in e)if(!(f in a))throw Error(c(108,v(b)||"Unknown",f));return Qe({},d,{},e)}function Fb(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Dh,Gh=Eh.current,Ab(Eh,a),Ab(Fh,Fh.current),!0}function Gb(a,b,d){var e=a.stateNode;if(!e)throw Error(c(169));d?(a=Eb(a,b,Gh),e.__reactInternalMemoizedMergedChildContext=a,zb(Fh),zb(Eh),Ab(Eh,a)):zb(Fh),Ab(Fh,d)}function Hb(){switch(Kh()){case Lh:return 99;case Mh:return 98;case Nh:return 97;case Oh:return 96;case Ph:return 95;default:throw Error(c(332))}}function Ib(a){switch(a){case 99:return Lh;case 98:return Mh;case 97:return Nh;case 96:return Oh;case 95:return Ph;default:throw Error(c(332))}}function Jb(a,b){return a=Ib(a),Hh(a,b)}function Kb(a,b,c){return a=Ib(a),Ih(a,b,c)}function Lb(a){return null===Th?(Th=[a],Uh=Ih(Lh,Nb)):Th.push(a),Qh}function Mb(){if(null!==Uh){var a=Uh;Uh=null,Jh(a)}Nb()}function Nb(){if(!Vh&&null!==Th){Vh=!0;var a=0;try{var b=Th;Jb(99,function(){for(;a<b.length;a++){var c=b[a];do c=c(!0);while(null!==c)}}),Th=null}catch(b){throw null!==Th&&(Th=Th.slice(a+1)),Ih(Lh,Mb),b}finally{Vh=!1}}}function Ob(a,b,c){return c/=10,1073741821-(((1073741821-a+b/10)/c|0)+1)*c}function Pb(a,b){if(a&&a.defaultProps){b=Qe({},b),a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c])}return b}function Qb(){_h=$h=Zh=null}function Rb(a){var b=Yh.current;zb(Yh),a.type._context._currentValue=b}function Sb(a,b){for(;null!==a;){var c=a.alternate;if(a.childExpirationTime<b)a.childExpirationTime=b,null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);else{if(!(null!==c&&c.childExpirationTime<b))break;c.childExpirationTime=b}a=a.return}}function Tb(a,b){Zh=a,_h=$h=null,a=a.dependencies,null!==a&&null!==a.firstContext&&(a.expirationTime>=b&&(Di=!0),a.firstContext=null)}function Ub(a,b){if(_h!==a&&!1!==b&&0!==b)if("number"==typeof b&&1073741823!==b||(_h=a,b=1073741823),b={context:a,observedBits:b,next:null},null===$h){if(null===Zh)throw Error(c(308));$h=b,Zh.dependencies={expirationTime:0,firstContext:b,responders:null}}else $h=$h.next=b;return a._currentValue}function Vb(a){a.updateQueue={baseState:a.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function Wb(a,b){a=a.updateQueue,b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,
baseQueue:a.baseQueue,shared:a.shared,effects:a.effects})}function Xb(a,b){return a={expirationTime:a,suspenseConfig:b,tag:ai,payload:null,callback:null,next:null},a.next=a}function Yb(a,b){if(a=a.updateQueue,null!==a){a=a.shared;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b),a.pending=b}}function Zb(a,b){var c=a.alternate;null!==c&&Wb(c,a),a=a.updateQueue,c=a.baseQueue,null===c?(a.baseQueue=b.next=b,b.next=b):(b.next=c.next,c.next=b)}function $b(a,b,c,d){var e=a.updateQueue;ci=!1;var f=e.baseQueue,g=e.shared.pending;if(null!==g){if(null!==f){var h=f.next;f.next=g.next,g.next=h}f=g,e.shared.pending=null,h=a.alternate,null!==h&&(h=h.updateQueue,null!==h&&(h.baseQueue=g))}if(null!==f){h=f.next;var i=e.baseState,j=0,k=null,l=null,m=null;if(null!==h)for(var n=h;;){if(g=n.expirationTime,g<d){var o={expirationTime:n.expirationTime,suspenseConfig:n.suspenseConfig,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===m?(l=m=o,k=i):m=m.next=o,g>j&&(j=g)}else{null!==m&&(m=m.next={expirationTime:1073741823,suspenseConfig:n.suspenseConfig,tag:n.tag,payload:n.payload,callback:n.callback,next:null}),Od(g,n.suspenseConfig);a:{var p=a,q=n;switch(g=b,o=c,q.tag){case 1:if(p=q.payload,"function"==typeof p){i=p.call(o,i,g);break a}i=p;break a;case 3:p.effectTag=p.effectTag&-4097|64;case ai:if(p=q.payload,g="function"==typeof p?p.call(o,i,g):p,null===g||void 0===g)break a;i=Qe({},i,g);break a;case bi:ci=!0}}null!==n.callback&&(a.effectTag|=32,g=e.effects,null===g?e.effects=[n]:g.push(n))}if(n=n.next,null===n||n===h){if(g=e.shared.pending,null===g)break;n=f.next=g.next,g.next=h,e.baseQueue=f=g,e.shared.pending=null}}null===m?k=i:m.next=l,e.baseState=k,e.baseQueue=m,Pd(j),a.expirationTime=j,a.memoizedState=i}}function _b(a,b,d){if(a=b.effects,b.effects=null,null!==a)for(b=0;b<a.length;b++){var e=a[b],f=e.callback;if(null!==f){if(e.callback=null,e=f,f=d,"function"!=typeof e)throw Error(c(191,e));e.call(f)}}}function ac(a,b,c,d){b=a.memoizedState,c=c(d,b),c=null===c||void 0===c?b:Qe({},b,c),a.memoizedState=c,0===a.expirationTime&&(a.updateQueue.baseState=c)}function bc(a,b,c,d,e,f,g){return a=a.stateNode,"function"==typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):!b.prototype||!b.prototype.isPureReactComponent||(!wb(c,d)||!wb(e,f))}function cc(a,b,c){var d=!1,e=Dh,f=b.contextType;return"object"==typeof f&&null!==f?f=Ub(f):(e=Cb(b)?Gh:Eh.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?Bb(a,e):Dh),b=new b(c,f),a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null,b.updater=fi,a.stateNode=b,b._reactInternalFiber=a,d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f),b}function dc(a,b,c,d){a=b.state,"function"==typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d),"function"==typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d),b.state!==a&&fi.enqueueReplaceState(b,b.state,null)}function ec(a,b,c,d){var e=a.stateNode;e.props=c,e.state=a.memoizedState,e.refs=ei,Vb(a);var f=b.contextType;"object"==typeof f&&null!==f?e.context=Ub(f):(f=Cb(b)?Gh:Eh.current,e.context=Bb(a,f)),$b(a,c,e,d),e.state=a.memoizedState,f=b.getDerivedStateFromProps,"function"==typeof f&&(ac(a,b,f,c),e.state=a.memoizedState),"function"==typeof b.getDerivedStateFromProps||"function"==typeof e.getSnapshotBeforeUpdate||"function"!=typeof e.UNSAFE_componentWillMount&&"function"!=typeof e.componentWillMount||(b=e.state,"function"==typeof e.componentWillMount&&e.componentWillMount(),"function"==typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&fi.enqueueReplaceState(e,e.state,null),$b(a,c,e,d),e.state=a.memoizedState),"function"==typeof e.componentDidMount&&(a.effectTag|=4)}function fc(a,b,d){if(a=d.ref,null!==a&&"function"!=typeof a&&"object"!=typeof a){if(d._owner){if(d=d._owner){if(1!==d.tag)throw Error(c(309));var e=d.stateNode}if(!e)throw Error(c(147,a));var f=""+a;return null!==b&&null!==b.ref&&"function"==typeof b.ref&&b.ref._stringRef===f?b.ref:(b=function(a){var b=e.refs;b===ei&&(b=e.refs={}),null===a?delete b[f]:b[f]=a},b._stringRef=f,b)}if("string"!=typeof a)throw Error(c(284));if(!d._owner)throw Error(c(290,a))}return a}function gc(a,b){if("textarea"!==a.type)throw Error(c(31,"[object Object]"===Object.prototype.toString.call(b)?"object with keys {"+Object.keys(b).join(", ")+"}":b,""))}function hc(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c,c.nextEffect=null,c.effectTag=8}}function d(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function e(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function f(a,b){return a=ge(a,b),a.index=0,a.sibling=null,a}function g(b,c,d){return b.index=d,a?(d=b.alternate,null!==d?(d=d.index,d<c?(b.effectTag=2,c):d):(b.effectTag=2,c)):c}function h(b){return a&&null===b.alternate&&(b.effectTag=2),b}function i(a,b,c,d){return null===b||6!==b.tag?(b=je(c,a.mode,d),b.return=a,b):(b=f(b,c),b.return=a,b)}function j(a,b,c,d){return null!==b&&b.elementType===c.type?(d=f(b,c.props),d.ref=fc(a,b,c),d.return=a,d):(d=he(c.type,c.key,c.props,null,a.mode,d),d.ref=fc(a,b,c),d.return=a,d)}function k(a,b,c,d){return null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation?(b=ke(c,a.mode,d),b.return=a,b):(b=f(b,c.children||[]),b.return=a,b)}function l(a,b,c,d,e){return null===b||7!==b.tag?(b=ie(c,a.mode,d,e),b.return=a,b):(b=f(b,c),b.return=a,b)}function m(a,b,c){if("string"==typeof b||"number"==typeof b)return b=je(""+b,a.mode,c),b.return=a,b;if("object"==typeof b&&null!==b){switch(b.$$typeof){case xf:return c=he(b.type,b.key,b.props,null,a.mode,c),c.ref=fc(a,null,b),c.return=a,c;case yf:return b=ke(b,a.mode,c),b.return=a,b}if(gi(b)||t(b))return b=ie(b,a.mode,c,null),b.return=a,b;gc(a,b)}return null}function n(a,b,c,d){var e=null!==b?b.key:null;if("string"==typeof c||"number"==typeof c)return null!==e?null:i(a,b,""+c,d);if("object"==typeof c&&null!==c){switch(c.$$typeof){case xf:return c.key===e?c.type===zf?l(a,b,c.props.children,d,e):j(a,b,c,d):null;case yf:return c.key===e?k(a,b,c,d):null}if(gi(c)||t(c))return null!==e?null:l(a,b,c,d,null);gc(a,c)}return null}function o(a,b,c,d,e){if("string"==typeof d||"number"==typeof d)return a=a.get(c)||null,i(b,a,""+d,e);if("object"==typeof d&&null!==d){switch(d.$$typeof){case xf:return a=a.get(null===d.key?c:d.key)||null,d.type===zf?l(b,a,d.props.children,e,d.key):j(b,a,d,e);case yf:return a=a.get(null===d.key?c:d.key)||null,k(b,a,d,e)}if(gi(d)||t(d))return a=a.get(c)||null,l(b,a,d,e,null);gc(b,d)}return null}function p(c,f,h,i){for(var j=null,k=null,l=f,p=f=0,q=null;null!==l&&p<h.length;p++){l.index>p?(q=l,l=null):q=l.sibling;var r=n(c,l,h[p],i);if(null===r){null===l&&(l=q);break}a&&l&&null===r.alternate&&b(c,l),f=g(r,f,p),null===k?j=r:k.sibling=r,k=r,l=q}if(p===h.length)return d(c,l),j;if(null===l){for(;p<h.length;p++)l=m(c,h[p],i),null!==l&&(f=g(l,f,p),null===k?j=l:k.sibling=l,k=l);return j}for(l=e(c,l);p<h.length;p++)q=o(l,c,p,h[p],i),null!==q&&(a&&null!==q.alternate&&l.delete(null===q.key?p:q.key),f=g(q,f,p),null===k?j=q:k.sibling=q,k=q);return a&&l.forEach(function(a){return b(c,a)}),j}function q(f,h,i,j){var k=t(i);if("function"!=typeof k)throw Error(c(150));if(i=k.call(i),null==i)throw Error(c(151));for(var l=k=null,p=h,q=h=0,r=null,s=i.next();null!==p&&!s.done;q++,s=i.next()){p.index>q?(r=p,p=null):r=p.sibling;var u=n(f,p,s.value,j);if(null===u){null===p&&(p=r);break}a&&p&&null===u.alternate&&b(f,p),h=g(u,h,q),null===l?k=u:l.sibling=u,l=u,p=r}if(s.done)return d(f,p),k;if(null===p){for(;!s.done;q++,s=i.next())s=m(f,s.value,j),null!==s&&(h=g(s,h,q),null===l?k=s:l.sibling=s,l=s);return k}for(p=e(f,p);!s.done;q++,s=i.next())s=o(p,f,q,s.value,j),null!==s&&(a&&null!==s.alternate&&p.delete(null===s.key?q:s.key),h=g(s,h,q),null===l?k=s:l.sibling=s,l=s);return a&&p.forEach(function(a){return b(f,a)}),k}return function(a,e,g,i){var j="object"==typeof g&&null!==g&&g.type===zf&&null===g.key;j&&(g=g.props.children);var k="object"==typeof g&&null!==g;if(k)switch(g.$$typeof){case xf:a:{for(k=g.key,j=e;null!==j;){if(j.key===k){switch(j.tag){case 7:if(g.type===zf){d(a,j.sibling),e=f(j,g.props.children),e.return=a,a=e;break a}break;default:if(j.elementType===g.type){d(a,j.sibling),e=f(j,g.props),e.ref=fc(a,j,g),e.return=a,a=e;break a}}d(a,j);break}b(a,j),j=j.sibling}g.type===zf?(e=ie(g.props.children,a.mode,i,g.key),e.return=a,a=e):(i=he(g.type,g.key,g.props,null,a.mode,i),i.ref=fc(a,e,g),i.return=a,a=i)}return h(a);case yf:a:{for(j=g.key;null!==e;){if(e.key===j){if(4===e.tag&&e.stateNode.containerInfo===g.containerInfo&&e.stateNode.implementation===g.implementation){d(a,e.sibling),e=f(e,g.children||[]),e.return=a,a=e;break a}d(a,e);break}b(a,e),e=e.sibling}e=ke(g,a.mode,i),e.return=a,a=e}return h(a)}if("string"==typeof g||"number"==typeof g)return g=""+g,null!==e&&6===e.tag?(d(a,e.sibling),e=f(e,g),e.return=a,a=e):(d(a,e),e=je(g,a.mode,i),e.return=a,a=e),h(a);if(gi(g))return p(a,e,g,i);if(t(g))return q(a,e,g,i);if(k&&gc(a,g),"undefined"==typeof g&&!j)switch(a.tag){case 1:case 0:throw a=a.type,Error(c(152,a.displayName||a.name||"Component"))}return d(a,e)}}function ic(a){if(a===ji)throw Error(c(174));return a}function jc(a,b){switch(Ab(mi,b),Ab(li,a),Ab(ki,ji),a=b.nodeType){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:Q(null,"");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=Q(b,a)}zb(ki),Ab(ki,b)}function kc(a){zb(ki),zb(li),zb(mi)}function lc(a){ic(mi.current);var b=ic(ki.current),c=Q(b,a.type);b!==c&&(Ab(li,a),Ab(ki,c))}function mc(a){li.current===a&&(zb(ki),zb(li))}function nc(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||c.data===ug||c.data===vg))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(64&b.effectTag))return b}else if(null!==b.child){b.child.return=b,b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}return null}function oc(a,b){return{responder:a,props:b}}function pc(){throw Error(c(321))}function qc(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!hh(a[c],b[c]))return!1;return!0}function rc(a,b,d,e,f,g){if(qi=g,ri=b,b.memoizedState=null,b.updateQueue=null,b.expirationTime=0,oi.current=null===a||null===a.memoizedState?wi:xi,a=d(e,f),b.expirationTime===qi){g=0;do{if(b.expirationTime=0,!(25>g))throw Error(c(301));g+=1,ti=si=null,b.updateQueue=null,oi.current=yi,a=d(e,f)}while(b.expirationTime===qi)}if(oi.current=vi,b=null!==si&&null!==si.next,qi=0,ti=si=ri=null,ui=!1,b)throw Error(c(300));return a}function sc(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ti?ri.memoizedState=ti=a:ti=ti.next=a,ti}function tc(){if(null===si){var a=ri.alternate;a=null!==a?a.memoizedState:null}else a=si.next;var b=null===ti?ri.memoizedState:ti.next;if(null!==b)ti=b,si=a;else{if(null===a)throw Error(c(310));si=a,a={memoizedState:si.memoizedState,baseState:si.baseState,baseQueue:si.baseQueue,queue:si.queue,next:null},null===ti?ri.memoizedState=ti=a:ti=ti.next=a}return ti}function uc(a,b){return"function"==typeof b?b(a):b}function vc(a,b,d){if(b=tc(),d=b.queue,null===d)throw Error(c(311));d.lastRenderedReducer=a;var e=si,f=e.baseQueue,g=d.pending;if(null!==g){if(null!==f){var h=f.next;f.next=g.next,g.next=h}e.baseQueue=f=g,d.pending=null}if(null!==f){f=f.next,e=e.baseState;var i=h=g=null,j=f;do{var k=j.expirationTime;if(k<qi){var l={expirationTime:j.expirationTime,suspenseConfig:j.suspenseConfig,action:j.action,eagerReducer:j.eagerReducer,eagerState:j.eagerState,next:null};null===i?(h=i=l,g=e):i=i.next=l,k>ri.expirationTime&&(ri.expirationTime=k,Pd(k))}else null!==i&&(i=i.next={expirationTime:1073741823,suspenseConfig:j.suspenseConfig,action:j.action,eagerReducer:j.eagerReducer,eagerState:j.eagerState,next:null}),Od(k,j.suspenseConfig),e=j.eagerReducer===a?j.eagerState:a(e,j.action);j=j.next}while(null!==j&&j!==f);null===i?g=e:i.next=h,hh(e,b.memoizedState)||(Di=!0),b.memoizedState=e,b.baseState=g,b.baseQueue=i,d.lastRenderedState=e}return[b.memoizedState,d.dispatch]}function wc(a,b,d){if(b=tc(),d=b.queue,null===d)throw Error(c(311));d.lastRenderedReducer=a;var e=d.dispatch,f=d.pending,g=b.memoizedState;if(null!==f){d.pending=null;var h=f=f.next;do g=a(g,h.action),h=h.next;while(h!==f);hh(g,b.memoizedState)||(Di=!0),b.memoizedState=g,null===b.baseQueue&&(b.baseState=g),d.lastRenderedState=g}return[g,e]}function xc(a){var b=sc();return"function"==typeof a&&(a=a()),b.memoizedState=b.baseState=a,a=b.queue={pending:null,dispatch:null,lastRenderedReducer:uc,lastRenderedState:a},a=a.dispatch=Mc.bind(null,ri,a),[b.memoizedState,a]}function yc(a,b,c,d){return a={tag:a,create:b,destroy:c,deps:d,next:null},b=ri.updateQueue,null===b?(b={lastEffect:null},ri.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a)),a}function zc(a){return tc().memoizedState}function Ac(a,b,c,d){var e=sc();ri.effectTag|=a,e.memoizedState=yc(1|b,c,void 0,void 0===d?null:d)}function Bc(a,b,c,d){var e=tc();d=void 0===d?null:d;var f=void 0;if(null!==si){var g=si.memoizedState;if(f=g.destroy,null!==d&&qc(d,g.deps))return void yc(b,c,f,d)}ri.effectTag|=a,e.memoizedState=yc(1|b,c,f,d)}function Cc(a,b){return Ac(516,4,a,b)}function Dc(a,b){return Bc(516,4,a,b)}function Ec(a,b){return Bc(4,2,a,b)}function Fc(a,b){return"function"==typeof b?(a=a(),b(a),function(){b(null)}):null!==b&&void 0!==b?(a=a(),b.current=a,function(){b.current=null}):void 0}function Gc(a,b,c){return c=null!==c&&void 0!==c?c.concat([a]):null,Bc(4,2,Fc.bind(null,b,a),c)}function Hc(a,b){}function Ic(a,b){return sc().memoizedState=[a,void 0===b?null:b],a}function Jc(a,b){var c=tc();b=void 0===b?null:b;var d=c.memoizedState;return null!==d&&null!==b&&qc(b,d[1])?d[0]:(c.memoizedState=[a,b],a)}function Kc(a,b){var c=tc();b=void 0===b?null:b;var d=c.memoizedState;return null!==d&&null!==b&&qc(b,d[1])?d[0]:(a=a(),c.memoizedState=[a,b],a)}function Lc(a,b,c){var d=Hb();Jb(98>d?98:d,function(){a(!0)}),Jb(97<d?97:d,function(){var d=pi.suspense;pi.suspense=void 0===b?null:b;try{a(!1),c()}finally{pi.suspense=d}})}function Mc(a,b,c){var d=Bd(),e=di.suspense;d=Cd(d,a,e),e={expirationTime:d,suspenseConfig:e,action:c,eagerReducer:null,eagerState:null,next:null};var f=b.pending;if(null===f?e.next=e:(e.next=f.next,f.next=e),b.pending=e,f=a.alternate,a===ri||null!==f&&f===ri)ui=!0,e.expirationTime=qi,ri.expirationTime=qi;else{if(0===a.expirationTime&&(null===f||0===f.expirationTime)&&(f=b.lastRenderedReducer,null!==f))try{var g=b.lastRenderedState,h=f(g,c);if(e.eagerReducer=f,e.eagerState=h,hh(h,g))return}catch(a){}finally{}uj(a,d)}}function Nc(a,b){var c=yj(5,null,null,0);c.elementType="DELETED",c.type="DELETED",c.stateNode=b,c.return=a,c.effectTag=8,null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function Oc(a,b){switch(a.tag){case 5:var c=a.type;return b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b,null!==b&&(a.stateNode=b,!0);case 6:return b=""===a.pendingProps||3!==b.nodeType?null:b,null!==b&&(a.stateNode=b,!0);case 13:return!1;default:return!1}}function Pc(a){if(Bi){var b=Ai;if(b){var c=b;if(!Oc(a,b)){if(b=Ma(c.nextSibling),!b||!Oc(a,b))return a.effectTag=a.effectTag&-1025|2,Bi=!1,void(zi=a);Nc(zi,c)}zi=a,Ai=Ma(b.firstChild)}else a.effectTag=a.effectTag&-1025|2,Bi=!1,zi=a}}function Qc(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;zi=a}function Rc(a){if(a!==zi)return!1;if(!Bi)return Qc(a),Bi=!0,!1;var b=a.type;if(5!==a.tag||"head"!==b&&"body"!==b&&!La(b,a.memoizedProps))for(b=Ai;b;)Nc(a,b),b=Ma(b.nextSibling);if(Qc(a),13===a.tag){if(a=a.memoizedState,a=null!==a?a.dehydrated:null,!a)throw Error(c(317));a:{for(a=a.nextSibling,b=0;a;){if(8===a.nodeType){var d=a.data;if(d===tg){if(0===b){Ai=Ma(a.nextSibling);break a}b--}else d!==sg&&d!==vg&&d!==ug||b++}a=a.nextSibling}Ai=null}}else Ai=zi?Ma(a.stateNode.nextSibling):null;return!0}function Sc(){Ai=zi=null,Bi=!1}function Tc(a,b,c,d){b.child=null===a?ii(b,null,c,d):hi(b,a.child,c,d)}function Uc(a,b,c,d,e){c=c.render;var f=b.ref;return Tb(b,e),d=rc(a,b,c,d,f,e),null===a||Di?(b.effectTag|=1,Tc(a,b,d,e),b.child):(b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),ed(a,b,e))}function Vc(a,b,c,d,e,f){if(null===a){var g=c.type;return"function"!=typeof g||ee(g)||void 0!==g.defaultProps||null!==c.compare||void 0!==c.defaultProps?(a=he(c.type,null,d,null,b.mode,f),a.ref=b.ref,a.return=b,b.child=a):(b.tag=15,b.type=g,Wc(a,b,g,d,e,f))}return g=a.child,e<f&&(e=g.memoizedProps,c=c.compare,c=null!==c?c:wb,c(e,d)&&a.ref===b.ref)?ed(a,b,f):(b.effectTag|=1,a=ge(g,d),a.ref=b.ref,a.return=b,b.child=a)}function Wc(a,b,c,d,e,f){return null!==a&&wb(a.memoizedProps,d)&&a.ref===b.ref&&(Di=!1,e<f)?(b.expirationTime=a.expirationTime,ed(a,b,f)):Yc(a,b,c,d,f)}function Xc(a,b){var c=b.ref;(null===a&&null!==c||null!==a&&a.ref!==c)&&(b.effectTag|=128)}function Yc(a,b,c,d,e){var f=Cb(c)?Gh:Eh.current;return f=Bb(b,f),Tb(b,e),c=rc(a,b,c,d,f,e),null===a||Di?(b.effectTag|=1,Tc(a,b,c,e),b.child):(b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),ed(a,b,e))}function Zc(a,b,c,d,e){if(Cb(c)){var f=!0;Fb(b)}else f=!1;if(Tb(b,e),null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),cc(b,c,d),ec(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var i=g.context,j=c.contextType;"object"==typeof j&&null!==j?j=Ub(j):(j=Cb(c)?Gh:Eh.current,j=Bb(b,j));var k=c.getDerivedStateFromProps,l="function"==typeof k||"function"==typeof g.getSnapshotBeforeUpdate;l||"function"!=typeof g.UNSAFE_componentWillReceiveProps&&"function"!=typeof g.componentWillReceiveProps||(h!==d||i!==j)&&dc(b,g,d,j),ci=!1;var m=b.memoizedState;g.state=m,$b(b,d,g,e),i=b.memoizedState,h!==d||m!==i||Fh.current||ci?("function"==typeof k&&(ac(b,c,k,d),i=b.memoizedState),(h=ci||bc(b,c,h,d,m,i,j))?(l||"function"!=typeof g.UNSAFE_componentWillMount&&"function"!=typeof g.componentWillMount||("function"==typeof g.componentWillMount&&g.componentWillMount(),"function"==typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),"function"==typeof g.componentDidMount&&(b.effectTag|=4)):("function"==typeof g.componentDidMount&&(b.effectTag|=4),b.memoizedProps=d,b.memoizedState=i),g.props=d,g.state=i,g.context=j,d=h):("function"==typeof g.componentDidMount&&(b.effectTag|=4),d=!1)}else g=b.stateNode,Wb(a,b),h=b.memoizedProps,g.props=b.type===b.elementType?h:Pb(b.type,h),i=g.context,j=c.contextType,"object"==typeof j&&null!==j?j=Ub(j):(j=Cb(c)?Gh:Eh.current,j=Bb(b,j)),k=c.getDerivedStateFromProps,(l="function"==typeof k||"function"==typeof g.getSnapshotBeforeUpdate)||"function"!=typeof g.UNSAFE_componentWillReceiveProps&&"function"!=typeof g.componentWillReceiveProps||(h!==d||i!==j)&&dc(b,g,d,j),ci=!1,i=b.memoizedState,g.state=i,$b(b,d,g,e),m=b.memoizedState,h!==d||i!==m||Fh.current||ci?("function"==typeof k&&(ac(b,c,k,d),m=b.memoizedState),(k=ci||bc(b,c,h,d,i,m,j))?(l||"function"!=typeof g.UNSAFE_componentWillUpdate&&"function"!=typeof g.componentWillUpdate||("function"==typeof g.componentWillUpdate&&g.componentWillUpdate(d,m,j),"function"==typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,m,j)),"function"==typeof g.componentDidUpdate&&(b.effectTag|=4),"function"==typeof g.getSnapshotBeforeUpdate&&(b.effectTag|=256)):("function"!=typeof g.componentDidUpdate||h===a.memoizedProps&&i===a.memoizedState||(b.effectTag|=4),"function"!=typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&i===a.memoizedState||(b.effectTag|=256),b.memoizedProps=d,b.memoizedState=m),g.props=d,g.state=m,g.context=j,d=k):("function"!=typeof g.componentDidUpdate||h===a.memoizedProps&&i===a.memoizedState||(b.effectTag|=4),"function"!=typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&i===a.memoizedState||(b.effectTag|=256),d=!1);return $c(a,b,c,d,f,e)}function $c(a,b,c,d,e,f){Xc(a,b);var g=0!==(64&b.effectTag);if(!d&&!g)return e&&Gb(b,c,!1),ed(a,b,f);d=b.stateNode,Ci.current=b;var h=g&&"function"!=typeof c.getDerivedStateFromError?null:d.render();return b.effectTag|=1,null!==a&&g?(b.child=hi(b,a.child,null,f),b.child=hi(b,null,h,f)):Tc(a,b,h,f),b.memoizedState=d.state,e&&Gb(b,c,!0),b.child}function _c(a){var b=a.stateNode;b.pendingContext?Db(a,b.pendingContext,b.pendingContext!==b.context):b.context&&Db(a,b.context,!1),jc(a,b.containerInfo)}function ad(a,b,c){var d,e=b.mode,f=b.pendingProps,g=ni.current,h=!1;if((d=0!==(64&b.effectTag))||(d=0!==(2&g)&&(null===a||null!==a.memoizedState)),d?(h=!0,b.effectTag&=-65):null!==a&&null===a.memoizedState||void 0===f.fallback||!0===f.unstable_avoidThisFallback||(g|=1),Ab(ni,1&g),null===a){if(void 0!==f.fallback&&Pc(b),h){if(h=f.fallback,f=ie(null,e,0,null),f.return=b,0===(2&b.mode))for(a=null!==b.memoizedState?b.child.child:b.child,f.child=a;null!==a;)a.return=f,a=a.sibling;return c=ie(h,e,c,null),c.return=b,f.sibling=c,b.memoizedState=Ei,b.child=f,c}return e=f.children,b.memoizedState=null,b.child=ii(b,null,e,c)}if(null!==a.memoizedState){if(a=a.child,e=a.sibling,h){if(f=f.fallback,c=ge(a,a.pendingProps),c.return=b,0===(2&b.mode)&&(h=null!==b.memoizedState?b.child.child:b.child,h!==a.child))for(c.child=h;null!==h;)h.return=c,h=h.sibling;return e=ge(e,f),e.return=b,c.sibling=e,c.childExpirationTime=0,b.memoizedState=Ei,b.child=c,e}return c=hi(b,a.child,f.children,c),b.memoizedState=null,b.child=c}if(a=a.child,h){if(h=f.fallback,f=ie(null,e,0,null),f.return=b,f.child=a,null!==a&&(a.return=f),0===(2&b.mode))for(a=null!==b.memoizedState?b.child.child:b.child,f.child=a;null!==a;)a.return=f,a=a.sibling;return c=ie(h,e,c,null),c.return=b,f.sibling=c,c.effectTag|=2,f.childExpirationTime=0,b.memoizedState=Ei,b.child=f,c}return b.memoizedState=null,b.child=hi(b,a,f.children,c)}function bd(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b),Sb(a.return,b)}function cd(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailExpiration:0,tailMode:e,lastEffect:f}:(g.isBackwards=b,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailExpiration=0,g.tailMode=e,g.lastEffect=f)}function dd(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;if(Tc(a,b,d.children,c),d=ni.current,0!==(2&d))d=1&d|2,b.effectTag|=64;else{if(null!==a&&0!==(64&a.effectTag))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&bd(a,c);else if(19===a.tag)bd(a,c);else if(null!==a.child){a.child.return=a,a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return,a=a.sibling}d&=1}if(Ab(ni,d),0===(2&b.mode))b.memoizedState=null;else switch(e){case"forwards":for(c=b.child,e=null;null!==c;)a=c.alternate,null!==a&&null===nc(a)&&(e=c),c=c.sibling;c=e,null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null),cd(b,!1,e,c,f,b.lastEffect);break;case"backwards":for(c=null,e=b.child,b.child=null;null!==e;){if(a=e.alternate,null!==a&&null===nc(a)){b.child=e;break}a=e.sibling,e.sibling=c,c=e,e=a}cd(b,!0,c,null,f,b.lastEffect);break;case"together":cd(b,!1,null,null,void 0,b.lastEffect);break;default:b.memoizedState=null}return b.child}function ed(a,b,d){null!==a&&(b.dependencies=a.dependencies);var e=b.expirationTime;if(0!==e&&Pd(e),b.childExpirationTime<d)return null;if(null!==a&&b.child!==a.child)throw Error(c(153));if(null!==b.child){for(a=b.child,d=ge(a,a.pendingProps),b.child=d,d.return=b;null!==a.sibling;)a=a.sibling,d=d.sibling=ge(a,a.pendingProps),d.return=b;d.sibling=null}return b.child}function fd(a,b){switch(a.tailMode){case"hidden":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}function gd(a,b,d){var e=b.pendingProps;switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Cb(b.type)&&(zb(Fh),zb(Eh)),null;case 3:return kc(),zb(Fh),zb(Eh),d=b.stateNode,d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),null!==a&&null!==a.child||!Rc(b)||(b.effectTag|=4),Gi(b),null;case 5:mc(b),d=ic(mi.current);var f=b.type;if(null!==a&&null!=b.stateNode)Hi(a,b,f,e,d),a.ref!==b.ref&&(b.effectTag|=128);else{if(!e){if(null===b.stateNode)throw Error(c(166));return null}if(a=ic(ki.current),Rc(b)){e=b.stateNode,f=b.type;var g=b.memoizedProps;switch(e[Bg]=b,e[Cg]=g,f){case"iframe":case"object":case"embed":sa("load",e);break;case"video":case"audio":for(a=0;a<Vf.length;a++)sa(Vf[a],e);break;case"source":sa("error",e);break;case"img":case"image":case"link":sa("error",e),sa("load",e);break;case"form":sa("reset",e),sa("submit",e);break;case"details":sa("toggle",e);break;case"input":D(e,g),sa("invalid",e),Ca(d,"onChange");break;case"select":e._wrapperState={wasMultiple:!!g.multiple},sa("invalid",e),Ca(d,"onChange");break;case"textarea":M(e,g),sa("invalid",e),Ca(d,"onChange")}Aa(f,g),a=null;for(var h in g)if(g.hasOwnProperty(h)){var i=g[h];"children"===h?"string"==typeof i?e.textContent!==i&&(a=["children",i]):"number"==typeof i&&e.textContent!==""+i&&(a=["children",""+i]):Ne.hasOwnProperty(h)&&null!=i&&Ca(d,h)}switch(f){case"input":A(e),G(e,g,!0);break;case"textarea":A(e),O(e);break;case"select":case"option":break;default:"function"==typeof g.onClick&&(e.onclick=Da)}d=a,b.updateQueue=d,null!==d&&(b.effectTag|=4)}else{switch(h=9===d.nodeType?d:d.ownerDocument,"http://www.w3.org/1999/xhtml"===a&&(a=P(f)),"http://www.w3.org/1999/xhtml"===a?"script"===f?(a=h.createElement("div"),a.innerHTML="<script></script>",a=a.removeChild(a.firstChild)):"string"==typeof e.is?a=h.createElement(f,{is:e.is}):(a=h.createElement(f),"select"===f&&(h=a,e.multiple?h.multiple=!0:e.size&&(h.size=e.size))):a=h.createElementNS(a,f),a[Bg]=b,a[Cg]=e,Fi(a,b,!1,!1),b.stateNode=a,h=Ba(f,e),f){case"iframe":case"object":case"embed":sa("load",a),i=e;break;case"video":case"audio":for(i=0;i<Vf.length;i++)sa(Vf[i],a);i=e;break;case"source":sa("error",a),i=e;break;case"img":case"image":case"link":sa("error",a),sa("load",a),i=e;break;case"form":sa("reset",a),sa("submit",a),i=e;break;case"details":sa("toggle",a),i=e;break;case"input":D(a,e),i=C(a,e),sa("invalid",a),Ca(d,"onChange");break;case"option":i=J(a,e);break;case"select":a._wrapperState={wasMultiple:!!e.multiple},i=Qe({},e,{value:void 0}),sa("invalid",a),Ca(d,"onChange");break;case"textarea":M(a,e),i=L(a,e),sa("invalid",a),Ca(d,"onChange");break;default:i=e}Aa(f,i);var j=i;for(g in j)if(j.hasOwnProperty(g)){var k=j[g];"style"===g?za(a,k):"dangerouslySetInnerHTML"===g?(k=k?k.__html:void 0,null!=k&&Mf(a,k)):"children"===g?"string"==typeof k?("textarea"!==f||""!==k)&&Nf(a,k):"number"==typeof k&&Nf(a,""+k):"suppressContentEditableWarning"!==g&&"suppressHydrationWarning"!==g&&"autoFocus"!==g&&(Ne.hasOwnProperty(g)?null!=k&&Ca(d,g):null!=k&&s(a,g,k,h))}switch(f){case"input":A(a),G(a,e,!1);break;case"textarea":A(a),O(a);break;case"option":null!=e.value&&a.setAttribute("value",""+x(e.value));break;case"select":a.multiple=!!e.multiple,d=e.value,null!=d?K(a,!!e.multiple,d,!1):null!=e.defaultValue&&K(a,!!e.multiple,e.defaultValue,!0);break;default:"function"==typeof i.onClick&&(a.onclick=Da)}Ka(f,e)&&(b.effectTag|=4)}null!==b.ref&&(b.effectTag|=128)}return null;case 6:if(a&&null!=b.stateNode)Ii(a,b,a.memoizedProps,e);else{if("string"!=typeof e&&null===b.stateNode)throw Error(c(166));d=ic(mi.current),ic(ki.current),Rc(b)?(d=b.stateNode,e=b.memoizedProps,d[Bg]=b,d.nodeValue!==e&&(b.effectTag|=4)):(d=(9===d.nodeType?d:d.ownerDocument).createTextNode(e),d[Bg]=b,b.stateNode=d)}return null;case 13:return zb(ni),e=b.memoizedState,0!==(64&b.effectTag)?(b.expirationTime=d,b):(d=null!==e,e=!1,null===a?void 0!==b.memoizedProps.fallback&&Rc(b):(f=a.memoizedState,e=null!==f,d||null===f||(f=a.child.sibling,null!==f&&(g=b.firstEffect,null!==g?(b.firstEffect=f,f.nextEffect=g):(b.firstEffect=b.lastEffect=f,f.nextEffect=null),f.effectTag=8))),d&&!e&&0!==(2&b.mode)&&(null===a&&!0!==b.memoizedProps.unstable_avoidThisFallback||0!==(1&ni.current)?aj===Si&&(aj=Vi):(aj!==Si&&aj!==Vi||(aj=Wi),0!==fj&&null!==Zi&&(ne(Zi,_i),oe(Zi,fj)))),(d||e)&&(b.effectTag|=4),null);case 4:return kc(),Gi(b),null;case 10:return Rb(b),null;case 17:return Cb(b.type)&&(zb(Fh),zb(Eh)),null;case 19:if(zb(ni),e=b.memoizedState,null===e)return null;if(f=0!==(64&b.effectTag),g=e.rendering,null===g){if(f)fd(e,!1);else if(aj!==Si||null!==a&&0!==(64&a.effectTag))for(g=b.child;null!==g;){if(a=nc(g),null!==a){for(b.effectTag|=64,fd(e,!1),f=a.updateQueue,null!==f&&(b.updateQueue=f,b.effectTag|=4),null===e.lastEffect&&(b.firstEffect=null),b.lastEffect=e.lastEffect,e=b.child;null!==e;)f=e,g=d,f.effectTag&=2,f.nextEffect=null,f.firstEffect=null,f.lastEffect=null,a=f.alternate,null===a?(f.childExpirationTime=0,f.expirationTime=g,f.child=null,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null):(f.childExpirationTime=a.childExpirationTime,f.expirationTime=a.expirationTime,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,g=a.dependencies,f.dependencies=null===g?null:{expirationTime:g.expirationTime,firstContext:g.firstContext,responders:g.responders}),e=e.sibling;return Ab(ni,1&ni.current|2),b.child}g=g.sibling}}else{if(!f)if(a=nc(g),null!==a){if(b.effectTag|=64,f=!0,d=a.updateQueue,null!==d&&(b.updateQueue=d,b.effectTag|=4),fd(e,!0),null===e.tail&&"hidden"===e.tailMode&&!g.alternate)return b=b.lastEffect=e.lastEffect,null!==b&&(b.nextEffect=null),null}else 2*Xh()-e.renderingStartTime>e.tailExpiration&&1<d&&(b.effectTag|=64,f=!0,fd(e,!1),b.expirationTime=b.childExpirationTime=d-1);e.isBackwards?(g.sibling=b.child,b.child=g):(d=e.last,null!==d?d.sibling=g:b.child=g,e.last=g)}return null!==e.tail?(0===e.tailExpiration&&(e.tailExpiration=Xh()+500),d=e.tail,e.rendering=d,e.tail=d.sibling,e.lastEffect=b.lastEffect,e.renderingStartTime=Xh(),d.sibling=null,b=ni.current,Ab(ni,f?1&b|2:1&b),d):null}throw Error(c(156,b.tag))}function hd(a,b){switch(a.tag){case 1:return Cb(a.type)&&(zb(Fh),zb(Eh)),b=a.effectTag,4096&b?(a.effectTag=b&-4097|64,a):null;case 3:if(kc(),zb(Fh),zb(Eh),b=a.effectTag,0!==(64&b))throw Error(c(285));return a.effectTag=b&-4097|64,a;case 5:return mc(a),null;case 13:return zb(ni),b=a.effectTag,4096&b?(a.effectTag=b&-4097|64,a):null;case 19:return zb(ni),null;case 4:return kc(),null;case 10:return Rb(a),null;default:return null}}function id(a,b){return{value:a,source:b,stack:w(b)}}function jd(a,b){var c=b.source,d=b.stack;null===d&&null!==c&&(d=w(c)),null!==c&&v(c.type),b=b.value,null!==a&&1===a.tag&&v(a.type);try{}catch(a){setTimeout(function(){throw a})}}function kd(a,b){try{b.props=a.memoizedProps,b.state=a.memoizedState,b.componentWillUnmount()}catch(b){_d(a,b)}}function ld(a){var b=a.ref;if(null!==b)if("function"==typeof b)try{b(null)}catch(b){_d(a,b)}else b.current=null}function md(a,b){switch(b.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&b.effectTag&&null!==a){var d=a.memoizedProps,e=a.memoizedState;a=b.stateNode,b=a.getSnapshotBeforeUpdate(b.elementType===b.type?d:Pb(b.type,d),e),a.__reactInternalSnapshotBeforeUpdate=b}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(c(163))}function nd(a,b){if(b=b.updateQueue,b=null!==b?b.lastEffect:null,null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.destroy;c.destroy=void 0,void 0!==d&&d()}c=c.next}while(c!==b)}}function od(a,b){if(b=b.updateQueue,b=null!==b?b.lastEffect:null,null!==b){var c=b=b.next;
do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==b)}}function pd(a,b,d,e){switch(d.tag){case 0:case 11:case 15:case 22:return void od(3,d);case 1:return a=d.stateNode,4&d.effectTag&&(null===b?a.componentDidMount():(e=d.elementType===d.type?b.memoizedProps:Pb(d.type,b.memoizedProps),a.componentDidUpdate(e,b.memoizedState,a.__reactInternalSnapshotBeforeUpdate))),b=d.updateQueue,void(null!==b&&_b(d,b,a));case 3:if(b=d.updateQueue,null!==b){if(a=null,null!==d.child)switch(d.child.tag){case 5:a=d.child.stateNode;break;case 1:a=d.child.stateNode}_b(d,b,a)}return;case 5:return a=d.stateNode,void(null===b&&4&d.effectTag&&Ka(d.type,d.memoizedProps)&&a.focus());case 6:return;case 4:return;case 12:return;case 13:return void(null===d.memoizedState&&(d=d.alternate,null!==d&&(d=d.memoizedState,null!==d&&(d=d.dehydrated,null!==d&&qa(d)))));case 19:case 17:case 20:case 21:return}throw Error(c(163))}function qd(a,b,c){switch("function"==typeof xj&&xj(b),b.tag){case 0:case 11:case 14:case 15:case 22:if(a=b.updateQueue,null!==a&&(a=a.lastEffect,null!==a)){var d=a.next;Jb(97<c?97:c,function(){var a=d;do{var c=a.destroy;if(void 0!==c){var e=b;try{c()}catch(a){_d(e,a)}}a=a.next}while(a!==d)})}break;case 1:ld(b),c=b.stateNode,"function"==typeof c.componentWillUnmount&&kd(b,c);break;case 5:ld(b);break;case 4:wd(a,b,c)}}function rd(a){var b=a.alternate;a.return=null,a.child=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.alternate=null,a.firstEffect=null,a.lastEffect=null,a.pendingProps=null,a.memoizedProps=null,a.stateNode=null,null!==b&&rd(b)}function sd(a){return 5===a.tag||3===a.tag||4===a.tag}function td(a){a:{for(var b=a.return;null!==b;){if(sd(b)){var d=b;break a}b=b.return}throw Error(c(160))}switch(b=d.stateNode,d.tag){case 5:var e=!1;break;case 3:b=b.containerInfo,e=!0;break;case 4:b=b.containerInfo,e=!0;break;default:throw Error(c(161))}16&d.effectTag&&(Nf(b,""),d.effectTag&=-17);a:b:for(d=a;;){for(;null===d.sibling;){if(null===d.return||sd(d.return)){d=null;break a}d=d.return}for(d.sibling.return=d.return,d=d.sibling;5!==d.tag&&6!==d.tag&&18!==d.tag;){if(2&d.effectTag)continue b;if(null===d.child||4===d.tag)continue b;d.child.return=d,d=d.child}if(!(2&d.effectTag)){d=d.stateNode;break a}}e?ud(a,d,b):vd(a,d,b)}function ud(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=Da));else if(4!==d&&(a=a.child,null!==a))for(ud(a,b,c),a=a.sibling;null!==a;)ud(a,b,c),a=a.sibling}function vd(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(vd(a,b,c),a=a.sibling;null!==a;)vd(a,b,c),a=a.sibling}function wd(a,b,d){for(var e,f,g=b,h=!1;;){if(!h){h=g.return;a:for(;;){if(null===h)throw Error(c(160));switch(e=h.stateNode,h.tag){case 5:f=!1;break a;case 3:e=e.containerInfo,f=!0;break a;case 4:e=e.containerInfo,f=!0;break a}h=h.return}h=!0}if(5===g.tag||6===g.tag){a:for(var i=a,j=g,k=d,l=j;;)if(qd(i,l,k),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===j)break a;for(;null===l.sibling;){if(null===l.return||l.return===j)break a;l=l.return}l.sibling.return=l.return,l=l.sibling}f?(i=e,j=g.stateNode,8===i.nodeType?i.parentNode.removeChild(j):i.removeChild(j)):e.removeChild(g.stateNode)}else if(4===g.tag){if(null!==g.child){e=g.stateNode.containerInfo,f=!0,g.child.return=g,g=g.child;continue}}else if(qd(a,g,d),null!==g.child){g.child.return=g,g=g.child;continue}if(g===b)break;for(;null===g.sibling;){if(null===g.return||g.return===b)return;g=g.return,4===g.tag&&(h=!1)}g.sibling.return=g.return,g=g.sibling}}function xd(a,b){switch(b.tag){case 0:case 11:case 14:case 15:case 22:return void nd(3,b);case 1:return;case 5:var d=b.stateNode;if(null!=d){var e=b.memoizedProps,f=null!==a?a.memoizedProps:e;a=b.type;var g=b.updateQueue;if(b.updateQueue=null,null!==g){for(d[Cg]=e,"input"===a&&"radio"===e.type&&null!=e.name&&E(d,e),Ba(a,f),b=Ba(a,e),f=0;f<g.length;f+=2){var h=g[f],i=g[f+1];"style"===h?za(d,i):"dangerouslySetInnerHTML"===h?Mf(d,i):"children"===h?Nf(d,i):s(d,h,i,b)}switch(a){case"input":F(d,e);break;case"textarea":N(d,e);break;case"select":b=d._wrapperState.wasMultiple,d._wrapperState.wasMultiple=!!e.multiple,a=e.value,null!=a?K(d,!!e.multiple,a,!1):b!==!!e.multiple&&(null!=e.defaultValue?K(d,!!e.multiple,e.defaultValue,!0):K(d,!!e.multiple,e.multiple?[]:"",!1))}}}return;case 6:if(null===b.stateNode)throw Error(c(162));return void(b.stateNode.nodeValue=b.memoizedProps);case 3:return b=b.stateNode,void(b.hydrate&&(b.hydrate=!1,qa(b.containerInfo)));case 12:return;case 13:if(d=b,null===b.memoizedState?e=!1:(e=!0,d=b.child,hj=Xh()),null!==d)a:for(a=d;;){if(5===a.tag)g=a.stateNode,e?(g=g.style,"function"==typeof g.setProperty?g.setProperty("display","none","important"):g.display="none"):(g=a.stateNode,f=a.memoizedProps.style,f=void 0!==f&&null!==f&&f.hasOwnProperty("display")?f.display:null,g.style.display=ya("display",f));else if(6===a.tag)a.stateNode.nodeValue=e?"":a.memoizedProps;else{if(13===a.tag&&null!==a.memoizedState&&null===a.memoizedState.dehydrated){g=a.child.sibling,g.return=a,a=g;continue}if(null!==a.child){a.child.return=a,a=a.child;continue}}if(a===d)break;for(;null===a.sibling;){if(null===a.return||a.return===d)break a;a=a.return}a.sibling.return=a.return,a=a.sibling}return void yd(b);case 19:return void yd(b);case 17:return}throw Error(c(163))}function yd(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new Ji),b.forEach(function(b){var d=be.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}function zd(a,b,c){c=Xb(c,null),c.tag=3,c.payload={element:null};var d=b.value;return c.callback=function(){kj||(kj=!0,lj=d),jd(a,b)},c}function Ad(a,b,c){c=Xb(c,null),c.tag=3;var d=a.type.getDerivedStateFromError;if("function"==typeof d){var e=b.value;c.payload=function(){return jd(a,b),d(e)}}var f=a.stateNode;return null!==f&&"function"==typeof f.componentDidCatch&&(c.callback=function(){"function"!=typeof d&&(null===mj?mj=new Set([this]):mj.add(this),jd(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:""})}),c}function Bd(){return(Yi&(Qi|Ri))!==Oi?1073741821-(Xh()/10|0):0!==tj?tj:tj=1073741821-(Xh()/10|0)}function Cd(a,b,d){if(b=b.mode,0===(2&b))return 1073741823;var e=Hb();if(0===(4&b))return 99===e?1073741823:1073741822;if((Yi&Qi)!==Oi)return _i;if(null!==d)a=Ob(a,0|d.timeoutMs||5e3,250);else switch(e){case 99:a=1073741823;break;case 98:a=Ob(a,150,100);break;case 97:case 96:a=Ob(a,5e3,250);break;case 95:a=2;break;default:throw Error(c(326))}return null!==Zi&&a===_i&&--a,a}function Dd(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);var d=a.return,e=null;if(null===d&&3===a.tag)e=a.stateNode;else for(;null!==d;){if(c=d.alternate,d.childExpirationTime<b&&(d.childExpirationTime=b),null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b),null===d.return&&3===d.tag){e=d.stateNode;break}d=d.return}return null!==e&&(Zi===e&&(Pd(b),aj===Wi&&ne(e,_i)),oe(e,b)),e}function Ed(a){var b=a.lastExpiredTime;if(0!==b)return b;if(b=a.firstPendingTime,!me(a,b))return b;var c=a.lastPingedTime;return a=a.nextKnownPendingLevel,a=c>a?c:a,2>=a&&b!==a?0:a}function Fd(a){if(0!==a.lastExpiredTime)a.callbackExpirationTime=1073741823,a.callbackPriority=99,a.callbackNode=Lb(Hd.bind(null,a));else{var b=Ed(a),c=a.callbackNode;if(0===b)null!==c&&(a.callbackNode=null,a.callbackExpirationTime=0,a.callbackPriority=90);else{var d=Bd();if(1073741823===b?d=99:1===b||2===b?d=95:(d=10*(1073741821-b)-10*(1073741821-d),d=0>=d?99:250>=d?98:5250>=d?97:95),null!==c){var e=a.callbackPriority;if(a.callbackExpirationTime===b&&e>=d)return;c!==Qh&&Jh(c)}a.callbackExpirationTime=b,a.callbackPriority=d,b=1073741823===b?Lb(Hd.bind(null,a)):Kb(d,Gd.bind(null,a),{timeout:10*(1073741821-b)-Xh()}),a.callbackNode=b}}}function Gd(a,b){if(tj=0,b)return b=Bd(),pe(a,b),Fd(a),null;var d=Ed(a);if(0!==d){if(b=a.callbackNode,(Yi&(Qi|Ri))!==Oi)throw Error(c(327));if(Yd(),a===Zi&&d===_i||Ld(a,d),null!==$i){var e=Yi;Yi|=Qi;for(var f=Nd();;)try{Rd();break}catch(b){Md(a,b)}if(Qb(),Yi=e,Mi.current=f,aj===Ti)throw b=bj,Ld(a,d),ne(a,d),Fd(a),b;if(null===$i)switch(f=a.finishedWork=a.current.alternate,a.finishedExpirationTime=d,e=aj,Zi=null,e){case Si:case Ti:throw Error(c(345));case Ui:pe(a,2<d?2:d);break;case Vi:if(ne(a,d),e=a.lastSuspendedTime,d===e&&(a.nextKnownPendingLevel=Ud(f)),1073741823===cj&&(f=hj+ij-Xh(),10<f)){if(gj){var g=a.lastPingedTime;if(0===g||g>=d){a.lastPingedTime=d,Ld(a,d);break}}if(g=Ed(a),0!==g&&g!==d)break;if(0!==e&&e!==d){a.lastPingedTime=e;break}a.timeoutHandle=yg(Vd.bind(null,a),f);break}Vd(a);break;case Wi:if(ne(a,d),e=a.lastSuspendedTime,d===e&&(a.nextKnownPendingLevel=Ud(f)),gj&&(f=a.lastPingedTime,0===f||f>=d)){a.lastPingedTime=d,Ld(a,d);break}if(f=Ed(a),0!==f&&f!==d)break;if(0!==e&&e!==d){a.lastPingedTime=e;break}if(1073741823!==dj?e=10*(1073741821-dj)-Xh():1073741823===cj?e=0:(e=10*(1073741821-cj)-5e3,f=Xh(),d=10*(1073741821-d)-f,e=f-e,0>e&&(e=0),e=(120>e?120:480>e?480:1080>e?1080:1920>e?1920:3e3>e?3e3:4320>e?4320:1960*Li(e/1960))-e,d<e&&(e=d)),10<e){a.timeoutHandle=yg(Vd.bind(null,a),e);break}Vd(a);break;case Xi:if(1073741823!==cj&&null!==ej){g=cj;var h=ej;if(e=0|h.busyMinDurationMs,0>=e?e=0:(f=0|h.busyDelayMs,g=Xh()-(10*(1073741821-g)-(0|h.timeoutMs||5e3)),e=g<=f?0:f+e-g),10<e){ne(a,d),a.timeoutHandle=yg(Vd.bind(null,a),e);break}}Vd(a);break;default:throw Error(c(329))}if(Fd(a),a.callbackNode===b)return Gd.bind(null,a)}}return null}function Hd(a){var b=a.lastExpiredTime;if(b=0!==b?b:1073741823,(Yi&(Qi|Ri))!==Oi)throw Error(c(327));if(Yd(),a===Zi&&b===_i||Ld(a,b),null!==$i){var d=Yi;Yi|=Qi;for(var e=Nd();;)try{Qd();break}catch(b){Md(a,b)}if(Qb(),Yi=d,Mi.current=e,aj===Ti)throw d=bj,Ld(a,b),ne(a,b),Fd(a),d;if(null!==$i)throw Error(c(261));a.finishedWork=a.current.alternate,a.finishedExpirationTime=b,Zi=null,Vd(a),Fd(a)}return null}function Id(){if(null!==qj){var a=qj;qj=null,a.forEach(function(a,b){pe(b,a),Fd(b)}),Mb()}}function Jd(a,b){var c=Yi;Yi|=1;try{return a(b)}finally{Yi=c,Yi===Oi&&Mb()}}function Kd(a,b){var c=Yi;Yi&=-2,Yi|=Pi;try{return a(b)}finally{Yi=c,Yi===Oi&&Mb()}}function Ld(a,b){a.finishedWork=null,a.finishedExpirationTime=0;var c=a.timeoutHandle;if(-1!==c&&(a.timeoutHandle=-1,zg(c)),null!==$i)for(c=$i.return;null!==c;){var d=c;switch(d.tag){case 1:d=d.type.childContextTypes,null!==d&&void 0!==d&&(zb(Fh),zb(Eh));break;case 3:kc(),zb(Fh),zb(Eh);break;case 5:mc(d);break;case 4:kc();break;case 13:zb(ni);break;case 19:zb(ni);break;case 10:Rb(d)}c=c.return}Zi=a,$i=ge(a.current,null),_i=b,aj=Si,bj=null,dj=cj=1073741823,ej=null,fj=0,gj=!1}function Md(a,b){for(;;){try{if(Qb(),oi.current=vi,ui)for(var c=ri.memoizedState;null!==c;){var d=c.queue;null!==d&&(d.pending=null),c=c.next}if(qi=0,ti=si=ri=null,ui=!1,null===$i||null===$i.return)return aj=Ti,bj=b,$i=null;a:{var e=a,f=$i.return,g=$i,h=b;if(b=_i,g.effectTag|=2048,g.firstEffect=g.lastEffect=null,null!==h&&"object"==typeof h&&"function"==typeof h.then){var i=h;if(0===(2&g.mode)){var j=g.alternate;j?(g.updateQueue=j.updateQueue,g.memoizedState=j.memoizedState,g.expirationTime=j.expirationTime):(g.updateQueue=null,g.memoizedState=null)}var k=0!==(1&ni.current),l=f;do{var m;if(m=13===l.tag){var n=l.memoizedState;if(null!==n)m=null!==n.dehydrated;else{var o=l.memoizedProps;m=void 0!==o.fallback&&(!0!==o.unstable_avoidThisFallback||!k)}}if(m){var p=l.updateQueue;if(null===p){var q=new Set;q.add(i),l.updateQueue=q}else p.add(i);if(0===(2&l.mode)){if(l.effectTag|=64,g.effectTag&=-2981,1===g.tag)if(null===g.alternate)g.tag=17;else{var r=Xb(1073741823,null);r.tag=bi,Yb(g,r)}g.expirationTime=1073741823;break a}h=void 0,g=b;var s=e.pingCache;if(null===s?(s=e.pingCache=new Ki,h=new Set,s.set(i,h)):(h=s.get(i),void 0===h&&(h=new Set,s.set(i,h))),!h.has(g)){h.add(g);var t=ae.bind(null,e,i,g);i.then(t,t)}l.effectTag|=4096,l.expirationTime=b;break a}l=l.return}while(null!==l);h=Error((v(g.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+w(g))}aj!==Xi&&(aj=Ui),h=id(h,g),l=f;do{switch(l.tag){case 3:i=h,l.effectTag|=4096,l.expirationTime=b;var u=zd(l,i,b);Zb(l,u);break a;case 1:i=h;var x=l.type,y=l.stateNode;if(0===(64&l.effectTag)&&("function"==typeof x.getDerivedStateFromError||null!==y&&"function"==typeof y.componentDidCatch&&(null===mj||!mj.has(y)))){l.effectTag|=4096,l.expirationTime=b;var z=Ad(l,i,b);Zb(l,z);break a}}l=l.return}while(null!==l)}$i=Td($i)}catch(a){b=a;continue}break}}function Nd(a){return a=Mi.current,Mi.current=vi,null===a?vi:a}function Od(a,b){a<cj&&2<a&&(cj=a),null!==b&&a<dj&&2<a&&(dj=a,ej=b)}function Pd(a){a>fj&&(fj=a)}function Qd(){for(;null!==$i;)$i=Sd($i)}function Rd(){for(;null!==$i&&!Rh();)$i=Sd($i)}function Sd(a){var b=vj(a.alternate,a,_i);return a.memoizedProps=a.pendingProps,null===b&&(b=Td(a)),Ni.current=null,b}function Td(a){$i=a;do{var b=$i.alternate;if(a=$i.return,0===(2048&$i.effectTag)){if(b=gd(b,$i,_i),1===_i||1!==$i.childExpirationTime){for(var c=0,d=$i.child;null!==d;){var e=d.expirationTime,f=d.childExpirationTime;e>c&&(c=e),f>c&&(c=f),d=d.sibling}$i.childExpirationTime=c}if(null!==b)return b;null!==a&&0===(2048&a.effectTag)&&(null===a.firstEffect&&(a.firstEffect=$i.firstEffect),null!==$i.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=$i.firstEffect),a.lastEffect=$i.lastEffect),1<$i.effectTag&&(null!==a.lastEffect?a.lastEffect.nextEffect=$i:a.firstEffect=$i,a.lastEffect=$i))}else{if(b=hd($i),null!==b)return b.effectTag&=2047,b;null!==a&&(a.firstEffect=a.lastEffect=null,a.effectTag|=2048)}if(b=$i.sibling,null!==b)return b;$i=a}while(null!==$i);return aj===Si&&(aj=Xi),null}function Ud(a){var b=a.expirationTime;return a=a.childExpirationTime,b>a?b:a}function Vd(a){var b=Hb();return Jb(99,Wd.bind(null,a,b)),null}function Wd(a,b){do Yd();while(null!==oj);if((Yi&(Qi|Ri))!==Oi)throw Error(c(327));var d=a.finishedWork,e=a.finishedExpirationTime;if(null===d)return null;if(a.finishedWork=null,a.finishedExpirationTime=0,d===a.current)throw Error(c(177));a.callbackNode=null,a.callbackExpirationTime=0,a.callbackPriority=90,a.nextKnownPendingLevel=0;var f=Ud(d);if(a.firstPendingTime=f,e<=a.lastSuspendedTime?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:e<=a.firstSuspendedTime&&(a.firstSuspendedTime=e-1),e<=a.lastPingedTime&&(a.lastPingedTime=0),e<=a.lastExpiredTime&&(a.lastExpiredTime=0),a===Zi&&($i=Zi=null,_i=0),1<d.effectTag?null!==d.lastEffect?(d.lastEffect.nextEffect=d,f=d.firstEffect):f=d:f=d.firstEffect,null!==f){var g=Yi;Yi|=Ri,Ni.current=null,wg=og;var h=Ia();if(Ja(h)){if("selectionStart"in h)var i={start:h.selectionStart,end:h.selectionEnd};else a:{i=(i=h.ownerDocument)&&i.defaultView||window;var j=i.getSelection&&i.getSelection();if(j&&0!==j.rangeCount){i=j.anchorNode;var k=j.anchorOffset,l=j.focusNode;j=j.focusOffset;try{i.nodeType,l.nodeType}catch(a){i=null;break a}var m=0,n=-1,o=-1,p=0,q=0,r=h,s=null;b:for(;;){for(var t;r!==i||0!==k&&3!==r.nodeType||(n=m+k),r!==l||0!==j&&3!==r.nodeType||(o=m+j),3===r.nodeType&&(m+=r.nodeValue.length),null!==(t=r.firstChild);)s=r,r=t;for(;;){if(r===h)break b;if(s===i&&++p===k&&(n=m),s===l&&++q===j&&(o=m),null!==(t=r.nextSibling))break;r=s,s=r.parentNode}r=t}i=-1===n||-1===o?null:{start:n,end:o}}else i=null}i=i||{start:0,end:0}}else i=null;xg={activeElementDetached:null,focusedElem:h,selectionRange:i},og=!1,jj=f;do try{Xd()}catch(a){if(null===jj)throw Error(c(330));_d(jj,a),jj=jj.nextEffect}while(null!==jj);jj=f;do try{for(h=a,i=b;null!==jj;){var u=jj.effectTag;if(16&u&&Nf(jj.stateNode,""),128&u){var v=jj.alternate;if(null!==v){var w=v.ref;null!==w&&("function"==typeof w?w(null):w.current=null)}}switch(1038&u){case 2:td(jj),jj.effectTag&=-3;break;case 6:td(jj),jj.effectTag&=-3,xd(jj.alternate,jj);break;case 1024:jj.effectTag&=-1025;break;case 1028:jj.effectTag&=-1025,xd(jj.alternate,jj);break;case 4:xd(jj.alternate,jj);break;case 8:k=jj,wd(h,k,i),rd(k)}jj=jj.nextEffect}}catch(a){if(null===jj)throw Error(c(330));_d(jj,a),jj=jj.nextEffect}while(null!==jj);if(w=xg,v=Ia(),u=w.focusedElem,i=w.selectionRange,v!==u&&u&&u.ownerDocument&&Ha(u.ownerDocument.documentElement,u)){null!==i&&Ja(u)&&(v=i.start,w=i.end,void 0===w&&(w=v),"selectionStart"in u?(u.selectionStart=v,u.selectionEnd=Math.min(w,u.value.length)):(w=(v=u.ownerDocument||document)&&v.defaultView||window,w.getSelection&&(w=w.getSelection(),k=u.textContent.length,h=Math.min(i.start,k),i=void 0===i.end?h:Math.min(i.end,k),!w.extend&&h>i&&(k=i,i=h,h=k),k=Ga(u,h),l=Ga(u,i),k&&l&&(1!==w.rangeCount||w.anchorNode!==k.node||w.anchorOffset!==k.offset||w.focusNode!==l.node||w.focusOffset!==l.offset)&&(v=v.createRange(),v.setStart(k.node,k.offset),w.removeAllRanges(),h>i?(w.addRange(v),w.extend(l.node,l.offset)):(v.setEnd(l.node,l.offset),w.addRange(v)))))),v=[];for(w=u;w=w.parentNode;)1===w.nodeType&&v.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"==typeof u.focus&&u.focus(),u=0;u<v.length;u++)w=v[u],w.element.scrollLeft=w.left,w.element.scrollTop=w.top}og=!!wg,xg=wg=null,a.current=d,jj=f;do try{for(u=a;null!==jj;){var x=jj.effectTag;if(36&x&&pd(u,jj.alternate,jj),128&x){v=void 0;var y=jj.ref;if(null!==y){var z=jj.stateNode;switch(jj.tag){case 5:v=z;break;default:v=z}"function"==typeof y?y(v):y.current=v}}jj=jj.nextEffect}}catch(a){if(null===jj)throw Error(c(330));_d(jj,a),jj=jj.nextEffect}while(null!==jj);jj=null,Sh(),Yi=g}else a.current=d;if(nj)nj=!1,oj=a,pj=b;else for(jj=f;null!==jj;)b=jj.nextEffect,jj.nextEffect=null,jj=b;if(b=a.firstPendingTime,0===b&&(mj=null),1073741823===b?a===sj?rj++:(rj=0,sj=a):rj=0,"function"==typeof wj&&wj(d.stateNode,e),Fd(a),kj)throw kj=!1,a=lj,lj=null,a;return(Yi&Pi)!==Oi?null:(Mb(),null)}function Xd(){for(;null!==jj;){var a=jj.effectTag;0!==(256&a)&&md(jj.alternate,jj),0===(512&a)||nj||(nj=!0,Kb(97,function(){return Yd(),null})),jj=jj.nextEffect}}function Yd(){if(90!==pj){var a=97<pj?97:pj;return pj=90,Jb(a,Zd)}}function Zd(){if(null===oj)return!1;var a=oj;if(oj=null,(Yi&(Qi|Ri))!==Oi)throw Error(c(331));var b=Yi;for(Yi|=Ri,a=a.current.firstEffect;null!==a;){try{var d=a;if(0!==(512&d.effectTag))switch(d.tag){case 0:case 11:case 15:case 22:nd(5,d),od(5,d)}}catch(b){if(null===a)throw Error(c(330));_d(a,b)}d=a.nextEffect,a.nextEffect=null,a=d}return Yi=b,Mb(),!0}function $d(a,b,c){b=id(c,b),b=zd(a,b,1073741823),Yb(a,b),a=Dd(a,1073741823),null!==a&&Fd(a)}function _d(a,b){if(3===a.tag)$d(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){$d(c,a,b);break}if(1===c.tag){var d=c.stateNode;if("function"==typeof c.type.getDerivedStateFromError||"function"==typeof d.componentDidCatch&&(null===mj||!mj.has(d))){a=id(b,a),a=Ad(c,a,1073741823),Yb(c,a),c=Dd(c,1073741823),null!==c&&Fd(c);break}}c=c.return}}function ae(a,b,c){var d=a.pingCache;null!==d&&d.delete(b),Zi===a&&_i===c?aj===Wi||aj===Vi&&1073741823===cj&&Xh()-hj<ij?Ld(a,_i):gj=!0:me(a,c)&&(b=a.lastPingedTime,0!==b&&b<c||(a.lastPingedTime=c,Fd(a)))}function be(a,b){var c=a.stateNode;null!==c&&c.delete(b),b=0,0===b&&(b=Bd(),b=Cd(b,a,null)),a=Dd(a,b),null!==a&&Fd(a)}function ce(a){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=b.inject(a);wj=function(a,d){try{b.onCommitFiberRoot(c,a,void 0,64===(64&a.current.effectTag))}catch(a){}},xj=function(a){try{b.onCommitFiberUnmount(c,a)}catch(a){}}}catch(a){}return!0}function de(a,b,c,d){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=b,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function ee(a){return a=a.prototype,!(!a||!a.isReactComponent)}function fe(a){if("function"==typeof a)return ee(a)?1:0;if(void 0!==a&&null!==a){if(a=a.$$typeof,a===Ff)return 11;if(a===If)return 14}return 2}function ge(a,b){var c=a.alternate;return null===c?(c=yj(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.effectTag=0,c.nextEffect=null,c.firstEffect=null,c.lastEffect=null),c.childExpirationTime=a.childExpirationTime,c.expirationTime=a.expirationTime,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,b=a.dependencies,c.dependencies=null===b?null:{expirationTime:b.expirationTime,firstContext:b.firstContext,responders:b.responders},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c}function he(a,b,d,e,f,g){var h=2;if(e=a,"function"==typeof a)ee(a)&&(h=1);else if("string"==typeof a)h=5;else a:switch(a){case zf:return ie(d.children,f,g,b);case Ef:h=8,f|=7;break;case Af:h=8,f|=1;break;case Bf:return a=yj(12,d,b,8|f),a.elementType=Bf,a.type=Bf,a.expirationTime=g,a;case Gf:return a=yj(13,d,b,f),a.type=Gf,a.elementType=Gf,a.expirationTime=g,a;case Hf:return a=yj(19,d,b,f),a.elementType=Hf,a.expirationTime=g,a;default:if("object"==typeof a&&null!==a)switch(a.$$typeof){case Cf:h=10;break a;case Df:h=9;break a;case Ff:h=11;break a;case If:h=14;break a;case Jf:h=16,e=null;break a;case Kf:h=22;break a}throw Error(c(130,null==a?a:typeof a,""))}return b=yj(h,d,b,f),b.elementType=a,b.type=e,b.expirationTime=g,b}function ie(a,b,c,d){return a=yj(7,a,d,b),a.expirationTime=c,a}function je(a,b,c){return a=yj(6,a,null,b),a.expirationTime=c,a}function ke(a,b,c){return b=yj(4,null!==a.children?a.children:[],a.key,b),b.expirationTime=c,b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},b}function le(a,b,c){this.tag=b,this.current=null,this.containerInfo=a,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=c,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function me(a,b){var c=a.firstSuspendedTime;return a=a.lastSuspendedTime,0!==c&&c>=b&&a<=b}function ne(a,b){var c=a.firstSuspendedTime,d=a.lastSuspendedTime;c<b&&(a.firstSuspendedTime=b),(d>b||0===c)&&(a.lastSuspendedTime=b),b<=a.lastPingedTime&&(a.lastPingedTime=0),b<=a.lastExpiredTime&&(a.lastExpiredTime=0)}function oe(a,b){b>a.firstPendingTime&&(a.firstPendingTime=b);var c=a.firstSuspendedTime;0!==c&&(b>=c?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:b>=a.lastSuspendedTime&&(a.lastSuspendedTime=b+1),b>a.nextKnownPendingLevel&&(a.nextKnownPendingLevel=b))}function pe(a,b){var c=a.lastExpiredTime;(0===c||c>b)&&(a.lastExpiredTime=b)}function qe(a,b,d,e){var f=b.current,g=Bd(),h=di.suspense;g=Cd(g,f,h);a:if(d){d=d._reactInternalFiber;b:{if(U(d)!==d||1!==d.tag)throw Error(c(170));var i=d;do{switch(i.tag){case 3:i=i.stateNode.context;break b;case 1:if(Cb(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break b}}i=i.return}while(null!==i);throw Error(c(171))}if(1===d.tag){var j=d.type;if(Cb(j)){d=Eb(d,j,i);break a}}d=i}else d=Dh;return null===b.context?b.context=d:b.pendingContext=d,b=Xb(g,h),b.payload={element:a},e=void 0===e?null:e,null!==e&&(b.callback=e),Yb(f,b),uj(f,g),g}function re(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function se(a,b){a=a.memoizedState,null!==a&&null!==a.dehydrated&&a.retryTime<b&&(a.retryTime=b)}function te(a,b){se(a,b),(a=a.alternate)&&se(a,b)}function ue(a,b,c){c=null!=c&&!0===c.hydrate;var d=new le(a,b,c),e=yj(3,null,null,2===b?7:1===b?3:0);d.current=e,e.stateNode=d,Vb(e),a[Dg]=d.current,c&&0!==b&&ga(a,9===a.nodeType?a:a.ownerDocument),this._internalRoot=d}function ve(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||" react-mount-point-unstable "!==a.nodeValue))}function we(a,b){if(b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute("data-reactroot"))),!b)for(var c;c=a.lastChild;)a.removeChild(c);return new ue(a,0,b?{hydrate:!0}:void 0)}function xe(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f._internalRoot;if("function"==typeof e){var h=e;e=function(){var a=re(g);h.call(a)}}qe(b,g,a,e)}else{if(f=c._reactRootContainer=we(c,d),g=f._internalRoot,"function"==typeof e){var i=e;e=function(){var a=re(g);i.call(a)}}Kd(function(){qe(b,g,a,e)})}return re(g)}function ye(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:yf,key:null==d?null:""+d,children:a,containerInfo:b,implementation:c}}function ze(a,b){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ve(b))throw Error(c(200));return ye(a,b,null,d)}if(!b)throw Error(c(227));var Ae=function(a,b,c,d,e,f,g,h,i){var j=Array.prototype.slice.call(arguments,3);try{b.apply(c,j)}catch(a){this.onError(a)}},Be=!1,Ce=null,De=!1,Ee=null,Fe={onError:function(a){Be=!0,Ce=a}},Ge=null,He=null,Ie=null,Je=null,Ke={},Le=[],Me={},Ne={},Oe={},Pe=!("undefined"==typeof window||"undefined"==typeof window.document||"undefined"==typeof window.document.createElement),Qe=b.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.assign,Re=null,Se=null,Te=null,Ue=function(a,b){return a(b)},Ve=function(a,b,c,d,e){return a(b,c,d,e)},We=function(){},Xe=Ue,Ye=!1,Ze=!1,$e=b.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Scheduler,_e=$e.unstable_cancelCallback,af=$e.unstable_now,bf=$e.unstable_scheduleCallback,cf=$e.unstable_shouldYield,df=$e.unstable_requestPaint,ef=$e.unstable_runWithPriority,ff=$e.unstable_getCurrentPriorityLevel,gf=$e.unstable_ImmediatePriority,hf=$e.unstable_UserBlockingPriority,jf=$e.unstable_NormalPriority,kf=$e.unstable_LowPriority,lf=$e.unstable_IdlePriority,mf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nf=Object.prototype.hasOwnProperty,of={},pf={},qf={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){qf[a]=new r(a,0,!1,a,null,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var b=a[0];qf[b]=new r(b,1,!1,a[1],null,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){qf[a]=new r(a,2,!1,a.toLowerCase(),null,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){qf[a]=new r(a,2,!1,a,null,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){qf[a]=new r(a,3,!1,a.toLowerCase(),null,!1)}),["checked","multiple","muted","selected"].forEach(function(a){qf[a]=new r(a,3,!0,a,null,!1)}),["capture","download"].forEach(function(a){qf[a]=new r(a,4,!1,a,null,!1)}),["cols","rows","size","span"].forEach(function(a){qf[a]=new r(a,6,!1,a,null,!1)}),["rowSpan","start"].forEach(function(a){qf[a]=new r(a,5,!1,a.toLowerCase(),null,!1)});var rf=/[\-:]([a-z])/g,sf=function(a){return a[1].toUpperCase()};"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var b=a.replace(rf,sf);qf[b]=new r(b,1,!1,a,null,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var b=a.replace(rf,sf);qf[b]=new r(b,1,!1,a,"http://www.w3.org/1999/xlink",!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var b=a.replace(rf,sf);qf[b]=new r(b,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1)}),["tabIndex","crossOrigin"].forEach(function(a){qf[a]=new r(a,1,!1,a.toLowerCase(),null,!1)}),qf.xlinkHref=new r("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach(function(a){qf[a]=new r(a,1,!1,a.toLowerCase(),null,!0)});var tf=b.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;tf.hasOwnProperty("ReactCurrentDispatcher")||(tf.ReactCurrentDispatcher={current:null}),tf.hasOwnProperty("ReactCurrentBatchConfig")||(tf.ReactCurrentBatchConfig={suspense:null});var uf,vf=/^(.*)[\\\/]/,wf="function"==typeof Symbol&&Symbol.for,xf=wf?Symbol.for("react.element"):60103,yf=wf?Symbol.for("react.portal"):60106,zf=wf?Symbol.for("react.fragment"):60107,Af=wf?Symbol.for("react.strict_mode"):60108,Bf=wf?Symbol.for("react.profiler"):60114,Cf=wf?Symbol.for("react.provider"):60109,Df=wf?Symbol.for("react.context"):60110,Ef=wf?Symbol.for("react.concurrent_mode"):60111,Ff=wf?Symbol.for("react.forward_ref"):60112,Gf=wf?Symbol.for("react.suspense"):60113,Hf=wf?Symbol.for("react.suspense_list"):60120,If=wf?Symbol.for("react.memo"):60115,Jf=wf?Symbol.for("react.lazy"):60116,Kf=wf?Symbol.for("react.block"):60121,Lf="function"==typeof Symbol&&Symbol.iterator,Mf=function(a){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if("http://www.w3.org/2000/svg"!==a.namespaceURI||"innerHTML"in a)a.innerHTML=b;else{for(uf=uf||document.createElement("div"),uf.innerHTML="<svg>"+b.valueOf().toString()+"</svg>",b=uf.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}}),Nf=function(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType)return void(c.nodeValue=b)}a.textContent=b},Of={animationend:R("Animation","AnimationEnd"),animationiteration:R("Animation","AnimationIteration"),animationstart:R("Animation","AnimationStart"),transitionend:R("Transition","TransitionEnd")},Pf={},Qf={};Pe&&(Qf=document.createElement("div").style,"AnimationEvent"in window||(delete Of.animationend.animation,delete Of.animationiteration.animation,delete Of.animationstart.animation),"TransitionEvent"in window||delete Of.transitionend.transition);var Rf=S("animationend"),Sf=S("animationiteration"),Tf=S("animationstart"),Uf=S("transitionend"),Vf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wf=new("function"==typeof WeakMap?WeakMap:Map),Xf=null,Yf=function(a){
if(a){var b=a._dispatchListeners,c=a._dispatchInstances;if(Array.isArray(b))for(var d=0;d<b.length&&!a.isPropagationStopped();d++)f(a,b[d],c[d]);else b&&f(a,b,c);a._dispatchListeners=null,a._dispatchInstances=null,a.isPersistent()||a.constructor.release(a)}},Zf=[],$f=!1,_f=[],ag=null,bg=null,cg=null,dg=new Map,eg=new Map,fg=[],gg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),hg="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" "),ig={},jg=new Map,kg=new Map,lg=["abort","abort",Rf,"animationEnd",Sf,"animationIteration",Tf,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Uf,"transitionEnd","waiting","waiting"];ra("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),ra("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),ra(lg,2),function(a,b){for(var c=0;c<a.length;c++)kg.set(a[c],b)}("change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),0);var mg=hf,ng=ef,og=!0,pg={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qg=["Webkit","ms","Moz","O"];Object.keys(pg).forEach(function(a){qg.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1),pg[b]=pg[a]})});var rg=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),sg="$",tg="/$",ug="$?",vg="$!",wg=null,xg=null,yg="function"==typeof setTimeout?setTimeout:void 0,zg="function"==typeof clearTimeout?clearTimeout:void 0,Ag=Math.random().toString(36).slice(2),Bg="__reactInternalInstance$"+Ag,Cg="__reactEventHandlers$"+Ag,Dg="__reactContainere$"+Ag,Eg=null,Fg=null,Gg=null;Qe(ab.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():"unknown"!=typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=$a)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():"unknown"!=typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=$a)},persist:function(){this.isPersistent=$a},isPersistent:_a,destructor:function(){var a,b=this.constructor.Interface;for(a in b)this[a]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=_a,this._dispatchInstances=this._dispatchListeners=null}}),ab.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},ab.extend=function(a){function b(){return c.apply(this,arguments)}var c=this,d=function(){};return d.prototype=c.prototype,d=new d,Qe(d,b.prototype),b.prototype=d,b.prototype.constructor=b,b.Interface=Qe({},c.Interface,a),b.extend=c.extend,db(b),b},db(ab);var Hg=ab.extend({data:null}),Ig=ab.extend({data:null}),Jg=[9,13,27,32],Kg=Pe&&"CompositionEvent"in window,Lg=null;Pe&&"documentMode"in document&&(Lg=document.documentMode);var Mg=Pe&&"TextEvent"in window&&!Lg,Ng=Pe&&(!Kg||Lg&&8<Lg&&11>=Lg),Og=String.fromCharCode(32),Pg={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Qg=!1,Rg=!1,Sg={eventTypes:Pg,extractEvents:function(a,b,c,d,e){var f;if(Kg)a:{switch(a){case"compositionstart":var g=Pg.compositionStart;break a;case"compositionend":g=Pg.compositionEnd;break a;case"compositionupdate":g=Pg.compositionUpdate;break a}g=void 0}else Rg?eb(a,c)&&(g=Pg.compositionEnd):"keydown"===a&&229===c.keyCode&&(g=Pg.compositionStart);return g?(Ng&&"ko"!==c.locale&&(Rg||g!==Pg.compositionStart?g===Pg.compositionEnd&&Rg&&(f=Za()):(Eg=d,Fg="value"in Eg?Eg.value:Eg.textContent,Rg=!0)),e=Hg.getPooled(g,b,c,d),f?e.data=f:(f=fb(c),null!==f&&(e.data=f)),Ya(e),f=e):f=null,(a=Mg?gb(a,c):hb(a,c))?(b=Ig.getPooled(Pg.beforeInput,b,c,d),b.data=a,Ya(b)):b=null,null===f?b:null===b?f:[f,b]}},Tg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},Ug={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},Vg=null,Wg=null,Xg=!1;Pe&&(Xg=ba("input")&&(!document.documentMode||9<document.documentMode));var Yg={eventTypes:Ug,_isInputEventSupported:Xg,extractEvents:function(a,b,c,d,e){e=b?Qa(b):window;var f=e.nodeName&&e.nodeName.toLowerCase();if("select"===f||"input"===f&&"file"===e.type)var g=mb;else if(ib(e))if(Xg)g=sb;else{g=qb;var h=pb}else(f=e.nodeName)&&"input"===f.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)&&(g=rb);return g&&(g=g(a,b))?jb(g,c,d):(h&&h(a,e,b),void("blur"===a&&(a=e._wrapperState)&&a.controlled&&"number"===e.type&&H(e,"number",e.value)))}},Zg=ab.extend({view:null,detail:null}),$g={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},_g=0,ah=0,bh=!1,ch=!1,dh=Zg.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:ub,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)},movementX:function(a){if("movementX"in a)return a.movementX;var b=_g;return _g=a.screenX,bh?"mousemove"===a.type?a.screenX-b:0:(bh=!0,0)},movementY:function(a){if("movementY"in a)return a.movementY;var b=ah;return ah=a.screenY,ch?"mousemove"===a.type?a.screenY-b:0:(ch=!0,0)}}),eh=dh.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),fh={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},gh={eventTypes:fh,extractEvents:function(a,b,c,d,e){var f="mouseover"===a||"pointerover"===a,g="mouseout"===a||"pointerout"===a;if(f&&0===(32&e)&&(c.relatedTarget||c.fromElement)||!g&&!f)return null;if(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g){if(g=b,b=(b=c.relatedTarget||c.toElement)?Oa(b):null,null!==b){var h=U(b);(b!==h||5!==b.tag&&6!==b.tag)&&(b=null)}}else g=null;if(g===b)return null;if("mouseout"===a||"mouseover"===a)var i=dh,j=fh.mouseLeave,k=fh.mouseEnter,l="mouse";else"pointerout"!==a&&"pointerover"!==a||(i=eh,j=fh.pointerLeave,k=fh.pointerEnter,l="pointer");if(a=null==g?f:Qa(g),f=null==b?f:Qa(b),j=i.getPooled(j,g,c,d),j.type=l+"leave",j.target=a,j.relatedTarget=f,c=i.getPooled(k,b,c,d),c.type=l+"enter",c.target=f,c.relatedTarget=a,d=g,l=b,d&&l)a:{for(i=d,k=l,g=0,a=i;a;a=Sa(a))g++;for(a=0,b=k;b;b=Sa(b))a++;for(;0<g-a;)i=Sa(i),g--;for(;0<a-g;)k=Sa(k),a--;for(;g--;){if(i===k||i===k.alternate)break a;i=Sa(i),k=Sa(k)}i=null}else i=null;for(k=i,i=[];d&&d!==k&&(g=d.alternate,null===g||g!==k);)i.push(d),d=Sa(d);for(d=[];l&&l!==k&&(g=l.alternate,null===g||g!==k);)d.push(l),l=Sa(l);for(l=0;l<i.length;l++)Wa(i[l],"bubbled",j);for(l=d.length;0<l--;)Wa(d[l],"captured",c);return 0===(64&e)?[j]:[j,c]}},hh="function"==typeof Object.is?Object.is:vb,ih=Object.prototype.hasOwnProperty,jh=Pe&&"documentMode"in document&&11>=document.documentMode,kh={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},lh=null,mh=null,nh=null,oh=!1,ph={eventTypes:kh,extractEvents:function(a,b,c,d,e,f){if(e=f||(d.window===d?d.document:9===d.nodeType?d:d.ownerDocument),!(f=!e)){a:{e=T(e),f=Oe.onSelect;for(var g=0;g<f.length;g++)if(!e.has(f[g])){e=!1;break a}e=!0}f=!e}if(f)return null;switch(e=b?Qa(b):window,a){case"focus":(ib(e)||"true"===e.contentEditable)&&(lh=e,mh=b,nh=null);break;case"blur":nh=mh=lh=null;break;case"mousedown":oh=!0;break;case"contextmenu":case"mouseup":case"dragend":return oh=!1,xb(c,d);case"selectionchange":if(jh)break;case"keydown":case"keyup":return xb(c,d)}return null}},qh=ab.extend({animationName:null,elapsedTime:null,pseudoElement:null}),rh=ab.extend({clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),sh=Zg.extend({relatedTarget:null}),th={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vh=Zg.extend({key:function(a){if(a.key){var b=th[a.key]||a.key;if("Unidentified"!==b)return b}return"keypress"===a.type?(a=yb(a),13===a?"Enter":String.fromCharCode(a)):"keydown"===a.type||"keyup"===a.type?uh[a.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:ub,charCode:function(a){return"keypress"===a.type?yb(a):0},keyCode:function(a){return"keydown"===a.type||"keyup"===a.type?a.keyCode:0},which:function(a){return"keypress"===a.type?yb(a):"keydown"===a.type||"keyup"===a.type?a.keyCode:0}}),wh=dh.extend({dataTransfer:null}),xh=Zg.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:ub}),yh=ab.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),zh=dh.extend({deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:null,deltaMode:null}),Ah={eventTypes:ig,extractEvents:function(a,b,c,d,e){if(e=jg.get(a),!e)return null;switch(a){case"keypress":if(0===yb(c))return null;case"keydown":case"keyup":a=vh;break;case"blur":case"focus":a=sh;break;case"click":if(2===c.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":a=dh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":a=wh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":a=xh;break;case Rf:case Sf:case Tf:a=qh;break;case Uf:a=yh;break;case"scroll":a=Zg;break;case"wheel":a=zh;break;case"copy":case"cut":case"paste":a=rh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":a=eh;break;default:a=ab}return b=a.getPooled(e,b,c,d),Ya(b),b}};!function(a){if(Je)throw Error(c(101));Je=Array.prototype.slice.call(a),g()}("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),function(a,b,c){Ge=a,He=b,Ie=c}(Ra,Pa,Qa),i({SimpleEventPlugin:Ah,EnterLeaveEventPlugin:gh,ChangeEventPlugin:Yg,SelectEventPlugin:ph,BeforeInputEventPlugin:Sg});var Bh=[],Ch=-1,Dh={},Eh={current:Dh},Fh={current:!1},Gh=Dh,Hh=ef,Ih=bf,Jh=_e,Kh=ff,Lh=gf,Mh=hf,Nh=jf,Oh=kf,Ph=lf,Qh={},Rh=cf,Sh=void 0!==df?df:function(){},Th=null,Uh=null,Vh=!1,Wh=af(),Xh=1e4>Wh?af:function(){return af()-Wh},Yh={current:null},Zh=null,$h=null,_h=null,ai=0,bi=2,ci=!1,di=tf.ReactCurrentBatchConfig,ei=(new b.Component).refs,fi={isMounted:function(a){return!!(a=a._reactInternalFiber)&&U(a)===a},enqueueSetState:function(a,b,c){a=a._reactInternalFiber;var d=Bd(),e=di.suspense;d=Cd(d,a,e),e=Xb(d,e),e.payload=b,void 0!==c&&null!==c&&(e.callback=c),Yb(a,e),uj(a,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternalFiber;var d=Bd(),e=di.suspense;d=Cd(d,a,e),e=Xb(d,e),e.tag=1,e.payload=b,void 0!==c&&null!==c&&(e.callback=c),Yb(a,e),uj(a,d)},enqueueForceUpdate:function(a,b){a=a._reactInternalFiber;var c=Bd(),d=di.suspense;c=Cd(c,a,d),d=Xb(c,d),d.tag=bi,void 0!==b&&null!==b&&(d.callback=b),Yb(a,d),uj(a,c)}},gi=Array.isArray,hi=hc(!0),ii=hc(!1),ji={},ki={current:ji},li={current:ji},mi={current:ji},ni={current:0},oi=tf.ReactCurrentDispatcher,pi=tf.ReactCurrentBatchConfig,qi=0,ri=null,si=null,ti=null,ui=!1,vi={readContext:Ub,useCallback:pc,useContext:pc,useEffect:pc,useImperativeHandle:pc,useLayoutEffect:pc,useMemo:pc,useReducer:pc,useRef:pc,useState:pc,useDebugValue:pc,useResponder:pc,useDeferredValue:pc,useTransition:pc},wi={readContext:Ub,useCallback:Ic,useContext:Ub,useEffect:Cc,useImperativeHandle:function(a,b,c){return c=null!==c&&void 0!==c?c.concat([a]):null,Ac(4,2,Fc.bind(null,b,a),c)},useLayoutEffect:function(a,b){return Ac(4,2,a,b)},useMemo:function(a,b){var c=sc();return b=void 0===b?null:b,a=a(),c.memoizedState=[a,b],a},useReducer:function(a,b,c){var d=sc();return b=void 0!==c?c(b):b,d.memoizedState=d.baseState=b,a=d.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b},a=a.dispatch=Mc.bind(null,ri,a),[d.memoizedState,a]},useRef:function(a){var b=sc();return a={current:a},b.memoizedState=a},useState:xc,useDebugValue:Hc,useResponder:oc,useDeferredValue:function(a,b){var c=xc(a),d=c[0],e=c[1];return Cc(function(){var c=pi.suspense;pi.suspense=void 0===b?null:b;try{e(a)}finally{pi.suspense=c}},[a,b]),d},useTransition:function(a){var b=xc(!1),c=b[0];return b=b[1],[Ic(Lc.bind(null,b,a),[b,a]),c]}},xi={readContext:Ub,useCallback:Jc,useContext:Ub,useEffect:Dc,useImperativeHandle:Gc,useLayoutEffect:Ec,useMemo:Kc,useReducer:vc,useRef:zc,useState:function(a){return vc(uc)},useDebugValue:Hc,useResponder:oc,useDeferredValue:function(a,b){var c=vc(uc),d=c[0],e=c[1];return Dc(function(){var c=pi.suspense;pi.suspense=void 0===b?null:b;try{e(a)}finally{pi.suspense=c}},[a,b]),d},useTransition:function(a){var b=vc(uc),c=b[0];return b=b[1],[Jc(Lc.bind(null,b,a),[b,a]),c]}},yi={readContext:Ub,useCallback:Jc,useContext:Ub,useEffect:Dc,useImperativeHandle:Gc,useLayoutEffect:Ec,useMemo:Kc,useReducer:wc,useRef:zc,useState:function(a){return wc(uc)},useDebugValue:Hc,useResponder:oc,useDeferredValue:function(a,b){var c=wc(uc),d=c[0],e=c[1];return Dc(function(){var c=pi.suspense;pi.suspense=void 0===b?null:b;try{e(a)}finally{pi.suspense=c}},[a,b]),d},useTransition:function(a){var b=wc(uc),c=b[0];return b=b[1],[Jc(Lc.bind(null,b,a),[b,a]),c]}},zi=null,Ai=null,Bi=!1,Ci=tf.ReactCurrentOwner,Di=!1,Ei={dehydrated:null,retryTime:0},Fi=function(a,b,c,d){for(c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c,c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Gi=function(a){},Hi=function(a,b,c,d,e){var f=a.memoizedProps;if(f!==d){var g=b.stateNode;switch(ic(ki.current),a=null,c){case"input":f=C(g,f),d=C(g,d),a=[];break;case"option":f=J(g,f),d=J(g,d),a=[];break;case"select":f=Qe({},f,{value:void 0}),d=Qe({},d,{value:void 0}),a=[];break;case"textarea":f=L(g,f),d=L(g,d),a=[];break;default:"function"!=typeof f.onClick&&"function"==typeof d.onClick&&(g.onclick=Da)}Aa(c,d);var h,i;c=null;for(h in f)if(!d.hasOwnProperty(h)&&f.hasOwnProperty(h)&&null!=f[h])if("style"===h)for(i in g=f[h])g.hasOwnProperty(i)&&(c||(c={}),c[i]="");else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(Ne.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in d){var j=d[h];if(g=null!=f?f[h]:void 0,d.hasOwnProperty(h)&&j!==g&&(null!=j||null!=g))if("style"===h)if(g){for(i in g)!g.hasOwnProperty(i)||j&&j.hasOwnProperty(i)||(c||(c={}),c[i]="");for(i in j)j.hasOwnProperty(i)&&g[i]!==j[i]&&(c||(c={}),c[i]=j[i])}else c||(a||(a=[]),a.push(h,c)),c=j;else"dangerouslySetInnerHTML"===h?(j=j?j.__html:void 0,g=g?g.__html:void 0,null!=j&&g!==j&&(a=a||[]).push(h,j)):"children"===h?g===j||"string"!=typeof j&&"number"!=typeof j||(a=a||[]).push(h,""+j):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(Ne.hasOwnProperty(h)?(null!=j&&Ca(e,h),a||g===j||(a=[])):(a=a||[]).push(h,j))}c&&(a=a||[]).push("style",c),e=a,(b.updateQueue=e)&&(b.effectTag|=4)}},Ii=function(a,b,c,d){c!==d&&(b.effectTag|=4)},Ji="function"==typeof WeakSet?WeakSet:Set,Ki="function"==typeof WeakMap?WeakMap:Map,Li=Math.ceil,Mi=tf.ReactCurrentDispatcher,Ni=tf.ReactCurrentOwner,Oi=0,Pi=8,Qi=16,Ri=32,Si=0,Ti=1,Ui=2,Vi=3,Wi=4,Xi=5,Yi=Oi,Zi=null,$i=null,_i=0,aj=Si,bj=null,cj=1073741823,dj=1073741823,ej=null,fj=0,gj=!1,hj=0,ij=500,jj=null,kj=!1,lj=null,mj=null,nj=!1,oj=null,pj=90,qj=null,rj=0,sj=null,tj=0,uj=function(a,b){if(50<rj)throw rj=0,sj=null,Error(c(185));if(a=Dd(a,b),null!==a){var d=Hb();1073741823===b?(Yi&Pi)!==Oi&&(Yi&(Qi|Ri))===Oi?Hd(a):(Fd(a),Yi===Oi&&Mb()):Fd(a),(4&Yi)===Oi||98!==d&&99!==d||(null===qj?qj=new Map([[a,b]]):(d=qj.get(a),(void 0===d||d>b)&&qj.set(a,b)))}},vj=function(a,b,d){var e=b.expirationTime;if(null!==a){var f=b.pendingProps;if(a.memoizedProps!==f||Fh.current)Di=!0;else{if(e<d){switch(Di=!1,b.tag){case 3:_c(b),Sc();break;case 5:if(lc(b),4&b.mode&&1!==d&&f.hidden)return b.expirationTime=b.childExpirationTime=1,null;break;case 1:Cb(b.type)&&Fb(b);break;case 4:jc(b,b.stateNode.containerInfo);break;case 10:e=b.memoizedProps.value,f=b.type._context,Ab(Yh,f._currentValue),f._currentValue=e;break;case 13:if(null!==b.memoizedState)return e=b.child.childExpirationTime,0!==e&&e>=d?ad(a,b,d):(Ab(ni,1&ni.current),b=ed(a,b,d),null!==b?b.sibling:null);Ab(ni,1&ni.current);break;case 19:if(e=b.childExpirationTime>=d,0!==(64&a.effectTag)){if(e)return dd(a,b,d);b.effectTag|=64}if(f=b.memoizedState,null!==f&&(f.rendering=null,f.tail=null),Ab(ni,ni.current),!e)return null}return ed(a,b,d)}Di=!1}}else Di=!1;switch(b.expirationTime=0,b.tag){case 2:if(e=b.type,null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),a=b.pendingProps,f=Bb(b,Eh.current),Tb(b,d),f=rc(null,b,e,a,f,d),b.effectTag|=1,"object"==typeof f&&null!==f&&"function"==typeof f.render&&void 0===f.$$typeof){if(b.tag=1,b.memoizedState=null,b.updateQueue=null,Cb(e)){var g=!0;Fb(b)}else g=!1;b.memoizedState=null!==f.state&&void 0!==f.state?f.state:null,Vb(b);var h=e.getDerivedStateFromProps;"function"==typeof h&&ac(b,e,h,a),f.updater=fi,b.stateNode=f,f._reactInternalFiber=b,ec(b,e,a,d),b=$c(null,b,e,!0,g,d)}else b.tag=0,Tc(null,b,f,d),b=b.child;return b;case 16:a:{if(f=b.elementType,null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),a=b.pendingProps,u(f),1!==f._status)throw f._result;switch(f=f._result,b.type=f,g=b.tag=fe(f),a=Pb(f,a),g){case 0:b=Yc(null,b,f,a,d);break a;case 1:b=Zc(null,b,f,a,d);break a;case 11:b=Uc(null,b,f,a,d);break a;case 14:b=Vc(null,b,f,Pb(f.type,a),e,d);break a}throw Error(c(306,f,""))}return b;case 0:return e=b.type,f=b.pendingProps,f=b.elementType===e?f:Pb(e,f),Yc(a,b,e,f,d);case 1:return e=b.type,f=b.pendingProps,f=b.elementType===e?f:Pb(e,f),Zc(a,b,e,f,d);case 3:if(_c(b),e=b.updateQueue,null===a||null===e)throw Error(c(282));if(e=b.pendingProps,f=b.memoizedState,f=null!==f?f.element:null,Wb(a,b),$b(b,e,null,d),e=b.memoizedState.element,e===f)Sc(),b=ed(a,b,d);else{if((f=b.stateNode.hydrate)&&(Ai=Ma(b.stateNode.containerInfo.firstChild),zi=b,f=Bi=!0),f)for(d=ii(b,null,e,d),b.child=d;d;)d.effectTag=d.effectTag&-3|1024,d=d.sibling;else Tc(a,b,e,d),Sc();b=b.child}return b;case 5:return lc(b),null===a&&Pc(b),e=b.type,f=b.pendingProps,g=null!==a?a.memoizedProps:null,h=f.children,La(e,f)?h=null:null!==g&&La(e,g)&&(b.effectTag|=16),Xc(a,b),4&b.mode&&1!==d&&f.hidden?(b.expirationTime=b.childExpirationTime=1,b=null):(Tc(a,b,h,d),b=b.child),b;case 6:return null===a&&Pc(b),null;case 13:return ad(a,b,d);case 4:return jc(b,b.stateNode.containerInfo),e=b.pendingProps,null===a?b.child=hi(b,null,e,d):Tc(a,b,e,d),b.child;case 11:return e=b.type,f=b.pendingProps,f=b.elementType===e?f:Pb(e,f),Uc(a,b,e,f,d);case 7:return Tc(a,b,b.pendingProps,d),b.child;case 8:return Tc(a,b,b.pendingProps.children,d),b.child;case 12:return Tc(a,b,b.pendingProps.children,d),b.child;case 10:a:{e=b.type._context,f=b.pendingProps,h=b.memoizedProps,g=f.value;var i=b.type._context;if(Ab(Yh,i._currentValue),i._currentValue=g,null!==h)if(i=h.value,g=hh(i,g)?0:0|("function"==typeof e._calculateChangedBits?e._calculateChangedBits(i,g):1073741823),0===g){if(h.children===f.children&&!Fh.current){b=ed(a,b,d);break a}}else for(i=b.child,null!==i&&(i.return=b);null!==i;){var j=i.dependencies;if(null!==j){h=i.child;for(var k=j.firstContext;null!==k;){if(k.context===e&&0!==(k.observedBits&g)){1===i.tag&&(k=Xb(d,null),k.tag=bi,Yb(i,k)),i.expirationTime<d&&(i.expirationTime=d),k=i.alternate,null!==k&&k.expirationTime<d&&(k.expirationTime=d),Sb(i.return,d),j.expirationTime<d&&(j.expirationTime=d);break}k=k.next}}else h=10===i.tag&&i.type===b.type?null:i.child;if(null!==h)h.return=i;else for(h=i;null!==h;){if(h===b){h=null;break}if(i=h.sibling,null!==i){i.return=h.return,h=i;break}h=h.return}i=h}Tc(a,b,f.children,d),b=b.child}return b;case 9:return f=b.type,g=b.pendingProps,e=g.children,Tb(b,d),f=Ub(f,g.unstable_observedBits),e=e(f),b.effectTag|=1,Tc(a,b,e,d),b.child;case 14:return f=b.type,g=Pb(f,b.pendingProps),g=Pb(f.type,g),Vc(a,b,f,g,e,d);case 15:return Wc(a,b,b.type,b.pendingProps,e,d);case 17:return e=b.type,f=b.pendingProps,f=b.elementType===e?f:Pb(e,f),null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),b.tag=1,Cb(e)?(a=!0,Fb(b)):a=!1,Tb(b,d),cc(b,e,f),ec(b,e,f,d),$c(null,b,e,!0,a,d);case 19:return dd(a,b,d)}throw Error(c(156,b.tag))},wj=null,xj=null,yj=function(a,b,c,d){return new de(a,b,c,d)};ue.prototype.render=function(a){qe(a,this._internalRoot,null,null)},ue.prototype.unmount=function(){var a=this._internalRoot,b=a.containerInfo;qe(null,a,null,function(){b[Dg]=null})};var zj=function(a){if(13===a.tag){var b=Ob(Bd(),150,100);uj(a,b),te(a,b)}},Aj=function(a){13===a.tag&&(uj(a,3),te(a,3))},Bj=function(a){if(13===a.tag){var b=Bd();b=Cd(b,a,null),uj(a,b),te(a,b)}};Re=function(a,b,d){switch(b){case"input":if(F(a,d),b=d.name,"radio"===d.type&&null!=b){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]'),b=0;b<d.length;b++){var e=d[b];if(e!==a&&e.form===a.form){var f=Ra(e);if(!f)throw Error(c(90));B(e),F(e,f)}}}break;case"textarea":N(a,d);break;case"select":b=d.value,null!=b&&K(a,!!d.multiple,b,!1)}},function(a,b,c,d){Ue=a,Ve=b,We=c,Xe=d}(Jd,function(a,b,c,d,e){var f=Yi;Yi|=4;try{return Jb(98,a.bind(null,b,c,d,e))}finally{Yi=f,Yi===Oi&&Mb()}},function(){(Yi&(1|Qi|Ri))===Oi&&(Id(),Yd())},function(a,b){var c=Yi;Yi|=2;try{return a(b)}finally{Yi=c,Yi===Oi&&Mb()}});var Cj={Events:[Pa,Qa,Ra,i,Me,Ya,function(a){$(a,Xa)},k,l,wa,_,Yd,{current:!1}]};!function(a){var b=a.findFiberByHostInstance;return ce(Qe({},a,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tf.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Y(a),null===a?null:a.stateNode},findFiberByHostInstance:function(a){return b?b(a):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Oa,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"}),a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cj,a.createPortal=ze,a.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternalFiber;if(void 0===b){if("function"==typeof a.render)throw Error(c(188));throw Error(c(268,Object.keys(a)))}return a=Y(b),a=null===a?null:a.stateNode},a.flushSync=function(a,b){if((Yi&(Qi|Ri))!==Oi)throw Error(c(187));var d=Yi;Yi|=1;try{return Jb(99,a.bind(null,b))}finally{Yi=d,Mb()}},a.hydrate=function(a,b,d){if(!ve(b))throw Error(c(200));return xe(null,a,b,!0,d)},a.render=function(a,b,d){if(!ve(b))throw Error(c(200));return xe(null,a,b,!1,d)},a.unmountComponentAtNode=function(a){if(!ve(a))throw Error(c(40));return!!a._reactRootContainer&&(Kd(function(){xe(null,null,a,!1,function(){a._reactRootContainer=null,a[Dg]=null})}),!0)},a.unstable_batchedUpdates=Jd,a.unstable_createPortal=function(a,b){return ze(a,b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},a.unstable_renderSubtreeIntoContainer=function(a,b,d,e){if(!ve(d))throw Error(c(200));if(null==a||void 0===a._reactInternalFiber)throw Error(c(38));return xe(a,b,d,!1,e)},a.version="16.13.1"}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b(require("global/window"),require("global/document")):"function"==typeof define&&define.amd?define(["global/window","global/document"],b):(a=a||self,a.videojs=b(a.window,a.document))}(this,function(a,b){"use strict";function c(a){var b,d="info",e=function(){for(var a=arguments.length,c=new Array(a),e=0;e<a;e++)c[e]=arguments[e];b("log",d,c)};return b=xc(a,e),e.createLogger=function(b){return c(a+": "+b)},e.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:d},e.level=function(a){if("string"==typeof a){if(!e.levels.hasOwnProperty(a))throw new Error('"'+a+'" in not a valid log level');d=a}return d},e.history=function(){return wc?[].concat(wc):[]},e.history.filter=function(a){return(wc||[]).filter(function(b){return new RegExp(".*"+a+".*").test(b[0])})},e.history.clear=function(){wc&&(wc.length=0)},e.history.disable=function(){null!==wc&&(wc.length=0,wc=null)},e.history.enable=function(){null===wc&&(wc=[])},e.error=function(){for(var a=arguments.length,c=new Array(a),e=0;e<a;e++)c[e]=arguments[e];return b("error",d,c)},e.warn=function(){for(var a=arguments.length,c=new Array(a),e=0;e<a;e++)c[e]=arguments[e];return b("warn",d,c)},e.debug=function(){for(var a=arguments.length,c=new Array(a),e=0;e<a;e++)c[e]=arguments[e];return b("debug",d,c)},e}function d(a,b){return b={exports:{}},a(b,b.exports),b.exports}function e(a,b){Cc(a).forEach(function(c){return b(a[c],c)})}function f(a,b,c){return void 0===c&&(c=0),Cc(a).reduce(function(c,d){return b(c,a[d],d)},c)}function g(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return Object.assign?Ac.apply(void 0,[a].concat(c)):(c.forEach(function(b){b&&e(b,function(b,c){a[c]=b})}),a)}function h(a){return!!a&&"object"==typeof a}function i(a){return h(a)&&"[object Object]"===Bc.call(a)&&a.constructor===Object}function j(b,c){if(!b||!c)return"";if("function"==typeof a.getComputedStyle){var d=a.getComputedStyle(b);return d?d.getPropertyValue(c)||d[c]:""}return""}function k(a){return"string"==typeof a&&Boolean(a.trim())}function l(a){if(a.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function m(a){return new RegExp("(^|\\s)"+a+"($|\\s)")}function n(){return b===a.document}function o(a){return h(a)&&1===a.nodeType}function p(){try{return a.parent!==a.self}catch(a){return!0}}function q(a){return function(c,d){if(!k(c))return b[a](null);k(d)&&(d=b.querySelector(d));var e=o(d)?d:b;return e[a]&&e[a](c)}}function r(a,c,d,e){void 0===a&&(a="div"),void 0===c&&(c={}),void 0===d&&(d={});var f=b.createElement(a);return Object.getOwnPropertyNames(c).forEach(function(a){var b=c[a];a.indexOf("aria-")!==-1||"role"===a||"type"===a?(yc.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\n"+("createEl(type, properties, attributes). Attempting to set "+a+" to "+b+".")),f.setAttribute(a,b)):"textContent"===a?s(f,b):f[a]!==b&&(f[a]=b)}),Object.getOwnPropertyNames(d).forEach(function(a){f.setAttribute(a,d[a])}),e&&L(f,e),f}function s(a,b){return"undefined"==typeof a.textContent?a.innerText=b:a.textContent=b,a}function t(a,b){b.firstChild?b.insertBefore(a,b.firstChild):b.appendChild(a)}function u(a,b){return l(b),a.classList?a.classList.contains(b):m(b).test(a.className)}function v(a,b){return a.classList?a.classList.add(b):u(a,b)||(a.className=(a.className+" "+b).trim()),a}function w(a,b){return a.classList?a.classList.remove(b):(l(b),a.className=a.className.split(/\s+/).filter(function(a){return a!==b}).join(" ")),a}function x(a,b,c){var d=u(a,b);if("function"==typeof c&&(c=c(a,b)),"boolean"!=typeof c&&(c=!d),c!==d)return c?v(a,b):w(a,b),a}function y(a,b){Object.getOwnPropertyNames(b).forEach(function(c){var d=b[c];null===d||"undefined"==typeof d||d===!1?a.removeAttribute(c):a.setAttribute(c,d===!0?"":d)})}function z(a){var b={},c=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(a&&a.attributes&&a.attributes.length>0)for(var d=a.attributes,e=d.length-1;e>=0;e--){var f=d[e].name,g=d[e].value;"boolean"!=typeof a[f]&&c.indexOf(","+f+",")===-1||(g=null!==g),b[f]=g}return b}function A(a,b){return a.getAttribute(b)}function B(a,b,c){a.setAttribute(b,c)}function C(a,b){a.removeAttribute(b)}function D(){b.body.focus(),b.onselectstart=function(){return!1}}function E(){b.onselectstart=function(){return!0}}function F(a){if(a&&a.getBoundingClientRect&&a.parentNode){var b=a.getBoundingClientRect(),c={};return["bottom","height","left","right","top","width"].forEach(function(a){void 0!==b[a]&&(c[a]=b[a])}),c.height||(c.height=parseFloat(j(a,"height"))),
c.width||(c.width=parseFloat(j(a,"width"))),c}}function G(c){var d;if(c.getBoundingClientRect&&c.parentNode&&(d=c.getBoundingClientRect()),!d)return{left:0,top:0};var e=b.documentElement,f=b.body,g=e.clientLeft||f.clientLeft||0,h=a.pageXOffset||f.scrollLeft,i=d.left+h-g,j=e.clientTop||f.clientTop||0,k=a.pageYOffset||f.scrollTop,l=d.top+k-j;return{left:Math.round(i),top:Math.round(l)}}function H(a,b){var c={},d=G(a),e=a.offsetWidth,f=a.offsetHeight,g=d.top,h=d.left,i=b.pageY,j=b.pageX;return b.changedTouches&&(j=b.changedTouches[0].pageX,i=b.changedTouches[0].pageY),c.y=Math.max(0,Math.min(1,(g-i+f)/f)),c.x=Math.max(0,Math.min(1,(j-h)/e)),c}function I(a){return h(a)&&3===a.nodeType}function J(a){for(;a.firstChild;)a.removeChild(a.firstChild);return a}function K(a){return"function"==typeof a&&(a=a()),(Array.isArray(a)?a:[a]).map(function(a){return"function"==typeof a&&(a=a()),o(a)||I(a)?a:"string"==typeof a&&/\S/.test(a)?b.createTextNode(a):void 0}).filter(function(a){return a})}function L(a,b){return K(b).forEach(function(b){return a.appendChild(b)}),a}function M(a,b){return L(J(a),b)}function N(a){return void 0===a.button&&void 0===a.buttons||(0===a.button&&void 0===a.buttons||("mouseup"===a.type&&0===a.button&&0===a.buttons||0===a.button&&1===a.buttons))}function O(b,c){c&&(uc=c),a.setTimeout(Hc,b)}function P(){Gc=!0,a.removeEventListener("load",P)}function Q(){return Mc++}function R(a,b){if(Oc.has(a)){var c=Oc.get(a);0===c.handlers[b].length&&(delete c.handlers[b],a.removeEventListener?a.removeEventListener(b,c.dispatcher,!1):a.detachEvent&&a.detachEvent("on"+b,c.dispatcher)),Object.getOwnPropertyNames(c.handlers).length<=0&&(delete c.handlers,delete c.dispatcher,delete c.disabled),0===Object.getOwnPropertyNames(c).length&&Oc.delete(a)}}function S(a,b,c,d){c.forEach(function(c){a(b,c,d)})}function T(c){function d(){return!0}function e(){return!1}if(c.fixed_)return c;if(!c||!c.isPropagationStopped){var f=c||a.event;c={};for(var g in f)"layerX"!==g&&"layerY"!==g&&"keyLocation"!==g&&"webkitMovementX"!==g&&"webkitMovementY"!==g&&("returnValue"===g&&f.preventDefault||(c[g]=f[g]));if(c.target||(c.target=c.srcElement||b),c.relatedTarget||(c.relatedTarget=c.fromElement===c.target?c.toElement:c.fromElement),c.preventDefault=function(){f.preventDefault&&f.preventDefault(),c.returnValue=!1,f.returnValue=!1,c.defaultPrevented=!0},c.defaultPrevented=!1,c.stopPropagation=function(){f.stopPropagation&&f.stopPropagation(),c.cancelBubble=!0,f.cancelBubble=!0,c.isPropagationStopped=d},c.isPropagationStopped=e,c.stopImmediatePropagation=function(){f.stopImmediatePropagation&&f.stopImmediatePropagation(),c.isImmediatePropagationStopped=d,c.stopPropagation()},c.isImmediatePropagationStopped=e,null!==c.clientX&&void 0!==c.clientX){var h=b.documentElement,i=b.body;c.pageX=c.clientX+(h&&h.scrollLeft||i&&i.scrollLeft||0)-(h&&h.clientLeft||i&&i.clientLeft||0),c.pageY=c.clientY+(h&&h.scrollTop||i&&i.scrollTop||0)-(h&&h.clientTop||i&&i.clientTop||0)}c.which=c.charCode||c.keyCode,null!==c.button&&void 0!==c.button&&(c.button=1&c.button?0:4&c.button?1:2&c.button?2:0)}return c.fixed_=!0,c}function U(a,b,c){if(Array.isArray(b))return S(U,a,b,c);Oc.has(a)||Oc.set(a,{});var d=Oc.get(a);if(d.handlers||(d.handlers={}),d.handlers[b]||(d.handlers[b]=[]),c.guid||(c.guid=Q()),d.handlers[b].push(c),d.dispatcher||(d.disabled=!1,d.dispatcher=function(b,c){if(!d.disabled){b=T(b);var e=d.handlers[b.type];if(e)for(var f=e.slice(0),g=0,h=f.length;g<h&&!b.isImmediatePropagationStopped();g++)try{f[g].call(a,b,c)}catch(a){yc.error(a)}}}),1===d.handlers[b].length)if(a.addEventListener){var e=!1;Pc()&&Qc.indexOf(b)>-1&&(e={passive:!0}),a.addEventListener(b,d.dispatcher,e)}else a.attachEvent&&a.attachEvent("on"+b,d.dispatcher)}function V(a,b,c){if(Oc.has(a)){var d=Oc.get(a);if(d.handlers){if(Array.isArray(b))return S(V,a,b,c);var e=function(a,b){d.handlers[b]=[],R(a,b)};if(void 0!==b){var f=d.handlers[b];if(f){if(!c)return void e(a,b);if(c.guid)for(var g=0;g<f.length;g++)f[g].guid===c.guid&&f.splice(g--,1);R(a,b)}}else for(var h in d.handlers)Object.prototype.hasOwnProperty.call(d.handlers||{},h)&&e(a,h)}}}function W(a,b,c){var d=Oc.has(a)?Oc.get(a):{},e=a.parentNode||a.ownerDocument;if("string"==typeof b?b={type:b,target:a}:b.target||(b.target=a),b=T(b),d.dispatcher&&d.dispatcher.call(a,b,c),e&&!b.isPropagationStopped()&&b.bubbles===!0)W.call(null,e,b,c);else if(!e&&!b.defaultPrevented&&b.target&&b.target[b.type]){Oc.has(b.target)||Oc.set(b.target,{});var f=Oc.get(b.target);b.target[b.type]&&(f.disabled=!0,"function"==typeof b.target[b.type]&&b.target[b.type](),f.disabled=!1)}return!b.defaultPrevented}function X(a,b,c){if(Array.isArray(b))return S(X,a,b,c);var d=function d(){V(a,b,d),c.apply(this,arguments)};d.guid=c.guid=c.guid||Q(),U(a,b,d)}function Y(a,b,c){var d=function d(){V(a,b,d),c.apply(this,arguments)};d.guid=c.guid=c.guid||Q(),U(a,b,d)}function Z(b,c){void 0===c&&(c={});var d=c,e=d.eventBusKey;if(e){if(!b[e].nodeName)throw new Error('The eventBusKey "'+e+'" does not refer to an element.');b.eventBusEl_=b[e]}else b.eventBusEl_=r("span",{className:"vjs-event-bus"});return g(b,ed),b.eventedCallbacks&&b.eventedCallbacks.forEach(function(a){a()}),b.on("dispose",function(){b.off(),a.setTimeout(function(){b.eventBusEl_=null},0)}),b}function $(a,b){return g(a,fd),a.state=g({},a.state,b),"function"==typeof a.handleStateChanged&&Yc(a)&&a.on("statechanged",a.handleStateChanged),a}function _(){for(var a={},b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];return c.forEach(function(b){b&&e(b,function(b,c){return i(b)?(i(a[c])||(a[c]={}),void(a[c]=_(a[c],b))):void(a[c]=b)})}),a}function aa(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ba(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function ca(a,b,c){if("number"!=typeof b||b<0||b>c)throw new Error("Failed to execute '"+a+"' on 'TimeRanges': The index provided ("+b+") is non-numeric or out of bounds (0-"+c+").")}function da(a,b,c,d){return ca(a,d,c.length-1),c[d][b]}function ea(a){return void 0===a||0===a.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:a.length,start:da.bind(null,"start",0,a),end:da.bind(null,"end",1,a)}}function fa(a,b){return Array.isArray(a)?ea(a):void 0===a||void 0===b?ea():ea([[a,b]])}function ga(a,b){var c,d,e=0;if(!b)return 0;a&&a.length||(a=fa(0,0));for(var f=0;f<a.length;f++)c=a.start(f),d=a.end(f),d>b&&(d=b),e+=d-c;return e/b}function ha(a){return a instanceof ha?a:("number"==typeof a?this.code=a:"string"==typeof a?this.message=a:h(a)&&("number"==typeof a.code&&(this.code=a.code),g(this,a)),void(this.message||(this.message=ha.defaultMessages[this.code]||"")))}function ia(a,b){var c,d=null;try{c=JSON.parse(a,b)}catch(a){d=a}return[d,c]}function ja(a){return void 0!==a&&null!==a&&"function"==typeof a.then}function ka(a){ja(a)&&a.then(null,function(a){})}function la(a){var b=se.call(a);return"[object Function]"===b||"function"==typeof a&&"[object RegExp]"!==b||"undefined"!=typeof window&&(a===window.setTimeout||a===window.alert||a===window.confirm||a===window.prompt)}function ma(a,b){for(var c=0;c<a.length;c++)b(a[c])}function na(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function oa(a,b,c){var d=a;return re(b)?(c=b,"string"==typeof a&&(d={uri:a})):d=Ac({},b,{uri:a}),d.callback=c,d}function pa(a,b,c){return b=oa(a,b,c),qa(b)}function qa(a){function b(){4===h.readyState&&setTimeout(e,0)}function c(){var a=void 0;if(a=h.response?h.response:h.responseText||ra(h),q)try{a=JSON.parse(a)}catch(a){}return a}function d(a){return clearTimeout(k),a instanceof Error||(a=new Error(""+(a||"Unknown XMLHttpRequest Error"))),a.statusCode=0,g(a,r)}function e(){if(!j){var b;clearTimeout(k),b=a.useXDR&&void 0===h.status?200:1223===h.status?204:h.status;var d=r,e=null;return 0!==b?(d={body:c(),statusCode:b,method:m,headers:{},url:l,rawRequest:h},h.getAllResponseHeaders&&(d.headers=te(h.getAllResponseHeaders()))):e=new Error("Internal XMLHttpRequest Error"),g(e,d,d.body)}}if("undefined"==typeof a.callback)throw new Error("callback argument missing");var f=!1,g=function(b,c,d){f||(f=!0,a.callback(b,c,d))},h=a.xhr||null;h||(h=a.cors||a.useXDR?new pa.XDomainRequest:new pa.XMLHttpRequest);var i,j,k,l=h.url=a.uri||a.url,m=h.method=a.method||"GET",n=a.body||a.data,o=h.headers=a.headers||{},p=!!a.sync,q=!1,r={body:void 0,headers:{},statusCode:0,method:m,url:l,rawRequest:h};if("json"in a&&a.json!==!1&&(q=!0,o.accept||o.Accept||(o.Accept="application/json"),"GET"!==m&&"HEAD"!==m&&(o["content-type"]||o["Content-Type"]||(o["Content-Type"]="application/json"),n=JSON.stringify(a.json===!0?n:a.json))),h.onreadystatechange=b,h.onload=e,h.onerror=d,h.onprogress=function(){},h.onabort=function(){j=!0},h.ontimeout=d,h.open(m,l,!p,a.username,a.password),p||(h.withCredentials=!!a.withCredentials),!p&&a.timeout>0&&(k=setTimeout(function(){if(!j){j=!0,h.abort("timeout");var a=new Error("XMLHttpRequest timeout");a.code="ETIMEDOUT",d(a)}},a.timeout)),h.setRequestHeader)for(i in o)o.hasOwnProperty(i)&&h.setRequestHeader(i,o[i]);else if(a.headers&&!na(a.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in a&&(h.responseType=a.responseType),"beforeSend"in a&&"function"==typeof a.beforeSend&&a.beforeSend(h),h.send(n||null),h}function ra(a){try{if("document"===a.responseType)return a.responseXML;var b=a.responseXML&&"parsererror"===a.responseXML.documentElement.nodeName;if(""===a.responseType&&!b)return a.responseXML}catch(a){}return null}function sa(){}function ta(a,b){this.name="ParsingError",this.code=a.code,this.message=b||a.message}function ua(a){function b(a,b,c,d){return 3600*(0|a)+60*(0|b)+(0|c)+(0|d)/1e3}var c=a.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return c?c[3]?b(c[1],c[2],c[3].replace(":",""),c[4]):c[1]>59?b(c[1],c[2],0,c[4]):b(0,c[1],c[2],c[4]):null}function va(){this.values=Je(null)}function wa(a,b,c,d){var e=d?a.split(d):[a];for(var f in e)if("string"==typeof e[f]){var g=e[f].split(c);if(2===g.length){var h=g[0],i=g[1];b(h,i)}}}function xa(a,b,c){function d(){var b=ua(a);if(null===b)throw new ta(ta.Errors.BadTimeStamp,"Malformed timestamp: "+g);return a=a.replace(/^[^\sa-zA-Z-]+/,""),b}function e(a,b){var d=new va;wa(a,function(a,b){switch(a){case"region":for(var e=c.length-1;e>=0;e--)if(c[e].id===b){d.set(a,c[e].region);break}break;case"vertical":d.alt(a,b,["rl","lr"]);break;case"line":var f=b.split(","),g=f[0];d.integer(a,g),d.percent(a,g)?d.set("snapToLines",!1):null,d.alt(a,g,["auto"]),2===f.length&&d.alt("lineAlign",f[1],["start","center","end"]);break;case"position":f=b.split(","),d.percent(a,f[0]),2===f.length&&d.alt("positionAlign",f[1],["start","center","end"]);break;case"size":d.percent(a,b);break;case"align":d.alt(a,b,["start","center","end","left","right"])}},/:/,/\s/),b.region=d.get("region",null),b.vertical=d.get("vertical","");try{b.line=d.get("line","auto")}catch(a){}b.lineAlign=d.get("lineAlign","start"),b.snapToLines=d.get("snapToLines",!0),b.size=d.get("size",100);try{b.align=d.get("align","center")}catch(a){b.align=d.get("align","middle")}try{b.position=d.get("position","auto")}catch(a){b.position=d.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},b.align)}b.positionAlign=d.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},b.align)}function f(){a=a.replace(/^\s+/,"")}var g=a;if(f(),b.startTime=d(),f(),"-->"!==a.substr(0,3))throw new ta(ta.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+g);a=a.substr(3),f(),b.endTime=d(),f(),e(a,b)}function ya(a,b){function c(){function a(a){return b=b.substr(a.length),a}if(!b)return null;var c=b.match(/^([^<]*)(<[^>]*>?)?/);return a(c[1]?c[1]:c[2])}function d(a){return Ke.innerHTML=a,a=Ke.textContent,Ke.textContent="",a}function e(a,b){return!Oe[b.localName]||Oe[b.localName]===a.localName}function f(b,c){var d=Le[b];if(!d)return null;var e=a.document.createElement(d),f=Ne[b];return f&&c&&(e[f]=c.trim()),e}for(var g,h=a.document.createElement("div"),i=h,j=[];null!==(g=c());)if("<"!==g[0])i.appendChild(a.document.createTextNode(d(g)));else{if("/"===g[1]){j.length&&j[j.length-1]===g.substr(2).replace(">","")&&(j.pop(),i=i.parentNode);continue}var k,l=ua(g.substr(1,g.length-2));if(l){k=a.document.createProcessingInstruction("timestamp",l),i.appendChild(k);continue}var m=g.match(/^<([^.\s\/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!m)continue;if(k=f(m[1],m[3]),!k)continue;if(!e(i,k))continue;if(m[2]){var n=m[2].split(".");n.forEach(function(a){var b=/^bg_/.test(a),c=b?a.slice(3):a;if(Me.hasOwnProperty(c)){var d=b?"background-color":"color",e=Me[c];k.style[d]=e}}),k.className=n.join(" ")}j.push(m[1]),i.appendChild(k),i=k}return h}function za(a){for(var b=0;b<Pe.length;b++){var c=Pe[b];if(a>=c[0]&&a<=c[1])return!0}return!1}function Aa(a){function b(a,b){for(var c=b.childNodes.length-1;c>=0;c--)a.push(b.childNodes[c])}function c(a){if(!a||!a.length)return null;var d=a.pop(),e=d.textContent||d.innerText;if(e){var f=e.match(/^.*(\n|\r)/);return f?(a.length=0,f[0]):e}return"ruby"===d.tagName?c(a):d.childNodes?(b(a,d),c(a)):void 0}var d,e=[],f="";if(!a||!a.childNodes)return"ltr";for(b(e,a);f=c(e);)for(var g=0;g<f.length;g++)if(d=f.charCodeAt(g),za(d))return"rtl";return"ltr"}function Ba(a){if("number"==typeof a.line&&(a.snapToLines||a.line>=0&&a.line<=100))return a.line;if(!a.track||!a.track.textTrackList||!a.track.textTrackList.mediaElement)return-1;for(var b=a.track,c=b.textTrackList,d=0,e=0;e<c.length&&c[e]!==b;e++)"showing"===c[e].mode&&d++;return++d*-1}function Ca(){}function Da(a,b,c){Ca.call(this),this.cue=b,this.cueDiv=ya(a,b.text);var d={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===b.vertical?"horizontal-tb":"lr"===b.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(d,this.cueDiv),this.div=a.document.createElement("div"),d={direction:Aa(this.cueDiv),writingMode:""===b.vertical?"horizontal-tb":"lr"===b.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===b.align?"center":b.align,font:c.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(d),this.div.appendChild(this.cueDiv);var e=0;switch(b.positionAlign){case"start":e=b.position;break;case"center":e=b.position-b.size/2;break;case"end":e=b.position-b.size}""===b.vertical?this.applyStyles({left:this.formatStyle(e,"%"),width:this.formatStyle(b.size,"%")}):this.applyStyles({top:this.formatStyle(e,"%"),height:this.formatStyle(b.size,"%")}),this.move=function(a){this.applyStyles({top:this.formatStyle(a.top,"px"),bottom:this.formatStyle(a.bottom,"px"),left:this.formatStyle(a.left,"px"),right:this.formatStyle(a.right,"px"),height:this.formatStyle(a.height,"px"),width:this.formatStyle(a.width,"px")})}}function Ea(a){var b,c,d,e;if(a.div){c=a.div.offsetHeight,d=a.div.offsetWidth,e=a.div.offsetTop;var f=(f=a.div.childNodes)&&(f=f[0])&&f.getClientRects&&f.getClientRects();a=a.div.getBoundingClientRect(),b=f?Math.max(f[0]&&f[0].height||0,a.height/f.length):0}this.left=a.left,this.right=a.right,this.top=a.top||e,this.height=a.height||c,this.bottom=a.bottom||e+(a.height||c),this.width=a.width||d,this.lineHeight=void 0!==b?b:a.lineHeight}function Fa(a,b,c,d){function e(a,b){for(var e,f=new Ea(a),g=1,h=0;h<b.length;h++){for(;a.overlapsOppositeAxis(c,b[h])||a.within(c)&&a.overlapsAny(d);)a.move(b[h]);if(a.within(c))return a;var i=a.intersectPercentage(c);g>i&&(e=new Ea(a),g=i),a=new Ea(f)}return e||f}var f=new Ea(b),g=b.cue,h=Ba(g),i=[];if(g.snapToLines){var j;switch(g.vertical){case"":i=["+y","-y"],j="height";break;case"rl":i=["+x","-x"],j="width";break;case"lr":i=["-x","+x"],j="width"}var k=f.lineHeight,l=k*Math.round(h),m=c[j]+k,n=i[0];Math.abs(l)>m&&(l=l<0?-1:1,l*=Math.ceil(m/k)*k),h<0&&(l+=""===g.vertical?c.height:c.width,i=i.reverse()),f.move(n,l)}else{var o=f.lineHeight/c.height*100;switch(g.lineAlign){case"center":h-=o/2;break;case"end":h-=o}switch(g.vertical){case"":b.applyStyles({top:b.formatStyle(h,"%")});break;case"rl":b.applyStyles({left:b.formatStyle(h,"%")});break;case"lr":b.applyStyles({right:b.formatStyle(h,"%")})}i=["+y","-x","+x","-y"],f=new Ea(b)}var p=e(f,i);b.move(p.toCSSCompatValues(c))}function Ga(){}function Ha(a){if("string"!=typeof a)return!1;var b=Ve[a.toLowerCase()];return!!b&&a.toLowerCase()}function Ia(a){if("string"!=typeof a)return!1;var b=We[a.toLowerCase()];return!!b&&a.toLowerCase()}function Ja(a,b,c){this.hasBeenReset=!1;var d="",e=!1,f=a,g=b,h=c,i=null,j="",k=!0,l="auto",m="start",n="auto",o="auto",p=100,q="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return d},set:function(a){d=""+a}},pauseOnExit:{enumerable:!0,get:function(){return e},set:function(a){e=!!a}},startTime:{enumerable:!0,get:function(){return f},set:function(a){if("number"!=typeof a)throw new TypeError("Start time must be set to a number.");f=a,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return g},set:function(a){if("number"!=typeof a)throw new TypeError("End time must be set to a number.");g=a,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return h},set:function(a){h=""+a,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return i},set:function(a){i=a,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return j},set:function(a){var b=Ha(a);if(b===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");j=b,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return k},set:function(a){k=!!a,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return l},set:function(a){if("number"!=typeof a&&a!==Ue)throw new SyntaxError("Line: an invalid number or illegal string was specified.");l=a,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return m},set:function(a){var b=Ia(a);b&&(m=b,this.hasBeenReset=!0)}},position:{enumerable:!0,get:function(){return n},set:function(a){if(a<0||a>100)throw new Error("Position must be between 0 and 100.");n=a,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return o},set:function(a){var b=Ia(a);b&&(o=b,this.hasBeenReset=!0)}},size:{enumerable:!0,get:function(){return p},set:function(a){if(a<0||a>100)throw new Error("Size must be between 0 and 100.");p=a,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return q},set:function(a){var b=Ia(a);if(!b)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");q=b,this.hasBeenReset=!0}}}),this.displayState=void 0}function Ka(a){if("string"!=typeof a)return!1;var b=Ye[a.toLowerCase()];return!!b&&a.toLowerCase()}function La(a){return"number"==typeof a&&a>=0&&a<=100}function Ma(){var a=100,b=3,c=0,d=100,e=0,f=100,g="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return a},set:function(b){if(!La(b))throw new Error("Width must be between 0 and 100.");a=b}},lines:{enumerable:!0,get:function(){return b},set:function(a){if("number"!=typeof a)throw new TypeError("Lines must be set to a number.");b=a}},regionAnchorY:{enumerable:!0,get:function(){return d},set:function(a){if(!La(a))throw new Error("RegionAnchorX must be between 0 and 100.");d=a}},regionAnchorX:{enumerable:!0,get:function(){return c},set:function(a){if(!La(a))throw new Error("RegionAnchorY must be between 0 and 100.");c=a}},viewportAnchorY:{enumerable:!0,get:function(){return f},set:function(a){if(!La(a))throw new Error("ViewportAnchorY must be between 0 and 100.");f=a}},viewportAnchorX:{enumerable:!0,get:function(){return e},set:function(a){if(!La(a))throw new Error("ViewportAnchorX must be between 0 and 100.");e=a}},scroll:{enumerable:!0,get:function(){return g},set:function(a){var b=Ka(a);b===!1||(g=b)}}})}function Na(a,b,c,d,e){void 0===e&&(e={});var f=a.textTracks();e.kind=b,c&&(e.label=c),d&&(e.language=d),e.tech=a;var g=new Ie.text.TrackClass(e);return f.addTrack(g),g}function Oa(a,b){af[a]=af[a]||[],af[a].push(b)}function Pa(a,b,c){a.setTimeout(function(){return Ya(b,af[b.type],c,a)},1)}function Qa(a,b){a.forEach(function(a){return a.setTech&&a.setTech(b)})}function Ra(a,b,c){return a.reduceRight(Ua(c),b[c]())}function Sa(a,b,c,d){return b[c](a.reduce(Ua(c),d))}function Ta(a,b,c,d){void 0===d&&(d=null);var e="call"+hd(c),f=a.reduce(Ua(e),d),g=f===cf,h=g?null:b[c](f);return Va(a,c,h,g),h}function Ua(a){return function(b,c){return b===cf?cf:c[a]?c[a](b):b}}function Va(a,b,c,d){for(var e=a.length-1;e>=0;e--){var f=a[e];f[b]&&f[b](d,c)}}function Wa(a){bf[a.id()]=null}function Xa(a,b){var c=bf[a.id()],d=null;if(void 0===c||null===c)return d=b(a),bf[a.id()]=[[b,d]],d;for(var e=0;e<c.length;e++){var f=c[e],g=f[0],h=f[1];g===b&&(d=h)}return null===d&&(d=b(a),c.push([b,d])),d}function Ya(a,b,c,d,e,f){void 0===a&&(a={}),void 0===b&&(b=[]),void 0===e&&(e=[]),void 0===f&&(f=!1);var h=b,i=h[0],j=h.slice(1);if("string"==typeof i)Ya(a,af[i],c,d,e,f);else if(i){var k=Xa(d,i);if(!k.setSource)return e.push(k),Ya(a,j,c,d,e,f);k.setSource(g({},a),function(b,g){return b?Ya(a,j,c,d,e,f):(e.push(k),void Ya(g,a.type===g.type?j:af[g.type],c,d,e,f))})}else j.length?Ya(a,j,c,d,e,f):f?c(a,e):Ya(a,af["*"],c,d,e,!0)}function Za(a){if(!a.type){var b=hf(a.src);b&&(a.type=b)}return a}function $a(a,b){var c;if(4===a.length)c=a[1]+a[1]+a[2]+a[2]+a[3]+a[3];else{if(7!==a.length)throw new Error("Invalid color code provided, "+a+"; must be formatted as e.g. #f0e or #f604e2.");c=a.slice(1)}return"rgba("+parseInt(c.slice(0,2),16)+","+parseInt(c.slice(2,4),16)+","+parseInt(c.slice(4,6),16)+","+b+")"}function _a(a,b,c){try{a.style[b]=c}catch(a){return}}function ab(a){yf=a}function bb(){yf=xf}function cb(a,b){return void 0===b&&(b=a),yf(a,b)}function db(a,b){if(b&&(a=b(a)),a&&"none"!==a)return a}function eb(a,b){var c=a.options[a.options.selectedIndex].value;return db(c,b)}function fb(a,b,c){if(b)for(var d=0;d<a.options.length;d++)if(db(a.options[d].value,c)===b){a.selectedIndex=d;break}}function gb(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function hb(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&dh(a,b)}function ib(b,c,d){var e=ib.getPlayer(b);if(e)return c&&yc.warn('Player "'+b+'" is already initialised. Options will not be applied.'),d&&e.ready(d),e;var f="string"==typeof b?Dc("#"+sh(b)):b;if(c.params.shadowDom&&a.playerShadowRoot[""+b]&&(f=a.playerShadowRoot[""+b].getElementById(""+b)),c.params.idIframe&&(f=a.document.getElementById(c.params.idIframe).contentWindow.document.getElementById(""+b)),!o(f))throw new TypeError("The element or ID supplied is not valid. (videojs)");f.ownerDocument.defaultView&&f.ownerDocument.body.contains(f)||yc.warn("The element supplied is not included in the DOM"),c=c||{},ib.hooks("beforesetup").forEach(function(a){var b=a(f,_(c));return!h(b)||Array.isArray(b)?void yc.error("please return an object in beforesetup hooks"):void(c=_(c,b))});var g=nd.getComponent("Player");return e=new g(f,c,d),ib.hooks("setup").forEach(function(a){return a(e)}),e}function jb(){return jb=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},jb.apply(this,arguments)}function kb(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function lb(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function mb(b){for(var c=a.atob(b||""),d=new Uint8Array(c.length),e=0;e<c.length;e++)d[e]=c.charCodeAt(e);return d}function nb(a){return a&&"object"==typeof a&&"default"in a?a.default:a}function ob(a){return a&&"object"==typeof a&&"default"in a?a.default:a}function pb(a){for(var b=Hh(a),c=new Uint8Array(b.length),d=0;d<b.length;d++)c[d]=b.charCodeAt(d);return c}function qb(){}function rb(a,b,c,d,e){function f(a){if(a>65535){a-=65536;var b=55296+(a>>10),c=56320+(1023&a);return String.fromCharCode(b,c)}return String.fromCharCode(a)}function g(a){var b=a.slice(1,-1);return b in c?c[b]:"#"===b.charAt(0)?f(parseInt(b.substr(1).replace("x","0x"))):(e.error("entity not found:"+a),a)}function h(b){if(b>p){var c=a.substring(p,b).replace(/&#?\w+;/g,g);m&&i(p),d.characters(c,0,b-p),p=b}}function i(b,c){for(;b>=k&&(c=l.exec(a));)j=c.index,k=j+c[0].length,m.lineNumber++;m.columnNumber=b-j+1}for(var j=0,k=0,l=/.*(?:\r\n?|\n)|.*$/g,m=d.locator,n=[{currentNSMap:b}],o={},p=0;;){try{var q=a.indexOf("<",p);if(q<0){if(!a.substr(p).match(/^\s*$/)){var r=d.doc,s=r.createTextNode(a.substr(p));r.appendChild(s),d.currentElement=s}return}switch(q>p&&h(q),a.charAt(q+1)){case"/":var t=a.indexOf(">",q+3),u=a.substring(q+2,t),v=n.pop();t<0?(u=a.substring(q+2).replace(/[\s<].*/,""),e.error("end tag name: "+u+" is not complete:"+v.tagName),t=q+1+u.length):u.match(/\s</)&&(u=u.replace(/[\s<].*/,""),e.error("end tag name: "+u+" maybe not complete"),t=q+1+u.length);var w=v.localNSMap,x=v.tagName==u,y=x||v.tagName&&v.tagName.toLowerCase()==u.toLowerCase();if(y){if(d.endElement(v.uri,v.localName,u),w)for(var z in w)d.endPrefixMapping(z);x||e.fatalError("end tag name: "+u+" is not match the current start tagName:"+v.tagName)}else n.push(v);t++;break;case"?":m&&i(q),t=zb(a,q,d);break;case"!":m&&i(q),t=yb(a,q,d,e);break;default:m&&i(q);var A=new Ab,B=n[n.length-1].currentNSMap,t=tb(a,q,A,B,g,e),C=A.length;if(!A.closed&&wb(a,t,A.tagName,o)&&(A.closed=!0,c.nbsp||e.warning("unclosed xml attribute")),m&&C){for(var D=sb(m,{}),E=0;E<C;E++){var F=A[E];i(F.offset),F.locator=sb(m,{})}d.locator=D,ub(A,d,B)&&n.push(A),d.locator=m}else ub(A,d,B)&&n.push(A);"http://www.w3.org/1999/xhtml"!==A.uri||A.closed?t++:t=vb(a,t,A.tagName,g,d)}}catch(a){e.error("element parse error: "+a),t=-1}t>p?p=t:h(Math.max(q,p)+1)}}function sb(a,b){return b.lineNumber=a.lineNumber,b.columnNumber=a.columnNumber,b}function tb(a,b,c,d,e,f){for(var g,h,i=++b,j=Mh;;){var k=a.charAt(i);switch(k){case"=":if(j===Nh)g=a.slice(b,i),j=Ph;else{if(j!==Oh)throw new Error("attribute equal must after attrName");j=Ph}break;case"'":case'"':if(j===Ph||j===Nh){if(j===Nh&&(f.warning('attribute value must after "="'),g=a.slice(b,i)),b=i+1,i=a.indexOf(k,b),!(i>0))throw new Error("attribute value no end '"+k+"' match");h=a.slice(b,i).replace(/&#?\w+;/g,e),c.add(g,h,b-1),j=Rh}else{if(j!=Qh)throw new Error('attribute value must after "="');h=a.slice(b,i).replace(/&#?\w+;/g,e),c.add(g,h,b),f.warning('attribute "'+g+'" missed start quot('+k+")!!"),b=i+1,j=Rh}break;case"/":switch(j){case Mh:c.setTagName(a.slice(b,i));case Rh:case Sh:case Th:j=Th,c.closed=!0;case Qh:case Nh:case Oh:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return f.error("unexpected end of input"),j==Mh&&c.setTagName(a.slice(b,i)),i;case">":switch(j){case Mh:c.setTagName(a.slice(b,i));case Rh:case Sh:case Th:break;case Qh:case Nh:h=a.slice(b,i),"/"===h.slice(-1)&&(c.closed=!0,h=h.slice(0,-1));case Oh:j===Oh&&(h=g),j==Qh?(f.warning('attribute "'+h+'" missed quot(")!!'),c.add(g,h.replace(/&#?\w+;/g,e),b)):("http://www.w3.org/1999/xhtml"===d[""]&&h.match(/^(?:disabled|checked|selected)$/i)||f.warning('attribute "'+h+'" missed value!! "'+h+'" instead!!'),c.add(h,h,b));break;case Ph:throw new Error("attribute value missed!!")}return i;case"":k=" ";default:if(k<=" ")switch(j){case Mh:c.setTagName(a.slice(b,i)),j=Sh;break;case Nh:g=a.slice(b,i),j=Oh;break;case Qh:var h=a.slice(b,i).replace(/&#?\w+;/g,e);f.warning('attribute "'+h+'" missed quot(")!!'),c.add(g,h,b);case Rh:j=Sh}else switch(j){case Oh:c.tagName;"http://www.w3.org/1999/xhtml"===d[""]&&g.match(/^(?:disabled|checked|selected)$/i)||f.warning('attribute "'+g+'" missed value!! "'+g+'" instead2!!'),c.add(g,g,b),b=i,j=Nh;break;case Rh:f.warning('attribute space is required"'+g+'"!!');case Sh:j=Nh,b=i;break;case Ph:j=Qh,b=i;break;case Th:throw new Error("elements closed character '/' and '>' must be connected to")}}i++}}function ub(a,b,c){for(var d=a.tagName,e=null,f=a.length;f--;){var g=a[f],h=g.qName,i=g.value,j=h.indexOf(":");if(j>0)var k=g.prefix=h.slice(0,j),l=h.slice(j+1),m="xmlns"===k&&l;else l=h,k=null,m="xmlns"===h&&"";g.localName=l,m!==!1&&(null==e&&(e={},xb(c,c={})),c[m]=e[m]=i,g.uri="http://www.w3.org/2000/xmlns/",b.startPrefixMapping(m,i))}for(var f=a.length;f--;){g=a[f];var k=g.prefix;k&&("xml"===k&&(g.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==k&&(g.uri=c[k||""]))}var j=d.indexOf(":");j>0?(k=a.prefix=d.slice(0,j),l=a.localName=d.slice(j+1)):(k=null,l=a.localName=d);var n=a.uri=c[k||""];if(b.startElement(n,l,d,a),!a.closed)return a.currentNSMap=c,a.localNSMap=e,!0;if(b.endElement(n,l,d),e)for(k in e)b.endPrefixMapping(k)}function vb(a,b,c,d,e){if(/^(?:script|textarea)$/i.test(c)){var f=a.indexOf("</"+c+">",b),g=a.substring(b+1,f);if(/[&<]/.test(g))return/^script$/i.test(c)?(e.characters(g,0,g.length),f):(g=g.replace(/&#?\w+;/g,d),e.characters(g,0,g.length),f)}return b+1}function wb(a,b,c,d){var e=d[c];return null==e&&(e=a.lastIndexOf("</"+c+">"),e<b&&(e=a.lastIndexOf("</"+c)),d[c]=e),e<b}function xb(a,b){for(var c in a)b[c]=a[c]}function yb(a,b,c,d){var e=a.charAt(b+2);switch(e){case"-":if("-"===a.charAt(b+3)){var f=a.indexOf("-->",b+4);return f>b?(c.comment(a,b+4,f-b-4),f+3):(d.error("Unclosed comment"),-1)}return-1;default:if("CDATA["==a.substr(b+3,6)){var f=a.indexOf("]]>",b+9);return c.startCDATA(),c.characters(a,b+9,f-b-9),c.endCDATA(),f+3}var g=Cb(a,b),h=g.length;if(h>1&&/!doctype/i.test(g[0][0])){var i=g[1][0],j=h>3&&/^public$/i.test(g[2][0])&&g[3][0],k=h>4&&g[4][0],l=g[h-1];return c.startDTD(i,j&&j.replace(/^(['"])(.*?)\1$/,"$2"),k&&k.replace(/^(['"])(.*?)\1$/,"$2")),c.endDTD(),l.index+l[0].length}}return-1}function zb(a,b,c){var d=a.indexOf("?>",b);if(d){var e=a.substring(b,d).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(e){e[0].length;return c.processingInstruction(e[1],e[2]),d+2}return-1}return-1}function Ab(a){}function Bb(a,b){return a.__proto__=b,a}function Cb(a,b){var c,d=[],e=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(e.lastIndex=b,e.exec(a);c=e.exec(a);)if(d.push(c),c[1])return d}function Db(a,b){for(var c in a)b[c]=a[c]}function Eb(a,b){var c=a.prototype;if(Object.create){var d=Object.create(b.prototype);c.__proto__=d}if(!(c instanceof b)){var e=function(){};e.prototype=b.prototype,e=new e,Db(c,e),a.prototype=c=e}c.constructor!=a&&(c.constructor=a)}function Fb(a,b){if(b instanceof Error)var c=b;else c=this,Error.call(this,ji[a]),this.message=ji[a],Error.captureStackTrace&&Error.captureStackTrace(this,Fb);return c.code=a,b&&(this.message=this.message+": "+b),c}function Gb(){}function Hb(a,b){this._node=a,this._refresh=b,Ib(this)}function Ib(a){var b=a._node._inc||a._node.ownerDocument._inc;if(a._inc!=b){var c=a._refresh(a._node);oc(a,"length",c.length),Db(c,a),a._inc=b}}function Jb(){}function Kb(a,b){for(var c=a.length;c--;)if(a[c]===b)return c}function Lb(a,b,c,d){if(d?b[Kb(b,d)]=c:b[b.length++]=c,a){c.ownerElement=a;var e=a.ownerDocument;e&&(d&&Tb(e,a,d),Sb(e,a,c))}}function Mb(a,b,c){var d=Kb(b,c);if(!(d>=0))throw Fb(li,new Error(a.tagName+"@"+c));for(var e=b.length-1;d<e;)b[d]=b[++d];if(b.length=e,a){var f=a.ownerDocument;f&&(Tb(f,a,c),c.ownerElement=null)}}function Nb(a){if(this._features={},a)for(var b in a)this._features=a[b]}function Ob(){}function Pb(a){return"<"==a&&"&lt;"||">"==a&&"&gt;"||"&"==a&&"&amp;"||'"'==a&&"&quot;"||"&#"+a.charCodeAt()+";"}function Qb(a,b){if(b(a))return!0;if(a=a.firstChild)do if(Qb(a,b))return!0;while(a=a.nextSibling)}function Rb(){}function Sb(a,b,c){
a&&a._inc++;var d=c.namespaceURI;"http://www.w3.org/2000/xmlns/"==d&&(b._nsMap[c.prefix?c.localName:""]=c.value)}function Tb(a,b,c,d){a&&a._inc++;var e=c.namespaceURI;"http://www.w3.org/2000/xmlns/"==e&&delete b._nsMap[c.prefix?c.localName:""]}function Ub(a,b,c){if(a&&a._inc){a._inc++;var d=b.childNodes;if(c)d[d.length++]=c;else{for(var e=b.firstChild,f=0;e;)d[f++]=e,e=e.nextSibling;d.length=f}}}function Vb(a,b){var c=b.previousSibling,d=b.nextSibling;return c?c.nextSibling=d:a.firstChild=d,d?d.previousSibling=c:a.lastChild=c,Ub(a.ownerDocument,a),b}function Wb(a,b,c){var d=b.parentNode;if(d&&d.removeChild(b),b.nodeType===gi){var e=b.firstChild;if(null==e)return b;var f=b.lastChild}else e=f=b;var g=c?c.previousSibling:a.lastChild;e.previousSibling=g,f.nextSibling=c,g?g.nextSibling=e:a.firstChild=e,null==c?a.lastChild=f:c.previousSibling=f;do e.parentNode=a;while(e!==f&&(e=e.nextSibling));return Ub(a.ownerDocument||a,a),b.nodeType==gi&&(b.firstChild=b.lastChild=null),b}function Xb(a,b){var c=b.parentNode;if(c){var d=a.lastChild;c.removeChild(b);var d=a.lastChild}var d=a.lastChild;return b.parentNode=a,b.previousSibling=d,b.nextSibling=null,d?d.nextSibling=b:a.firstChild=b,a.lastChild=b,Ub(a.ownerDocument,a,b),b}function Yb(){this._nsMap={}}function Zb(){}function $b(){}function _b(){}function ac(){}function bc(){}function cc(){}function dc(){}function ec(){}function fc(){}function gc(){}function hc(){}function ic(){}function jc(a,b){var c=[],d=9==this.nodeType?this.documentElement:this,e=d.prefix,f=d.namespaceURI;if(f&&null==e){var e=d.lookupPrefix(f);if(null==e)var g=[{namespace:f,prefix:null}]}return lc(this,c,a,b,g),c.join("")}function kc(a,b,c){var d=a.prefix||"",e=a.namespaceURI;if(!d&&!e)return!1;if("xml"===d&&"http://www.w3.org/XML/1998/namespace"===e||"http://www.w3.org/2000/xmlns/"==e)return!1;for(var f=c.length;f--;){var g=c[f];if(g.prefix==d)return g.namespace!=e}return!0}function lc(a,b,c,d,e){if(d){if(a=d(a),!a)return;if("string"==typeof a)return void b.push(a)}switch(a.nodeType){case Yh:e||(e=[]);var f=(e.length,a.attributes),g=f.length,h=a.firstChild,i=a.tagName;c=Wh===a.namespaceURI||c,b.push("<",i);for(var j=0;j<g;j++){var k=f.item(j);"xmlns"==k.prefix?e.push({prefix:k.localName,namespace:k.value}):"xmlns"==k.nodeName&&e.push({prefix:"",namespace:k.value})}for(var j=0;j<g;j++){var k=f.item(j);if(kc(k,c,e)){var l=k.prefix||"",m=k.namespaceURI,n=l?" xmlns:"+l:" xmlns";b.push(n,'="',m,'"'),e.push({prefix:l,namespace:m})}lc(k,b,c,d,e)}if(kc(a,c,e)){var l=a.prefix||"",m=a.namespaceURI,n=l?" xmlns:"+l:" xmlns";b.push(n,'="',m,'"'),e.push({prefix:l,namespace:m})}if(h||c&&!/^(?:meta|link|img|br|hr|input)$/i.test(i)){if(b.push(">"),c&&/^script$/i.test(i))for(;h;)h.data?b.push(h.data):lc(h,b,c,d,e),h=h.nextSibling;else for(;h;)lc(h,b,c,d,e),h=h.nextSibling;b.push("</",i,">")}else b.push("/>");return;case ei:case gi:for(var h=a.firstChild;h;)lc(h,b,c,d,e),h=h.nextSibling;return;case Zh:return b.push(" ",a.name,'="',a.value.replace(/[<&"]/g,Pb),'"');case $h:return b.push(a.data.replace(/[<&]/g,Pb));case _h:return b.push("<![CDATA[",a.data,"]]>");case di:return b.push("<!--",a.data,"-->");case fi:var o=a.publicId,p=a.systemId;if(b.push("<!DOCTYPE ",a.name),o)b.push(' PUBLIC "',o),p&&"."!=p&&b.push('" "',p),b.push('">');else if(p&&"."!=p)b.push(' SYSTEM "',p,'">');else{var q=a.internalSubset;q&&b.push(" [",q,"]"),b.push(">")}return;case ci:return b.push("<?",a.target," ",a.data,"?>");case ai:return b.push("&",a.nodeName,";");default:b.push("??",a.nodeName)}}function mc(a,b,c){var d;switch(b.nodeType){case Yh:d=b.cloneNode(!1),d.ownerDocument=a;case gi:break;case Zh:c=!0}if(d||(d=b.cloneNode(!1)),d.ownerDocument=a,d.parentNode=null,c)for(var e=b.firstChild;e;)d.appendChild(mc(a,e,c)),e=e.nextSibling;return d}function nc(a,b,c){var d=new b.constructor;for(var e in b){var f=b[e];"object"!=typeof f&&f!=d[e]&&(d[e]=f)}switch(b.childNodes&&(d.childNodes=new Gb),d.ownerDocument=a,d.nodeType){case Yh:var g=b.attributes,h=d.attributes=new Jb,i=g.length;h._ownerElement=d;for(var j=0;j<i;j++)d.setAttributeNode(nc(a,g.item(j),!0));break;case Zh:c=!0}if(c)for(var k=b.firstChild;k;)d.appendChild(nc(a,k,c)),k=k.nextSibling;return d}function oc(a,b,c){a[b]=c}function pc(a){return a.subarray(0,a.byteLength-a[a.byteLength-1])}function qc(a,b){return function(c){var d=this;if(!b)return new $m(a);if($m&&!c){var e=b.toString().replace(/^function.+?{/,"").slice(0,-1),f=rc(e);return this[Wm]=new $m(f),sc(this[Wm],f),this[Wm]}var g={postMessage:function(a){d.onmessage&&setTimeout(function(){d.onmessage({data:a,target:g})})}};b.call(g),this.postMessage=function(a){setTimeout(function(){g.onmessage({data:a,target:d})})},this.isThisThread=!0}}function rc(a){try{return Zm.createObjectURL(new Blob([a],{type:Xm}))}catch(c){var b=new Ym;return b.append(a),Zm.createObjectURL(b.getBlob(type))}}function sc(a,b){if(a&&b){var c=a.terminate;a.objURL=b,a.terminate=function(){a.objURL&&Zm.revokeObjectURL(a.objURL),c.call(a)}}}function tc(){}a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a,b=b&&Object.prototype.hasOwnProperty.call(b,"default")?b.default:b;var uc,vc="7.9.2",wc=[],xc=function(b,c){return function(d,e,f){var g=c.levels[e],h=new RegExp("^("+g+")$");if("log"!==d&&f.unshift(d.toUpperCase()+":"),f.unshift(b+":"),wc){wc.push([].concat(f));var i=wc.length-1e3;wc.splice(0,i>0?i:0)}if(a.console){var j=a.console[d];j||"debug"!==d||(j=a.console.info||a.console.log),j&&g&&h.test(d)&&j[Array.isArray(f)?"apply":"call"](a.console,f)}}},yc=c("VIDEOJS"),zc=yc.createLogger,Ac=d(function(a){function b(){return a.exports=b=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b.apply(this,arguments)}a.exports=b}),Bc=Object.prototype.toString,Cc=function(a){return h(a)?Object.keys(a):[]},Dc=q("querySelector"),Ec=q("querySelectorAll"),Fc=Object.freeze({__proto__:null,isReal:n,isEl:o,isInFrame:p,createEl:r,textContent:s,prependTo:t,hasClass:u,addClass:v,removeClass:w,toggleClass:x,setAttributes:y,getAttributes:z,getAttribute:A,setAttribute:B,removeAttribute:C,blockTextSelection:D,unblockTextSelection:E,getBoundingClientRect:F,findPosition:G,getPointerPosition:H,isTextNode:I,emptyEl:J,normalizeContent:K,appendContent:L,insertContent:M,isSingleLeftClick:N,$:Dc,$$:Ec}),Gc=!1,Hc=function(){if(n()&&uc.options.autoSetup!==!1){var a=Array.prototype.slice.call(b.getElementsByTagName("video")),c=Array.prototype.slice.call(b.getElementsByTagName("audio")),d=Array.prototype.slice.call(b.getElementsByTagName("video-js")),e=a.concat(c,d);if(e&&e.length>0)for(var f=0,g=e.length;f<g;f++){var h=e[f];if(!h||!h.getAttribute){O(1);break}if(void 0===h.player){var i=h.getAttribute("data-setup");null!==i&&uc(h)}}else Gc||O(1)}};n()&&("complete"===b.readyState?P():a.addEventListener("load",P));var Ic,Jc=function(a){var c=b.createElement("style");return c.className=a,c},Kc=function(a,b){a.styleSheet?a.styleSheet.cssText=b:a.textContent=b},Lc=3,Mc=Lc;a.WeakMap||(Ic=function(){function b(){this.vdata="vdata"+Math.floor(a.performance&&a.performance.now()||Date.now()),this.data={}}var c=b.prototype;return c.set=function(a,b){var c=a[this.vdata]||Q();return a[this.vdata]||(a[this.vdata]=c),this.data[c]=b,this},c.get=function(a){var b=a[this.vdata];return b?this.data[b]:void yc("We have no data for this element",a)},c.has=function(a){var b=a[this.vdata];return b in this.data},c.delete=function(a){var b=a[this.vdata];b&&(delete this.data[b],delete a[this.vdata])},b}());var Nc,Oc=a.WeakMap?new WeakMap:new Ic,Pc=function(){if("boolean"!=typeof Nc){Nc=!1;try{var b=Object.defineProperty({},"passive",{get:function(){Nc=!0}});a.addEventListener("test",null,b),a.removeEventListener("test",null,b)}catch(a){}}return Nc},Qc=["touchstart","touchmove"],Rc=Object.freeze({__proto__:null,fixEvent:T,on:U,off:V,trigger:W,one:X,any:Y}),Sc=30,Tc=function(a,b,c){b.guid||(b.guid=Q());var d=b.bind(a);return d.guid=c?c+"_"+b.guid:b.guid,d},Uc=function(b,c){var d=a.performance.now(),e=function(){var e=a.performance.now();e-d>=c&&(b.apply(void 0,arguments),d=e)};return e},Vc=function(b,c,d,e){void 0===e&&(e=a);var f,g=function(){e.clearTimeout(f),f=null},h=function(){var a=this,g=arguments,h=function(){f=null,h=null,d||b.apply(a,g)};!f&&d&&b.apply(a,g),e.clearTimeout(f),f=e.setTimeout(h,c)};return h.cancel=g,h},Wc=function(){};Wc.prototype.allowedEvents_={},Wc.prototype.on=function(a,b){var c=this.addEventListener;this.addEventListener=function(){},U(this,a,b),this.addEventListener=c},Wc.prototype.addEventListener=Wc.prototype.on,Wc.prototype.off=function(a,b){V(this,a,b)},Wc.prototype.removeEventListener=Wc.prototype.off,Wc.prototype.one=function(a,b){var c=this.addEventListener;this.addEventListener=function(){},X(this,a,b),this.addEventListener=c},Wc.prototype.any=function(a,b){var c=this.addEventListener;this.addEventListener=function(){},Y(this,a,b),this.addEventListener=c},Wc.prototype.trigger=function(a){var b=a.type||a;"string"==typeof a&&(a={type:b}),a=T(a),this.allowedEvents_[b]&&this["on"+b]&&this["on"+b](a),W(this,a)},Wc.prototype.dispatchEvent=Wc.prototype.trigger;var Xc;Wc.prototype.queueTrigger=function(b){var c=this;Xc||(Xc=new Map);var d=b.type||b,e=Xc.get(this);e||(e=new Map,Xc.set(this,e));var f=e.get(d);e.delete(d),a.clearTimeout(f);var g=a.setTimeout(function(){0===e.size&&(e=null,Xc.delete(c)),c.trigger(b)},0);e.set(d,g)};var Yc=function(a){return a instanceof Wc||!!a.eventBusEl_&&["on","one","off","trigger"].every(function(b){return"function"==typeof a[b]})},Zc=function(a,b){Yc(a)?b():(a.eventedCallbacks||(a.eventedCallbacks=[]),a.eventedCallbacks.push(b))},$c=function(a){return"string"==typeof a&&/\S/.test(a)||Array.isArray(a)&&!!a.length},_c=function(a){if(!a.nodeName&&!Yc(a))throw new Error("Invalid target; must be a DOM node or evented object.")},ad=function(a){if(!$c(a))throw new Error("Invalid event type; must be a non-empty string or array.")},bd=function(a){if("function"!=typeof a)throw new Error("Invalid listener; must be a function.")},cd=function(a,b){var c,d,e,f=b.length<3||b[0]===a||b[0]===a.eventBusEl_;return f?(c=a.eventBusEl_,b.length>=3&&b.shift(),d=b[0],e=b[1]):(c=b[0],d=b[1],e=b[2]),_c(c),ad(d),bd(e),e=Tc(a,e),{isTargetingSelf:f,target:c,type:d,listener:e}},dd=function(a,b,c,d){_c(a),a.nodeName?Rc[b](a,c,d):a[b](c,d)},ed={on:function(){for(var a=this,b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=cd(this,c),f=e.isTargetingSelf,g=e.target,h=e.type,i=e.listener;if(dd(g,"on",h,i),!f){var j=function(){return a.off(g,h,i)};j.guid=i.guid;var k=function(){return a.off("dispose",j)};k.guid=i.guid,dd(this,"on","dispose",j),dd(g,"on","dispose",k)}},one:function(){for(var a=this,b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=cd(this,c),f=e.isTargetingSelf,g=e.target,h=e.type,i=e.listener;if(f)dd(g,"one",h,i);else{var j=function b(){a.off(g,h,b);for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];i.apply(null,d)};j.guid=i.guid,dd(g,"one",h,j)}},any:function(){for(var a=this,b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=cd(this,c),f=e.isTargetingSelf,g=e.target,h=e.type,i=e.listener;if(f)dd(g,"any",h,i);else{var j=function b(){a.off(g,h,b);for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];i.apply(null,d)};j.guid=i.guid,dd(g,"any",h,j)}},off:function(a,b,c){if(!a||$c(a))V(this.eventBusEl_,a,b);else{var d=a,e=b;_c(d),ad(e),bd(c),c=Tc(this,c),this.off("dispose",c),d.nodeName?(V(d,e,c),V(d,"dispose",c)):Yc(d)&&(d.off(e,c),d.off("dispose",c))}},trigger:function(a,b){return W(this.eventBusEl_,a,b)}},fd={state:{},setState:function(a){var b=this;"function"==typeof a&&(a=a());var c;return e(a,function(a,d){b.state[d]!==a&&(c=c||{},c[d]={from:b.state[d],to:a}),b.state[d]=a}),c&&Yc(this)&&this.trigger({changes:c,type:"statechanged"}),c}},gd=function(a){return"string"!=typeof a?a:a.replace(/./,function(a){return a.toLowerCase()})},hd=function(a){return"string"!=typeof a?a:a.replace(/./,function(a){return a.toUpperCase()})},id=function(a,b){return hd(a)===hd(b)},jd=function(){function a(){this.map_={}}var b=a.prototype;return b.has=function(a){return a in this.map_},b.delete=function(a){var b=this.has(a);return delete this.map_[a],b},b.set=function(a,b){return this.set_[a]=b,this},b.forEach=function(a,b){for(var c in this.map_)a.call(b,this.map_[c],c,this)},a}(),kd=a.Map?a.Map:jd,ld=function(){function a(){this.set_={}}var b=a.prototype;return b.has=function(a){return a in this.set_},b.delete=function(a){var b=this.has(a);return delete this.set_[a],b},b.add=function(a){return this.set_[a]=1,this},b.forEach=function(a,b){for(var c in this.set_)a.call(b,c,c,this)},a}(),md=a.Set?a.Set:ld,nd=function(){function b(a,b,c){if(!a&&this.play?this.player_=a=this:this.player_=a,this.isDisposed_=!1,this.parentComponent_=null,this.options_=_({},this.options_),b=this.options_=_(this.options_,b),this.id_=b.id||b.el&&b.el.id,!this.id_){var d=a&&a.id&&a.id()||"no_player";this.id_=d+"_component_"+Q()}this.name_=b.name||null,b.el?this.el_=b.el:b.createEl!==!1&&(this.el_=this.createEl()),b.evented!==!1&&Z(this,{eventBusKey:this.el_?"el_":null}),$(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new md,this.setIntervalIds_=new md,this.rafIds_=new md,this.namedRafs_=new kd,this.clearingTimersOnDispose_=!1,b.initChildren!==!1&&this.initChildren(),this.ready(c),b.reportTouchActivity!==!1&&this.enableTouchActivity()}var c=b.prototype;return c.dispose=function(){if(!this.isDisposed_){if(this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var a=this.children_.length-1;a>=0;a--)this.children_[a].dispose&&this.children_[a].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),Oc.has(this.el_)&&Oc.delete(this.el_),this.el_=null),this.player_=null}},c.isDisposed=function(){return Boolean(this.isDisposed_)},c.player=function(){return this.player_},c.options=function(a){return a?(this.options_=_(this.options_,a),this.options_):this.options_},c.el=function(){return this.el_},c.createEl=function(a,b,c){return r(a,b,c)},c.localize=function(a,b,c){void 0===c&&(c=a);var d=this.player_.language&&this.player_.language(),e=this.player_.languages&&this.player_.languages(),f=e&&e[d],g=d&&d.split("-")[0],h=e&&e[g],i=c;return f&&f[a]?i=f[a]:h&&h[a]&&(i=h[a]),b&&(i=i.replace(/\{(\d+)\}/g,function(a,c){var d=b[c-1],e=d;return"undefined"==typeof d&&(e=a),e})),i},c.contentEl=function(){return this.contentEl_||this.el_},c.id=function(){return this.id_},c.name=function(){return this.name_},c.children=function(){return this.children_},c.getChildById=function(a){return this.childIndex_[a]},c.getChild=function(a){if(a)return this.childNameIndex_[a]},c.getDescendant=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];b=b.reduce(function(a,b){return a.concat(b)},[]);for(var d=this,e=0;e<b.length;e++)if(d=d.getChild(b[e]),!d||!d.getChild)return;return d},c.addChild=function(a,c,d){void 0===c&&(c={}),void 0===d&&(d=this.children_.length);var e,f;if("string"==typeof a){f=hd(a);var g=c.componentClass||f;c.name=f;var h=b.getComponent(g);if(!h)throw new Error("Component "+g+" does not exist");if("function"!=typeof h)return null;e=new h(this.player_||this,c)}else e=a;if(e.parentComponent_&&e.parentComponent_.removeChild(e),this.children_.splice(d,0,e),e.parentComponent_=this,"function"==typeof e.id&&(this.childIndex_[e.id()]=e),f=f||e.name&&hd(e.name()),f&&(this.childNameIndex_[f]=e,this.childNameIndex_[gd(f)]=e),"function"==typeof e.el&&e.el()){var i=null;this.children_[d+1]&&(this.children_[d+1].el_?i=this.children_[d+1].el_:o(this.children_[d+1])&&(i=this.children_[d+1])),this.contentEl().insertBefore(e.el(),i)}return e},c.removeChild=function(a){if("string"==typeof a&&(a=this.getChild(a)),a&&this.children_){for(var b=!1,c=this.children_.length-1;c>=0;c--)if(this.children_[c]===a){b=!0,this.children_.splice(c,1);break}if(b){a.parentComponent_=null,this.childIndex_[a.id()]=null,this.childNameIndex_[hd(a.name())]=null,this.childNameIndex_[gd(a.name())]=null;var d=a.el();d&&d.parentNode===this.contentEl()&&this.contentEl().removeChild(a.el())}}},c.initChildren=function(){var a=this,c=this.options_.children;if(c){var d,e=this.options_,f=function(b){var c=b.name,d=b.opts;if(void 0!==e[c]&&(d=e[c]),d!==!1){d===!0&&(d={}),d.playerOptions=a.options_.playerOptions;var f=a.addChild(c,d);f&&(a[c]=f)}},g=b.getComponent("Tech");d=Array.isArray(c)?c:Object.keys(c),d.concat(Object.keys(this.options_).filter(function(a){return!d.some(function(b){return"string"==typeof b?a===b:a===b.name})})).map(function(b){var d,e;return"string"==typeof b?(d=b,e=c[d]||a.options_[d]||{}):(d=b.name,e=b),{name:d,opts:e}}).filter(function(a){var c=b.getComponent(a.opts.componentClass||hd(a.name));return c&&!g.isTech(c)}).forEach(f)}},c.buildCSSClass=function(){return""},c.ready=function(a,b){if(void 0===b&&(b=!1),a)return this.isReady_?void(b?a.call(this):this.setTimeout(a,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(a))},c.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var a=this.readyQueue_;this.readyQueue_=[],a&&a.length>0&&a.forEach(function(a){a.call(this)},this),this.trigger("ready")},1)},c.$=function(a,b){return Dc(a,b||this.contentEl())},c.$$=function(a,b){return Ec(a,b||this.contentEl())},c.hasClass=function(a){return u(this.el_,a)},c.addClass=function(a){v(this.el_,a)},c.removeClass=function(a){w(this.el_,a)},c.toggleClass=function(a,b){x(this.el_,a,b)},c.show=function(){this.removeClass("vjs-hidden")},c.hide=function(){this.addClass("vjs-hidden")},c.lockShowing=function(){this.addClass("vjs-lock-showing")},c.unlockShowing=function(){this.removeClass("vjs-lock-showing")},c.getAttribute=function(a){return A(this.el_,a)},c.setAttribute=function(a,b){B(this.el_,a,b)},c.removeAttribute=function(a){C(this.el_,a)},c.width=function(a,b){return this.dimension("width",a,b)},c.height=function(a,b){return this.dimension("height",a,b)},c.dimensions=function(a,b){this.width(a,!0),this.height(b)},c.dimension=function(a,b,c){if(void 0!==b)return null!==b&&b===b||(b=0),(""+b).indexOf("%")!==-1||(""+b).indexOf("px")!==-1?this.el_.style[a]=b:"auto"===b?this.el_.style[a]="":this.el_.style[a]=b+"px",void(c||this.trigger("componentresize"));if(!this.el_)return 0;var d=this.el_.style[a],e=d.indexOf("px");return e!==-1?parseInt(d.slice(0,e),10):parseInt(this.el_["offset"+hd(a)],10)},c.currentDimension=function(a){var b=0;if("width"!==a&&"height"!==a)throw new Error("currentDimension only accepts width or height value");if(b=j(this.el_,a),b=parseFloat(b),0===b||isNaN(b)){var c="offset"+hd(a);b=this.el_[c]}return b},c.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},c.currentWidth=function(){return this.currentDimension("width")},c.currentHeight=function(){return this.currentDimension("height")},c.focus=function(){this.el_.focus()},c.blur=function(){this.el_.blur()},c.handleKeyDown=function(a){this.player_&&(a.stopPropagation(),this.player_.handleKeyDown(a))},c.handleKeyPress=function(a){this.handleKeyDown(a)},c.emitTapEvents=function(){var b,c=0,d=null,e=10,f=200;this.on("touchstart",function(e){1===e.touches.length&&(d={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY},c=a.performance.now(),b=!0)}),this.on("touchmove",function(a){if(a.touches.length>1)b=!1;else if(d){var c=a.touches[0].pageX-d.pageX,f=a.touches[0].pageY-d.pageY,g=Math.sqrt(c*c+f*f);g>e&&(b=!1)}});var g=function(){b=!1};this.on("touchleave",g),this.on("touchcancel",g),this.on("touchend",function(e){if(d=null,b===!0){var g=a.performance.now()-c;g<f&&(e.preventDefault(),this.trigger("tap"))}})},c.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var a,b=Tc(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){b(),this.clearInterval(a),a=this.setInterval(b,250)});var c=function(c){b(),this.clearInterval(a)};this.on("touchmove",b),this.on("touchend",c),this.on("touchcancel",c)}},c.setTimeout=function(b,c){var d,e=this;return b=Tc(this,b),this.clearTimersOnDispose_(),d=a.setTimeout(function(){e.setTimeoutIds_.has(d)&&e.setTimeoutIds_.delete(d),b()},c),this.setTimeoutIds_.add(d),d},c.clearTimeout=function(b){return this.setTimeoutIds_.has(b)&&(this.setTimeoutIds_.delete(b),a.clearTimeout(b)),b},c.setInterval=function(b,c){b=Tc(this,b),this.clearTimersOnDispose_();var d=a.setInterval(b,c);return this.setIntervalIds_.add(d),d},c.clearInterval=function(b){return this.setIntervalIds_.has(b)&&(this.setIntervalIds_.delete(b),a.clearInterval(b)),b},c.requestAnimationFrame=function(b){var c=this;if(!this.supportsRaf_)return this.setTimeout(b,1e3/60);this.clearTimersOnDispose_();var d;return b=Tc(this,b),d=a.requestAnimationFrame(function(){c.rafIds_.has(d)&&c.rafIds_.delete(d),b()}),this.rafIds_.add(d),d},c.requestNamedAnimationFrame=function(a,b){var c=this;if(!this.namedRafs_.has(a)){this.clearTimersOnDispose_(),b=Tc(this,b);var d=this.requestAnimationFrame(function(){b(),c.namedRafs_.has(a)&&c.namedRafs_.delete(a)});return this.namedRafs_.set(a,d),a}},c.cancelNamedAnimationFrame=function(a){this.namedRafs_.has(a)&&(this.cancelAnimationFrame(this.namedRafs_.get(a)),this.namedRafs_.delete(a))},c.cancelAnimationFrame=function(b){return this.supportsRaf_?(this.rafIds_.has(b)&&(this.rafIds_.delete(b),a.cancelAnimationFrame(b)),b):this.clearTimeout(b)},c.clearTimersOnDispose_=function(){var a=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(b){var c=b[0],d=b[1];a[c].forEach(function(b,c){return a[d](c)})}),a.clearingTimersOnDispose_=!1}))},b.registerComponent=function(a,c){if("string"!=typeof a||!a)throw new Error('Illegal component name, "'+a+'"; must be a non-empty string.');var d=b.getComponent("Tech"),e=d&&d.isTech(c),f=b===c||b.prototype.isPrototypeOf(c.prototype);if(e||!f){var g;throw g=e?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+a+'"; '+g+".")}a=hd(a),b.components_||(b.components_={});var h=b.getComponent("Player");if("Player"===a&&h&&h.players){var i=h.players,j=Object.keys(i);if(i&&j.length>0&&j.map(function(a){return i[a]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return b.components_[a]=c,b.components_[gd(a)]=c,c},b.getComponent=function(a){if(a&&b.components_)return b.components_[a]},b}();nd.prototype.supportsRaf_="function"==typeof a.requestAnimationFrame&&"function"==typeof a.cancelAnimationFrame,nd.registerComponent("Component",nd);for(var od,pd=aa,qd=(d(function(a){function b(c){"@babel/helpers - typeof";return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?a.exports=b=function(a){return typeof a}:a.exports=b=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},b(c)}a.exports=b}),d(function(a){function b(c){return a.exports=b=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},b(c)}a.exports=b}),ba),rd=a.navigator&&a.navigator.userAgent||"",sd=/AppleWebKit\/([\d.]+)/i.exec(rd),td=sd?parseFloat(sd.pop()):null,ud=/iPod/i.test(rd),vd=function(){var a=rd.match(/OS (\d+)_/i);return a&&a[1]?a[1]:null}(),wd=/Android/i.test(rd),xd=function(){var a=rd.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!a)return null;var b=a[1]&&parseFloat(a[1]),c=a[2]&&parseFloat(a[2]);return b&&c?parseFloat(a[1]+"."+a[2]):b?b:null}(),yd=wd&&xd<5&&td<537,zd=/Firefox/i.test(rd),Ad=/Edg/i.test(rd),Bd=!Ad&&(/Chrome/i.test(rd)||/CriOS/i.test(rd)),Cd=function(){var a=rd.match(/(Chrome|CriOS)\/(\d+)/);return a&&a[2]?parseFloat(a[2]):null}(),Dd=function(){var a=/MSIE\s(\d+)\.\d/.exec(rd),b=a&&parseFloat(a[1]);return!b&&/Trident\/7.0/i.test(rd)&&/rv:11.0/.test(rd)&&(b=11),b}(),Ed=/Safari/i.test(rd)&&!Bd&&!wd&&!Ad,Fd=/Windows/i.test(rd),Gd=(n()&&("ontouchstart"in a||a.navigator.maxTouchPoints||a.DocumentTouch&&a.document instanceof a.DocumentTouch)),Hd=/iPad/i.test(rd)||Ed&&Gd&&!/iPhone/i.test(rd),Id=/iPhone/i.test(rd)&&!Hd,Jd=Id||Hd||ud,Kd=(Ed||Jd)&&!Bd,Ld=Object.freeze({__proto__:null,IS_IPOD:ud,IOS_VERSION:vd,IS_ANDROID:wd,ANDROID_VERSION:xd,IS_NATIVE_ANDROID:yd,IS_FIREFOX:zd,IS_EDGE:Ad,IS_CHROME:Bd,CHROME_VERSION:Cd,IE_VERSION:Dd,IS_SAFARI:Ed,IS_WINDOWS:Fd,TOUCH_ENABLED:Gd,IS_IPAD:Hd,IS_IPHONE:Id,IS_IOS:Jd,IS_ANY_SAFARI:Kd}),Md={prefixed:!0},Nd=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],Od=Nd[0],Pd=0;Pd<Nd.length;Pd++)if(Nd[Pd][1]in b){od=Nd[Pd];break}if(od){for(var Qd=0;Qd<od.length;Qd++)Md[Od[Qd]]=od[Qd];Md.prefixed=od[0]!==Od[0]}ha.prototype.code=0,ha.prototype.message="",ha.prototype.status=null,ha.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],ha.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Rd=0;Rd<ha.errorTypes.length;Rd++)ha[ha.errorTypes[Rd]]=Rd,ha.prototype[ha.errorTypes[Rd]]=Rd;var Sd=ia,Td=function(a){var b=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(b,c,d){return a[c]&&(b[c]=a[c]),b},{cues:a.cues&&Array.prototype.map.call(a.cues,function(a){return{startTime:a.startTime,endTime:a.endTime,text:a.text,id:a.id}})});return b},Ud=function(a){var b=a.$$("track"),c=Array.prototype.map.call(b,function(a){return a.track}),d=Array.prototype.map.call(b,function(a){var b=Td(a.track);return a.src&&(b.src=a.src),b});return d.concat(Array.prototype.filter.call(a.textTracks(),function(a){return c.indexOf(a)===-1}).map(Td))},Vd=function(a,b){return a.forEach(function(a){var c=b.addRemoteTextTrack(a).track;!a.src&&a.cues&&a.cues.forEach(function(a){return c.addCue(a)})}),b.textTracks()},Wd={textTracksToJson:Ud,jsonToTextTracks:Vd,trackToJson_:Td},Xd=d(function(a,b){function c(a){if(a&&"object"==typeof a){var b=a.which||a.keyCode||a.charCode;b&&(a=b)}if("number"==typeof a)return g[a];var c=String(a),f=d[c.toLowerCase()];if(f)return f;var f=e[c.toLowerCase()];return f?f:1===c.length?c.charCodeAt(0):void 0}c.isEventKey=function(a,b){if(a&&"object"==typeof a){var c=a.which||a.keyCode||a.charCode;if(null===c||void 0===c)return!1;if("string"==typeof b){var f=d[b.toLowerCase()];if(f)return f===c;var f=e[b.toLowerCase()];if(f)return f===c}else if("number"==typeof b)return b===c;return!1}},b=a.exports=c;var d=b.code=b.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},e=b.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(f=97;f<123;f++)d[String.fromCharCode(f)]=f-32;for(var f=48;f<58;f++)d[f-48]=f;for(f=1;f<13;f++)d["f"+f]=f+111;for(f=0;f<10;f++)d["numpad "+f]=f+96;var g=b.names=b.title={};for(f in d)g[d[f]]=f;for(var h in e)d[h]=e[h]}),Yd=(Xd.code,Xd.codes,Xd.aliases,Xd.names,Xd.title,"vjs-modal-dialog"),Zd=function(c){function d(a,b){var d;return d=c.call(this,a,b)||this,d.opened_=d.hasBeenOpened_=d.hasBeenFilled_=!1,d.closeable(!d.options_.uncloseable),d.content(d.options_.content),d.contentEl_=r("div",{className:Yd+"-content"},{role:"document"}),d.descEl_=r("p",{className:Yd+"-description vjs-control-text",id:d.el().getAttribute("aria-describedby")}),s(d.descEl_,d.description()),d.el_.appendChild(d.descEl_),d.el_.appendChild(d.contentEl_),d}qd(d,c);var e=d.prototype;return e.createEl=function(){return c.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},e.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,c.prototype.dispose.call(this)},e.buildCSSClass=function(){return Yd+" vjs-hidden "+c.prototype.buildCSSClass.call(this)},e.label=function(){return this.localize(this.options_.label||"Modal Window")},e.description=function(){var a=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(a+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),a},e.open=function(){if(!this.opened_){var a=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!a.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&a.pause(),this.on("keydown",this.handleKeyDown),this.hadControls_=a.controls(),a.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},e.opened=function(a){return"boolean"==typeof a&&this[a?"open":"close"](),this.opened_},e.close=function(){if(this.opened_){var a=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&a.play(),this.off("keydown",this.handleKeyDown),this.hadControls_&&a.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},e.closeable=function a(b){if("boolean"==typeof b){var a=this.closeable_=!!b,c=this.getChild("closeButton");if(a&&!c){var d=this.contentEl_;this.contentEl_=this.el_,c=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=d,this.on(c,"close",this.close)}!a&&c&&(this.off(c,"close",this.close),this.removeChild(c),c.dispose())}return this.closeable_},e.fill=function(){this.fillWith(this.content())},e.fillWith=function(a){var b=this.contentEl(),c=b.parentNode,d=b.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,c.removeChild(b),this.empty(),M(b,a),this.trigger("modalfill"),d?c.insertBefore(b,d):c.appendChild(b);var e=this.getChild("closeButton");e&&c.appendChild(e.el_)},e.empty=function(){this.trigger("beforemodalempty"),J(this.contentEl()),this.trigger("modalempty")},e.content=function(a){return"undefined"!=typeof a&&(this.content_=a),this.content_},e.conditionalFocus_=function(){var a=b.activeElement,c=this.player_.el_;this.previouslyActiveEl_=null,(c.contains(a)||c===a)&&(this.previouslyActiveEl_=a,this.focus());
},e.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},e.handleKeyDown=function(a){if(a.stopPropagation(),Xd.isEventKey(a,"Escape")&&this.closeable())return a.preventDefault(),void this.close();if(Xd.isEventKey(a,"Tab")){for(var c,d=this.focusableEls_(),e=this.el_.querySelector(":focus"),f=0;f<d.length;f++)if(e===d[f]){c=f;break}b.activeElement===this.el_&&(c=0),a.shiftKey&&0===c?(d[d.length-1].focus(),a.preventDefault()):a.shiftKey||c!==d.length-1||(d[0].focus(),a.preventDefault())}},e.focusableEls_=function(){var b=this.el_.querySelectorAll("*");return Array.prototype.filter.call(b,function(b){return(b instanceof a.HTMLAnchorElement||b instanceof a.HTMLAreaElement)&&b.hasAttribute("href")||(b instanceof a.HTMLInputElement||b instanceof a.HTMLSelectElement||b instanceof a.HTMLTextAreaElement||b instanceof a.HTMLButtonElement)&&!b.hasAttribute("disabled")||b instanceof a.HTMLIFrameElement||b instanceof a.HTMLObjectElement||b instanceof a.HTMLEmbedElement||b.hasAttribute("tabindex")&&b.getAttribute("tabindex")!==-1||b.hasAttribute("contenteditable")})},d}(nd);Zd.prototype.options_={pauseOnOpen:!0,temporary:!0},nd.registerComponent("ModalDialog",Zd);var $d=function(a){function b(b){var c;void 0===b&&(b=[]),c=a.call(this)||this,c.tracks_=[],Object.defineProperty(pd(c),"length",{get:function(){return this.tracks_.length}});for(var d=0;d<b.length;d++)c.addTrack(b[d]);return c}qd(b,a);var c=b.prototype;return c.addTrack=function(a){var b=this.tracks_.length;""+b in this||Object.defineProperty(this,b,{get:function(){return this.tracks_[b]}}),this.tracks_.indexOf(a)===-1&&(this.tracks_.push(a),this.trigger({track:a,type:"addtrack",target:this}))},c.removeTrack=function(a){for(var b,c=0,d=this.length;c<d;c++)if(this[c]===a){b=this[c],b.off&&b.off(),this.tracks_.splice(c,1);break}b&&this.trigger({track:b,type:"removetrack",target:this})},c.getTrackById=function(a){for(var b=null,c=0,d=this.length;c<d;c++){var e=this[c];if(e.id===a){b=e;break}}return b},b}(Wc);$d.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var _d in $d.prototype.allowedEvents_)$d.prototype["on"+_d]=null;var ae=function(a,b){for(var c=0;c<a.length;c++)Object.keys(a[c]).length&&b.id!==a[c].id&&(a[c].enabled=!1)},be=function(a){function b(b){var c;void 0===b&&(b=[]);for(var d=b.length-1;d>=0;d--)if(b[d].enabled){ae(b,b[d]);break}return c=a.call(this,b)||this,c.changing_=!1,c}qd(b,a);var c=b.prototype;return c.addTrack=function(b){var c=this;b.enabled&&ae(this,b),a.prototype.addTrack.call(this,b),b.addEventListener&&(b.enabledChange_=function(){c.changing_||(c.changing_=!0,ae(c,b),c.changing_=!1,c.trigger("change"))},b.addEventListener("enabledchange",b.enabledChange_))},c.removeTrack=function(b){a.prototype.removeTrack.call(this,b),b.removeEventListener&&b.enabledChange_&&(b.removeEventListener("enabledchange",b.enabledChange_),b.enabledChange_=null)},b}($d),ce=function(a,b){for(var c=0;c<a.length;c++)Object.keys(a[c]).length&&b.id!==a[c].id&&(a[c].selected=!1)},de=function(a){function b(b){var c;void 0===b&&(b=[]);for(var d=b.length-1;d>=0;d--)if(b[d].selected){ce(b,b[d]);break}return c=a.call(this,b)||this,c.changing_=!1,Object.defineProperty(pd(c),"selectedIndex",{get:function(){for(var a=0;a<this.length;a++)if(this[a].selected)return a;return-1},set:function(){}}),c}qd(b,a);var c=b.prototype;return c.addTrack=function(b){var c=this;b.selected&&ce(this,b),a.prototype.addTrack.call(this,b),b.addEventListener&&(b.selectedChange_=function(){c.changing_||(c.changing_=!0,ce(c,b),c.changing_=!1,c.trigger("change"))},b.addEventListener("selectedchange",b.selectedChange_))},c.removeTrack=function(b){a.prototype.removeTrack.call(this,b),b.removeEventListener&&b.selectedChange_&&(b.removeEventListener("selectedchange",b.selectedChange_),b.selectedChange_=null)},b}($d),ee=function(a){function b(){return a.apply(this,arguments)||this}qd(b,a);var c=b.prototype;return c.addTrack=function(b){var c=this;a.prototype.addTrack.call(this,b),this.queueChange_||(this.queueChange_=function(){return c.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return c.trigger("selectedlanguagechange")}),b.addEventListener("modechange",this.queueChange_);var d=["metadata","chapters"];d.indexOf(b.kind)===-1&&b.addEventListener("modechange",this.triggerSelectedlanguagechange_)},c.removeTrack=function(b){a.prototype.removeTrack.call(this,b),b.removeEventListener&&(this.queueChange_&&b.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&b.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},b}($d),fe=function(){function a(a){void 0===a&&(a=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var b=0,c=a.length;b<c;b++)this.addTrackElement_(a[b])}var b=a.prototype;return b.addTrackElement_=function(a){var b=this.trackElements_.length;""+b in this||Object.defineProperty(this,b,{get:function(){return this.trackElements_[b]}}),this.trackElements_.indexOf(a)===-1&&this.trackElements_.push(a)},b.getTrackElementByTrack_=function(a){for(var b,c=0,d=this.trackElements_.length;c<d;c++)if(a===this.trackElements_[c].track){b=this.trackElements_[c];break}return b},b.removeTrackElement_=function(a){for(var b=0,c=this.trackElements_.length;b<c;b++)if(a===this.trackElements_[b]){this.trackElements_[b].track&&"function"==typeof this.trackElements_[b].track.off&&this.trackElements_[b].track.off(),"function"==typeof this.trackElements_[b].off&&this.trackElements_[b].off(),this.trackElements_.splice(b,1);break}},a}(),ge=function(){function a(b){a.prototype.setCues_.call(this,b),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var b=a.prototype;return b.setCues_=function(a){var b=this.length||0,c=0,d=a.length;this.cues_=a,this.length_=a.length;var e=function(a){""+a in this||Object.defineProperty(this,""+a,{get:function(){return this.cues_[a]}})};if(b<d)for(c=b;c<d;c++)e.call(this,c)},b.getCueById=function(a){for(var b=null,c=0,d=this.length;c<d;c++){var e=this[c];if(e.id===a){b=e;break}}return b},a}(),he={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},ie={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},je={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},ke={disabled:"disabled",hidden:"hidden",showing:"showing"},le=function(a){function b(b){var c;void 0===b&&(b={}),c=a.call(this)||this;var d={id:b.id||"vjs_track_"+Q(),kind:b.kind||"",label:b.label||"",language:b.language||""},e=function(a){Object.defineProperty(pd(c),a,{get:function(){return d[a]},set:function(){}})};for(var f in d)e(f);return c}return qd(b,a),b}(Wc),me=function(c){var d=["protocol","hostname","port","pathname","search","hash","host"],e=b.createElement("a");e.href=c;var f,g=""===e.host&&"file:"!==e.protocol;g&&(f=b.createElement("div"),f.innerHTML='<a href="'+c+'"></a>',e=f.firstChild,f.setAttribute("style","display:none; position:absolute;"),b.body.appendChild(f));for(var h={},i=0;i<d.length;i++)h[d[i]]=e[d[i]];return"http:"===h.protocol&&(h.host=h.host.replace(/:80$/,"")),"https:"===h.protocol&&(h.host=h.host.replace(/:443$/,"")),h.protocol||(h.protocol=a.location.protocol),g&&b.body.removeChild(f),h},ne=function(a){if(!a.match(/^https?:\/\//)){var c=b.createElement("div");c.innerHTML='<a href="'+a+'">x</a>',a=c.firstChild.href}return a},oe=function(a){if("string"==typeof a){var b=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/,c=b.exec(a);if(c)return c.pop().toLowerCase()}return""},pe=function(b,c){void 0===c&&(c=a.location);var d=me(b),e=":"===d.protocol?c.protocol:d.protocol,f=e+d.host!==c.protocol+c.host;return f},qe=Object.freeze({__proto__:null,parseUrl:me,getAbsoluteURL:ne,getFileExtension:oe,isCrossOrigin:pe}),re=la,se=Object.prototype.toString,te=function(a){var b={};return a?(a.trim().split("\n").forEach(function(a){var c=a.indexOf(":"),d=a.slice(0,c).trim().toLowerCase(),e=a.slice(c+1).trim();"undefined"==typeof b[d]?b[d]=e:Array.isArray(b[d])?b[d].push(e):b[d]=[b[d],e]}),b):b},ue=pa,ve=pa;pa.XMLHttpRequest=a.XMLHttpRequest||sa,pa.XDomainRequest="withCredentials"in new pa.XMLHttpRequest?pa.XMLHttpRequest:a.XDomainRequest,ma(["get","put","post","patch","head","delete"],function(a){pa["delete"===a?"del":a]=function(b,c,d){return c=oa(b,c,d),c.method=a.toUpperCase(),qa(c)}}),ue.default=ve;var we=function(b,c){var d=new a.WebVTT.Parser(a,a.vttjs,a.WebVTT.StringDecoder()),e=[];d.oncue=function(a){c.addCue(a)},d.onparsingerror=function(a){e.push(a)},d.onflush=function(){c.trigger({type:"loadeddata",target:c})},d.parse(b),e.length>0&&(a.console&&a.console.groupCollapsed&&a.console.groupCollapsed("Text Track parsing errors for "+c.src),e.forEach(function(a){return yc.error(a)}),a.console&&a.console.groupEnd&&a.console.groupEnd()),d.flush()},xe=function(b,c){var d={uri:b},e=pe(b);e&&(d.cors=e);var f="use-credentials"===c.tech_.crossOrigin();f&&(d.withCredentials=f),ue(d,Tc(this,function(b,d,e){return b?yc.error(b,d):(c.loaded_=!0,void("function"!=typeof a.WebVTT?c.tech_&&c.tech_.any(["vttjsloaded","vttjserror"],function(a){return"vttjserror"===a.type?void yc.error("vttjs failed to load, stopping trying to process "+c.src):we(e,c)}):we(e,c)))}))},ye=function(b){function c(a){var c;if(void 0===a&&(a={}),!a.tech)throw new Error("A tech was not provided.");var d=_(a,{kind:je[a.kind]||"subtitles",language:a.language||a.srclang||""}),e=ke[d.mode]||"disabled",f=d.default;"metadata"!==d.kind&&"chapters"!==d.kind||(e="hidden"),c=b.call(this,d)||this,c.tech_=d.tech,c.cues_=[],c.activeCues_=[],c.preload_=c.tech_.preloadTextTracks!==!1;var g=new ge(c.cues_),h=new ge(c.activeCues_),i=!1,j=Tc(pd(c),function(){this.activeCues=this.activeCues,i&&(this.trigger("cuechange"),i=!1)});return"disabled"!==e&&c.tech_.ready(function(){c.tech_.on("timeupdate",j)},!0),Object.defineProperties(pd(c),{default:{get:function(){return f},set:function(){}},mode:{get:function(){return e},set:function(a){var b=this;ke[a]&&(e=a,this.preload_||"disabled"===e||0!==this.cues.length||xe(this.src,this),"disabled"!==e?this.tech_.ready(function(){b.tech_.on("timeupdate",j)},!0):this.tech_.off("timeupdate",j),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?g:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return h;for(var a=this.tech_.currentTime(),b=[],c=0,d=this.cues.length;c<d;c++){var e=this.cues[c];e.startTime<=a&&e.endTime>=a?b.push(e):e.startTime===e.endTime&&e.startTime<=a&&e.startTime+.5>=a&&b.push(e)}if(i=!1,b.length!==this.activeCues_.length)i=!0;else for(var f=0;f<b.length;f++)this.activeCues_.indexOf(b[f])===-1&&(i=!0);return this.activeCues_=b,h.setCues_(this.activeCues_),h},set:function(){}}}),d.src?(c.src=d.src,c.preload_||(c.loaded_=!0),(c.preload_||f||"subtitles"!==d.kind&&"captions"!==d.kind)&&xe(c.src,pd(c))):c.loaded_=!0,c}qd(c,b);var d=c.prototype;return d.addCue=function(b){var c=b;if(a.vttjs&&!(b instanceof a.vttjs.VTTCue)){c=new a.vttjs.VTTCue(b.startTime,b.endTime,b.text);for(var d in b)d in c||(c[d]=b[d]);c.id=b.id,c.originalCue_=b}for(var e=this.tech_.textTracks(),f=0;f<e.length;f++)e[f]!==this&&e[f].removeCue(c);this.cues_.push(c),this.cues.setCues_(this.cues_)},d.removeCue=function(a){for(var b=this.cues_.length;b--;){var c=this.cues_[b];if(c===a||c.originalCue_&&c.originalCue_===a){this.cues_.splice(b,1),this.cues.setCues_(this.cues_);break}}},c}(le);ye.prototype.allowedEvents_={cuechange:"cuechange"};var ze=function(a){function b(b){var c;void 0===b&&(b={});var d=_(b,{kind:ie[b.kind]||""});c=a.call(this,d)||this;var e=!1;return Object.defineProperty(pd(c),"enabled",{get:function(){return e},set:function(a){"boolean"==typeof a&&a!==e&&(e=a,this.trigger("enabledchange"))}}),d.enabled&&(c.enabled=d.enabled),c.loaded_=!0,c}return qd(b,a),b}(le),Ae=function(a){function b(b){var c;void 0===b&&(b={});var d=_(b,{kind:he[b.kind]||""});c=a.call(this,d)||this;var e=!1;return Object.defineProperty(pd(c),"selected",{get:function(){return e},set:function(a){"boolean"==typeof a&&a!==e&&(e=a,this.trigger("selectedchange"))}}),d.selected&&(c.selected=d.selected),c}return qd(b,a),b}(le),Be=0,Ce=1,De=2,Ee=3,Fe=function(a){function b(b){var c;void 0===b&&(b={}),c=a.call(this)||this;var d,e=new ye(b);return c.kind=e.kind,c.src=e.src,c.srclang=e.language,c.label=e.label,c.default=e.default,Object.defineProperties(pd(c),{readyState:{get:function(){return d}},track:{get:function(){return e}}}),d=Be,e.addEventListener("loadeddata",function(){d=De,c.trigger({type:"load",target:pd(c)})}),c}return qd(b,a),b}(Wc);Fe.prototype.allowedEvents_={load:"load"},Fe.NONE=Be,Fe.LOADING=Ce,Fe.LOADED=De,Fe.ERROR=Ee;var Ge={audio:{ListClass:be,TrackClass:ze,capitalName:"Audio"},video:{ListClass:de,TrackClass:Ae,capitalName:"Video"},text:{ListClass:ee,TrackClass:ye,capitalName:"Text"}};Object.keys(Ge).forEach(function(a){Ge[a].getterName=a+"Tracks",Ge[a].privateName=a+"Tracks_"});var He={remoteText:{ListClass:ee,TrackClass:ye,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:fe,TrackClass:Fe,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Ie=Ac({},Ge,He);He.names=Object.keys(He),Ge.names=Object.keys(Ge),Ie.names=[].concat(He.names).concat(Ge.names);var Je=Object.create||function(){function a(){}return function(b){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return a.prototype=b,new a}}();ta.prototype=Je(Error.prototype),ta.prototype.constructor=ta,ta.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},va.prototype={set:function(a,b){this.get(a)||""===b||(this.values[a]=b)},get:function(a,b,c){return c?this.has(a)?this.values[a]:b[c]:this.has(a)?this.values[a]:b},has:function(a){return a in this.values},alt:function(a,b,c){for(var d=0;d<c.length;++d)if(b===c[d]){this.set(a,b);break}},integer:function(a,b){/^-?\d+$/.test(b)&&this.set(a,parseInt(b,10))},percent:function(a,b){var c;return!!((c=b.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(b=parseFloat(b),b>=0&&b<=100))&&(this.set(a,b),!0)}};var Ke=b.createElement("textarea"),Le={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Me={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},Ne={v:"title",lang:"lang"},Oe={rt:"ruby"},Pe=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];Ca.prototype.applyStyles=function(a,b){b=b||this.div;for(var c in a)a.hasOwnProperty(c)&&(b.style[c]=a[c])},Ca.prototype.formatStyle=function(a,b){return 0===a?0:a+b},Da.prototype=Je(Ca.prototype),Da.prototype.constructor=Da,Ea.prototype.move=function(a,b){switch(b=void 0!==b?b:this.lineHeight,a){case"+x":this.left+=b,this.right+=b;break;case"-x":this.left-=b,this.right-=b;break;case"+y":this.top+=b,this.bottom+=b;break;case"-y":this.top-=b,this.bottom-=b}},Ea.prototype.overlaps=function(a){return this.left<a.right&&this.right>a.left&&this.top<a.bottom&&this.bottom>a.top},Ea.prototype.overlapsAny=function(a){for(var b=0;b<a.length;b++)if(this.overlaps(a[b]))return!0;return!1},Ea.prototype.within=function(a){return this.top>=a.top&&this.bottom<=a.bottom&&this.left>=a.left&&this.right<=a.right},Ea.prototype.overlapsOppositeAxis=function(a,b){switch(b){case"+x":return this.left<a.left;case"-x":return this.right>a.right;case"+y":return this.top<a.top;case"-y":return this.bottom>a.bottom}},Ea.prototype.intersectPercentage=function(a){var b=Math.max(0,Math.min(this.right,a.right)-Math.max(this.left,a.left)),c=Math.max(0,Math.min(this.bottom,a.bottom)-Math.max(this.top,a.top)),d=b*c;return d/(this.height*this.width)},Ea.prototype.toCSSCompatValues=function(a){return{top:this.top-a.top,bottom:a.bottom-this.bottom,left:this.left-a.left,right:a.right-this.right,height:this.height,width:this.width}},Ea.getSimpleBoxPosition=function(a){var b=a.div?a.div.offsetHeight:a.tagName?a.offsetHeight:0,c=a.div?a.div.offsetWidth:a.tagName?a.offsetWidth:0,d=a.div?a.div.offsetTop:a.tagName?a.offsetTop:0;a=a.div?a.div.getBoundingClientRect():a.tagName?a.getBoundingClientRect():a;var e={left:a.left,right:a.right,top:a.top||d,height:a.height||b,bottom:a.bottom||d+(a.height||b),width:a.width||c};return e},Ga.StringDecoder=function(){return{decode:function(a){if(!a)return"";if("string"!=typeof a)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(a))}}},Ga.convertCueToDOMTree=function(a,b){return a&&b?ya(a,b):null};var Qe=.05,Re="sans-serif",Se="1.5%";Ga.processCues=function(a,b,c){function d(a){for(var b=0;b<a.length;b++)if(a[b].hasBeenReset||!a[b].displayState)return!0;return!1}if(!a||!b||!c)return null;for(;c.firstChild;)c.removeChild(c.firstChild);var e=a.document.createElement("div");if(e.style.position="absolute",e.style.left="0",e.style.right="0",e.style.top="0",e.style.bottom="0",e.style.margin=Se,c.appendChild(e),d(b)){var f=[],g=Ea.getSimpleBoxPosition(e),h=Math.round(g.height*Qe*100)/100,i={font:h+"px "+Re};!function(){for(var c,d,h=0;h<b.length;h++)d=b[h],c=new Da(a,d,i),e.appendChild(c.div),Fa(a,c,g,f),d.displayState=c.div,f.push(Ea.getSimpleBoxPosition(c))}()}else for(var j=0;j<b.length;j++)e.appendChild(b[j].displayState)},Ga.Parser=function(a,b,c){c||(c=b,b={}),b||(b={}),this.window=a,this.vttjs=b,this.state="INITIAL",this.buffer="",this.decoder=c||new TextDecoder("utf8"),this.regionList=[]},Ga.Parser.prototype={reportOrThrowError:function(a){if(!(a instanceof ta))throw a;this.onparsingerror&&this.onparsingerror(a)},parse:function(a){function b(){for(var a=f.buffer,b=0;b<a.length&&"\r"!==a[b]&&"\n"!==a[b];)++b;var c=a.substr(0,b);return"\r"===a[b]&&++b,"\n"===a[b]&&++b,f.buffer=a.substr(b),c}function c(a){var b=new va;if(wa(a,function(a,c){switch(a){case"id":b.set(a,c);break;case"width":b.percent(a,c);break;case"lines":b.integer(a,c);break;case"regionanchor":case"viewportanchor":var d=c.split(",");if(2!==d.length)break;var e=new va;if(e.percent("x",d[0]),e.percent("y",d[1]),!e.has("x")||!e.has("y"))break;b.set(a+"X",e.get("x")),b.set(a+"Y",e.get("y"));break;case"scroll":b.alt(a,c,["up"])}},/=/,/\s/),b.has("id")){var c=new(f.vttjs.VTTRegion||f.window.VTTRegion);c.width=b.get("width",100),c.lines=b.get("lines",3),c.regionAnchorX=b.get("regionanchorX",0),c.regionAnchorY=b.get("regionanchorY",100),c.viewportAnchorX=b.get("viewportanchorX",0),c.viewportAnchorY=b.get("viewportanchorY",100),c.scroll=b.get("scroll",""),f.onregion&&f.onregion(c),f.regionList.push({id:b.get("id"),region:c})}}function d(a){var b=new va;wa(a,function(a,c){switch(a){case"MPEGT":b.integer(a+"S",c);break;case"LOCA":b.set(a+"L",ua(c))}},/[^\d]:/,/,/),f.ontimestampmap&&f.ontimestampmap({MPEGTS:b.get("MPEGTS"),LOCAL:b.get("LOCAL")})}function e(a){a.match(/X-TIMESTAMP-MAP/)?wa(a,function(a,b){switch(a){case"X-TIMESTAMP-MAP":d(b)}},/=/):wa(a,function(a,b){switch(a){case"Region":c(b)}},/:/)}var f=this;a&&(f.buffer+=f.decoder.decode(a,{stream:!0}));try{var g;if("INITIAL"===f.state){if(!/\r\n|\n/.test(f.buffer))return this;g=b();var h=g.match(/^WEBVTT([ \t].*)?$/);if(!h||!h[0])throw new ta(ta.Errors.BadSignature);f.state="HEADER"}for(var i=!1;f.buffer;){if(!/\r\n|\n/.test(f.buffer))return this;switch(i?i=!1:g=b(),f.state){case"HEADER":/:/.test(g)?e(g):g||(f.state="ID");continue;case"NOTE":g||(f.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(g)){f.state="NOTE";break}if(!g)continue;f.cue=new(f.vttjs.VTTCue||f.window.VTTCue)(0,0,"");try{f.cue.align="center"}catch(a){f.cue.align="middle"}if(f.state="CUE",g.indexOf("-->")===-1){f.cue.id=g;continue}case"CUE":try{xa(g,f.cue,f.regionList)}catch(a){f.reportOrThrowError(a),f.cue=null,f.state="BADCUE";continue}f.state="CUETEXT";continue;case"CUETEXT":var j=g.indexOf("-->")!==-1;if(!g||j&&(i=!0)){f.oncue&&f.oncue(f.cue),f.cue=null,f.state="ID";continue}f.cue.text&&(f.cue.text+="\n"),f.cue.text+=g.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":g||(f.state="ID");continue}}}catch(a){f.reportOrThrowError(a),"CUETEXT"===f.state&&f.cue&&f.oncue&&f.oncue(f.cue),f.cue=null,f.state="INITIAL"===f.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var a=this;try{if(a.buffer+=a.decoder.decode(),(a.cue||"HEADER"===a.state)&&(a.buffer+="\n\n",a.parse()),"INITIAL"===a.state)throw new ta(ta.Errors.BadSignature)}catch(b){a.reportOrThrowError(b)}return a.onflush&&a.onflush(),this}};var Te=Ga,Ue="auto",Ve={"":1,lr:1,rl:1},We={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};Ja.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Xe=Ja,Ye={"":!0,up:!0},Ze=Ma,$e=d(function(b){var c=b.exports={WebVTT:Te,VTTCue:Xe,VTTRegion:Ze};a.vttjs=c,a.WebVTT=c.WebVTT;var d=c.VTTCue,e=c.VTTRegion,f=a.VTTCue,g=a.VTTRegion;c.shim=function(){a.VTTCue=d,a.VTTRegion=e},c.restore=function(){a.VTTCue=f,a.VTTRegion=g},a.VTTCue||c.shim()}),_e=($e.WebVTT,$e.VTTCue,$e.VTTRegion,function(c){function d(a,b){var d;return void 0===a&&(a={}),void 0===b&&(b=function(){}),a.reportTouchActivity=!1,d=c.call(this,null,a,b)||this,d.hasStarted_=!1,d.on("playing",function(){this.hasStarted_=!0}),d.on("loadstart",function(){this.hasStarted_=!1}),Ie.names.forEach(function(b){var c=Ie[b];a&&a[c.getterName]&&(d[c.privateName]=a[c.getterName])}),d.featuresProgressEvents||d.manualProgressOn(),d.featuresTimeupdateEvents||d.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(b){a["native"+b+"Tracks"]===!1&&(d["featuresNative"+b+"Tracks"]=!1)}),a.nativeCaptions===!1||a.nativeTextTracks===!1?d.featuresNativeTextTracks=!1:a.nativeCaptions!==!0&&a.nativeTextTracks!==!0||(d.featuresNativeTextTracks=!0),d.featuresNativeTextTracks||d.emulateTextTracks(),d.preloadTextTracks=a.preloadTextTracks!==!1,d.autoRemoteTextTracks_=new Ie.text.ListClass,d.initTrackListeners(),a.nativeControlsForTouch||d.emitTapEvents(),d.constructor&&(d.name_=d.constructor.name||"Unknown Tech"),d}qd(d,c);var e=d.prototype;return e.triggerSourceset=function(a){var b=this;this.isReady_||this.one("ready",function(){return b.setTimeout(function(){return b.triggerSourceset(a)},1)}),this.trigger({src:a,type:"sourceset"})},e.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},e.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},e.trackProgress=function(a){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Tc(this,function(){var a=this.bufferedPercent();this.bufferedPercent_!==a&&this.trigger("progress"),this.bufferedPercent_=a,1===a&&this.stopTrackingProgress()}),500)},e.onDurationChange=function(a){this.duration_=this.duration()},e.buffered=function(){return fa(0,0)},e.bufferedPercent=function(){return ga(this.buffered(),this.duration_)},e.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},e.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},e.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},e.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},e.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},e.dispose=function(){this.clearTracks(Ge.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),c.prototype.dispose.call(this)},e.clearTracks=function(a){var b=this;a=[].concat(a),a.forEach(function(a){for(var c=b[a+"Tracks"]()||[],d=c.length;d--;){var e=c[d];"text"===a&&b.removeRemoteTextTrack(e),c.removeTrack(e)}})},e.cleanupAutoTextTracks=function(){for(var a=this.autoRemoteTextTracks_||[],b=a.length;b--;){var c=a[b];this.removeRemoteTextTrack(c)}},e.reset=function(){},e.crossOrigin=function(){},e.setCrossOrigin=function(){},e.error=function(a){return void 0!==a&&(this.error_=new ha(a),this.trigger("error")),this.error_},e.played=function(){return this.hasStarted_?fa(0,0):fa()},e.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},e.initTrackListeners=function(){var a=this;Ge.names.forEach(function(b){var c=Ge[b],d=function(){a.trigger(b+"trackchange")},e=a[c.getterName]();e.addEventListener("removetrack",d),e.addEventListener("addtrack",d),a.on("dispose",function(){e.removeEventListener("removetrack",d),e.removeEventListener("addtrack",d)})})},e.addWebVttScript_=function(){var c=this;if(!a.WebVTT)if(b.body.contains(this.el())){if(!this.options_["vtt.js"]&&i($e)&&Object.keys($e).length>0)return void this.trigger("vttjsloaded");var d=b.createElement("script");d.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",d.onload=function(){c.trigger("vttjsloaded")},d.onerror=function(){c.trigger("vttjserror")},this.on("dispose",function(){d.onload=null,d.onerror=null}),a.WebVTT=!0,this.el().parentNode.appendChild(d)}else this.ready(this.addWebVttScript_)},e.emulateTextTracks=function(){var a=this,b=this.textTracks(),c=this.remoteTextTracks(),d=function(a){return b.addTrack(a.track)},e=function(a){return b.removeTrack(a.track)};c.on("addtrack",d),c.on("removetrack",e),this.addWebVttScript_();var f=function(){return a.trigger("texttrackchange")},g=function(){f();for(var a=0;a<b.length;a++){var c=b[a];c.removeEventListener("cuechange",f),"showing"===c.mode&&c.addEventListener("cuechange",f)}};g(),b.addEventListener("change",g),b.addEventListener("addtrack",g),b.addEventListener("removetrack",g),this.on("dispose",function(){c.off("addtrack",d),c.off("removetrack",e),b.removeEventListener("change",g),b.removeEventListener("addtrack",g),b.removeEventListener("removetrack",g);for(var a=0;a<b.length;a++){var h=b[a];h.removeEventListener("cuechange",f)}})},e.addTextTrack=function(a,b,c){if(!a)throw new Error("TextTrack kind is required but was not provided");return Na(this,a,b,c)},e.createRemoteTextTrack=function(a){var b=_(a,{tech:this});return new He.remoteTextEl.TrackClass(b)},e.addRemoteTextTrack=function(a,b){var c=this;void 0===a&&(a={});var d=this.createRemoteTextTrack(a);return b!==!0&&b!==!1&&(yc.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),b=!0),this.remoteTextTrackEls().addTrackElement_(d),this.remoteTextTracks().addTrack(d.track),b!==!0&&this.ready(function(){return c.autoRemoteTextTracks_.addTrack(d.track)}),d},e.removeRemoteTextTrack=function(a){var b=this.remoteTextTrackEls().getTrackElementByTrack_(a);this.remoteTextTrackEls().removeTrackElement_(b),this.remoteTextTracks().removeTrack(a),this.autoRemoteTextTracks_.removeTrack(a)},e.getVideoPlaybackQuality=function(){return{}},e.requestPictureInPicture=function(){var b=this.options_.Promise||a.Promise;if(b)return b.reject()},e.disablePictureInPicture=function(){return!0},e.setDisablePictureInPicture=function(){},e.setPoster=function(){},e.playsinline=function(){},e.setPlaysinline=function(){},e.overrideNativeAudioTracks=function(){},e.overrideNativeVideoTracks=function(){},e.canPlayType=function(){return""},d.canPlayType=function(){return""},d.canPlaySource=function(a,b){return d.canPlayType(a.type)},d.isTech=function(a){return a.prototype instanceof d||a instanceof d||a===d},d.registerTech=function(a,b){if(d.techs_||(d.techs_={}),!d.isTech(b))throw new Error("Tech "+a+" must be a Tech");if(!d.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!d.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return a=hd(a),d.techs_[a]=b,d.techs_[gd(a)]=b,"Tech"!==a&&d.defaultTechOrder_.push(a),b},d.getTech=function(b){if(b)return d.techs_&&d.techs_[b]?d.techs_[b]:(b=hd(b),a&&a.videojs&&a.videojs[b]?(yc.warn("The "+b+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),a.videojs[b]):void 0)},d}(nd));Ie.names.forEach(function(a){var b=Ie[a];_e.prototype[b.getterName]=function(){return this[b.privateName]=this[b.privateName]||new b.ListClass,this[b.privateName]}}),_e.prototype.featuresVolumeControl=!0,_e.prototype.featuresMuteControl=!0,_e.prototype.featuresFullscreenResize=!1,_e.prototype.featuresPlaybackRate=!1,_e.prototype.featuresProgressEvents=!1,_e.prototype.featuresSourceset=!1,_e.prototype.featuresTimeupdateEvents=!1,_e.prototype.featuresNativeTextTracks=!1,_e.withSourceHandlers=function(a){a.registerSourceHandler=function(b,c){var d=a.sourceHandlers;d||(d=a.sourceHandlers=[]),void 0===c&&(c=d.length),d.splice(c,0,b)},a.canPlayType=function(b){for(var c,d=a.sourceHandlers||[],e=0;e<d.length;e++)if(c=d[e].canPlayType(b))return c;return""},a.selectSourceHandler=function(b,c){for(var d,e=a.sourceHandlers||[],f=0;f<e.length;f++)if(d=e[f].canHandleSource(b,c))return e[f];return null},a.canPlaySource=function(b,c){var d=a.selectSourceHandler(b,c);return d?d.canHandleSource(b,c):""};var b=["seekable","seeking","duration"];b.forEach(function(a){var b=this[a];"function"==typeof b&&(this[a]=function(){return this.sourceHandler_&&this.sourceHandler_[a]?this.sourceHandler_[a].apply(this.sourceHandler_,arguments):b.apply(this,arguments)})},a.prototype),a.prototype.setSource=function(b){var c=a.selectSourceHandler(b,this.options_);c||(a.nativeSourceHandler?c=a.nativeSourceHandler:yc.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),c!==a.nativeSourceHandler&&(this.currentSource_=b),this.sourceHandler_=c.handleSource(b,this,this.options_),this.one("dispose",this.disposeSourceHandler)},a.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),
this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},nd.registerComponent("Tech",_e),_e.registerTech("Tech",_e),_e.defaultTechOrder_=[];var af={},bf={},cf={},df={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1},ef={setCurrentTime:1,setMuted:1,setVolume:1},ff={play:1,pause:1},gf={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},hf=function(a){void 0===a&&(a="");var b=oe(a),c=gf[b.toLowerCase()];return c||""},jf=function(a,b){if(!b)return"";if(a.cache_.source.src===b&&a.cache_.source.type)return a.cache_.source.type;var c=a.cache_.sources.filter(function(a){return a.src===b});if(c.length)return c[0].type;for(var d=a.$$("source"),e=0;e<d.length;e++){var f=d[e];if(f.type&&f.src&&f.src===b)return f.type}return hf(b)},kf=function a(b){if(Array.isArray(b)){var c=[];b.forEach(function(b){b=a(b),Array.isArray(b)?c=c.concat(b):h(b)&&c.push(b)}),b=c}else b="string"==typeof b&&b.trim()?[Za({src:b})]:h(b)&&"string"==typeof b.src&&b.src&&b.src.trim()?[Za(b)]:[];return b},lf=function(a){function b(b,c,d){var e,f=_({createEl:!1},c);if(e=a.call(this,b,f,d)||this,c.playerOptions.sources&&0!==c.playerOptions.sources.length)b.src(c.playerOptions.sources);else for(var g=0,h=c.playerOptions.techOrder;g<h.length;g++){var i=hd(h[g]),j=_e.getTech(i);if(i||(j=nd.getComponent(i)),j&&j.isSupported()){b.loadTech_(i);break}}return e}return qd(b,a),b}(nd);nd.registerComponent("MediaLoader",lf);var mf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.emitTapEvents(),d.enable(),d}qd(b,a);var c=b.prototype;return c.createEl=function(b,c,d){void 0===b&&(b="div"),void 0===c&&(c={}),void 0===d&&(d={}),c=g({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},c),"button"===b&&yc.error("Creating a ClickableComponent with an HTML element of "+b+" is not supported; use a Button instead."),d=g({role:"button"},d),this.tabIndex_=c.tabIndex;var e=a.prototype.createEl.call(this,b,c,d);return this.createControlTextEl(e),e},c.dispose=function(){this.controlTextEl_=null,a.prototype.dispose.call(this)},c.createControlTextEl=function(a){return this.controlTextEl_=r("span",{className:"vjs-control-text"},{"aria-live":"polite"}),a&&a.appendChild(this.controlTextEl_),this.controlText(this.controlText_,a),this.controlTextEl_},c.controlText=function(a,b){if(void 0===b&&(b=this.el()),void 0===a)return this.controlText_||"Need Text";var c=this.localize(a);this.controlText_=a,s(this.controlTextEl_,c),this.nonIconControl||b.setAttribute("title",c)},c.buildCSSClass=function(){return"vjs-control vjs-button "+a.prototype.buildCSSClass.call(this)},c.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!=typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("keydown",this.handleKeyDown))},c.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),"undefined"!=typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver),this.off("mouseout",this.handleMouseOut),this.off(["tap","click"],this.handleClick),this.off("keydown",this.handleKeyDown)},c.handleClick=function(a){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},c.handleKeyDown=function(b){Xd.isEventKey(b,"Space")||Xd.isEventKey(b,"Enter")?(b.preventDefault(),b.stopPropagation(),this.trigger("click")):a.prototype.handleKeyDown.call(this,b)},b}(nd);nd.registerComponent("ClickableComponent",mf);var nf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.update(),b.on("posterchange",Tc(pd(d),d.update)),d}qd(b,a);var c=b.prototype;return c.dispose=function(){this.player().off("posterchange",this.update),a.prototype.dispose.call(this)},c.createEl=function(){var a=r("div",{className:"vjs-poster",tabIndex:-1});return a},c.update=function(a){var b=this.player().poster();this.setSrc(b),b?this.show():this.hide()},c.setSrc=function(a){var b="";a&&(b='url("'+a+'")'),this.el_.style.backgroundImage=b},c.handleClick=function(a){if(this.player_.controls()){var b=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;!this.player_.tech(!0)||(Dd||Ad)&&b||this.player_.tech(!0).focus(),this.player_.paused()?ka(this.player_.play()):this.player_.pause()}},b}(mf);nd.registerComponent("PosterImage",nf);var of="#222",pf="#ccc",qf={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},rf=function(b){function c(c,d,e){var f;f=b.call(this,c,d,e)||this;var g=Tc(pd(f),f.updateDisplay);return c.on("loadstart",Tc(pd(f),f.toggleDisplay)),c.on("texttrackchange",g),c.on("loadedmetadata",Tc(pd(f),f.preselectTrack)),c.ready(Tc(pd(f),function(){if(c.tech_&&c.tech_.featuresNativeTextTracks)return void this.hide();c.on("fullscreenchange",g),c.on("playerresize",g),a.addEventListener("orientationchange",g),c.on("dispose",function(){return a.removeEventListener("orientationchange",g)});for(var b=this.options_.playerOptions.tracks||[],d=0;d<b.length;d++)this.player_.addRemoteTextTrack(b[d],!0);this.preselectTrack()})),f}qd(c,b);var d=c.prototype;return d.preselectTrack=function(){for(var a,b,c,d={captions:1,subtitles:1},e=this.player_.textTracks(),f=this.player_.cache_.selectedLanguage,g=0;g<e.length;g++){var h=e[g];f&&f.enabled&&f.language&&f.language===h.language&&h.kind in d?h.kind===f.kind?c=h:c||(c=h):f&&!f.enabled?(c=null,a=null,b=null):h.default&&("descriptions"!==h.kind||a?h.kind in d&&!b&&(b=h):a=h)}c?c.mode="showing":b?b.mode="showing":a&&(a.mode="showing")},d.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},d.createEl=function(){return b.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},d.clearDisplay=function(){"function"==typeof a.WebVTT&&a.WebVTT.processCues(a,[],this.el_)},d.updateDisplay=function(){var a=this.player_.textTracks(),b=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),b){for(var c=[],d=0;d<a.length;++d){var e=a[d];"showing"===e.mode&&c.push(e)}return void this.updateForTrack(c)}for(var f=null,g=null,h=a.length;h--;){var i=a[h];"showing"===i.mode&&("descriptions"===i.kind?f=i:g=i)}g?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(g)):f&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(f))},d.updateDisplayState=function(b){for(var c=this.player_.textTrackSettings.getValues(),d=b.activeCues,e=d.length;e--;){var f=d[e];if(f){var g=f.displayState;if(c.color&&(g.firstChild.style.color=c.color),c.textOpacity&&_a(g.firstChild,"color",$a(c.color||"#fff",c.textOpacity)),c.backgroundColor&&(g.firstChild.style.backgroundColor=c.backgroundColor),c.backgroundOpacity&&_a(g.firstChild,"backgroundColor",$a(c.backgroundColor||"#000",c.backgroundOpacity)),c.windowColor&&(c.windowOpacity?_a(g,"backgroundColor",$a(c.windowColor,c.windowOpacity)):g.style.backgroundColor=c.windowColor),c.edgeStyle&&("dropshadow"===c.edgeStyle?g.firstChild.style.textShadow="2px 2px 3px "+of+", 2px 2px 4px "+of+", 2px 2px 5px "+of:"raised"===c.edgeStyle?g.firstChild.style.textShadow="1px 1px "+of+", 2px 2px "+of+", 3px 3px "+of:"depressed"===c.edgeStyle?g.firstChild.style.textShadow="1px 1px "+pf+", 0 1px "+pf+", -1px -1px "+of+", 0 -1px "+of:"uniform"===c.edgeStyle&&(g.firstChild.style.textShadow="0 0 4px "+of+", 0 0 4px "+of+", 0 0 4px "+of+", 0 0 4px "+of)),c.fontPercent&&1!==c.fontPercent){var h=a.parseFloat(g.style.fontSize);g.style.fontSize=h*c.fontPercent+"px",g.style.height="auto",g.style.top="auto",g.style.bottom="2px"}c.fontFamily&&"default"!==c.fontFamily&&("small-caps"===c.fontFamily?g.firstChild.style.fontVariant="small-caps":g.firstChild.style.fontFamily=qf[c.fontFamily])}}},d.updateForTrack=function(b){if(Array.isArray(b)||(b=[b]),"function"==typeof a.WebVTT&&!b.every(function(a){return!a.activeCues})){for(var c=[],d=0;d<b.length;++d)for(var e=b[d],f=0;f<e.activeCues.length;++f)c.push(e.activeCues[f]);a.WebVTT.processCues(a,c,this.el_);for(var g=0;g<b.length;++g){for(var h=b[g],i=0;i<h.activeCues.length;++i){var j=h.activeCues[i].displayState;v(j,"vjs-text-track-cue"),v(j,"vjs-text-track-cue-"+(h.language?h.language:g))}this.player_.textTrackSettings&&this.updateDisplayState(h)}}},c}(nd);nd.registerComponent("TextTrackDisplay",rf);var sf=function(a){function b(){return a.apply(this,arguments)||this}qd(b,a);var c=b.prototype;return c.createEl=function(){var b=this.player_.isAudio(),c=this.localize(b?"Audio Player":"Video Player"),d=r("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[c])}),e=a.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return e.appendChild(d),e},b}(nd);nd.registerComponent("LoadingSpinner",sf);var tf=function(a){function b(){return a.apply(this,arguments)||this}qd(b,a);var c=b.prototype;return c.createEl=function(a,b,c){void 0===b&&(b={}),void 0===c&&(c={}),a="button",b=g({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},b),c=g({type:"button"},c);var d=nd.prototype.createEl.call(this,a,b,c);return this.createControlTextEl(d),d},c.addChild=function(a,b){void 0===b&&(b={});var c=this.constructor.name;return yc.warn("Adding an actionable (user controllable) child to a Button ("+c+") is not supported; use a ClickableComponent instead."),nd.prototype.addChild.call(this,a,b)},c.enable=function(){a.prototype.enable.call(this),this.el_.removeAttribute("disabled")},c.disable=function(){a.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},c.handleKeyDown=function(b){return Xd.isEventKey(b,"Space")||Xd.isEventKey(b,"Enter")?void b.stopPropagation():void a.prototype.handleKeyDown.call(this,b)},b}(mf);nd.registerComponent("Button",tf);var uf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.mouseused_=!1,d.on("mousedown",d.handleMouseDown),d}qd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-big-play-button"},c.handleClick=function(a){var b=this.player_.play();if(this.mouseused_&&a.clientX&&a.clientY){var c=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return ka(b),void(!this.player_.tech(!0)||(Dd||Ad)&&c||this.player_.tech(!0).focus())}var d=this.player_.getChild("controlBar"),e=d&&d.getChild("playToggle");if(!e)return void this.player_.tech(!0).focus();var f=function(){return e.focus()};ja(b)?b.then(f,function(){}):this.setTimeout(f,1)},c.handleKeyDown=function(b){this.mouseused_=!1,a.prototype.handleKeyDown.call(this,b)},c.handleMouseDown=function(a){this.mouseused_=!0},b}(tf);uf.prototype.controlText_="Play Video",nd.registerComponent("BigPlayButton",uf);var vf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.controlText(c&&c.controlText||d.localize("Close")),d}qd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-close-button "+a.prototype.buildCSSClass.call(this)},c.handleClick=function(a){this.trigger({type:"close",bubbles:!1})},c.handleKeyDown=function(b){Xd.isEventKey(b,"Esc")?(b.preventDefault(),b.stopPropagation(),this.trigger("click")):a.prototype.handleKeyDown.call(this,b)},b}(tf);nd.registerComponent("CloseButton",vf);var wf=function(a){function b(b,c){var d;return void 0===c&&(c={}),d=a.call(this,b,c)||this,c.replay=void 0===c.replay||c.replay,d.on(b,"play",d.handlePlay),d.on(b,"pause",d.handlePause),c.replay&&d.on(b,"ended",d.handleEnded),d}qd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-play-control "+a.prototype.buildCSSClass.call(this)},c.handleClick=function(a){this.player_.paused()?this.player_.play():this.player_.pause()},c.handleSeeked=function(a){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(a):this.handlePlay(a)},c.handlePlay=function(a){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},c.handlePause=function(a){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},c.handleEnded=function(a){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},b}(tf);wf.prototype.controlText_="Play",nd.registerComponent("PlayToggle",wf);var xf=function(a,b){a=a<0?0:a;var c=Math.floor(a%60),d=Math.floor(a/60%60),e=Math.floor(a/3600),f=Math.floor(b/60%60),g=Math.floor(b/3600);return(isNaN(a)||a===1/0)&&(e=d=c="-"),e=e>0||g>0?e+":":"",d=((e||f>=10)&&d<10?"0"+d:d)+":",c=c<10?"0"+c:c,e+d+c},yf=xf,zf=function(a){function c(b,c){var d;return d=a.call(this,b,c)||this,d.on(b,["timeupdate","ended"],d.updateContent),d.updateTextNode_(),d}qd(c,a);var d=c.prototype;return d.createEl=function(){var b=this.buildCSSClass(),c=a.prototype.createEl.call(this,"div",{className:b+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+" </span>"});return this.contentEl_=r("span",{className:b+"-display"},{"aria-live":"off",role:"presentation"}),c.appendChild(this.contentEl_),c},d.dispose=function(){this.contentEl_=null,this.textNode_=null,a.prototype.dispose.call(this)},d.updateTextNode_=function(a){var c=this;void 0===a&&(a=0),a=cb(a),this.formattedTime_!==a&&(this.formattedTime_=a,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(c.contentEl_){var a=c.textNode_;c.textNode_=b.createTextNode(c.formattedTime_),c.textNode_&&(a?c.contentEl_.replaceChild(c.textNode_,a):c.contentEl_.appendChild(c.textNode_))}}))},d.updateContent=function(a){},c}(nd);zf.prototype.labelText_="Time",zf.prototype.controlText_="Time",nd.registerComponent("TimeDisplay",zf);var Af=function(a){function b(){return a.apply(this,arguments)||this}qd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-current-time"},c.updateContent=function(a){var b;b=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(b)},b}(zf);Af.prototype.labelText_="Current Time",Af.prototype.controlText_="Current Time",nd.registerComponent("CurrentTimeDisplay",Af);var Bf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.on(b,"durationchange",d.updateContent),d.on(b,"loadstart",d.updateContent),d.on(b,"loadedmetadata",d.updateContent),d}qd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-duration"},c.updateContent=function(a){var b=this.player_.duration();this.updateTextNode_(b)},b}(zf);Bf.prototype.labelText_="Duration",Bf.prototype.controlText_="Duration",nd.registerComponent("DurationDisplay",Bf);var Cf=function(a){function b(){return a.apply(this,arguments)||this}qd(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":!0})},b}(nd);nd.registerComponent("TimeDivider",Cf);var Df=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.on(b,"durationchange",d.updateContent),d}qd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-remaining-time"},c.createEl=function(){var b=a.prototype.createEl.call(this);return b.insertBefore(r("span",{},{"aria-hidden":!0},"-"),this.contentEl_),b},c.updateContent=function(a){if("number"==typeof this.player_.duration()){var b;b=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(b)}},b}(zf);Df.prototype.labelText_="Remaining Time",Df.prototype.controlText_="Remaining Time",nd.registerComponent("RemainingTimeDisplay",Df);var Ef=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.updateShowing(),d.on(d.player(),"durationchange",d.updateShowing),d}qd(b,a);var c=b.prototype;return c.createEl=function(){var b=a.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=r("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"}),b.appendChild(this.contentEl_),b},c.dispose=function(){this.contentEl_=null,a.prototype.dispose.call(this)},c.updateShowing=function(a){this.player().duration()===1/0?this.show():this.hide()},b}(nd);nd.registerComponent("LiveDisplay",Ef);var Ff=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.updateLiveEdgeStatus(),d.player_.liveTracker&&d.on(d.player_.liveTracker,"liveedgechange",d.updateLiveEdgeStatus),d}qd(b,a);var c=b.prototype;return c.createEl=function(){var b=a.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=r("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"}),b.appendChild(this.textEl_),b},c.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},c.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},c.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus),this.textEl_=null,a.prototype.dispose.call(this)},b}(tf);Ff.prototype.controlText_="Seek to live, currently playing live",nd.registerComponent("SeekToLive",Ff);var Gf=function(a,b,c){return a=Number(a),Math.min(c,Math.max(b,isNaN(a)?b:a))},Hf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.bar=d.getChild(d.options_.barName),d.vertical(!!d.options_.vertical),d.enable(),d}qd(b,a);var c=b.prototype;return c.enabled=function(){return this.enabled_},c.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("keydown",this.handleKeyDown),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},c.disable=function(){if(this.enabled()){var a=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("keydown",this.handleKeyDown),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(a,"mousemove",this.handleMouseMove),this.off(a,"mouseup",this.handleMouseUp),this.off(a,"touchmove",this.handleMouseMove),this.off(a,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},c.createEl=function(b,c,d){return void 0===c&&(c={}),void 0===d&&(d={}),c.className=c.className+" vjs-slider",c=g({tabIndex:0},c),d=g({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},d),a.prototype.createEl.call(this,b,c,d)},c.handleMouseDown=function(a){var b=this.bar.el_.ownerDocument;"mousedown"===a.type&&a.preventDefault(),"touchstart"!==a.type||Bd||a.preventDefault(),D(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(b,"mousemove",this.handleMouseMove),this.on(b,"mouseup",this.handleMouseUp),this.on(b,"touchmove",this.handleMouseMove),this.on(b,"touchend",this.handleMouseUp),this.handleMouseMove(a)},c.handleMouseMove=function(a){},c.handleMouseUp=function(){var a=this.bar.el_.ownerDocument;E(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(a,"mousemove",this.handleMouseMove),this.off(a,"mouseup",this.handleMouseUp),this.off(a,"touchmove",this.handleMouseMove),this.off(a,"touchend",this.handleMouseUp),this.update()},c.update=function(){var a=this;if(this.el_&&this.bar){var b=this.getProgress();return b===this.progress_?b:(this.progress_=b,this.requestNamedAnimationFrame("Slider#update",function(){var c=a.vertical()?"height":"width";a.bar.el().style[c]=(100*b).toFixed(2)+"%"}),b)}},c.getProgress=function(){return Number(Gf(this.getPercent(),0,1).toFixed(4))},c.calculateDistance=function(a){var b=H(this.el_,a);return this.vertical()?b.y:b.x},c.handleKeyDown=function(b){Xd.isEventKey(b,"Left")||Xd.isEventKey(b,"Down")?(b.preventDefault(),b.stopPropagation(),this.stepBack()):Xd.isEventKey(b,"Right")||Xd.isEventKey(b,"Up")?(b.preventDefault(),b.stopPropagation(),this.stepForward()):a.prototype.handleKeyDown.call(this,b)},c.handleClick=function(a){a.stopPropagation(),a.preventDefault()},c.vertical=function(a){return void 0===a?this.vertical_||!1:(this.vertical_=!!a,void(this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")))},b}(nd);nd.registerComponent("Slider",Hf);var If=function(a,b){return Gf(a/b*100,0,100).toFixed(2)+"%"},Jf=function(a){function c(b,c){var d;return d=a.call(this,b,c)||this,d.partEls_=[],d.on(b,"progress",d.update),d}qd(c,a);var d=c.prototype;return d.createEl=function(){var c=a.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),d=r("span",{className:"vjs-control-text"}),e=r("span",{textContent:this.localize("Loaded")}),f=b.createTextNode(": ");return this.percentageEl_=r("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),c.appendChild(d),d.appendChild(e),d.appendChild(f),d.appendChild(this.percentageEl_),c},d.dispose=function(){this.partEls_=null,this.percentageEl_=null,a.prototype.dispose.call(this)},d.update=function(a){var b=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var a=b.player_.liveTracker,c=b.player_.buffered(),d=a&&a.isLive()?a.seekableEnd():b.player_.duration(),e=b.player_.bufferedEnd(),f=b.partEls_,g=If(e,d);b.percent_!==g&&(b.el_.style.width=g,s(b.percentageEl_,g),b.percent_=g);for(var h=0;h<c.length;h++){var i=c.start(h),j=c.end(h),k=f[h];k||(k=b.el_.appendChild(r()),f[h]=k),k.dataset.start===i&&k.dataset.end===j||(k.dataset.start=i,k.dataset.end=j,k.style.left=If(i,e),k.style.width=If(j-i,e))}for(var l=f.length;l>c.length;l--)b.el_.removeChild(f[l-1]);f.length=c.length})},c}(nd);nd.registerComponent("LoadProgressBar",Jf);var Kf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.update=Uc(Tc(pd(d),d.update),Sc),d}qd(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},c.update=function(a,b,c){var d=F(this.el_),e=F(this.player_.el()),f=a.width*b;if(e&&d){var g=a.left-e.left+f,h=a.width-f+(e.right-a.right),i=d.width/2;g<i?i+=i-g:h<i&&(i=h),i<0?i=0:i>d.width&&(i=d.width),this.el_.style.right="-"+i+"px",this.write(c)}},c.write=function(a){s(this.el_,a)},c.updateTime=function(a,b,c,d){var e=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var f,g=e.player_.duration();if(e.player_.liveTracker&&e.player_.liveTracker.isLive()){var h=e.player_.liveTracker.liveWindow(),i=h-b*h;f=(i<1?"":"-")+cb(i,h)}else f=cb(c,g);e.update(a,b,f),d&&d()})},b}(nd);nd.registerComponent("TimeTooltip",Kf);var Lf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.update=Uc(Tc(pd(d),d.update),Sc),d}qd(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},c.update=function(a,b){var c=this.getChild("timeTooltip");if(c){var d=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();c.updateTime(a,b,d)}},b}(nd);Lf.prototype.options_={children:[]},Jd||wd||Lf.prototype.options_.children.push("timeTooltip"),nd.registerComponent("PlayProgressBar",Lf);var Mf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.update=Uc(Tc(pd(d),d.update),Sc),d}qd(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},c.update=function(a,b){var c=this,d=b*this.player_.duration();this.getChild("timeTooltip").updateTime(a,b,d,function(){c.el_.style.left=a.width*b+"px"})},b}(nd);Mf.prototype.options_={children:["timeTooltip"]},nd.registerComponent("MouseTimeDisplay",Mf);var Nf=5,Of=12,Pf=function(a){function c(b,c){var d;return d=a.call(this,b,c)||this,d.setEventHandlers_(),d}qd(c,a);var d=c.prototype;return d.setEventHandlers_=function(){this.update_=Tc(this,this.update),this.update=Uc(this.update_,Sc),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.on(this.player_,["playing"],this.enableInterval_),this.on(this.player_,["ended","pause","waiting"],this.disableInterval_),"hidden"in b&&"visibilityState"in b&&this.on(b,"visibilitychange",this.toggleVisibility_)},d.toggleVisibility_=function(a){b.hidden?this.disableInterval_(a):(this.enableInterval_(),this.update())},d.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Sc))},d.disableInterval_=function(a){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&a&&"ended"!==a.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},d.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},d.update=function(b){var c=this,d=a.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var a=c.player_.ended()?c.player_.duration():c.getCurrentTime_(),b=c.player_.liveTracker,e=c.player_.duration();b&&b.isLive()&&(e=c.player_.liveTracker.liveCurrentTime()),c.percent_!==d&&(c.el_.setAttribute("aria-valuenow",(100*d).toFixed(2)),c.percent_=d),c.currentTime_===a&&c.duration_===e||(c.el_.setAttribute("aria-valuetext",c.localize("progress bar timing: currentTime={1} duration={2}",[cb(a,e),cb(e,e)],"{1} of {2}")),c.currentTime_=a,c.duration_=e),c.bar&&c.bar.update(F(c.el()),c.getProgress())}),d},d.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},d.getPercent=function(){var a,b=this.getCurrentTime_(),c=this.player_.liveTracker;return c&&c.isLive()?(a=(b-c.seekableStart())/c.liveWindow(),c.atLiveEdge()&&(a=1)):a=b/this.player_.duration(),a},d.handleMouseDown=function(b){N(b)&&(b.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),a.prototype.handleMouseDown.call(this,b))},d.handleMouseMove=function(a){if(N(a)){var b,c=this.calculateDistance(a),d=this.player_.liveTracker;if(d&&d.isLive()){if(c>=.99)return void d.seekToLiveEdge();var e=d.seekableStart(),f=d.liveCurrentTime();if(b=e+c*d.liveWindow(),b>=f&&(b=f),b<=e&&(b=e+.1),b===1/0)return}else b=c*this.player_.duration(),b===this.player_.duration()&&(b-=.1);this.player_.currentTime(b)}},d.enable=function(){a.prototype.enable.call(this);var b=this.getChild("mouseTimeDisplay");b&&b.show()},d.disable=function(){a.prototype.disable.call(this);var b=this.getChild("mouseTimeDisplay");b&&b.hide()},d.handleMouseUp=function(b){a.prototype.handleMouseUp.call(this,b),b&&b.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?ka(this.player_.play()):this.update_()},d.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+Nf)},d.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-Nf)},d.handleAction=function(a){this.player_.paused()?this.player_.play():this.player_.pause()},d.handleKeyDown=function(b){if(Xd.isEventKey(b,"Space")||Xd.isEventKey(b,"Enter"))b.preventDefault(),b.stopPropagation(),this.handleAction(b);else if(Xd.isEventKey(b,"Home"))b.preventDefault(),b.stopPropagation(),this.player_.currentTime(0);else if(Xd.isEventKey(b,"End"))b.preventDefault(),b.stopPropagation(),this.player_.currentTime(this.player_.duration());else if(/^[0-9]$/.test(Xd(b))){b.preventDefault(),b.stopPropagation();var c=10*(Xd.codes[Xd(b)]-Xd.codes[0])/100;this.player_.currentTime(this.player_.duration()*c)}else Xd.isEventKey(b,"PgDn")?(b.preventDefault(),b.stopPropagation(),this.player_.currentTime(this.player_.currentTime()-Nf*Of)):Xd.isEventKey(b,"PgUp")?(b.preventDefault(),b.stopPropagation(),this.player_.currentTime(this.player_.currentTime()+Nf*Of)):a.prototype.handleKeyDown.call(this,b)},d.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableInterval_),this.off(this.player_,["ended","pause","waiting"],this.disableInterval_),"hidden"in b&&"visibilityState"in b&&this.off(b,"visibilitychange",this.toggleVisibility_),a.prototype.dispose.call(this)},c}(Hf);Pf.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},Jd||wd||Pf.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),nd.registerComponent("SeekBar",Pf);var Qf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.handleMouseMove=Uc(Tc(pd(d),d.handleMouseMove),Sc),d.throttledHandleMouseSeek=Uc(Tc(pd(d),d.handleMouseSeek),Sc),d.enable(),d}qd(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},c.handleMouseMove=function(a){var b=this.getChild("seekBar");if(b){var c=b.getChild("playProgressBar"),d=b.getChild("mouseTimeDisplay");if(c||d){var e=b.el(),f=F(e),g=H(e,a).x;g=Gf(g,0,1),d&&d.update(f,g),c&&c.update(f,b.getProgress())}}},c.handleMouseSeek=function(a){var b=this.getChild("seekBar");b&&b.handleMouseMove(a)},c.enabled=function(){return this.enabled_},c.disable=function(){this.children().forEach(function(a){return a.disable&&a.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},c.enable=function(){this.children().forEach(function(a){return a.enable&&a.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},c.handleMouseDown=function(a){var b=this.el_.ownerDocument,c=this.getChild("seekBar");c&&c.handleMouseDown(a),this.on(b,"mousemove",this.throttledHandleMouseSeek),this.on(b,"touchmove",this.throttledHandleMouseSeek),this.on(b,"mouseup",this.handleMouseUp),this.on(b,"touchend",this.handleMouseUp)},c.handleMouseUp=function(a){var b=this.el_.ownerDocument,c=this.getChild("seekBar");c&&c.handleMouseUp(a),this.off(b,"mousemove",this.throttledHandleMouseSeek),this.off(b,"touchmove",this.throttledHandleMouseSeek),
this.off(b,"mouseup",this.handleMouseUp),this.off(b,"touchend",this.handleMouseUp)},b}(nd);Qf.prototype.options_={children:["seekBar"]},nd.registerComponent("ProgressControl",Qf);var Rf=function(a){function c(b,c){var d;return d=a.call(this,b,c)||this,d.on(b,["enterpictureinpicture","leavepictureinpicture"],d.handlePictureInPictureChange),d.on(b,["disablepictureinpicturechanged","loadedmetadata"],d.handlePictureInPictureEnabledChange),d.disable(),d}qd(c,a);var d=c.prototype;return d.buildCSSClass=function(){return"vjs-picture-in-picture-control "+a.prototype.buildCSSClass.call(this)},d.handlePictureInPictureEnabledChange=function(){b.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1?this.enable():this.disable()},d.handlePictureInPictureChange=function(a){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},d.handleClick=function(a){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},c}(tf);Rf.prototype.controlText_="Picture-in-Picture",nd.registerComponent("PictureInPictureToggle",Rf);var Sf=function(a){function c(c,d){var e;return e=a.call(this,c,d)||this,e.on(c,"fullscreenchange",e.handleFullscreenChange),b[c.fsApi_.fullscreenEnabled]===!1&&e.disable(),e}qd(c,a);var d=c.prototype;return d.buildCSSClass=function(){return"vjs-fullscreen-control "+a.prototype.buildCSSClass.call(this)},d.handleFullscreenChange=function(a){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},d.handleClick=function(a){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},c}(tf);Sf.prototype.controlText_="Fullscreen",nd.registerComponent("FullscreenToggle",Sf);var Tf=function(a,b){b.tech_&&!b.tech_.featuresVolumeControl&&a.addClass("vjs-hidden"),a.on(b,"loadstart",function(){b.tech_.featuresVolumeControl?a.removeClass("vjs-hidden"):a.addClass("vjs-hidden")})},Uf=function(a){function b(){return a.apply(this,arguments)||this}qd(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},b}(nd);nd.registerComponent("VolumeLevel",Uf);var Vf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.on("slideractive",d.updateLastVolume_),d.on(b,"volumechange",d.updateARIAAttributes),b.ready(function(){return d.updateARIAAttributes()}),d}qd(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},c.handleMouseDown=function(b){N(b)&&a.prototype.handleMouseDown.call(this,b)},c.handleMouseMove=function(a){N(a)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(a)))},c.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},c.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},c.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},c.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},c.updateARIAAttributes=function(a){var b=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",b),this.el_.setAttribute("aria-valuetext",b+"%")},c.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},c.updateLastVolume_=function(){var a=this,b=this.player_.volume();this.one("sliderinactive",function(){0===a.player_.volume()&&a.player_.lastVolume_(b)})},b}(Hf);Vf.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Vf.prototype.playerEvent="volumechange",nd.registerComponent("VolumeBar",Vf);var Wf=function(a){function b(b,c){var d;return void 0===c&&(c={}),c.vertical=c.vertical||!1,("undefined"==typeof c.volumeBar||i(c.volumeBar))&&(c.volumeBar=c.volumeBar||{},c.volumeBar.vertical=c.vertical),d=a.call(this,b,c)||this,Tf(pd(d),b),d.throttledHandleMouseMove=Uc(Tc(pd(d),d.handleMouseMove),Sc),d.on("mousedown",d.handleMouseDown),d.on("touchstart",d.handleMouseDown),d.on(d.volumeBar,["focus","slideractive"],function(){d.volumeBar.addClass("vjs-slider-active"),d.addClass("vjs-slider-active"),d.trigger("slideractive")}),d.on(d.volumeBar,["blur","sliderinactive"],function(){d.volumeBar.removeClass("vjs-slider-active"),d.removeClass("vjs-slider-active"),d.trigger("sliderinactive")}),d}qd(b,a);var c=b.prototype;return c.createEl=function(){var b="vjs-volume-horizontal";return this.options_.vertical&&(b="vjs-volume-vertical"),a.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+b})},c.handleMouseDown=function(a){var b=this.el_.ownerDocument;this.on(b,"mousemove",this.throttledHandleMouseMove),this.on(b,"touchmove",this.throttledHandleMouseMove),this.on(b,"mouseup",this.handleMouseUp),this.on(b,"touchend",this.handleMouseUp)},c.handleMouseUp=function(a){var b=this.el_.ownerDocument;this.off(b,"mousemove",this.throttledHandleMouseMove),this.off(b,"touchmove",this.throttledHandleMouseMove),this.off(b,"mouseup",this.handleMouseUp),this.off(b,"touchend",this.handleMouseUp)},c.handleMouseMove=function(a){this.volumeBar.handleMouseMove(a)},b}(nd);Wf.prototype.options_={children:["volumeBar"]},nd.registerComponent("VolumeControl",Wf);var Xf=function(a,b){b.tech_&&!b.tech_.featuresMuteControl&&a.addClass("vjs-hidden"),a.on(b,"loadstart",function(){b.tech_.featuresMuteControl?a.removeClass("vjs-hidden"):a.addClass("vjs-hidden")})},Yf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,Xf(pd(d),b),d.on(b,["loadstart","volumechange"],d.update),d}qd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-mute-control "+a.prototype.buildCSSClass.call(this)},c.handleClick=function(a){var b=this.player_.volume(),c=this.player_.lastVolume_();if(0===b){var d=c<.1?.1:c;this.player_.volume(d),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},c.update=function(a){this.updateIcon_(),this.updateControlText_()},c.updateIcon_=function(){var a=this.player_.volume(),b=3;Jd&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===a||this.player_.muted()?b=0:a<.33?b=1:a<.67&&(b=2);for(var c=0;c<4;c++)w(this.el_,"vjs-vol-"+c);v(this.el_,"vjs-vol-"+b)},c.updateControlText_=function(){var a=this.player_.muted()||0===this.player_.volume(),b=a?"Unmute":"Mute";this.controlText()!==b&&this.controlText(b)},b}(tf);Yf.prototype.controlText_="Mute",nd.registerComponent("MuteToggle",Yf);var Zf=function(a){function c(b,c){var d;return void 0===c&&(c={}),"undefined"!=typeof c.inline?c.inline=c.inline:c.inline=!0,("undefined"==typeof c.volumeControl||i(c.volumeControl))&&(c.volumeControl=c.volumeControl||{},c.volumeControl.vertical=!c.inline),d=a.call(this,b,c)||this,d.on(b,["loadstart"],d.volumePanelState_),d.on(d.muteToggle,"keyup",d.handleKeyPress),d.on(d.volumeControl,"keyup",d.handleVolumeControlKeyUp),d.on("keydown",d.handleKeyPress),d.on("mouseover",d.handleMouseOver),d.on("mouseout",d.handleMouseOut),d.on(d.volumeControl,["slideractive"],d.sliderActive_),d.on(d.volumeControl,["sliderinactive"],d.sliderInactive_),d}qd(c,a);var d=c.prototype;return d.sliderActive_=function(){this.addClass("vjs-slider-active")},d.sliderInactive_=function(){this.removeClass("vjs-slider-active")},d.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},d.createEl=function(){var b="vjs-volume-panel-horizontal";return this.options_.inline||(b="vjs-volume-panel-vertical"),a.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+b})},d.dispose=function(){this.handleMouseOut(),a.prototype.dispose.call(this)},d.handleVolumeControlKeyUp=function(a){Xd.isEventKey(a,"Esc")&&this.muteToggle.focus()},d.handleMouseOver=function(a){this.addClass("vjs-hover"),U(b,"keyup",Tc(this,this.handleKeyPress))},d.handleMouseOut=function(a){this.removeClass("vjs-hover"),V(b,"keyup",Tc(this,this.handleKeyPress))},d.handleKeyPress=function(a){Xd.isEventKey(a,"Esc")&&this.handleMouseOut()},c}(nd);Zf.prototype.options_={children:["muteToggle","volumeControl"]},nd.registerComponent("VolumePanel",Zf);var $f=function(a){function c(b,c){var d;return d=a.call(this,b,c)||this,c&&(d.menuButton_=c.menuButton),d.focusedChild_=-1,d.on("keydown",d.handleKeyDown),d.boundHandleBlur_=Tc(pd(d),d.handleBlur),d.boundHandleTapClick_=Tc(pd(d),d.handleTapClick),d}qd(c,a);var d=c.prototype;return d.addEventListenerForItem=function(a){a instanceof nd&&(this.on(a,"blur",this.boundHandleBlur_),this.on(a,["tap","click"],this.boundHandleTapClick_))},d.removeEventListenerForItem=function(a){a instanceof nd&&(this.off(a,"blur",this.boundHandleBlur_),this.off(a,["tap","click"],this.boundHandleTapClick_))},d.removeChild=function(b){"string"==typeof b&&(b=this.getChild(b)),this.removeEventListenerForItem(b),a.prototype.removeChild.call(this,b)},d.addItem=function(a){var b=this.addChild(a);b&&this.addEventListenerForItem(b)},d.createEl=function(){var b=this.options_.contentElType||"ul";this.contentEl_=r(b,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var c=a.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return c.appendChild(this.contentEl_),U(c,"click",function(a){a.preventDefault(),a.stopImmediatePropagation()}),c},d.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,a.prototype.dispose.call(this)},d.handleBlur=function(a){var c=a.relatedTarget||b.activeElement;if(!this.children().some(function(a){return a.el()===c})){var d=this.menuButton_;d&&d.buttonPressed_&&c!==d.el().firstChild&&d.unpressButton()}},d.handleTapClick=function(a){if(this.menuButton_){this.menuButton_.unpressButton();var b=this.children();if(!Array.isArray(b))return;var c=b.filter(function(b){return b.el()===a.target})[0];if(!c)return;"CaptionSettingsMenuItem"!==c.name()&&this.menuButton_.focus()}},d.handleKeyDown=function(a){Xd.isEventKey(a,"Left")||Xd.isEventKey(a,"Down")?(a.preventDefault(),a.stopPropagation(),this.stepForward()):(Xd.isEventKey(a,"Right")||Xd.isEventKey(a,"Up"))&&(a.preventDefault(),a.stopPropagation(),this.stepBack())},d.stepForward=function(){var a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_+1),this.focus(a)},d.stepBack=function(){var a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_-1),this.focus(a)},d.focus=function(a){void 0===a&&(a=0);var b=this.children().slice(),c=b.length&&b[0].className&&/vjs-menu-title/.test(b[0].className);c&&b.shift(),b.length>0&&(a<0?a=0:a>=b.length&&(a=b.length-1),this.focusedChild_=a,b[a].el_.focus())},c}(nd);nd.registerComponent("Menu",$f);var _f=function(a){function c(c,d){var e;void 0===d&&(d={}),e=a.call(this,c,d)||this,e.menuButton_=new tf(c,d),e.menuButton_.controlText(e.controlText_),e.menuButton_.el_.setAttribute("aria-haspopup","true");var f=tf.prototype.buildCSSClass();return e.menuButton_.el_.className=e.buildCSSClass()+" "+f,e.menuButton_.removeClass("vjs-control"),e.addChild(e.menuButton_),e.update(),e.enabled_=!0,e.on(e.menuButton_,"tap",e.handleClick),e.on(e.menuButton_,"click",e.handleClick),e.on(e.menuButton_,"keydown",e.handleKeyDown),e.on(e.menuButton_,"mouseenter",function(){e.addClass("vjs-hover"),e.menu.show(),U(b,"keyup",Tc(pd(e),e.handleMenuKeyUp))}),e.on("mouseleave",e.handleMouseLeave),e.on("keydown",e.handleSubmenuKeyDown),e}qd(c,a);var d=c.prototype;return d.update=function(){var a=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=a,this.addChild(a),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},d.createMenu=function(){var a=new $f(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var b=r("li",{className:"vjs-menu-title",innerHTML:hd(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;var c=new nd(this.player_,{el:b});a.addItem(c)}if(this.items=this.createItems(),this.items)for(var d=0;d<this.items.length;d++)a.addItem(this.items[d]);return a},d.createItems=function(){},d.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},d.buildWrapperCSSClass=function(){var b="vjs-menu-button";b+=this.options_.inline===!0?"-inline":"-popup";var c=tf.prototype.buildCSSClass();return"vjs-menu-button "+b+" "+c+" "+a.prototype.buildCSSClass.call(this)},d.buildCSSClass=function(){var b="vjs-menu-button";return b+=this.options_.inline===!0?"-inline":"-popup","vjs-menu-button "+b+" "+a.prototype.buildCSSClass.call(this)},d.controlText=function(a,b){return void 0===b&&(b=this.menuButton_.el()),this.menuButton_.controlText(a,b)},d.dispose=function(){this.handleMouseLeave(),a.prototype.dispose.call(this)},d.handleClick=function(a){this.buttonPressed_?this.unpressButton():this.pressButton()},d.handleMouseLeave=function(a){this.removeClass("vjs-hover"),V(b,"keyup",Tc(this,this.handleMenuKeyUp))},d.focus=function(){this.menuButton_.focus()},d.blur=function(){this.menuButton_.blur()},d.handleKeyDown=function(a){Xd.isEventKey(a,"Esc")||Xd.isEventKey(a,"Tab")?(this.buttonPressed_&&this.unpressButton(),Xd.isEventKey(a,"Tab")||(a.preventDefault(),this.menuButton_.focus())):(Xd.isEventKey(a,"Up")||Xd.isEventKey(a,"Down"))&&(this.buttonPressed_||(a.preventDefault(),this.pressButton()))},d.handleMenuKeyUp=function(a){(Xd.isEventKey(a,"Esc")||Xd.isEventKey(a,"Tab"))&&this.removeClass("vjs-hover")},d.handleSubmenuKeyPress=function(a){this.handleSubmenuKeyDown(a)},d.handleSubmenuKeyDown=function(a){(Xd.isEventKey(a,"Esc")||Xd.isEventKey(a,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Xd.isEventKey(a,"Tab")||(a.preventDefault(),this.menuButton_.focus()))},d.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Jd&&p())return;this.menu.focus()}},d.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},d.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},d.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},c}(nd);nd.registerComponent("MenuButton",_f);var ag=function(a){function b(b,c){var d,e=c.tracks;if(d=a.call(this,b,c)||this,d.items.length<=1&&d.hide(),!e)return pd(d);var f=Tc(pd(d),d.update);return e.addEventListener("removetrack",f),e.addEventListener("addtrack",f),d.player_.on("ready",f),d.player_.on("dispose",function(){e.removeEventListener("removetrack",f),e.removeEventListener("addtrack",f)}),d}return qd(b,a),b}(_f);nd.registerComponent("TrackButton",ag);var bg=["Tab","Esc","Up","Down","Right","Left"],cg=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.selectable=c.selectable,d.isSelected_=c.selected||!1,d.multiSelectable=c.multiSelectable,d.selected(d.isSelected_),d.selectable?d.multiSelectable?d.el_.setAttribute("role","menuitemcheckbox"):d.el_.setAttribute("role","menuitemradio"):d.el_.setAttribute("role","menuitem"),d}qd(b,a);var c=b.prototype;return c.createEl=function(b,c,d){return this.nonIconControl=!0,a.prototype.createEl.call(this,"li",g({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},c),d)},c.handleKeyDown=function(b){bg.some(function(a){return Xd.isEventKey(b,a)})||a.prototype.handleKeyDown.call(this,b)},c.handleClick=function(a){this.selected(!0)},c.selected=function(a){this.selectable&&(a?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},b}(mf);nd.registerComponent("MenuItem",cg);var dg=function(c){function d(d,e){var f,g=e.track,h=d.textTracks();e.label=g.label||g.language||"Unknown",e.selected="showing"===g.mode,f=c.call(this,d,e)||this,f.track=g,f.kinds=(e.kinds||[e.kind||f.track.kind]).filter(Boolean);var i=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];f.handleTracksChange.apply(pd(f),b)},j=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];f.handleSelectedLanguageChange.apply(pd(f),b)};if(d.on(["loadstart","texttrackchange"],i),h.addEventListener("change",i),h.addEventListener("selectedlanguagechange",j),f.on("dispose",function(){d.off(["loadstart","texttrackchange"],i),h.removeEventListener("change",i),h.removeEventListener("selectedlanguagechange",j)}),void 0===h.onchange){var k;f.on(["tap","click"],function(){if("object"!=typeof a.Event)try{k=new a.Event("change")}catch(a){}k||(k=b.createEvent("Event"),k.initEvent("change",!0,!0)),h.dispatchEvent(k)})}return f.handleTracksChange(),f}qd(d,c);var e=d.prototype;return e.handleClick=function(a){var b=this.track,d=this.player_.textTracks();if(c.prototype.handleClick.call(this,a),d)for(var e=0;e<d.length;e++){var f=d[e];this.kinds.indexOf(f.kind)!==-1&&(f===b?"showing"!==f.mode&&(f.mode="showing"):"disabled"!==f.mode&&(f.mode="disabled"))}},e.handleTracksChange=function(a){var b="showing"===this.track.mode;b!==this.isSelected_&&this.selected(b)},e.handleSelectedLanguageChange=function(a){if("showing"===this.track.mode){var b=this.player_.cache_.selectedLanguage;if(b&&b.enabled&&b.language===this.track.language&&b.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},e.dispose=function(){this.track=null,c.prototype.dispose.call(this)},d}(cg);nd.registerComponent("TextTrackMenuItem",dg);var eg=function(a){function b(b,c){return c.track={player:b,kind:c.kind,kinds:c.kinds,default:!1,mode:"disabled"},c.kinds||(c.kinds=[c.kind]),c.label?c.track.label=c.label:c.track.label=c.kinds.join(" and ")+" off",c.selectable=!0,c.multiSelectable=!1,a.call(this,b,c)||this}qd(b,a);var c=b.prototype;return c.handleTracksChange=function(a){for(var b=this.player().textTracks(),c=!0,d=0,e=b.length;d<e;d++){var f=b[d];if(this.options_.kinds.indexOf(f.kind)>-1&&"showing"===f.mode){c=!1;break}}c!==this.isSelected_&&this.selected(c)},c.handleSelectedLanguageChange=function(a){for(var b=this.player().textTracks(),c=!0,d=0,e=b.length;d<e;d++){var f=b[d];if(["captions","descriptions","subtitles"].indexOf(f.kind)>-1&&"showing"===f.mode){c=!1;break}}c&&(this.player_.cache_.selectedLanguage={enabled:!1})},b}(dg);nd.registerComponent("OffTextTrackMenuItem",eg);var fg=function(a){function b(b,c){return void 0===c&&(c={}),c.tracks=b.textTracks(),a.call(this,b,c)||this}qd(b,a);var c=b.prototype;return c.createItems=function(a,b){void 0===a&&(a=[]),void 0===b&&(b=dg);var c;this.label_&&(c=this.label_+" off"),a.push(new eg(this.player_,{kinds:this.kinds_,kind:this.kind_,label:c})),this.hideThreshold_+=1;var d=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var e=0;e<d.length;e++){var f=d[e];if(this.kinds_.indexOf(f.kind)>-1){var g=new b(this.player_,{track:f,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});g.addClass("vjs-"+f.kind+"-menu-item"),a.push(g)}}return a},b}(ag);nd.registerComponent("TextTrackButton",fg);var gg=function(a){function b(b,c){var d,e=c.track,f=c.cue,g=b.currentTime();return c.selectable=!0,c.multiSelectable=!1,c.label=f.text,c.selected=f.startTime<=g&&g<f.endTime,d=a.call(this,b,c)||this,d.track=e,d.cue=f,e.addEventListener("cuechange",Tc(pd(d),d.update)),d}qd(b,a);var c=b.prototype;return c.handleClick=function(b){a.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},c.update=function(a){var b=this.cue,c=this.player_.currentTime();this.selected(b.startTime<=c&&c<b.endTime)},b}(cg);nd.registerComponent("ChaptersTrackMenuItem",gg);var hg=function(a){function b(b,c,d){return a.call(this,b,c,d)||this}qd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildWrapperCSSClass.call(this)},c.update=function(b){this.track_&&(!b||"addtrack"!==b.type&&"removetrack"!==b.type)||this.setTrack(this.findChaptersTrack()),a.prototype.update.call(this)},c.setTrack=function(a){if(this.track_!==a){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var b=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);b&&b.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=a,this.track_){this.track_.mode="hidden";var c=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);c&&c.addEventListener("load",this.updateHandler_)}}},c.findChaptersTrack=function(){for(var a=this.player_.textTracks()||[],b=a.length-1;b>=0;b--){var c=a[b];if(c.kind===this.kind_)return c}},c.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(hd(this.kind_))},c.createMenu=function(){return this.options_.title=this.getMenuCaption(),a.prototype.createMenu.call(this)},c.createItems=function(){var a=[];if(!this.track_)return a;var b=this.track_.cues;if(!b)return a;for(var c=0,d=b.length;c<d;c++){var e=b[c],f=new gg(this.player_,{track:this.track_,cue:e});a.push(f)}return a},b}(fg);hg.prototype.kind_="chapters",hg.prototype.controlText_="Chapters",nd.registerComponent("ChaptersButton",hg);var ig=function(a){function b(b,c,d){var e;e=a.call(this,b,c,d)||this;var f=b.textTracks(),g=Tc(pd(e),e.handleTracksChange);return f.addEventListener("change",g),e.on("dispose",function(){f.removeEventListener("change",g)}),e}qd(b,a);var c=b.prototype;return c.handleTracksChange=function(a){for(var b=this.player().textTracks(),c=!1,d=0,e=b.length;d<e;d++){var f=b[d];if(f.kind!==this.kind_&&"showing"===f.mode){c=!0;break}}c?this.disable():this.enable()},c.buildCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildWrapperCSSClass.call(this)},b}(fg);ig.prototype.kind_="descriptions",ig.prototype.controlText_="Descriptions",nd.registerComponent("DescriptionsButton",ig);var jg=function(a){function b(b,c,d){return a.call(this,b,c,d)||this}qd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildWrapperCSSClass.call(this)},b}(fg);jg.prototype.kind_="subtitles",jg.prototype.controlText_="Subtitles",nd.registerComponent("SubtitlesButton",jg);var kg=function(a){function b(b,c){var d;return c.track={player:b,kind:c.kind,label:c.kind+" settings",selectable:!1,default:!1,mode:"disabled"},c.selectable=!1,c.name="CaptionSettingsMenuItem",d=a.call(this,b,c)||this,d.addClass("vjs-texttrack-settings"),d.controlText(", opens "+c.kind+" settings dialog"),d}qd(b,a);var c=b.prototype;return c.handleClick=function(a){this.player().getChild("textTrackSettings").open()},b}(dg);nd.registerComponent("CaptionSettingsMenuItem",kg);var lg=function(a){function b(b,c,d){return a.call(this,b,c,d)||this}qd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-captions-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-captions-button "+a.prototype.buildWrapperCSSClass.call(this)},c.createItems=function(){var b=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(b.push(new kg(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),a.prototype.createItems.call(this,b)},b}(fg);lg.prototype.kind_="captions",lg.prototype.controlText_="Captions",nd.registerComponent("CaptionsButton",lg);var mg=function(a){function b(){return a.apply(this,arguments)||this}qd(b,a);var c=b.prototype;return c.createEl=function(b,c,d){var e='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);"captions"===this.options_.track.kind&&(e+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),e+="</span>";var f=a.prototype.createEl.call(this,b,g({innerHTML:e},c),d);return f},b}(dg);nd.registerComponent("SubsCapsMenuItem",mg);var ng=function(a){function b(b,c){var d;return void 0===c&&(c={}),d=a.call(this,b,c)||this,d.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(d.player_.language_)>-1&&(d.label_="captions"),d.menuButton_.controlText(hd(d.label_)),d}qd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildWrapperCSSClass.call(this)},c.createItems=function(){var b=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(b.push(new kg(this.player_,{kind:this.label_})),this.hideThreshold_+=1),b=a.prototype.createItems.call(this,b,mg)},b}(fg);ng.prototype.kinds_=["captions","subtitles"],ng.prototype.controlText_="Subtitles",nd.registerComponent("SubsCapsButton",ng);var og=function(a){function b(b,c){var d,e=c.track,f=b.audioTracks();c.label=e.label||e.language||"Unknown",c.selected=e.enabled,d=a.call(this,b,c)||this,d.track=e,d.addClass("vjs-"+e.kind+"-menu-item");var g=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];d.handleTracksChange.apply(pd(d),b)};return f.addEventListener("change",g),d.on("dispose",function(){f.removeEventListener("change",g)}),d}qd(b,a);var c=b.prototype;return c.createEl=function(b,c,d){var e='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);"main-desc"===this.options_.track.kind&&(e+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),e+="</span>";var f=a.prototype.createEl.call(this,b,g({innerHTML:e},c),d);return f},c.handleClick=function(b){var c=this.player_.audioTracks();a.prototype.handleClick.call(this,b);for(var d=0;d<c.length;d++){var e=c[d];e.enabled=e===this.track}},c.handleTracksChange=function(a){this.selected(this.track.enabled)},b}(cg);nd.registerComponent("AudioTrackMenuItem",og);var pg=function(a){function b(b,c){return void 0===c&&(c={}),c.tracks=b.audioTracks(),a.call(this,b,c)||this}qd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-audio-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-audio-button "+a.prototype.buildWrapperCSSClass.call(this)},c.createItems=function(a){void 0===a&&(a=[]),this.hideThreshold_=1;for(var b=this.player_.audioTracks(),c=0;c<b.length;c++){var d=b[c];a.push(new og(this.player_,{track:d,selectable:!0,multiSelectable:!1}))}return a},b}(ag);pg.prototype.controlText_="Audio Track",nd.registerComponent("AudioTrackButton",pg);var qg=function(a){function b(b,c){var d,e=c.rate,f=parseFloat(e,10);return c.label=e,c.selected=1===f,c.selectable=!0,c.multiSelectable=!1,d=a.call(this,b,c)||this,d.label=e,d.rate=f,d.on(b,"ratechange",d.update),d}qd(b,a);var c=b.prototype;return c.handleClick=function(b){a.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},c.update=function(a){this.selected(this.player().playbackRate()===this.rate)},b}(cg);qg.prototype.contentElType="button",nd.registerComponent("PlaybackRateMenuItem",qg);var rg=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.updateVisibility(),d.updateLabel(),d.on(b,"loadstart",d.updateVisibility),d.on(b,"ratechange",d.updateLabel),d}qd(b,a);var c=b.prototype;return c.createEl=function(){var b=a.prototype.createEl.call(this);return this.labelEl_=r("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),b.appendChild(this.labelEl_),b},c.dispose=function(){this.labelEl_=null,a.prototype.dispose.call(this)},c.buildCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildWrapperCSSClass.call(this)},c.createMenu=function(){var a=new $f(this.player()),b=this.playbackRates();if(b)for(var c=b.length-1;c>=0;c--)a.addChild(new qg(this.player(),{rate:b[c]+"x"}));return a},c.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},c.handleClick=function(a){for(var b=this.player().playbackRate(),c=this.playbackRates(),d=c[0],e=0;e<c.length;e++)if(c[e]>b){d=c[e];break}this.player().playbackRate(d)},c.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},c.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},c.updateVisibility=function(a){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},c.updateLabel=function(a){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},b}(_f);rg.prototype.controlText_="Playback Rate",nd.registerComponent("PlaybackRateMenuButton",rg);var sg=function(a){function b(){return a.apply(this,arguments)||this}qd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-spacer "+a.prototype.buildCSSClass.call(this)},c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},b}(nd);nd.registerComponent("Spacer",sg);var tg=function(a){function b(){return a.apply(this,arguments)||this}qd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-custom-control-spacer "+a.prototype.buildCSSClass.call(this)},c.createEl=function(){var b=a.prototype.createEl.call(this,{className:this.buildCSSClass()});return b.innerHTML=" ",b},b}(sg);nd.registerComponent("CustomControlSpacer",tg);var ug=function(a){function b(){return a.apply(this,arguments)||this}qd(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},b}(nd);ug.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in b&&ug.prototype.options_.children.splice(ug.prototype.options_.children.length-1,0,"pictureInPictureToggle"),nd.registerComponent("ControlBar",ug);var vg=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.on(b,"error",d.open),d}qd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-error-display "+a.prototype.buildCSSClass.call(this)},c.content=function(){var a=this.player().error();return a?this.localize(a.message):""},b}(Zd);vg.prototype.options_=Ac({},Zd.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),nd.registerComponent("ErrorDisplay",vg);var wg="vjs-text-track-settings",xg=["#000","Black"],yg=["#00F","Blue"],zg=["#0FF","Cyan"],Ag=["#0F0","Green"],Bg=["#F0F","Magenta"],Cg=["#F00","Red"],Dg=["#FFF","White"],Eg=["#FF0","Yellow"],Fg=["1","Opaque"],Gg=["0.5","Semi-Transparent"],Hg=["0","Transparent"],Ig={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",
label:"Color",options:[xg,Dg,Cg,Ag,yg,Eg,Bg,zg]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Fg,Gg,Hg]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Dg,xg,Cg,Ag,yg,Eg,Bg,zg]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(a){return"1.00"===a?null:Number(a)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Fg,Gg]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Hg,Gg,Fg]}};Ig.windowColor.options=Ig.backgroundColor.options;var Jg=function(b){function c(a,c){var d;return c.temporary=!1,d=b.call(this,a,c)||this,d.updateDisplay=Tc(pd(d),d.updateDisplay),d.fill(),d.hasBeenOpened_=d.hasBeenFilled_=!0,d.endDialog=r("p",{className:"vjs-control-text",textContent:d.localize("End of dialog window.")}),d.el().appendChild(d.endDialog),d.setDefaults(),void 0===c.persistTextTrackSettings&&(d.options_.persistTextTrackSettings=d.options_.playerOptions.persistTextTrackSettings),d.on(d.$(".vjs-done-button"),"click",function(){d.saveSettings(),d.close()}),d.on(d.$(".vjs-default-button"),"click",function(){d.setDefaults(),d.updateDisplay()}),e(Ig,function(a){d.on(d.$(a.selector),"change",d.updateDisplay)}),d.options_.persistTextTrackSettings&&d.restoreSettings(),d}qd(c,b);var d=c.prototype;return d.dispose=function(){this.endDialog=null,b.prototype.dispose.call(this)},d.createElSelect_=function(a,b,c){var d=this;void 0===b&&(b=""),void 0===c&&(c="label");var e=Ig[a],f=e.id.replace("%s",this.id_),g=[b,f].join(" ").trim();return["<"+c+' id="'+f+'" class="'+("label"===c?"vjs-label":"")+'">',this.localize(e.label),"</"+c+">",'<select aria-labelledby="'+g+'">'].concat(e.options.map(function(a){var b=f+"-"+a[1].replace(/\W+/g,"");return['<option id="'+b+'" value="'+a[0]+'" ','aria-labelledby="'+g+" "+b+'">',d.localize(a[1]),"</option>"].join("")})).concat("</select>").join("")},d.createElFgColor_=function(){var a="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",a),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",a),"</span>","</fieldset>"].join("")},d.createElBgColor_=function(){var a="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",a),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",a),"</span>","</fieldset>"].join("")},d.createElWinColor_=function(){var a="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",a),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",a),"</span>","</fieldset>"].join("")},d.createElColors_=function(){return r("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},d.createElFont_=function(){return r("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},d.createElControls_=function(){var a=this.localize("restore all settings to the default values");return r("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+a+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+a+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},d.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},d.label=function(){return this.localize("Caption Settings Dialog")},d.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},d.buildCSSClass=function(){return b.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},d.getValues=function(){var a=this;return f(Ig,function(b,c,d){var e=eb(a.$(c.selector),c.parser);return void 0!==e&&(b[d]=e),b},{})},d.setValues=function(a){var b=this;e(Ig,function(c,d){fb(b.$(c.selector),a[d],c.parser)})},d.setDefaults=function(){var a=this;e(Ig,function(b){var c=b.hasOwnProperty("default")?b.default:0;a.$(b.selector).selectedIndex=c})},d.restoreSettings=function(){var b;try{b=JSON.parse(a.localStorage.getItem(wg))}catch(a){yc.warn(a)}b&&this.setValues(b)},d.saveSettings=function(){if(this.options_.persistTextTrackSettings){var b=this.getValues();try{Object.keys(b).length?a.localStorage.setItem(wg,JSON.stringify(b)):a.localStorage.removeItem(wg)}catch(a){yc.warn(a)}}},d.updateDisplay=function(){var a=this.player_.getChild("textTrackDisplay");a&&a.updateDisplay()},d.conditionalBlur_=function(){this.previouslyActiveEl_=null;var a=this.player_.controlBar,b=a&&a.subsCapsButton,c=a&&a.captionsButton;b?b.focus():c&&c.focus()},c}(Zd);nd.registerComponent("TextTrackSettings",Jg);var Kg=function(b){function c(c,d){var e,f=d.ResizeObserver||a.ResizeObserver;null===d.ResizeObserver&&(f=!1);var g=_({createEl:!f,reportTouchActivity:!1},d);return e=b.call(this,c,g)||this,e.ResizeObserver=d.ResizeObserver||a.ResizeObserver,e.loadListener_=null,e.resizeObserver_=null,e.debouncedHandler_=Vc(function(){e.resizeHandler()},100,!1,pd(e)),f?(e.resizeObserver_=new e.ResizeObserver(e.debouncedHandler_),e.resizeObserver_.observe(c.el())):(e.loadListener_=function(){if(e.el_&&e.el_.contentWindow){var a=e.debouncedHandler_,b=e.unloadListener_=function(){V(this,"resize",a),V(this,"unload",b),b=null};U(e.el_.contentWindow,"unload",b),U(e.el_.contentWindow,"resize",a)}},e.one("load",e.loadListener_)),e}qd(c,b);var d=c.prototype;return d.createEl=function(){return b.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},d.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},d.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,b.prototype.dispose.call(this)},c}(nd);nd.registerComponent("ResizeManager",Kg);var Lg={trackingThreshold:30,liveTolerance:15},Mg=function(c){function d(a,d){var e,f=_(Lg,d,{createEl:!1});return e=c.call(this,a,f)||this,e.reset_(),e.on(e.player_,"durationchange",e.handleDurationchange),Dd&&"hidden"in b&&"visibilityState"in b&&e.on(b,"visibilitychange",e.handleVisibilityChange),e}qd(d,c);var e=d.prototype;return e.handleVisibilityChange=function(){this.player_.duration()===1/0&&(b.hidden?this.stopTracking():this.startTracking())},e.trackLive_=function(){var b=this.player_.seekable();if(b&&b.length){var c=Number(a.performance.now().toFixed(4)),d=this.lastTime_===-1?0:(c-this.lastTime_)/1e3;this.lastTime_=c,this.pastSeekEnd_=this.pastSeekEnd()+d;var e=this.liveCurrentTime(),f=this.player_.currentTime(),g=this.player_.paused()||this.seekedBehindLive_||Math.abs(e-f)>this.options_.liveTolerance;this.timeupdateSeen_&&e!==1/0||(g=!1),g!==this.behindLiveEdge_&&(this.behindLiveEdge_=g,this.trigger("liveedgechange"))}},e.handleDurationchange=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},e.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLive_,Sc),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLive_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked):(this.one(this.player_,"play",this.handlePlay),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate)))},e.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked)},e.handleSeeked=function(){var a=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=!this.skipNextSeeked_&&a>2,this.skipNextSeeked_=!1,this.trackLive_()},e.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)},e.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.skipNextSeeked_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLive_),this.off(this.player_,"seeked",this.handleSeeked),this.off(this.player_,"play",this.handlePlay),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate),this.off(this.player_,"timeupdate",this.seekToLiveEdge)},e.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},e.seekableEnd=function(){for(var a=this.player_.seekable(),b=[],c=a?a.length:0;c--;)b.push(a.end(c));return b.length?b.sort()[b.length-1]:1/0},e.seekableStart=function(){for(var a=this.player_.seekable(),b=[],c=a?a.length:0;c--;)b.push(a.start(c));return b.length?b.sort()[0]:0},e.liveWindow=function(){var a=this.liveCurrentTime();return a===1/0?1/0:a-this.seekableStart()},e.isLive=function(){return this.isTracking()},e.atLiveEdge=function(){return!this.behindLiveEdge()},e.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},e.pastSeekEnd=function(){var a=this.seekableEnd();return this.lastSeekEnd_!==-1&&a!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=a,this.pastSeekEnd_},e.behindLiveEdge=function(){return this.behindLiveEdge_},e.isTracking=function(){return"number"==typeof this.trackingInterval_},e.seekToLiveEdge=function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.skipNextSeeked_=!0,this.player_.currentTime(this.liveCurrentTime()))},e.dispose=function(){this.off(b,"visibilitychange",this.handleVisibilityChange),this.stopTracking(),c.prototype.dispose.call(this)},d}(nd);nd.registerComponent("LiveTracker",Mg);var Ng=function(a){var b=a.el();if(b.hasAttribute("src"))return a.triggerSourceset(b.src),!0;var c=a.$$("source"),d=[],e="";if(!c.length)return!1;for(var f=0;f<c.length;f++){var g=c[f].src;g&&d.indexOf(g)===-1&&d.push(g)}return!!d.length&&(1===d.length&&(e=d[0]),a.triggerSourceset(e),!0)},Og=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(c){var d=b.createElement(this.nodeName.toLowerCase());d.innerHTML=c;for(var e=b.createDocumentFragment();d.childNodes.length;)e.appendChild(d.childNodes[0]);return this.innerText="",a.Element.prototype.appendChild.call(this,e),this.innerHTML}}),Pg=function(a,b){for(var c={},d=0;d<a.length&&(c=Object.getOwnPropertyDescriptor(a[d],b),!(c&&c.set&&c.get));d++);return c.enumerable=!0,c.configurable=!0,c},Qg=function(b){return Pg([b.el(),a.HTMLMediaElement.prototype,a.Element.prototype,Og],"innerHTML")},Rg=function(a){var b=a.el();if(!b.resetSourceWatch_){var c={},d=Qg(a),e=function(c){return function(){for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];var g=c.apply(b,e);return Ng(a),g}};["append","appendChild","insertAdjacentHTML"].forEach(function(a){b[a]&&(c[a]=b[a],b[a]=e(c[a]))}),Object.defineProperty(b,"innerHTML",_(d,{set:e(d.set)})),b.resetSourceWatch_=function(){b.resetSourceWatch_=null,Object.keys(c).forEach(function(a){b[a]=c[a]}),Object.defineProperty(b,"innerHTML",d)},a.one("sourceset",b.resetSourceWatch_)}},Sg=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?ne(a.Element.prototype.getAttribute.call(this,"src")):""},set:function(b){return a.Element.prototype.setAttribute.call(this,"src",b),b}}),Tg=function(b){return Pg([b.el(),a.HTMLMediaElement.prototype,Sg],"src")},Ug=function(a){if(a.featuresSourceset){var b=a.el();if(!b.resetSourceset_){var c=Tg(a),d=b.setAttribute,e=b.load;Object.defineProperty(b,"src",_(c,{set:function(d){var e=c.set.call(b,d);return a.triggerSourceset(b.src),e}})),b.setAttribute=function(c,e){var f=d.call(b,c,e);return/src/i.test(c)&&a.triggerSourceset(b.src),f},b.load=function(){var c=e.call(b);return Ng(a)||(a.triggerSourceset(""),Rg(a)),c},b.currentSrc?a.triggerSourceset(b.currentSrc):Ng(a)||Rg(a),b.resetSourceset_=function(){b.resetSourceset_=null,b.load=e,b.setAttribute=d,Object.defineProperty(b,"src",c),b.resetSourceWatch_&&b.resetSourceWatch_()}}}},Vg=function(a,b,c,d){void 0===d&&(d=!0);var e=function(c){return Object.defineProperty(a,b,{value:c,enumerable:!0,writable:!0})},f={configurable:!0,enumerable:!0,get:function(){var a=c();return e(a),a}};return d&&(f.set=e),Object.defineProperty(a,b,f)},Wg=function(c){function d(a,b){var d;d=c.call(this,a,b)||this;var e=a.source,f=!1;if(e&&(d.el_.currentSrc!==e.src||a.tag&&3===a.tag.initNetworkState_)?d.setSource(e):d.handleLateInit_(d.el_),a.enableSourceset&&d.setupSourcesetHandling_(),d.el_.hasChildNodes()){for(var g=d.el_.childNodes,h=g.length,i=[];h--;){var j=g[h],k=j.nodeName.toLowerCase();"track"===k&&(d.featuresNativeTextTracks?(d.remoteTextTrackEls().addTrackElement_(j),d.remoteTextTracks().addTrack(j.track),d.textTracks().addTrack(j.track),f||d.el_.hasAttribute("crossorigin")||!pe(j.src)||(f=!0)):i.push(j))}for(var l=0;l<i.length;l++)d.el_.removeChild(i[l])}return d.proxyNativeTracks_(),d.featuresNativeTextTracks&&f&&yc.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),d.restoreMetadataTracksInIOSNativePlayer_(),(Gd||Id||yd)&&a.nativeControlsForTouch===!0&&d.setControls(!0),d.proxyWebkitFullscreen_(),d.triggerReady(),d}qd(d,c);var e=d.prototype;return e.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),d.disposeMediaElement(this.el_),this.options_=null,c.prototype.dispose.call(this)},e.setupSourcesetHandling_=function(){Ug(this)},e.restoreMetadataTracksInIOSNativePlayer_=function(){var a,b=this.textTracks(),c=function(){a=[];for(var c=0;c<b.length;c++){var d=b[c];"metadata"===d.kind&&a.push({track:d,storedMode:d.mode})}};c(),b.addEventListener("change",c),this.on("dispose",function(){return b.removeEventListener("change",c)});var d=function c(){for(var d=0;d<a.length;d++){var e=a[d];"disabled"===e.track.mode&&e.track.mode!==e.storedMode&&(e.track.mode=e.storedMode)}b.removeEventListener("change",c)};this.on("webkitbeginfullscreen",function(){b.removeEventListener("change",c),b.removeEventListener("change",d),b.addEventListener("change",d)}),this.on("webkitendfullscreen",function(){b.removeEventListener("change",c),b.addEventListener("change",c),b.removeEventListener("change",d)})},e.overrideNative_=function(a,b){var c=this;if(b===this["featuresNative"+a+"Tracks"]){var d=a.toLowerCase();this[d+"TracksListeners_"]&&Object.keys(this[d+"TracksListeners_"]).forEach(function(a){var b=c.el()[d+"Tracks"];b.removeEventListener(a,c[d+"TracksListeners_"][a])}),this["featuresNative"+a+"Tracks"]=!b,this[d+"TracksListeners_"]=null,this.proxyNativeTracksForType_(d)}},e.overrideNativeAudioTracks=function(a){this.overrideNative_("Audio",a)},e.overrideNativeVideoTracks=function(a){this.overrideNative_("Video",a)},e.proxyNativeTracksForType_=function(a){var b=this,c=Ge[a],d=this.el()[c.getterName],e=this[c.getterName]();if(this["featuresNative"+c.capitalName+"Tracks"]&&d&&d.addEventListener){var f={change:function(c){var d={type:"change",target:e,currentTarget:e,srcElement:e};e.trigger(d),"text"===a&&b[He.remoteText.getterName]().trigger(d)},addtrack:function(a){e.addTrack(a.track)},removetrack:function(a){e.removeTrack(a.track)}},g=function(){for(var a=[],b=0;b<e.length;b++){for(var c=!1,f=0;f<d.length;f++)if(d[f]===e[b]){c=!0;break}c||a.push(e[b])}for(;a.length;)e.removeTrack(a.shift())};this[c.getterName+"Listeners_"]=f,Object.keys(f).forEach(function(a){var c=f[a];d.addEventListener(a,c),b.on("dispose",function(b){return d.removeEventListener(a,c)})}),this.on("loadstart",g),this.on("dispose",function(a){return b.off("loadstart",g)})}},e.proxyNativeTracks_=function(){var a=this;Ge.names.forEach(function(b){a.proxyNativeTracksForType_(b)})},e.createEl=function(){var a=this.options_.tag;if(!a||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(a){var c=a.cloneNode(!0);a.parentNode&&a.parentNode.insertBefore(c,a),d.disposeMediaElement(a),a=c}else{a=b.createElement("video");var e=this.options_.tag&&z(this.options_.tag),f=_({},e);Gd&&this.options_.nativeControlsForTouch===!0||delete f.controls,y(a,g(f,{id:this.options_.techId,class:"vjs-tech"}))}a.playerId=this.options_.playerId}"undefined"!=typeof this.options_.preload&&B(a,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(a.disablePictureInPicture=this.options_.disablePictureInPicture);for(var h=["loop","muted","playsinline","autoplay"],i=0;i<h.length;i++){var j=h[i],k=this.options_[j];"undefined"!=typeof k&&(k?B(a,j,j):C(a,j),a[j]=k)}return a},e.handleLateInit_=function(a){if(0!==a.networkState&&3!==a.networkState){if(0===a.readyState){var b=!1,c=function(){b=!0};this.on("loadstart",c);var d=function(){b||this.trigger("loadstart")};return this.on("loadedmetadata",d),void this.ready(function(){this.off("loadstart",c),this.off("loadedmetadata",d),b||this.trigger("loadstart")})}var e=["loadstart"];e.push("loadedmetadata"),a.readyState>=2&&e.push("loadeddata"),a.readyState>=3&&e.push("canplay"),a.readyState>=4&&e.push("canplaythrough"),this.ready(function(){e.forEach(function(a){this.trigger(a)},this)})}},e.setScrubbing=function(a){this.isScrubbing_=a},e.setCurrentTime=function(a){try{this.isScrubbing_&&this.el_.fastSeek&&Kd?this.el_.fastSeek(a):this.el_.currentTime=a}catch(a){yc(a,"Video is not ready. (Video.js)")}},e.duration=function(){var a=this;if(this.el_.duration===1/0&&wd&&Bd&&0===this.el_.currentTime){var b=function b(){a.el_.currentTime>0&&(a.el_.duration===1/0&&a.trigger("durationchange"),a.off("timeupdate",b))};return this.on("timeupdate",b),NaN}return this.el_.duration||NaN},e.width=function(){return this.el_.offsetWidth},e.height=function(){return this.el_.offsetHeight},e.proxyWebkitFullscreen_=function(){var a=this;if("webkitDisplayingFullscreen"in this.el_){var b=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},c=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",b),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",c),this.on("dispose",function(){a.off("webkitbeginfullscreen",c),a.off("webkitendfullscreen",b)})}},e.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var b=a.navigator&&a.navigator.userAgent||"";if(/Android/.test(b)||!/Chrome|Mac OS X 10.5/.test(b))return!0}return!1},e.enterFullScreen=function(){var a=this.el_;if(a.paused&&a.networkState<=a.HAVE_METADATA)ka(this.el_.play()),this.setTimeout(function(){a.pause();try{a.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},0);else try{a.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},e.exitFullScreen=function(){return this.el_.webkitDisplayingFullscreen?void this.el_.webkitExitFullScreen():void this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},e.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},e.src=function(a){return void 0===a?this.el_.src:void this.setSrc(a)},e.reset=function(){d.resetMediaElement(this.el_)},e.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},e.setControls=function(a){this.el_.controls=!!a},e.addTextTrack=function(a,b,d){return this.featuresNativeTextTracks?this.el_.addTextTrack(a,b,d):c.prototype.addTextTrack.call(this,a,b,d)},e.createRemoteTextTrack=function(a){if(!this.featuresNativeTextTracks)return c.prototype.createRemoteTextTrack.call(this,a);var d=b.createElement("track");return a.kind&&(d.kind=a.kind),a.label&&(d.label=a.label),(a.language||a.srclang)&&(d.srclang=a.language||a.srclang),a.default&&(d.default=a.default),a.id&&(d.id=a.id),a.src&&(d.src=a.src),d},e.addRemoteTextTrack=function(a,b){var d=c.prototype.addRemoteTextTrack.call(this,a,b);return this.featuresNativeTextTracks&&this.el().appendChild(d),d},e.removeRemoteTextTrack=function(a){if(c.prototype.removeRemoteTextTrack.call(this,a),this.featuresNativeTextTracks)for(var b=this.$$("track"),d=b.length;d--;)a!==b[d]&&a!==b[d].track||this.el().removeChild(b[d])},e.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var b={};return"undefined"!=typeof this.el().webkitDroppedFrameCount&&"undefined"!=typeof this.el().webkitDecodedFrameCount&&(b.droppedVideoFrames=this.el().webkitDroppedFrameCount,b.totalVideoFrames=this.el().webkitDecodedFrameCount),a.performance&&"function"==typeof a.performance.now?b.creationTime=a.performance.now():a.performance&&a.performance.timing&&"number"==typeof a.performance.timing.navigationStart&&(b.creationTime=a.Date.now()-a.performance.timing.navigationStart),b},d}(_e);Vg(Wg,"TEST_VID",function(){if(n()){var a=b.createElement("video"),c=b.createElement("track");return c.kind="captions",c.srclang="en",c.label="English",a.appendChild(c),a}}),Wg.isSupported=function(){try{Wg.TEST_VID.volume=.5}catch(a){return!1}return!(!Wg.TEST_VID||!Wg.TEST_VID.canPlayType)},Wg.canPlayType=function(a){return Wg.TEST_VID.canPlayType(a)},Wg.canPlaySource=function(a,b){return Wg.canPlayType(a.type)},Wg.canControlVolume=function(){try{var a=Wg.TEST_VID.volume;return Wg.TEST_VID.volume=a/2+.1,a!==Wg.TEST_VID.volume}catch(a){return!1}},Wg.canMuteVolume=function(){try{var a=Wg.TEST_VID.muted;return Wg.TEST_VID.muted=!a,Wg.TEST_VID.muted?B(Wg.TEST_VID,"muted","muted"):C(Wg.TEST_VID,"muted","muted"),a!==Wg.TEST_VID.muted}catch(a){return!1}},Wg.canControlPlaybackRate=function(){if(wd&&Bd&&Cd<58)return!1;try{var a=Wg.TEST_VID.playbackRate;return Wg.TEST_VID.playbackRate=a/2+.1,a!==Wg.TEST_VID.playbackRate}catch(a){return!1}},Wg.canOverrideAttributes=function(){try{var a=function(){};Object.defineProperty(b.createElement("video"),"src",{get:a,set:a}),Object.defineProperty(b.createElement("audio"),"src",{get:a,set:a}),Object.defineProperty(b.createElement("video"),"innerHTML",{get:a,set:a}),Object.defineProperty(b.createElement("audio"),"innerHTML",{get:a,set:a})}catch(a){return!1}return!0},Wg.supportsNativeTextTracks=function(){return Kd||Jd&&Bd},Wg.supportsNativeVideoTracks=function(){return!(!Wg.TEST_VID||!Wg.TEST_VID.videoTracks)},Wg.supportsNativeAudioTracks=function(){return!(!Wg.TEST_VID||!Wg.TEST_VID.audioTracks)},Wg.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(a){var b=a[0],c=a[1];Vg(Wg.prototype,b,function(){return Wg[c]()},!0)}),Wg.prototype.movingMediaElementInDOM=!Jd,Wg.prototype.featuresFullscreenResize=!0,Wg.prototype.featuresProgressEvents=!0,Wg.prototype.featuresTimeupdateEvents=!0;var Xg;Wg.patchCanPlayType=function(){xd>=4&&!zd&&!Bd&&(Xg=Wg.TEST_VID&&Wg.TEST_VID.constructor.prototype.canPlayType,Wg.TEST_VID.constructor.prototype.canPlayType=function(a){var b=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return a&&b.test(a)?"maybe":Xg.call(this,a)})},Wg.unpatchCanPlayType=function(){var a=Wg.TEST_VID.constructor.prototype.canPlayType;return Xg&&(Wg.TEST_VID.constructor.prototype.canPlayType=Xg),a},Wg.patchCanPlayType(),Wg.disposeMediaElement=function(a){if(a){for(a.parentNode&&a.parentNode.removeChild(a);a.hasChildNodes();)a.removeChild(a.firstChild);a.removeAttribute("src"),"function"==typeof a.load&&!function(){try{a.load()}catch(a){}}()}},Wg.resetMediaElement=function(a){if(a){for(var b=a.querySelectorAll("source"),c=b.length;c--;)a.removeChild(b[c]);a.removeAttribute("src"),"function"==typeof a.load&&!function(){try{a.load()}catch(a){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(a){Wg.prototype[a]=function(){return this.el_[a]||this.el_.hasAttribute(a)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(a){Wg.prototype["set"+hd(a)]=function(b){this.el_[a]=b,b?this.el_.setAttribute(a,a):this.el_.removeAttribute(a)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(a){Wg.prototype[a]=function(){return this.el_[a]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(a){Wg.prototype["set"+hd(a)]=function(b){this.el_[a]=b}}),["pause","load","play"].forEach(function(a){Wg.prototype[a]=function(){return this.el_[a]()}}),_e.withSourceHandlers(Wg),Wg.nativeSourceHandler={},Wg.nativeSourceHandler.canPlayType=function(a){try{return Wg.TEST_VID.canPlayType(a)}catch(a){return""}},Wg.nativeSourceHandler.canHandleSource=function(a,b){if(a.type)return Wg.nativeSourceHandler.canPlayType(a.type);if(a.src){var c=oe(a.src);return Wg.nativeSourceHandler.canPlayType("video/"+c)}return""},Wg.nativeSourceHandler.handleSource=function(a,b,c){b.setSrc(a.src)},Wg.nativeSourceHandler.dispose=function(){},Wg.registerSourceHandler(Wg.nativeSourceHandler),_e.registerTech("Html5",Wg);var Yg=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Zg={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},$g=["tiny","xsmall","small","medium","large","xlarge","huge"],_g={};$g.forEach(function(a){var b="x"===a.charAt(0)?"x-"+a.substring(1):a;_g[a]="vjs-layout-"+b});var ah={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},bh=function(c){function d(a,e,f){var h;if(a.id=a.id||e.id||"vjs_video_"+Q(),e=g(d.getTagSettings(a),e),e.initChildren=!1,e.createEl=!1,e.evented=!1,e.reportTouchActivity=!1,!e.language)if("function"==typeof a.closest){var i=a.closest("[lang]");i&&i.getAttribute&&(e.language=i.getAttribute("lang"))}else for(var j=a;j&&1===j.nodeType;){if(z(j).hasOwnProperty("lang")){e.language=j.getAttribute("lang");break}j=j.parentNode}if(h=c.call(this,null,e,f)||this,h.boundDocumentFullscreenChange_=Tc(pd(h),h.documentFullscreenChange_),h.boundFullWindowOnEscKey_=Tc(pd(h),h.fullWindowOnEscKey),h.isFullscreen_=!1,h.log=zc(h.id_),h.fsApi_=Md,h.isPosterFromTech_=!1,h.queuedCallbacks_=[],h.isReady_=!1,h.hasStarted_=!1,h.userActive_=!1,h.debugEnabled_=!1,!h.options_||!h.options_.techOrder||!h.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(h.tag=a,h.tagAttributes=a&&z(a),h.language(h.options_.language),e.languages){var k={};Object.getOwnPropertyNames(e.languages).forEach(function(a){k[a.toLowerCase()]=e.languages[a]}),h.languages_=k}else h.languages_=d.prototype.options_.languages;h.resetCache_(),h.poster_=e.poster||"",h.controls_=!!e.controls,a.controls=!1,a.removeAttribute("controls"),h.changingSrc_=!1,h.playCallbacks_=[],h.playTerminatedQueue_=[],a.hasAttribute("autoplay")?h.autoplay(!0):h.autoplay(h.options_.autoplay),e.plugins&&Object.keys(e.plugins).forEach(function(a){if("function"!=typeof h[a])throw new Error('plugin "'+a+'" does not exist')}),h.scrubbing_=!1,h.el_=h.createEl(),Z(pd(h),{eventBusKey:"el_"}),h.fsApi_.requestFullscreen&&(U(b,h.fsApi_.fullscreenchange,h.boundDocumentFullscreenChange_),h.on(h.fsApi_.fullscreenchange,h.boundDocumentFullscreenChange_)),h.fluid_&&h.on("playerreset",h.updateStyleEl_);var l=_(h.options_);e.plugins&&Object.keys(e.plugins).forEach(function(a){h[a](e.plugins[a])}),e.debug&&h.debug(!0),h.options_.playerOptions=l,h.middleware_=[],h.initChildren(),h.isAudio("audio"===a.nodeName.toLowerCase()),h.controls()?h.addClass("vjs-controls-enabled"):h.addClass("vjs-controls-disabled"),h.el_.setAttribute("role","region"),h.isAudio()?h.el_.setAttribute("aria-label",h.localize("Audio Player")):h.el_.setAttribute("aria-label",h.localize("Video Player")),h.isAudio()&&h.addClass("vjs-audio"),h.flexNotSupported_()&&h.addClass("vjs-no-flex"),Gd&&h.addClass("vjs-touch-enabled"),Jd||h.addClass("vjs-workinghover"),d.players[h.id_]=pd(h);var m=vc.split(".")[0];return h.addClass("vjs-v"+m),h.userActive(!0),h.reportUserActivity(),h.one("play",h.listenForUserActivity_),h.on("stageclick",h.handleStageClick_),h.on("keydown",h.handleKeyDown),h.breakpoints(h.options_.breakpoints),h.responsive(h.options_.responsive),h}qd(d,c);var e=d.prototype;return e.dispose=function(){var a=this;this.trigger("dispose"),this.off("dispose"),V(b,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),V(b,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),d.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Wa(this),Ie.names.forEach(function(b){var c=Ie[b],d=a[c.getterName]();d&&d.off&&d.off()}),c.prototype.dispose.call(this)},e.createEl=function(){var d,e=this.tag,f=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player"),g="video-js"===this.tag.tagName.toLowerCase();f?d=this.el_=e.parentNode:g||(d=this.el_=c.prototype.createEl.call(this,"div"));var h=z(e);if(g){for(d=this.el_=e,e=this.tag=b.createElement("video");d.children.length;)e.appendChild(d.firstChild);
u(d,"video-js")||v(d,"video-js"),d.appendChild(e),f=this.playerElIngest_=d,Object.keys(d).forEach(function(a){try{e[a]=d[a]}catch(a){}})}if(e.setAttribute("tabindex","-1"),h.tabindex="-1",(Dd||Bd&&Fd)&&(e.setAttribute("role","application"),h.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in h&&delete h.width,"height"in h&&delete h.height,Object.getOwnPropertyNames(h).forEach(function(a){g&&"class"===a||d.setAttribute(a,h[a]),g&&e.setAttribute(a,h[a])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=d.player=this,this.addClass("vjs-paused"),a.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=Jc("vjs-styles-dimensions");var i=Dc(".vjs-styles-defaults"),j=Dc("head");j.insertBefore(this.styleEl_,i?i.nextSibling:j.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var k=e.getElementsByTagName("a"),l=0;l<k.length;l++){var m=k.item(l);v(m,"vjs-hidden"),m.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!f&&e.parentNode.insertBefore(d,e),t(e,d),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_=d,d},e.crossOrigin=function(a){return a?"anonymous"!==a&&"use-credentials"!==a?void yc.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+a+'"'):void this.techCall_("setCrossOrigin",a):this.techGet_("crossOrigin")},e.width=function(a){return this.dimension("width",a)},e.height=function(a){return this.dimension("height",a)},e.dimension=function(a,b){var c=a+"_";if(void 0===b)return this[c]||0;if(""===b||"auto"===b)return this[c]=void 0,void this.updateStyleEl_();var d=parseFloat(b);return isNaN(d)?void yc.error('Improper value "'+b+'" supplied for for '+a):(this[c]=d,void this.updateStyleEl_())},e.fluid=function(a){return void 0===a?!!this.fluid_:(this.fluid_=!!a,Yc(this)&&this.off("playerreset",this.updateStyleEl_),a?(this.addClass("vjs-fluid"),this.fill(!1),Zc(function(){this.on("playerreset",this.updateStyleEl_)})):this.removeClass("vjs-fluid"),void this.updateStyleEl_())},e.fill=function(a){return void 0===a?!!this.fill_:(this.fill_=!!a,void(a?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")))},e.aspectRatio=function(a){if(void 0===a)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(a))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=a,this.fluid(!0),this.updateStyleEl_()},e.updateStyleEl_=function(){if(a.VIDEOJS_NO_DYNAMIC_STYLE===!0){var b="number"==typeof this.width_?this.width_:this.options_.width,c="number"==typeof this.height_?this.height_:this.options_.height,d=this.tech_&&this.tech_.el();return void(d&&(b>=0&&(d.width=b),c>=0&&(d.height=c)))}var e,f,g,h;g=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";var i=g.split(":"),j=i[1]/i[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/j:this.videoWidth()||300,f=void 0!==this.height_?this.height_:e*j,h=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(h),Kc(this.styleEl_,"\n      ."+h+" {\n        width: "+e+"px;\n        height: "+f+"px;\n      }\n\n      ."+h+".vjs-fluid {\n        padding-top: "+100*j+"%;\n      }\n    "),this.options_.params.shadowDom&&(this.styleEl_.textContent="\n        ."+h+" {\n          width: "+e+"px;\n          height: "+f+"px;\n        }\n\n        ."+h+".vjs-fluid {\n          padding-top: "+100*j+"%;\n        }\n      ",a.playerShadowRoot[""+this.id_].appendChild(this.styleEl_)),this.options_.params.idIframe&&(this.styleEl_.textContent="\n        ."+h+" {\n          width: "+e+"px;\n          height: "+f+"px;\n        }\n\n        ."+h+".vjs-fluid {\n          padding-top: "+100*j+"%;\n        }\n      ",a.document.getElementById(this.options_.params.idIframe).contentWindow.document.head.appendChild(this.styleEl_))},e.loadTech_=function(a,b){var c=this;this.tech_&&this.unloadTech_();var d=hd(a),e=a.charAt(0).toLowerCase()+a.slice(1);"Html5"!==d&&this.tag&&(_e.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=d,this.isReady_=!1;var f="string"!=typeof this.autoplay()&&this.autoplay(),h={source:b,autoplay:f,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+e+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Ie.names.forEach(function(a){var b=Ie[a];h[b.getterName]=c[b.privateName]}),g(h,this.options_[d]),g(h,this.options_[e]),g(h,this.options_[a.toLowerCase()]),this.tag&&(h.tag=this.tag),b&&b.src===this.cache_.src&&this.cache_.currentTime>0&&(h.startTime=this.cache_.currentTime);var i=_e.getTech(a);if(!i)throw new Error("No Tech named '"+d+"' exists! '"+d+"' should be registered using videojs.registerTech()'");this.tech_=new i(h),this.tech_.ready(Tc(this,this.handleTechReady_),!0),Wd.jsonToTextTracks(this.textTracksJson_||[],this.tech_),Yg.forEach(function(a){c.on(c.tech_,a,c["handleTech"+hd(a)+"_"])}),Object.keys(Zg).forEach(function(a){c.on(c.tech_,a,function(b){return 0===c.tech_.playbackRate()&&c.tech_.seeking()?void c.queuedCallbacks_.push({callback:c["handleTech"+Zg[a]+"_"].bind(c),event:b}):void c["handleTech"+Zg[a]+"_"](b)})}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"fullscreenerror",this.handleTechFullscreenError_),this.on(this.tech_,"enterpictureinpicture",this.handleTechEnterPictureInPicture_),this.on(this.tech_,"leavepictureinpicture",this.handleTechLeavePictureInPicture_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===d&&this.tag||t(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},e.unloadTech_=function(){var a=this;Ie.names.forEach(function(b){var c=Ie[b];a[c.privateName]=a[c.getterName]()}),this.textTracksJson_=Wd.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},e.tech=function(a){return void 0===a&&yc.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},e.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mouseup",this.handleTechClick_),this.on(this.tech_,"dblclick",this.handleTechDoubleClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},e.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mouseup",this.handleTechClick_),this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},e.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},e.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},e.manualAutoplay_=function(a){var b=this;if(this.tech_&&"string"==typeof a){var c,d=function(){var a=b.muted();b.muted(!0);var c=function(){b.muted(a)};b.playTerminatedQueue_.push(c);var d=b.play();if(ja(d))return d.catch(c)};if("any"===a&&this.muted()!==!0?(c=this.play(),ja(c)&&(c=c.catch(d))):c="muted"===a&&this.muted()!==!0?d():this.play(),ja(c))return c.then(function(){b.trigger({type:"autoplay-success",autoplay:a})}).catch(function(c){b.trigger({type:"autoplay-failure",autoplay:a})})}},e.updateSourceCaches_=function(a){void 0===a&&(a="");var b=a,c="";"string"!=typeof b&&(b=a.src,c=a.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],b&&!c&&(c=jf(this,b)),this.cache_.source=_({},a,{src:b,type:c});for(var d=this.cache_.sources.filter(function(a){return a.src&&a.src===b}),e=[],f=this.$$("source"),g=[],h=0;h<f.length;h++){var i=z(f[h]);e.push(i),i.src&&i.src===b&&g.push(i.src)}g.length&&!d.length?this.cache_.sources=e:d.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=b},e.handleTechSourceset_=function(a){var b=this;if(!this.changingSrc_){var c=function(a){return b.updateSourceCaches_(a)},d=this.currentSource().src,e=a.src;d&&!/^blob:/.test(d)&&/^blob:/.test(e)&&(!this.lastSource_||this.lastSource_.tech!==e&&this.lastSource_.player!==d)&&(c=function(){}),c(e),a.src||this.tech_.any(["sourceset","loadstart"],function(a){if("sourceset"!==a.type){var c=b.techGet("currentSrc");b.lastSource_.tech=c,b.updateSourceCaches_(c)}})}this.lastSource_={player:this.currentSource().src,tech:a.src},this.trigger({src:a.src,type:"sourceset"})},e.hasStarted=function(a){return void 0===a?this.hasStarted_:void(a!==this.hasStarted_&&(this.hasStarted_=a,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started")))},e.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},e.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(a){return a.callback(a.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},e.handleTechWaiting_=function(){var a=this;this.addClass("vjs-waiting"),this.trigger("waiting");var b=this.currentTime(),c=function c(){b!==a.currentTime()&&(a.removeClass("vjs-waiting"),a.off("timeupdate",c))};this.on("timeupdate",c)},e.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},e.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},e.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},e.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},e.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},e.handleTechFirstPlay_=function(){this.options_.starttime&&(yc.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},e.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},e.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},e.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},e.handleTechClick_=function(a){N(a)&&this.controls_&&(this.paused()?ka(this.play()):this.pause())},e.handleTechDoubleClick_=function(a){if(this.controls_){var b=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(b){return b.contains(a.target)});b||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&this.options_.userActions.doubleClick===!1||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,a):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}},e.handleTechTap_=function(){this.userActive(!this.userActive())},e.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},e.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},e.handleTechTouchEnd_=function(a){a.preventDefault()},e.handleStageClick_=function(){this.reportUserActivity()},e.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},e.documentFullscreenChange_=function(a){var c=a.target.player;if(!c||c===this){var d=this.el(),e=b[this.fsApi_.fullscreenElement]===d;!e&&d.matches?e=d.matches(":"+this.fsApi_.fullscreen):!e&&d.msMatchesSelector&&(e=d.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(e)}},e.handleTechFullscreenChange_=function(a,b){b&&(b.nativeIOSFullscreen&&this.toggleClass("vjs-ios-native-fs"),this.isFullscreen(b.isFullscreen))},e.handleTechFullscreenError_=function(a,b){this.trigger("fullscreenerror",b)},e.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},e.handleTechEnterPictureInPicture_=function(a){this.isInPictureInPicture(!0)},e.handleTechLeavePictureInPicture_=function(a){this.isInPictureInPicture(!1)},e.handleTechError_=function(){var a=this.tech_.error();this.error(a)},e.handleTechTextData_=function(){var a=null;arguments.length>1&&(a=arguments[1]),this.trigger("textdata",a)},e.getCache=function(){return this.cache_},e.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}},e.techCall_=function(a,b){this.ready(function(){if(a in ef)return Sa(this.middleware_,this.tech_,a,b);if(a in ff)return Ta(this.middleware_,this.tech_,a,b);try{this.tech_&&this.tech_[a](b)}catch(a){throw yc(a),a}},!0)},e.techGet_=function(a){if(this.tech_&&this.tech_.isReady_){if(a in df)return Ra(this.middleware_,this.tech_,a);if(a in ff)return Ta(this.middleware_,this.tech_,a);try{return this.tech_[a]()}catch(b){if(void 0===this.tech_[a])throw yc("Video.js: "+a+" method not defined for "+this.techName_+" playback technology.",b),b;if("TypeError"===b.name)throw yc("Video.js: "+a+" unavailable on "+this.techName_+" playback technology element.",b),this.tech_.isReady_=!1,b;throw yc(b),b}}},e.play=function(){var b=this,c=this.options_.Promise||a.Promise;return c?new c(function(a){b.play_(a)}):this.play_()},e.play_=function(a){var b=this;void 0===a&&(a=ka),this.playCallbacks_.push(a);var c=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!c)return this.waitToPlay_=function(a){b.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(c||!Kd&&!Jd||this.load());var d=this.techGet_("play");null===d?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(d)},e.runPlayTerminatedQueue_=function(){var a=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],a.forEach(function(a){a()})},e.runPlayCallbacks_=function(a){var b=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],b.forEach(function(b){b(a)})},e.pause=function(){this.techCall_("pause")},e.paused=function(){return this.techGet_("paused")!==!1},e.played=function(){return this.techGet_("played")||fa(0,0)},e.scrubbing=function(a){return"undefined"==typeof a?this.scrubbing_:(this.scrubbing_=!!a,this.techCall_("setScrubbing",this.scrubbing_),void(a?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")))},e.currentTime=function(a){return"undefined"!=typeof a?(a<0&&(a=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",a),void(this.cache_.initTime=0)):(this.cache_.initTime=a,this.off("canplay",this.applyInitTime_),void this.one("canplay",this.applyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},e.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},e.duration=function(a){return void 0===a?void 0!==this.cache_.duration?this.cache_.duration:NaN:(a=parseFloat(a),a<0&&(a=1/0),void(a!==this.cache_.duration&&(this.cache_.duration=a,a===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(a)||this.trigger("durationchange"))))},e.remainingTime=function(){return this.duration()-this.currentTime()},e.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},e.buffered=function a(){var a=this.techGet_("buffered");return a&&a.length||(a=fa(0,0)),a},e.bufferedPercent=function(){return ga(this.buffered(),this.duration())},e.bufferedEnd=function(){var a=this.buffered(),b=this.duration(),c=a.end(a.length-1);return c>b&&(c=b),c},e.volume=function(a){var b;return void 0!==a?(b=Math.max(0,Math.min(1,parseFloat(a))),this.cache_.volume=b,this.techCall_("setVolume",b),void(b>0&&this.lastVolume_(b))):(b=parseFloat(this.techGet_("volume")),isNaN(b)?1:b)},e.muted=function(a){return void 0!==a?void this.techCall_("setMuted",a):this.techGet_("muted")||!1},e.defaultMuted=function(a){return void 0!==a?this.techCall_("setDefaultMuted",a):this.techGet_("defaultMuted")||!1},e.lastVolume_=function(a){return void 0!==a&&0!==a?void(this.cache_.lastVolume=a):this.cache_.lastVolume},e.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},e.isFullscreen=function(a){if(void 0!==a){var b=this.isFullscreen_;return this.isFullscreen_=Boolean(a),this.isFullscreen_!==b&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},e.requestFullscreen=function(b){var c=this.options_.Promise||a.Promise;if(c){var d=this;return new c(function(a,c){function e(){d.off("fullscreenerror",g),d.off("fullscreenchange",f)}function f(){e(),a()}function g(a,b){e(),c(b)}d.one("fullscreenchange",f),d.one("fullscreenerror",g);var h=d.requestFullscreenHelper_(b);if(h)return h.then(e,e),h})}return this.requestFullscreenHelper_()},e.requestFullscreenHelper_=function(a){var b,c=this;if(this.fsApi_.prefixed||(b=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==a&&(b=a)),this.fsApi_.requestFullscreen){var d=this.el_[this.fsApi_.requestFullscreen](b);return d&&d.then(function(){return c.isFullscreen(!0)},function(){return c.isFullscreen(!1)}),d}this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):this.enterFullWindow()},e.exitFullscreen=function(){var b=this.options_.Promise||a.Promise;if(b){var c=this;return new b(function(a,b){function d(){c.off("fullscreenerror",f),c.off("fullscreenchange",e)}function e(){d(),a()}function f(a,c){d(),b(c)}c.one("fullscreenchange",e),c.one("fullscreenerror",f);var g=c.exitFullscreenHelper_();if(g)return g.then(d,d),g})}return this.exitFullscreenHelper_()},e.exitFullscreenHelper_=function(){var a=this;if(this.fsApi_.requestFullscreen){var c=b[this.fsApi_.exitFullscreen]();return c&&c.then(function(){return a.isFullscreen(!1)}),c}this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):this.exitFullWindow()},e.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=b.documentElement.style.overflow,U(b,"keydown",this.boundFullWindowOnEscKey_),b.documentElement.style.overflow="hidden",v(b.body,"vjs-full-window"),this.trigger("enterFullWindow")},e.fullWindowOnEscKey=function(a){Xd.isEventKey(a,"Esc")&&(this.isFullscreen()===!0?this.exitFullscreen():this.exitFullWindow())},e.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,V(b,"keydown",this.boundFullWindowOnEscKey_),b.documentElement.style.overflow=this.docOrigOverflow,w(b.body,"vjs-full-window"),this.trigger("exitFullWindow")},e.disablePictureInPicture=function(a){return void 0===a?this.techGet_("disablePictureInPicture"):(this.techCall_("setDisablePictureInPicture",a),this.options_.disablePictureInPicture=a,void this.trigger("disablepictureinpicturechanged"))},e.isInPictureInPicture=function(a){return void 0!==a?(this.isInPictureInPicture_=!!a,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},e.requestPictureInPicture=function(){if("pictureInPictureEnabled"in b&&this.disablePictureInPicture()===!1)return this.techGet_("requestPictureInPicture")},e.exitPictureInPicture=function(){if("pictureInPictureEnabled"in b)return b.exitPictureInPicture()},e.handleKeyDown=function(a){var b=this.options_.userActions;if(b&&b.hotkeys){var c=function(a){var b=a.tagName.toLowerCase();if(a.isContentEditable)return!0;var c=["button","checkbox","hidden","radio","reset","submit"];if("input"===b)return c.indexOf(a.type)===-1;var d=["textarea"];return d.indexOf(b)!==-1};c(this.el_.ownerDocument.activeElement)||("function"==typeof b.hotkeys?b.hotkeys.call(this,a):this.handleHotkeys(a))}},e.handleHotkeys=function(a){var c=this.options_.userActions?this.options_.userActions.hotkeys:{},d=c.fullscreenKey,e=void 0===d?function(a){return Xd.isEventKey(a,"f")}:d,f=c.muteKey,g=void 0===f?function(a){return Xd.isEventKey(a,"m")}:f,h=c.playPauseKey,i=void 0===h?function(a){return Xd.isEventKey(a,"k")||Xd.isEventKey(a,"Space")}:h;if(e.call(this,a)){a.preventDefault(),a.stopPropagation();var j=nd.getComponent("FullscreenToggle");b[this.fsApi_.fullscreenEnabled]!==!1&&j.prototype.handleClick.call(this,a)}else if(g.call(this,a)){a.preventDefault(),a.stopPropagation();var k=nd.getComponent("MuteToggle");k.prototype.handleClick.call(this,a)}else if(i.call(this,a)){a.preventDefault(),a.stopPropagation();var l=nd.getComponent("PlayToggle");l.prototype.handleClick.call(this,a)}},e.canPlayType=function(a){for(var b,c=0,d=this.options_.techOrder;c<d.length;c++){var e=d[c],f=_e.getTech(e);if(f||(f=nd.getComponent(e)),f){if(f.isSupported()&&(b=f.canPlayType(a)))return b}else yc.error('The "'+e+'" tech is undefined. Skipped browser support check for that tech.')}return""},e.selectSource=function(a){var b,c=this,d=this.options_.techOrder.map(function(a){return[a,_e.getTech(a)]}).filter(function(a){var b=a[0],c=a[1];return c?c.isSupported():(yc.error('The "'+b+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),e=function(a,b,c){var d;return a.some(function(a){return b.some(function(b){if(d=c(a,b))return!0})}),d},f=function(a){return function(b,c){return a(c,b)}},g=function(a,b){var d=a[0],e=a[1];if(e.canPlaySource(b,c.options_[d.toLowerCase()]))return{source:b,tech:d}};return b=this.options_.sourceOrder?e(a,d,f(g)):e(d,a,g),b||!1},e.src=function(a){var b=this;if("undefined"==typeof a)return this.cache_.src||"";var c=kf(a);return c.length?(this.changingSrc_=!0,this.cache_.sources=c,this.updateSourceCaches_(c[0]),void Pa(this,c[0],function(a,d){b.middleware_=d,b.cache_.sources=c,b.updateSourceCaches_(a);var e=b.src_(a);return e?c.length>1?b.src(c.slice(1)):(b.changingSrc_=!1,b.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void b.triggerReady()):void Qa(d,b.tech_)})):void this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},e.src_=function(a){var b=this,c=this.selectSource([a]);return!c||(id(c.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",a):this.techCall_("src",a.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(c.tech,c.source),this.tech_.ready(function(){b.changingSrc_=!1}),!1))},e.load=function(){this.techCall_("load")},e.reset=function(){var b=this,c=this.options_.Promise||a.Promise;if(this.paused()||!c)this.doReset_();else{var d=this.play();ka(d.then(function(){return b.doReset_()}))}},e.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Yc(this)&&this.trigger("playerreset")},e.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},e.resetProgressBar_=function(){this.currentTime(0);var a=this.controlBar,b=a.durationDisplay,c=a.remainingTimeDisplay;b&&b.updateContent(),c&&c.updateContent()},e.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},e.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},e.currentSources=function(){var a=this.currentSource(),b=[];return 0!==Object.keys(a).length&&b.push(a),this.cache_.sources||b},e.currentSource=function(){return this.cache_.source||{}},e.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},e.currentType=function(){return this.currentSource()&&this.currentSource().type||""},e.preload=function(a){return void 0!==a?(this.techCall_("setPreload",a),void(this.options_.preload=a)):this.techGet_("preload")},e.autoplay=function(a){if(void 0===a)return this.options_.autoplay||!1;var b;"string"==typeof a&&/(any|play|muted)/.test(a)?(this.options_.autoplay=a,this.manualAutoplay_(a),b=!1):a?this.options_.autoplay=!0:this.options_.autoplay=!1,b="undefined"==typeof b?this.options_.autoplay:b,this.tech_&&this.techCall_("setAutoplay",b)},e.playsinline=function(a){return void 0!==a?(this.techCall_("setPlaysinline",a),this.options_.playsinline=a,this):this.techGet_("playsinline")},e.loop=function(a){return void 0!==a?(this.techCall_("setLoop",a),void(this.options_.loop=a)):this.techGet_("loop")},e.poster=function(a){return void 0===a?this.poster_:(a||(a=""),void(a!==this.poster_&&(this.poster_=a,this.techCall_("setPoster",a),this.isPosterFromTech_=!1,this.trigger("posterchange"))))},e.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var a=this.tech_.poster()||"";a!==this.poster_&&(this.poster_=a,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},e.controls=function(a){return void 0===a?!!this.controls_:(a=!!a,void(this.controls_!==a&&(this.controls_=a,this.usingNativeControls()&&this.techCall_("setControls",a),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))))},e.usingNativeControls=function(a){return void 0===a?!!this.usingNativeControls_:(a=!!a,void(this.usingNativeControls_!==a&&(this.usingNativeControls_=a,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))))},e.error=function(a){if(void 0===a)return this.error_||null;if(this.options_.suppressNotSupportedError&&a&&4===a.code){var b=function(){this.error(a)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],b),void this.one("loadstart",function(){this.off(["click","touchstart"],b)})}return null===a?(this.error_=a,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close())):(this.error_=new ha(a),this.addClass("vjs-error"),yc.error("(CODE:"+this.error_.code+" "+ha.errorTypes[this.error_.code]+")",this.error_.message,this.error_),void this.trigger("error"))},e.reportUserActivity=function(a){this.userActivity_=!0},e.userActive=function(a){if(void 0===a)return this.userActive_;if(a=!!a,a!==this.userActive_){if(this.userActive_=a,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(a){a.stopPropagation(),a.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},e.listenForUserActivity_=function(){var a,b,c,d=Tc(this,this.reportUserActivity),e=function(a){a.screenX===b&&a.screenY===c||(b=a.screenX,c=a.screenY,d())},f=function(){d(),this.clearInterval(a),a=this.setInterval(d,250)},g=function(b){d(),this.clearInterval(a)};this.on("mousedown",f),this.on("mousemove",e),this.on("mouseup",g),this.on("mouseleave",g);var h=this.getChild("controlBar");!h||Jd||wd||(h.on("mouseenter",function(a){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout,this.player().options_.inactivityTimeout=0}),h.on("mouseleave",function(a){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",d),this.on("keyup",d);var i;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(i);var a=this.options_.inactivityTimeout;a<=0||(i=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},a))}},250)},e.playbackRate=function(a){return void 0!==a?void this.techCall_("setPlaybackRate",a):this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1},e.defaultPlaybackRate=function(a){return void 0!==a?this.techCall_("setDefaultPlaybackRate",a):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},e.isAudio=function(a){return void 0!==a?void(this.isAudio_=!!a):!!this.isAudio_},e.addTextTrack=function(a,b,c){if(this.tech_)return this.tech_.addTextTrack(a,b,c)},e.addRemoteTextTrack=function(a,b){if(this.tech_)return this.tech_.addRemoteTextTrack(a,b)},e.removeRemoteTextTrack=function(a){void 0===a&&(a={});var b=a,c=b.track;if(c||(c=a),this.tech_)return this.tech_.removeRemoteTextTrack(c)},e.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},e.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},e.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},e.language=function(a){return void 0===a?this.language_:void(this.language_=String(a).toLowerCase())},e.languages=function(){return _(d.prototype.options_.languages,this.languages_)},e.toJSON=function(){var a=_(this.options_),b=a.tracks;a.tracks=[];for(var c=0;c<b.length;c++){var d=b[c];d=_(d),d.player=void 0,a.tracks[c]=d}return a},e.createModal=function(a,b){var c=this;b=b||{},b.content=a||"";var d=new Zd(this,b);return this.addChild(d),d.on("dispose",function(){c.removeChild(d)}),d.open(),d},e.updateCurrentBreakpoint_=function(){if(this.responsive())for(var a=this.currentBreakpoint(),b=this.currentWidth(),c=0;c<$g.length;c++){var d=$g[c],e=this.breakpoints_[d];
if(b<=e){if(a===d)return;a&&this.removeClass(_g[a]),this.addClass(_g[d]),this.breakpoint_=d;break}}},e.removeCurrentBreakpoint_=function(){var a=this.currentBreakpointClass();this.breakpoint_="",a&&this.removeClass(a)},e.breakpoints=function(a){return void 0===a?g(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=g({},ah,a),this.updateCurrentBreakpoint_(),g(this.breakpoints_))},e.responsive=function(a){if(void 0===a)return this.responsive_;a=Boolean(a);var b=this.responsive_;if(a!==b)return this.responsive_=a,a?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),a},e.currentBreakpoint=function(){return this.breakpoint_},e.currentBreakpointClass=function(){return _g[this.breakpoint_]||""},e.loadMedia=function(a,b){var c=this;if(a&&"object"==typeof a){this.reset(),this.cache_.media=_(a);var d=this.cache_.media,e=d.artwork,f=d.poster,g=d.src,h=d.textTracks;!e&&f&&(this.cache_.media.artwork=[{src:f,type:hf(f)}]),g&&this.src(g),f&&this.poster(f),Array.isArray(h)&&h.forEach(function(a){return c.addRemoteTextTrack(a,!1)}),this.ready(b)}},e.getMedia=function(){if(!this.cache_.media){var a=this.poster(),b=this.currentSources(),c=Array.prototype.map.call(this.remoteTextTracks(),function(a){return{kind:a.kind,label:a.label,language:a.language,src:a.src}}),d={src:b,textTracks:c};return a&&(d.poster=a,d.artwork=[{src:d.poster,type:hf(d.poster)}]),d}return _(this.cache_.media)},d.getTagSettings=function(a){var b={sources:[],tracks:[]},c=z(a),d=c["data-setup"];if(u(a,"vjs-fill")&&(c.fill=!0),u(a,"vjs-fluid")&&(c.fluid=!0),null!==d){var e=Sd(d||"{}"),f=e[0],h=e[1];f&&yc.error(f),g(c,h)}if(g(b,c),a.hasChildNodes())for(var i=a.childNodes,j=0,k=i.length;j<k;j++){var l=i[j],m=l.nodeName.toLowerCase();"source"===m?b.sources.push(z(l)):"track"===m&&b.tracks.push(z(l))}return b},e.flexNotSupported_=function(){var a=b.createElement("i");return!("flexBasis"in a.style||"webkitFlexBasis"in a.style||"mozFlexBasis"in a.style||"msFlexBasis"in a.style||"msFlexOrder"in a.style)},e.debug=function(a){return void 0===a?this.debugEnabled_:void(a?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1))},d}(nd);Ie.names.forEach(function(a){var b=Ie[a];bh.prototype[b.getterName]=function(){return this.tech_?this.tech_[b.getterName]():(this[b.privateName]=this[b.privateName]||new b.ListClass,this[b.privateName])}}),bh.prototype.crossorigin=bh.prototype.crossOrigin,bh.players={};var ch=a.navigator;bh.prototype.options_={techOrder:_e.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:ch&&(ch.languages&&ch.languages[0]||ch.userLanguage||ch.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(a){bh.prototype[a]=function(){return this.techGet_(a)}}),Yg.forEach(function(a){bh.prototype["handleTech"+hd(a)+"_"]=function(){return this.trigger(a)}}),nd.registerComponent("Player",bh);var dh=d(function(a){function b(c,d){return a.exports=b=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},b(c,d)}a.exports=b}),eh=gb,fh=d(function(a){function b(c,d,e){return eh()?a.exports=b=Reflect.construct:a.exports=b=function(a,b,c){var d=[null];d.push.apply(d,b);var e=Function.bind.apply(a,d),f=new e;return c&&dh(f,c.prototype),f},b.apply(null,arguments)}a.exports=b}),gh="plugin",hh="activePlugins_",ih={},jh=function(a){return ih.hasOwnProperty(a)},kh=function(a){return jh(a)?ih[a]:void 0},lh=function(a,b){a[hh]=a[hh]||{},a[hh][b]=!0},mh=function(a,b,c){var d=(c?"before":"")+"pluginsetup";a.trigger(d,b),a.trigger(d+":"+b.name,b)},nh=function(a,b){var c=function(){mh(this,{name:a,plugin:b,instance:null},!0);var c=b.apply(this,arguments);return lh(this,a),mh(this,{name:a,plugin:b,instance:c}),c};return Object.keys(b).forEach(function(a){c[a]=b[a]}),c},oh=function(a,b){return b.prototype.name=a,function(){mh(this,{name:a,plugin:b,instance:null},!0);for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=fh(b,[this].concat(d));return this[a]=function(){return f},mh(this,f.getEventHash()),f}},ph=function(){function a(b){if(this.constructor===a)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=b,this.log||(this.log=this.player.log.createLogger(this.name)),Z(this),delete this.trigger,$(this,this.constructor.defaultState),lh(b,this.name),this.dispose=Tc(this,this.dispose),b.on("dispose",this.dispose)}var b=a.prototype;return b.version=function(){return this.constructor.VERSION},b.getEventHash=function(a){return void 0===a&&(a={}),a.name=this.name,a.plugin=this.constructor,a.instance=this,a},b.trigger=function(a,b){return void 0===b&&(b={}),W(this.eventBusEl_,a,this.getEventHash(b))},b.handleStateChanged=function(a){},b.dispose=function(){var a=this.name,b=this.player;this.trigger("dispose"),this.off(),b.off("dispose",this.dispose),b[hh][a]=!1,this.player=this.state=null,b[a]=oh(a,ih[a])},a.isBasic=function(b){var c="string"==typeof b?kh(b):b;return"function"==typeof c&&!a.prototype.isPrototypeOf(c.prototype)},a.registerPlugin=function(b,c){if("string"!=typeof b)throw new Error('Illegal plugin name, "'+b+'", must be a string, was '+typeof b+".");if(jh(b))yc.warn('A plugin named "'+b+'" already exists. You may want to avoid re-registering plugins!');else if(bh.prototype.hasOwnProperty(b))throw new Error('Illegal plugin name, "'+b+'", cannot share a name with an existing player method!');if("function"!=typeof c)throw new Error('Illegal plugin for "'+b+'", must be a function, was '+typeof c+".");return ih[b]=c,b!==gh&&(a.isBasic(c)?bh.prototype[b]=nh(b,c):bh.prototype[b]=oh(b,c)),c},a.deregisterPlugin=function(a){if(a===gh)throw new Error("Cannot de-register base plugin.");jh(a)&&(delete ih[a],delete bh.prototype[a])},a.getPlugins=function(a){void 0===a&&(a=Object.keys(ih));var b;return a.forEach(function(a){var c=kh(a);c&&(b=b||{},b[a]=c)}),b},a.getPluginVersion=function(a){var b=kh(a);return b&&b.VERSION||""},a}();ph.getPlugin=kh,ph.BASE_PLUGIN_NAME=gh,ph.registerPlugin(gh,ph),bh.prototype.usingPlugin=function(a){return!!this[hh]&&this[hh][a]===!0},bh.prototype.hasPlugin=function(a){return!!jh(a)};var qh=hb,rh=function(a,b){void 0===b&&(b={});var c=function(){a.apply(this,arguments)},d={};"object"==typeof b?(b.constructor!==Object.prototype.constructor&&(c=b.constructor),d=b):"function"==typeof b&&(c=b),qh(c,a),a&&(c.super_=a);for(var e in d)d.hasOwnProperty(e)&&(c.prototype[e]=d[e]);return c},sh=function(a){return 0===a.indexOf("#")?a.slice(1):a};if(ib.hooks_={},ib.hooks=function(a,b){return ib.hooks_[a]=ib.hooks_[a]||[],b&&(ib.hooks_[a]=ib.hooks_[a].concat(b)),ib.hooks_[a]},ib.hook=function(a,b){ib.hooks(a,b)},ib.hookOnce=function(a,b){ib.hooks(a,[].concat(b).map(function(b){var c=function c(){return ib.removeHook(a,c),b.apply(void 0,arguments)};return c}))},ib.removeHook=function(a,b){var c=ib.hooks(a).indexOf(b);return!(c<=-1)&&(ib.hooks_[a]=ib.hooks_[a].slice(),ib.hooks_[a].splice(c,1),!0)},a.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&n()){var th=Dc(".vjs-styles-defaults");if(!th){th=Jc("vjs-styles-defaults");var uh=Dc("head");uh&&uh.insertBefore(th,uh.firstChild),Kc(th,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}O(1,ib),ib.VERSION=vc,ib.options=bh.prototype.options_,ib.getPlayers=function(){return bh.players},ib.getPlayer=function(a){var b,c=bh.players;if("string"==typeof a){var d=sh(a),e=c[d];if(e)return e;b=Dc("#"+d)}else b=a;if(o(b)){var f=b,g=f.player,h=f.playerId;if(g||c[h])return g||c[h]}},ib.getAllPlayers=function(){return Object.keys(bh.players).map(function(a){return bh.players[a]}).filter(Boolean)},ib.players=bh.players,ib.getComponent=nd.getComponent,ib.registerComponent=function(a,b){_e.isTech(b)&&yc.warn("The "+a+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),nd.registerComponent.call(nd,a,b)},ib.getTech=_e.getTech,ib.registerTech=_e.registerTech,ib.use=Oa,Object.defineProperty(ib,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(ib.middleware,"TERMINATOR",{value:cf,writeable:!1,enumerable:!0}),ib.browser=Ld,ib.TOUCH_ENABLED=Gd,ib.extend=rh,ib.mergeOptions=_,ib.bind=Tc,ib.registerPlugin=ph.registerPlugin,ib.deregisterPlugin=ph.deregisterPlugin,ib.plugin=function(a,b){return yc.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),ph.registerPlugin(a,b)},ib.getPlugins=ph.getPlugins,ib.getPlugin=ph.getPlugin,ib.getPluginVersion=ph.getPluginVersion,ib.addLanguage=function(a,b){var c;return a=(""+a).toLowerCase(),ib.options.languages=_(ib.options.languages,(c={},c[a]=b,c)),ib.options.languages[a]},ib.log=yc,ib.createLogger=zc,ib.createTimeRange=ib.createTimeRanges=fa,ib.formatTime=cb,ib.setFormatTime=ab,ib.resetFormatTime=bb,ib.parseUrl=me,ib.isCrossOrigin=pe,ib.EventTarget=Wc,ib.on=U,ib.one=X,ib.off=V,ib.trigger=W,ib.xhr=ue,ib.TextTrack=ye,ib.AudioTrack=ze,ib.VideoTrack=Ae,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(a){ib[a]=function(){return yc.warn("videojs."+a+"() is deprecated; use videojs.dom."+a+"() instead"),Fc[a].apply(null,arguments)}}),ib.computedStyle=j,ib.dom=Fc,ib.url=qe,ib.defineLazyProperty=Vg;var vh=d(function(a,b){!function(b){var c=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,d=/^([^\/?#]*)(.*)$/,e=/(?:\/|^)\.(?=\/)/g,f=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,g={buildAbsoluteURL:function(a,b,c){if(c=c||{},a=a.trim(),b=b.trim(),!b){if(!c.alwaysNormalize)return a;var e=g.parseURL(a);if(!e)throw new Error("Error trying to parse base URL.");return e.path=g.normalizePath(e.path),g.buildURLFromParts(e)}var f=g.parseURL(b);if(!f)throw new Error("Error trying to parse relative URL.");if(f.scheme)return c.alwaysNormalize?(f.path=g.normalizePath(f.path),g.buildURLFromParts(f)):b;var h=g.parseURL(a);if(!h)throw new Error("Error trying to parse base URL.");if(!h.netLoc&&h.path&&"/"!==h.path[0]){var i=d.exec(h.path);h.netLoc=i[1],h.path=i[2]}h.netLoc&&!h.path&&(h.path="/");var j={scheme:h.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment};if(!f.netLoc&&(j.netLoc=h.netLoc,"/"!==f.path[0]))if(f.path){var k=h.path,l=k.substring(0,k.lastIndexOf("/")+1)+f.path;j.path=g.normalizePath(l)}else j.path=h.path,f.params||(j.params=h.params,f.query||(j.query=h.query));return null===j.path&&(j.path=c.alwaysNormalize?g.normalizePath(f.path):f.path),g.buildURLFromParts(j)},parseURL:function(a){var b=c.exec(a);return b?{scheme:b[1]||"",netLoc:b[2]||"",path:b[3]||"",params:b[4]||"",query:b[5]||"",fragment:b[6]||""}:null},normalizePath:function(a){for(a=a.split("").reverse().join("").replace(e,"");a.length!==(a=a.replace(f,"")).length;);return a.split("").reverse().join("")},buildURLFromParts:function(a){return a.scheme+a.netLoc+a.path+a.params+a.query+a.fragment}};a.exports=g}()}),wh=function(){function a(){this.listeners={}}var b=a.prototype;return b.on=function(a,b){this.listeners[a]||(this.listeners[a]=[]),this.listeners[a].push(b)},b.off=function(a,b){if(!this.listeners[a])return!1;var c=this.listeners[a].indexOf(b);return this.listeners[a].splice(c,1),c>-1},b.trigger=function(a){var b,c,d,e=this.listeners[a];if(e)if(2===arguments.length)for(c=e.length,b=0;b<c;++b)e[b].call(this,arguments[1]);else for(d=Array.prototype.slice.call(arguments,1),c=e.length,b=0;b<c;++b)e[b].apply(this,d)},b.dispose=function(){this.listeners={}},b.pipe=function(a){this.on("data",function(b){a.push(b)})},a}(),xh=function(a){function b(){var b;return b=a.call(this)||this,b.buffer="",b}kb(b,a);var c=b.prototype;return c.push=function(a){var b;for(this.buffer+=a,b=this.buffer.indexOf("\n");b>-1;b=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,b)),this.buffer=this.buffer.substring(b+1)},b}(wh),yh=function(){var a="[^=]*",b='"[^"]*"|[^,]*',c="(?:"+a+")=(?:"+b+")";return new RegExp("(?:^|,)("+c+")")},zh=function(a){for(var b,c=a.split(yh()),d={},e=c.length;e--;)""!==c[e]&&(b=/([^=]*)=(.*)/.exec(c[e]).slice(1),b[0]=b[0].replace(/^\s+|\s+$/g,""),b[1]=b[1].replace(/^\s+|\s+$/g,""),b[1]=b[1].replace(/^['"](.*)['"]$/g,"$1"),d[b[0]]=b[1]);return d},Ah=function(a){function b(){var b;return b=a.call(this)||this,b.customParsers=[],b.tagMappers=[],b}kb(b,a);var c=b.prototype;return c.push=function(a){var b,c,d=this;if(a=a.trim(),0!==a.length){if("#"!==a[0])return void this.trigger("data",{type:"uri",uri:a});var e=this.tagMappers.reduce(function(b,c){var d=c(a);return d===a?b:b.concat([d])},[a]);e.forEach(function(a){for(var e=0;e<d.customParsers.length;e++)if(d.customParsers[e].call(d,a))return;if(0!==a.indexOf("#EXT"))return void d.trigger("data",{type:"comment",text:a.slice(1)});if(a=a.replace("\r",""),b=/^#EXTM3U/.exec(a))return void d.trigger("data",{type:"tag",tagType:"m3u"});if(b=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(a))return c={type:"tag",tagType:"inf"},b[1]&&(c.duration=parseFloat(b[1])),b[2]&&(c.title=b[2]),void d.trigger("data",c);if(b=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(a))return c={type:"tag",tagType:"targetduration"},b[1]&&(c.duration=parseInt(b[1],10)),void d.trigger("data",c);if(b=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(a))return c={type:"tag",tagType:"totalduration"},b[1]&&(c.duration=parseInt(b[1],10)),void d.trigger("data",c);if(b=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(a))return c={type:"tag",tagType:"version"},b[1]&&(c.version=parseInt(b[1],10)),void d.trigger("data",c);if(b=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(a))return c={type:"tag",tagType:"media-sequence"},b[1]&&(c.number=parseInt(b[1],10)),void d.trigger("data",c);if(b=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(a))return c={type:"tag",tagType:"discontinuity-sequence"},b[1]&&(c.number=parseInt(b[1],10)),void d.trigger("data",c);if(b=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(a))return c={type:"tag",tagType:"playlist-type"},b[1]&&(c.playlistType=b[1]),void d.trigger("data",c);if(b=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(a))return c={type:"tag",tagType:"byterange"},b[1]&&(c.length=parseInt(b[1],10)),b[2]&&(c.offset=parseInt(b[2],10)),void d.trigger("data",c);if(b=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(a))return c={type:"tag",tagType:"allow-cache"},b[1]&&(c.allowed=!/NO/.test(b[1])),void d.trigger("data",c);if(b=/^#EXT-X-MAP:?(.*)$/.exec(a)){if(c={type:"tag",tagType:"map"},b[1]){var f=zh(b[1]);if(f.URI&&(c.uri=f.URI),f.BYTERANGE){var g=f.BYTERANGE.split("@"),h=g[0],i=g[1];c.byterange={},h&&(c.byterange.length=parseInt(h,10)),i&&(c.byterange.offset=parseInt(i,10))}}return void d.trigger("data",c)}if(b=/^#EXT-X-STREAM-INF:?(.*)$/.exec(a)){if(c={type:"tag",tagType:"stream-inf"},b[1]){if(c.attributes=zh(b[1]),c.attributes.RESOLUTION){var j=c.attributes.RESOLUTION.split("x"),k={};j[0]&&(k.width=parseInt(j[0],10)),j[1]&&(k.height=parseInt(j[1],10)),c.attributes.RESOLUTION=k}c.attributes.BANDWIDTH&&(c.attributes.BANDWIDTH=parseInt(c.attributes.BANDWIDTH,10)),c.attributes["PROGRAM-ID"]&&(c.attributes["PROGRAM-ID"]=parseInt(c.attributes["PROGRAM-ID"],10))}return void d.trigger("data",c)}return(b=/^#EXT-X-MEDIA:?(.*)$/.exec(a))?(c={type:"tag",tagType:"media"},b[1]&&(c.attributes=zh(b[1])),void d.trigger("data",c)):(b=/^#EXT-X-ENDLIST/.exec(a))?void d.trigger("data",{type:"tag",tagType:"endlist"}):(b=/^#EXT-X-DISCONTINUITY/.exec(a))?void d.trigger("data",{type:"tag",tagType:"discontinuity"}):(b=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(a))?(c={type:"tag",tagType:"program-date-time"},b[1]&&(c.dateTimeString=b[1],c.dateTimeObject=new Date(b[1])),void d.trigger("data",c)):(b=/^#EXT-X-KEY:?(.*)$/.exec(a))?(c={type:"tag",tagType:"key"},b[1]&&(c.attributes=zh(b[1]),c.attributes.IV&&("0x"===c.attributes.IV.substring(0,2).toLowerCase()&&(c.attributes.IV=c.attributes.IV.substring(2)),c.attributes.IV=c.attributes.IV.match(/.{8}/g),c.attributes.IV[0]=parseInt(c.attributes.IV[0],16),c.attributes.IV[1]=parseInt(c.attributes.IV[1],16),c.attributes.IV[2]=parseInt(c.attributes.IV[2],16),c.attributes.IV[3]=parseInt(c.attributes.IV[3],16),c.attributes.IV=new Uint32Array(c.attributes.IV))),void d.trigger("data",c)):(b=/^#EXT-X-START:?(.*)$/.exec(a))?(c={type:"tag",tagType:"start"},b[1]&&(c.attributes=zh(b[1]),c.attributes["TIME-OFFSET"]=parseFloat(c.attributes["TIME-OFFSET"]),c.attributes.PRECISE=/YES/.test(c.attributes.PRECISE)),void d.trigger("data",c)):(b=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(a))?(c={type:"tag",tagType:"cue-out-cont"},b[1]?c.data=b[1]:c.data="",void d.trigger("data",c)):(b=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(a))?(c={type:"tag",tagType:"cue-out"},b[1]?c.data=b[1]:c.data="",void d.trigger("data",c)):(b=/^#EXT-X-CUE-IN:?(.*)?$/.exec(a))?(c={type:"tag",tagType:"cue-in"},b[1]?c.data=b[1]:c.data="",void d.trigger("data",c)):void d.trigger("data",{type:"tag",data:a.slice(4)})})}},c.addParser=function(a){var b=this,c=a.expression,d=a.customType,e=a.dataParser,f=a.segment;"function"!=typeof e&&(e=function(a){return a}),this.customParsers.push(function(a){var g=c.exec(a);if(g)return b.trigger("data",{type:"custom",data:e(a),customType:d,segment:f}),!0})},c.addTagMapper=function(a){var b=a.expression,c=a.map,d=function(a){return b.test(a)?c(a):a};this.tagMappers.push(d)},b}(wh),Bh=function(a){function b(){var b;b=a.call(this)||this,b.lineStream=new xh,b.parseStream=new Ah,b.lineStream.pipe(b.parseStream);var c,d,e=lb(b),f=[],g={},h=function(){},i={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},j="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",k=0;return b.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},b.parseStream.on("data",function(a){var b,l;({tag:function(){(({"allow-cache":function(){this.manifest.allowCache=a.allowed,"allowed"in a||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function b(){var b={};"length"in a&&(g.byterange=b,b.length=a.length,"offset"in a||(this.trigger("info",{message:"defaulting offset to zero"}),a.offset=0)),"offset"in a&&(g.byterange=b,b.offset=a.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),a.duration>0&&(g.duration=a.duration),0===a.duration&&(g.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=f},key:function(){if(!a.attributes)return void this.trigger("warn",{message:"ignoring key declaration without attribute list"});if("NONE"===a.attributes.METHOD)return void(d=null);if(!a.attributes.URI)return void this.trigger("warn",{message:"ignoring key declaration without URI"});if(a.attributes.KEYFORMAT===j){var b=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];return b.indexOf(a.attributes.METHOD)===-1?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===a.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==a.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):a.attributes.KEYID&&"0x"===a.attributes.KEYID.substring(0,2)?void(this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:a.attributes.KEYFORMAT,keyId:a.attributes.KEYID.substring(2)},pssh:mb(a.attributes.URI.split(",")[1])}}):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}a.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),d={method:a.attributes.METHOD||"AES-128",uri:a.attributes.URI},"undefined"!=typeof a.attributes.IV&&(d.iv=a.attributes.IV)},"media-sequence":function(){return isFinite(a.number)?void(this.manifest.mediaSequence=a.number):void this.trigger("warn",{message:"ignoring invalid media sequence: "+a.number})},"discontinuity-sequence":function(){return isFinite(a.number)?(this.manifest.discontinuitySequence=a.number,void(k=a.number)):void this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+a.number})},"playlist-type":function(){return/VOD|EVENT/.test(a.playlistType)?void(this.manifest.playlistType=a.playlistType):void this.trigger("warn",{message:"ignoring unknown playlist type: "+a.playlist})},map:function(){c={},a.uri&&(c.uri=a.uri),a.byterange&&(c.byterange=a.byterange)},"stream-inf":function(){return this.manifest.playlists=f,this.manifest.mediaGroups=this.manifest.mediaGroups||i,a.attributes?(g.attributes||(g.attributes={}),void jb(g.attributes,a.attributes)):void this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||i,!(a.attributes&&a.attributes.TYPE&&a.attributes["GROUP-ID"]&&a.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});var c=this.manifest.mediaGroups[a.attributes.TYPE];c[a.attributes["GROUP-ID"]]=c[a.attributes["GROUP-ID"]]||{},b=c[a.attributes["GROUP-ID"]],l={default:/yes/i.test(a.attributes.DEFAULT)},l.default?l.autoselect=!0:l.autoselect=/yes/i.test(a.attributes.AUTOSELECT),a.attributes.LANGUAGE&&(l.language=a.attributes.LANGUAGE),a.attributes.URI&&(l.uri=a.attributes.URI),a.attributes["INSTREAM-ID"]&&(l.instreamId=a.attributes["INSTREAM-ID"]),a.attributes.CHARACTERISTICS&&(l.characteristics=a.attributes.CHARACTERISTICS),a.attributes.FORCED&&(l.forced=/yes/i.test(a.attributes.FORCED)),b[a.attributes.NAME]=l},discontinuity:function(){k+=1,g.discontinuity=!0,this.manifest.discontinuityStarts.push(f.length)},"program-date-time":function(){"undefined"==typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=a.dateTimeString,this.manifest.dateTimeObject=a.dateTimeObject),g.dateTimeString=a.dateTimeString,g.dateTimeObject=a.dateTimeObject},targetduration:function(){return!isFinite(a.duration)||a.duration<0?void this.trigger("warn",{message:"ignoring invalid target duration: "+a.duration}):void(this.manifest.targetDuration=a.duration)},totalduration:function(){return!isFinite(a.duration)||a.duration<0?void this.trigger("warn",{message:"ignoring invalid total duration: "+a.duration}):void(this.manifest.totalDuration=a.duration)},start:function(){return!a.attributes||isNaN(a.attributes["TIME-OFFSET"])?void this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"}):void(this.manifest.start={timeOffset:a.attributes["TIME-OFFSET"],precise:a.attributes.PRECISE})},"cue-out":function(){g.cueOut=a.data},"cue-out-cont":function(){g.cueOutCont=a.data},"cue-in":function(){g.cueIn=a.data}})[a.tagType]||h).call(e)},uri:function(){g.uri=a.uri,f.push(g),!this.manifest.targetDuration||"duration"in g||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),g.duration=this.manifest.targetDuration),d&&(g.key=d),g.timeline=k,c&&(g.map=c),g={}},comment:function(){},custom:function(){a.segment?(g.custom=g.custom||{},g.custom[a.customType]=a.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[a.customType]=a.data)}})[a.type].call(e)}),b}kb(b,a);var c=b.prototype;return c.push=function(a){this.lineStream.push(a)},c.end=function(){this.lineStream.push("\n")},c.addParser=function(a){this.parseStream.addParser(a)},c.addTagMapper=function(a){this.parseStream.addTagMapper(a)},b}(wh),Ch=nb(vh),Dh=nb(a),Eh=function(a,b){return/^[a-z]+:/i.test(b)?b:(/\/\//i.test(a)||(a=Ch.buildAbsoluteURL(Dh.location&&Dh.location.href||"",a)),Ch.buildAbsoluteURL(a,b))},Fh=Eh,Gh=ob(a),Hh=function(a){return Gh.atob?Gh.atob(a):Buffer.from(a,"base64").toString("binary")},Ih=pb,Jh=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Kh=new RegExp("[\\-\\.0-9"+Jh.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),Lh=new RegExp("^"+Jh.source+Kh.source+"*(?::"+Jh.source+Kh.source+"*)?$"),Mh=0,Nh=1,Oh=2,Ph=3,Qh=4,Rh=5,Sh=6,Th=7;qb.prototype={parse:function(a,b,c){var d=this.domBuilder;d.startDocument(),xb(b,b={}),rb(a,b,c,d,this.errorHandler),d.endDocument()}},Ab.prototype={setTagName:function(a){if(!Lh.test(a))throw new Error("invalid tagName:"+a);this.tagName=a},add:function(a,b,c){if(!Lh.test(a))throw new Error("invalid attribute:"+a);this[this.length++]={qName:a,value:b,offset:c}},length:0,getLocalName:function(a){return this[a].localName},getLocator:function(a){return this[a].locator},getQName:function(a){return this[a].qName},getURI:function(a){return this[a].uri},getValue:function(a){return this[a].value}},Bb({},Bb.prototype)instanceof Bb||(Bb=function(a,b){function c(){}c.prototype=b,c=new c;for(b in a)c[b]=a[b];return c});var Uh=qb,Vh={XMLReader:Uh},Wh="http://www.w3.org/1999/xhtml",Xh={},Yh=Xh.ELEMENT_NODE=1,Zh=Xh.ATTRIBUTE_NODE=2,$h=Xh.TEXT_NODE=3,_h=Xh.CDATA_SECTION_NODE=4,ai=Xh.ENTITY_REFERENCE_NODE=5,bi=Xh.ENTITY_NODE=6,ci=Xh.PROCESSING_INSTRUCTION_NODE=7,di=Xh.COMMENT_NODE=8,ei=Xh.DOCUMENT_NODE=9,fi=Xh.DOCUMENT_TYPE_NODE=10,gi=Xh.DOCUMENT_FRAGMENT_NODE=11,hi=Xh.NOTATION_NODE=12,ii={},ji={},ki=(ii.INDEX_SIZE_ERR=(ji[1]="Index size error",1),ii.DOMSTRING_SIZE_ERR=(ji[2]="DOMString size error",2),ii.HIERARCHY_REQUEST_ERR=(ji[3]="Hierarchy request error",3)),li=(ii.WRONG_DOCUMENT_ERR=(ji[4]="Wrong document",4),ii.INVALID_CHARACTER_ERR=(ji[5]="Invalid character",5),ii.NO_DATA_ALLOWED_ERR=(ji[6]="No data allowed",6),ii.NO_MODIFICATION_ALLOWED_ERR=(ji[7]="No modification allowed",7),ii.NOT_FOUND_ERR=(ji[8]="Not found",8)),mi=(ii.NOT_SUPPORTED_ERR=(ji[9]="Not supported",9),ii.INUSE_ATTRIBUTE_ERR=(ji[10]="Attribute in use",10));ii.INVALID_STATE_ERR=(ji[11]="Invalid state",11),ii.SYNTAX_ERR=(ji[12]="Syntax error",12),ii.INVALID_MODIFICATION_ERR=(ji[13]="Invalid modification",13),ii.NAMESPACE_ERR=(ji[14]="Invalid namespace",14),ii.INVALID_ACCESS_ERR=(ji[15]="Invalid access",15);Fb.prototype=Error.prototype,Db(ii,Fb),Gb.prototype={length:0,item:function(a){return this[a]||null},toString:function(a,b){for(var c=[],d=0;d<this.length;d++)lc(this[d],c,a,b);return c.join("")}},Hb.prototype.item=function(a){return Ib(this),this[a]},Eb(Hb,Gb),Jb.prototype={length:0,item:Gb.prototype.item,getNamedItem:function(a){for(var b=this.length;b--;){var c=this[b];if(c.nodeName==a)return c}},setNamedItem:function(a){var b=a.ownerElement;if(b&&b!=this._ownerElement)throw new Fb(mi);var c=this.getNamedItem(a.nodeName);return Lb(this._ownerElement,this,a,c),c},setNamedItemNS:function(a){var b,c=a.ownerElement;if(c&&c!=this._ownerElement)throw new Fb(mi);return b=this.getNamedItemNS(a.namespaceURI,a.localName),Lb(this._ownerElement,this,a,b),b},removeNamedItem:function(a){var b=this.getNamedItem(a);return Mb(this._ownerElement,this,b),b},removeNamedItemNS:function(a,b){var c=this.getNamedItemNS(a,b);return Mb(this._ownerElement,this,c),c},getNamedItemNS:function(a,b){for(var c=this.length;c--;){var d=this[c];if(d.localName==b&&d.namespaceURI==a)return d}return null}},Nb.prototype={hasFeature:function(a,b){var c=this._features[a.toLowerCase()];return!(!c||b&&!(b in c))},createDocument:function(a,b,c){var d=new Rb;if(d.implementation=this,d.childNodes=new Gb,d.doctype=c,c&&d.appendChild(c),b){var e=d.createElementNS(a,b);d.appendChild(e)}return d},createDocumentType:function(a,b,c){var d=new cc;return d.name=a,d.nodeName=a,d.publicId=b,d.systemId=c,d}},Ob.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(a,b){return Wb(this,a,b)},replaceChild:function(a,b){this.insertBefore(a,b),b&&this.removeChild(b)},removeChild:function(a){return Vb(this,a)},appendChild:function(a){return this.insertBefore(a,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(a){return nc(this.ownerDocument||this,this,a)},normalize:function(){for(var a=this.firstChild;a;){var b=a.nextSibling;b&&b.nodeType==$h&&a.nodeType==$h?(this.removeChild(b),a.appendData(b.data)):(a.normalize(),a=b)}},isSupported:function(a,b){return this.ownerDocument.implementation.hasFeature(a,b)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(a){for(var b=this;b;){var c=b._nsMap;if(c)for(var d in c)if(c[d]==a)return d;b=b.nodeType==Zh?b.ownerDocument:b.parentNode}return null},lookupNamespaceURI:function(a){for(var b=this;b;){var c=b._nsMap;if(c&&a in c)return c[a];b=b.nodeType==Zh?b.ownerDocument:b.parentNode}return null},isDefaultNamespace:function(a){var b=this.lookupPrefix(a);return null==b}},Db(Xh,Ob),Db(Xh,Ob.prototype),Rb.prototype={nodeName:"#document",nodeType:ei,doctype:null,documentElement:null,_inc:1,insertBefore:function(a,b){if(a.nodeType==gi){for(var c=a.firstChild;c;){var d=c.nextSibling;this.insertBefore(c,b),c=d}return a}return null==this.documentElement&&a.nodeType==Yh&&(this.documentElement=a),Wb(this,a,b),a.ownerDocument=this,a},removeChild:function(a){return this.documentElement==a&&(this.documentElement=null),Vb(this,a)},importNode:function(a,b){return mc(this,a,b)},getElementById:function(a){var b=null;return Qb(this.documentElement,function(c){if(c.nodeType==Yh&&c.getAttribute("id")==a)return b=c,!0}),b},createElement:function(a){var b=new Yb;b.ownerDocument=this,b.nodeName=a,b.tagName=a,b.childNodes=new Gb;var c=b.attributes=new Jb;return c._ownerElement=b,b},createDocumentFragment:function(){var a=new gc;return a.ownerDocument=this,a.childNodes=new Gb,a},createTextNode:function(a){var b=new _b;return b.ownerDocument=this,b.appendData(a),b},createComment:function(a){var b=new ac;return b.ownerDocument=this,b.appendData(a),b},createCDATASection:function(a){var b=new bc;return b.ownerDocument=this,b.appendData(a),b},createProcessingInstruction:function(a,b){var c=new hc;return c.ownerDocument=this,c.tagName=c.target=a,c.nodeValue=c.data=b,c},createAttribute:function(a){var b=new Zb;return b.ownerDocument=this,b.name=a,b.nodeName=a,b.localName=a,b.specified=!0,b},createEntityReference:function(a){var b=new fc;return b.ownerDocument=this,b.nodeName=a,b},createElementNS:function(a,b){var c=new Yb,d=b.split(":"),e=c.attributes=new Jb;return c.childNodes=new Gb,c.ownerDocument=this,c.nodeName=b,c.tagName=b,c.namespaceURI=a,2==d.length?(c.prefix=d[0],c.localName=d[1]):c.localName=b,e._ownerElement=c,c},createAttributeNS:function(a,b){var c=new Zb,d=b.split(":");return c.ownerDocument=this,c.nodeName=b,c.name=b,c.namespaceURI=a,c.specified=!0,2==d.length?(c.prefix=d[0],c.localName=d[1]):c.localName=b,c}},Eb(Rb,Ob),Yb.prototype={nodeType:Yh,hasAttribute:function(a){return null!=this.getAttributeNode(a)},getAttribute:function(a){var b=this.getAttributeNode(a);return b&&b.value||""},getAttributeNode:function(a){return this.attributes.getNamedItem(a)},setAttribute:function(a,b){var c=this.ownerDocument.createAttribute(a);c.value=c.nodeValue=""+b,this.setAttributeNode(c)},removeAttribute:function(a){var b=this.getAttributeNode(a);b&&this.removeAttributeNode(b)},appendChild:function(a){return a.nodeType===gi?this.insertBefore(a,null):Xb(this,a)},setAttributeNode:function(a){return this.attributes.setNamedItem(a)},setAttributeNodeNS:function(a){
return this.attributes.setNamedItemNS(a)},removeAttributeNode:function(a){return this.attributes.removeNamedItem(a.nodeName)},removeAttributeNS:function(a,b){var c=this.getAttributeNodeNS(a,b);c&&this.removeAttributeNode(c)},hasAttributeNS:function(a,b){return null!=this.getAttributeNodeNS(a,b)},getAttributeNS:function(a,b){var c=this.getAttributeNodeNS(a,b);return c&&c.value||""},setAttributeNS:function(a,b,c){var d=this.ownerDocument.createAttributeNS(a,b);d.value=d.nodeValue=""+c,this.setAttributeNode(d)},getAttributeNodeNS:function(a,b){return this.attributes.getNamedItemNS(a,b)},getElementsByTagName:function(a){return new Hb(this,function(b){var c=[];return Qb(b,function(d){d===b||d.nodeType!=Yh||"*"!==a&&d.tagName!=a||c.push(d)}),c})},getElementsByTagNameNS:function(a,b){return new Hb(this,function(c){var d=[];return Qb(c,function(e){e===c||e.nodeType!==Yh||"*"!==a&&e.namespaceURI!==a||"*"!==b&&e.localName!=b||d.push(e)}),d})}},Rb.prototype.getElementsByTagName=Yb.prototype.getElementsByTagName,Rb.prototype.getElementsByTagNameNS=Yb.prototype.getElementsByTagNameNS,Eb(Yb,Ob),Zb.prototype.nodeType=Zh,Eb(Zb,Ob),$b.prototype={data:"",substringData:function(a,b){return this.data.substring(a,a+b)},appendData:function(a){a=this.data+a,this.nodeValue=this.data=a,this.length=a.length},insertData:function(a,b){this.replaceData(a,0,b)},appendChild:function(a){throw new Error(ji[ki])},deleteData:function(a,b){this.replaceData(a,b,"")},replaceData:function(a,b,c){var d=this.data.substring(0,a),e=this.data.substring(a+b);c=d+c+e,this.nodeValue=this.data=c,this.length=c.length}},Eb($b,Ob),_b.prototype={nodeName:"#text",nodeType:$h,splitText:function(a){var b=this.data,c=b.substring(a);b=b.substring(0,a),this.data=this.nodeValue=b,this.length=b.length;var d=this.ownerDocument.createTextNode(c);return this.parentNode&&this.parentNode.insertBefore(d,this.nextSibling),d}},Eb(_b,$b),ac.prototype={nodeName:"#comment",nodeType:di},Eb(ac,$b),bc.prototype={nodeName:"#cdata-section",nodeType:_h},Eb(bc,$b),cc.prototype.nodeType=fi,Eb(cc,Ob),dc.prototype.nodeType=hi,Eb(dc,Ob),ec.prototype.nodeType=bi,Eb(ec,Ob),fc.prototype.nodeType=ai,Eb(fc,Ob),gc.prototype.nodeName="#document-fragment",gc.prototype.nodeType=gi,Eb(gc,Ob),hc.prototype.nodeType=ci,Eb(hc,Ob),ic.prototype.serializeToString=function(a,b,c){return jc.call(a,b,c)},Ob.prototype.toString=jc;try{if(Object.defineProperty){var ni=function a(b){switch(b.nodeType){case Yh:case gi:var c=[];for(b=b.firstChild;b;)7!==b.nodeType&&8!==b.nodeType&&c.push(a(b)),b=b.nextSibling;return c.join("");default:return b.nodeValue}};Object.defineProperty(Hb.prototype,"length",{get:function(){return Ib(this),this.$$length}}),Object.defineProperty(Ob.prototype,"textContent",{get:function(){return ni(this)},set:function(a){switch(this.nodeType){case Yh:case gi:for(;this.firstChild;)this.removeChild(this.firstChild);(a||String(a))&&this.appendChild(this.ownerDocument.createTextNode(a));break;default:this.data=a,this.value=a,this.nodeValue=a}}}),oc=function(a,b,c){a["$$"+b]=c}}}catch(a){}var oi,pi,qi=Nb,ri=ic,si={DOMImplementation:qi,XMLSerializer:ri},ti=d(function(a,b){function c(a){this.options=a||{locator:{}}}function d(a,b,c){function d(b){var d=a[b];!d&&h&&(d=2==a.length?function(c){a(b,c)}:a),f[b]=d&&function(a){d("[xmldom "+b+"]\t"+a+g(c))}||function(){}}if(!a){if(b instanceof e)return b;a=b}var f={},h=a instanceof Function;return c=c||{},d("warning"),d("error"),d("fatalError"),f}function e(){this.cdata=!1}function f(a,b){b.lineNumber=a.lineNumber,b.columnNumber=a.columnNumber}function g(a){if(a)return"\n@"+(a.systemId||"")+"#[line:"+a.lineNumber+",col:"+a.columnNumber+"]"}function h(a,b,c){return"string"==typeof a?a.substr(b,c):a.length>=b+c||b?new java.lang.String(a,b,c)+"":a}function i(a,b){a.currentElement?a.currentElement.appendChild(b):a.doc.appendChild(b)}c.prototype.parseFromString=function(a,b){var c=this.options,f=new j,g=c.domBuilder||new e,h=c.errorHandler,i=c.locator,k=c.xmlns||{},l={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return i&&g.setDocumentLocator(i),f.errorHandler=d(h,g,i),f.domBuilder=c.domBuilder||g,/\/x?html?$/.test(b)&&(l.nbsp=" ",l.copy="©",k[""]="http://www.w3.org/1999/xhtml"),k.xml=k.xml||"http://www.w3.org/XML/1998/namespace",a?f.parse(a,k,l):f.errorHandler.error("invalid doc source"),g.doc},e.prototype={startDocument:function(){this.doc=(new k).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(a,b,c,d){var e=this.doc,g=e.createElementNS(a,c||b),h=d.length;i(this,g),this.currentElement=g,this.locator&&f(this.locator,g);for(var j=0;j<h;j++){var a=d.getURI(j),k=d.getValue(j),c=d.getQName(j),l=e.createAttributeNS(a,c);this.locator&&f(d.getLocator(j),l),l.value=l.nodeValue=k,g.setAttributeNode(l)}},endElement:function(a,b,c){var d=this.currentElement;d.tagName;this.currentElement=d.parentNode},startPrefixMapping:function(a,b){},endPrefixMapping:function(a){},processingInstruction:function(a,b){var c=this.doc.createProcessingInstruction(a,b);this.locator&&f(this.locator,c),i(this,c)},ignorableWhitespace:function(a,b,c){},characters:function(a,b,c){if(a=h.apply(this,arguments)){if(this.cdata)var d=this.doc.createCDATASection(a);else var d=this.doc.createTextNode(a);this.currentElement?this.currentElement.appendChild(d):/^\s*$/.test(a)&&this.doc.appendChild(d),this.locator&&f(this.locator,d)}},skippedEntity:function(a){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(a){(this.locator=a)&&(a.lineNumber=0)},comment:function(a,b,c){a=h.apply(this,arguments);var d=this.doc.createComment(a);this.locator&&f(this.locator,d),i(this,d)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(a,b,c){var d=this.doc.implementation;if(d&&d.createDocumentType){var e=d.createDocumentType(a,b,c);this.locator&&f(this.locator,e),i(this,e)}},warning:function(a){},error:function(a){},fatalError:function(a){throw a}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(a){e.prototype[a]=function(){return null}});var j=Vh.XMLReader,k=b.DOMImplementation=si.DOMImplementation;b.XMLSerializer=si.XMLSerializer,b.DOMParser=c}),ui=(ti.DOMImplementation,ti.XMLSerializer,ti.DOMParser),vi=function(a){return!!a&&"object"==typeof a},wi=function a(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];return c.reduce(function(b,c){return Object.keys(c).forEach(function(d){Array.isArray(b[d])&&Array.isArray(c[d])?b[d]=b[d].concat(c[d]):vi(b[d])&&vi(c[d])?b[d]=a(b[d],c[d]):b[d]=c[d]}),b},{})},xi=function(a){return Object.keys(a).map(function(b){return a[b]})},yi=function(a,b){for(var c=[],d=a;d<b;d++)c.push(d);return c},zi=function(a){return a.reduce(function(a,b){return a.concat(b)},[])},Ai=function(a){if(!a.length)return[];for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b},Bi=function(a,b){return a.reduce(function(a,c,d){return c[b]&&a.push(d),a},[])},Ci={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"},Di=function(a){var b=a.baseUrl,c=void 0===b?"":b,d=a.source,e=void 0===d?"":d,f=a.range,g=void 0===f?"":f,h=a.indexRange,i=void 0===h?"":h,j={uri:e,resolvedUri:Fh(c||"",e)};if(g||i){var k=g?g:i,l=k.split("-"),m=parseInt(l[0],10),n=parseInt(l[1],10);j.byterange={length:n-m+1,offset:m}}return j},Ei=function(a){var b=a.offset+a.length-1;return a.offset+"-"+b},Fi={static:function(a){var b=a.duration,c=a.timescale,d=void 0===c?1:c,e=a.sourceDuration;return{start:0,end:Math.ceil(e/(b/d))}},dynamic:function(a){var b=a.NOW,c=a.clientOffset,d=a.availabilityStartTime,e=a.timescale,f=void 0===e?1:e,g=a.duration,h=a.start,i=void 0===h?0:h,j=a.minimumUpdatePeriod,k=void 0===j?0:j,l=a.timeShiftBufferDepth,m=void 0===l?1/0:l,n=(b+c)/1e3,o=d+i,p=n+k,q=p-o,r=Math.ceil(q*f/g),s=Math.floor((n-o-m)*f/g),t=Math.floor((n-o)*f/g);return{start:Math.max(0,s),end:Math.min(r,t)}}},Gi=function(a){return function(b,c){var d=a.duration,e=a.timescale,f=void 0===e?1:e,g=a.periodIndex,h=a.startNumber,i=void 0===h?1:h;return{number:i+b,duration:d/f,timeline:g,time:c*d}}},Hi=function(a){var b=a.type,c=void 0===b?"static":b,d=a.duration,e=a.timescale,f=void 0===e?1:e,g=a.sourceDuration,h=Fi[c](a),i=h.start,j=h.end,k=yi(i,j).map(Gi(a));if("static"===c){var l=k.length-1;k[l].duration=g-d/f*l}return k},Ii=function(a){var b=a.baseUrl,c=a.initialization,d=void 0===c?{}:c,e=a.sourceDuration,f=a.timescale,g=void 0===f?1:f,h=a.indexRange,i=void 0===h?"":h,j=a.duration;if(!b)throw new Error(Ci.NO_BASE_URL);var k=Di({baseUrl:b,source:d.sourceURL,range:d.range}),l=Di({baseUrl:b,source:b,indexRange:i});if(l.map=k,j){var m=Hi(a);m.length&&(l.duration=m[0].duration,l.timeline=m[0].timeline)}else e&&(l.duration=e/g,l.timeline=0);return l.number=0,[l]},Ji=function(a,b,c){for(var d=a.sidx.map?a.sidx.map:null,e=a.sidx.duration,f=a.timeline||0,g=a.sidx.byterange,h=g.offset+g.length,i=b.timescale,j=b.references.filter(function(a){return 1!==a.referenceType}),k=[],l=h+b.firstOffset,m=0;m<j.length;m++){var n=b.references[m],o=n.referencedSize,p=n.subsegmentDuration,q=l+o-1,r=l+"-"+q,s={baseUrl:c,timescale:i,timeline:f,periodIndex:f,duration:p,sourceDuration:e,indexRange:r},t=Ii(s)[0];d&&(t.map=d),k.push(t),l+=o}return a.segments=k,a},Ki=function(a){var b=xi(a.reduce(function(a,b){var c=b.attributes.id+(b.attributes.lang||"");if(a[c]){var d;b.segments[0]&&(b.segments[0].discontinuity=!0),(d=a[c].segments).push.apply(d,b.segments),b.attributes.contentProtection&&(a[c].attributes.contentProtection=b.attributes.contentProtection)}else a[c]=b;return a},{}));return b.map(function(a){return a.discontinuityStarts=Bi(a.segments,"discontinuity"),a})},Li=function(a,b){if(void 0===b&&(b={}),!Object.keys(b).length)return a;for(var c in a){var d=a[c];if(d.sidx){var e=d.sidx.uri+"-"+Ei(d.sidx.byterange),f=b[e]&&b[e].sidx;d.sidx&&f&&Ji(d,f,d.sidx.resolvedUri)}}return a},Mi=function(a){var b,c=a.attributes,d=a.segments,e=a.sidx,f={attributes:(b={NAME:c.id,BANDWIDTH:c.bandwidth,CODECS:c.codecs},b["PROGRAM-ID"]=1,b),uri:"",endList:"static"===(c.type||"static"),timeline:c.periodIndex,resolvedUri:"",targetDuration:c.duration,segments:d,mediaSequence:d.length?d[0].number:1};return c.contentProtection&&(f.contentProtection=c.contentProtection),e&&(f.sidx=e),f},Ni=function(a){var b,c=a.attributes,d=a.segments;return"undefined"==typeof d&&(d=[{uri:c.baseUrl,timeline:c.periodIndex,resolvedUri:c.baseUrl||"",duration:c.sourceDuration,number:0}],c.duration=c.sourceDuration),{attributes:(b={NAME:c.id,BANDWIDTH:c.bandwidth},b["PROGRAM-ID"]=1,b),uri:"",endList:"static"===(c.type||"static"),timeline:c.periodIndex,resolvedUri:c.baseUrl||"",targetDuration:c.duration,segments:d,mediaSequence:d.length?d[0].number:1}},Oi=function(a,b){void 0===b&&(b={});var c,d=a.reduce(function(a,d){var e=d.attributes.role&&d.attributes.role.value||"",f=d.attributes.lang||"",g="main";if(f){var h=e?" ("+e+")":"";g=""+d.attributes.lang+h}return a[g]&&a[g].playlists[0].attributes.BANDWIDTH>d.attributes.bandwidth?a:(a[g]={language:f,autoselect:!0,default:"main"===e,playlists:Li([Mi(d)],b),uri:""},"undefined"==typeof c&&"main"===e&&(c=d,c.default=!0),a)},{});if(!c){var e=Object.keys(d)[0];d[e].default=!0}return d},Pi=function(a,b){return void 0===b&&(b={}),a.reduce(function(a,c){var d=c.attributes.lang||"text";return a[d]?a:(a[d]={language:d,default:!1,autoselect:!1,playlists:Li([Ni(c)],b),uri:""},a)},{})},Qi=function(a){var b,c=a.attributes,d=a.segments,e=a.sidx,f={attributes:(b={NAME:c.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:c.width,height:c.height},CODECS:c.codecs,BANDWIDTH:c.bandwidth},b["PROGRAM-ID"]=1,b),uri:"",endList:"static"===(c.type||"static"),timeline:c.periodIndex,resolvedUri:"",targetDuration:c.duration,segments:d,mediaSequence:d.length?d[0].number:1};return c.contentProtection&&(f.contentProtection=c.contentProtection),e&&(f.sidx=e),f},Ri=function(a,b){var c;if(void 0===b&&(b={}),!a.length)return{};var d=a[0].attributes,e=d.sourceDuration,f=d.type,g=void 0===f?"static":f,h=d.suggestedPresentationDelay,i=d.minimumUpdatePeriod,j=void 0===i?0:i,k=function(a){var b=a.attributes;return"video/mp4"===b.mimeType||"video"===b.contentType},l=function(a){var b=a.attributes;return"audio/mp4"===b.mimeType||"audio"===b.contentType},m=function(a){var b=a.attributes;return"text/vtt"===b.mimeType||"text"===b.contentType},n=Ki(a.filter(k)).map(Qi),o=Ki(a.filter(l)),p=a.filter(m),q={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(c={AUDIO:{},VIDEO:{}},c["CLOSED-CAPTIONS"]={},c.SUBTITLES={},c),uri:"",duration:e,playlists:Li(n,b),minimumUpdatePeriod:1e3*j};return"dynamic"===g&&(q.suggestedPresentationDelay=h),o.length&&(q.mediaGroups.AUDIO.audio=Oi(o,b)),p.length&&(q.mediaGroups.SUBTITLES.subs=Pi(p,b)),q},Si=function(a,b,c){var d=a.NOW,e=a.clientOffset,f=a.availabilityStartTime,g=a.timescale,h=void 0===g?1:g,i=a.start,j=void 0===i?0:i,k=a.minimumUpdatePeriod,l=void 0===k?0:k,m=(d+e)/1e3,n=f+j,o=m+l,p=o-n;return Math.ceil((p*h-b)/c)},Ti=function(a,b){for(var c=a.type,d=void 0===c?"static":c,e=a.minimumUpdatePeriod,f=void 0===e?0:e,g=a.media,h=void 0===g?"":g,i=a.sourceDuration,j=a.timescale,k=void 0===j?1:j,l=a.startNumber,m=void 0===l?1:l,n=a.periodIndex,o=[],p=-1,q=0;q<b.length;q++){var r=b[q],s=r.d,t=r.r||0,u=r.t||0;p<0&&(p=u),u&&u>p&&(p=u);var v=void 0;if(t<0){var w=q+1;v=w===b.length?"dynamic"===d&&f>0&&h.indexOf("$Number$")>0?Si(a,p,s):(i*k-p)/s:(b[w].t-p)/s}else v=t+1;for(var x=m+o.length+v,y=m+o.length;y<x;)o.push({number:y,duration:s/k,time:p,timeline:n}),p+=s,y++}return o},Ui=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Vi=function(a){return function(b,c,d,e){if("$$"===b)return"$";if("undefined"==typeof a[c])return b;var f=""+a[c];return"RepresentationID"===c?f:(e=d?parseInt(e,10):1,f.length>=e?f:""+new Array(e-f.length+1).join("0")+f)}},Wi=function(a,b){return a.replace(Ui,Vi(b))},Xi=function(a,b){return a.duration||b?a.duration?Hi(a):Ti(a,b):[{number:a.startNumber||1,duration:a.sourceDuration,time:0,timeline:a.periodIndex}]},Yi=function(a,b){var c={RepresentationID:a.id,Bandwidth:a.bandwidth||0},d=a.initialization,e=void 0===d?{sourceURL:"",range:""}:d,f=Di({baseUrl:a.baseUrl,source:Wi(e.sourceURL,c),range:e.range}),g=Xi(a,b);return g.map(function(b){c.Number=b.number,c.Time=b.time;var d=Wi(a.media||"",c);return{uri:d,timeline:b.timeline,duration:b.duration,resolvedUri:Fh(a.baseUrl||"",d),map:f,number:b.number}})},Zi=function(a,b){var c=a.baseUrl,d=a.initialization,e=void 0===d?{}:d,f=Di({baseUrl:c,source:e.sourceURL,range:e.range}),g=Di({baseUrl:c,source:b.media,range:b.mediaRange});return g.map=f,g},$i=function(a,b){var c=a.duration,d=a.segmentUrls,e=void 0===d?[]:d;if(!c&&!b||c&&b)throw new Error(Ci.SEGMENT_TIME_UNSPECIFIED);var f,g=e.map(function(b){return Zi(a,b)});c&&(f=Hi(a)),b&&(f=Ti(a,b));var h=f.map(function(a,b){if(g[b]){var c=g[b];return c.timeline=a.timeline,c.duration=a.duration,c.number=a.number,c}}).filter(function(a){return a});return h},_i=function(a){var b,c,d=a.attributes,e=a.segmentInfo;e.template?(c=Yi,b=wi(d,e.template)):e.base?(c=Ii,b=wi(d,e.base)):e.list&&(c=$i,b=wi(d,e.list));var f={attributes:d};if(!c)return f;var g=c(b,e.timeline);if(b.duration){var h=b,i=h.duration,j=h.timescale,k=void 0===j?1:j;b.duration=i/k}else g.length?b.duration=g.reduce(function(a,b){return Math.max(a,Math.ceil(b.duration))},0):b.duration=0;return f.attributes=b,f.segments=g,e.base&&b.indexRange&&(f.sidx=g[0],f.segments=[]),f},aj=function(a){return a.map(_i)},bj=function(a,b){return Ai(a.childNodes).filter(function(a){var c=a.tagName;return c===b})},cj=function(a){return a.textContent.trim()},dj=function(a){var b=31536e3,c=2592e3,d=86400,e=3600,f=60,g=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/,h=g.exec(a);if(!h)return 0;var i=h.slice(1),j=i[0],k=i[1],l=i[2],m=i[3],n=i[4],o=i[5];return parseFloat(j||0)*b+parseFloat(k||0)*c+parseFloat(l||0)*d+parseFloat(m||0)*e+parseFloat(n||0)*f+parseFloat(o||0)},ej=function(a){var b=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;return b.test(a)&&(a+="Z"),Date.parse(a)},fj={mediaPresentationDuration:function(a){return dj(a)},availabilityStartTime:function(a){return ej(a)/1e3},minimumUpdatePeriod:function(a){return dj(a)},suggestedPresentationDelay:function(a){return dj(a)},type:function(a){return a},timeShiftBufferDepth:function(a){return dj(a)},start:function(a){return dj(a)},width:function(a){return parseInt(a,10)},height:function(a){return parseInt(a,10)},bandwidth:function(a){return parseInt(a,10)},startNumber:function(a){return parseInt(a,10)},timescale:function(a){return parseInt(a,10)},duration:function(a){var b=parseInt(a,10);return isNaN(b)?dj(a):b},d:function(a){return parseInt(a,10)},t:function(a){return parseInt(a,10)},r:function(a){return parseInt(a,10)},DEFAULT:function(a){return a}},gj=function(a){return a&&a.attributes?Ai(a.attributes).reduce(function(a,b){var c=fj[b.name]||fj.DEFAULT;return a[b.name]=c(b.value),a},{}):{}},hj={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},ij=function(a,b){return b.length?zi(a.map(function(a){return b.map(function(b){return Fh(a,cj(b))})})):a},jj=function(a){var b=bj(a,"SegmentTemplate")[0],c=bj(a,"SegmentList")[0],d=c&&bj(c,"SegmentURL").map(function(a){return wi({tag:"SegmentURL"},gj(a))}),e=bj(a,"SegmentBase")[0],f=c||b,g=f&&bj(f,"SegmentTimeline")[0],h=c||e||b,i=h&&bj(h,"Initialization")[0],j=b&&gj(b);j&&i?j.initialization=i&&gj(i):j&&j.initialization&&(j.initialization={sourceURL:j.initialization});var k={template:j,timeline:g&&bj(g,"S").map(function(a){return gj(a)}),list:c&&wi(gj(c),{segmentUrls:d,initialization:gj(i)}),base:e&&wi(gj(e),{initialization:gj(i)})};return Object.keys(k).forEach(function(a){k[a]||delete k[a]}),k},kj=function(a,b,c){return function(d){var e=bj(d,"BaseURL"),f=ij(b,e),g=wi(a,gj(d)),h=jj(d);return f.map(function(a){return{segmentInfo:wi(c,h),attributes:wi(g,{baseUrl:a})}})}},lj=function(a){return a.reduce(function(a,b){var c=gj(b),d=hj[c.schemeIdUri];if(d){a[d]={attributes:c};var e=bj(b,"cenc:pssh")[0];if(e){var f=cj(e),g=f&&Ih(f);a[d].pssh=g}}return a},{})},mj=function(a,b,c){return function(d){var e=gj(d),f=ij(b,bj(d,"BaseURL")),g=bj(d,"Role")[0],h={role:gj(g)},i=wi(a,e,h),j=lj(bj(d,"ContentProtection"));Object.keys(j).length&&(i=wi(i,{contentProtection:j}));var k=jj(d),l=bj(d,"Representation"),m=wi(c,k);return zi(l.map(kj(i,f,m)))}},nj=function(b,c){return function(d,e){var f=ij(c,bj(d,"BaseURL")),g=gj(d),h=parseInt(g.id,10),i=a.isNaN(h)?e:h,j=wi(b,{periodIndex:i}),k=bj(d,"AdaptationSet"),l=jj(d);return zi(k.map(mj(j,f,l)))}},oj=function(a,b){void 0===b&&(b={});var c=b,d=c.manifestUri,e=void 0===d?"":d,f=c.NOW,g=void 0===f?Date.now():f,h=c.clientOffset,i=void 0===h?0:h,j=bj(a,"Period");if(!j.length)throw new Error(Ci.INVALID_NUMBER_OF_PERIOD);var k=gj(a),l=ij([e],bj(a,"BaseURL"));return k.sourceDuration=k.mediaPresentationDuration||0,k.NOW=g,k.clientOffset=i,zi(j.map(nj(k,l)))},pj=function(a){if(""===a)throw new Error(Ci.DASH_EMPTY_MANIFEST);var b=new ui,c=b.parseFromString(a,"application/xml"),d=c&&"MPD"===c.documentElement.tagName?c.documentElement:null;if(!d||d&&d.getElementsByTagName("parsererror").length>0)throw new Error(Ci.DASH_INVALID_XML);return d},qj=function(a){var b=bj(a,"UTCTiming")[0];if(!b)return null;var c=gj(b);switch(c.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":c.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":c.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":c.method="DIRECT",c.value=Date.parse(c.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Ci.UNSUPPORTED_UTC_TIMING_SCHEME)}return c},rj=function(a,b){return void 0===b&&(b={}),Ri(aj(oj(pj(a),b)),b.sidxMapping)},sj=function(a){return qj(pj(a))},tj=function(a){return a>>>0},uj=function(a){return("00"+a.toString(16)).slice(-2)},vj={toUnsigned:tj,toHexString:uj},wj=vj.toUnsigned,xj=function(a){return new Date(1e3*a-20828448e5)},yj=function(a){return{isLeading:(12&a[0])>>>2,dependsOn:3&a[0],isDependedOn:(192&a[1])>>>6,hasRedundancy:(48&a[1])>>>4,paddingValue:(14&a[1])>>>1,isNonSyncSample:1&a[1],degradationPriority:a[2]<<8|a[3]}},zj=function(a){var b="";return b+=String.fromCharCode(a[0]),b+=String.fromCharCode(a[1]),b+=String.fromCharCode(a[2]),b+=String.fromCharCode(a[3])},Aj=function a(b,c){var d,e,f,g,h,i=[];if(!c.length)return null;for(d=0;d<b.byteLength;)e=wj(b[d]<<24|b[d+1]<<16|b[d+2]<<8|b[d+3]),f=zj(b.subarray(d+4,d+8)),g=e>1?d+e:b.byteLength,f===c[0]&&(1===c.length?i.push(b.subarray(d+8,g)):(h=a(b.subarray(d+8,g),c.slice(1)),h.length&&(i=i.concat(h)))),d=g;return i},Bj=function(a){var b,c,d=new DataView(a.buffer,a.byteOffset,a.byteLength),e=[];for(b=0;b+4<a.length;b+=c)if(c=d.getUint32(b),b+=4,c<=0)e.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&a[b]){case 1:e.push("slice_layer_without_partitioning_rbsp");break;case 5:e.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:e.push("sei_rbsp");break;case 7:e.push("seq_parameter_set_rbsp");break;case 8:e.push("pic_parameter_set_rbsp");break;case 9:e.push("access_unit_delimiter_rbsp");break;default:e.push("UNKNOWN NAL - "+a[b]&31)}return e},Cj={avc1:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{dataReferenceIndex:b.getUint16(6),width:b.getUint16(24),height:b.getUint16(26),horizresolution:b.getUint16(28)+b.getUint16(30)/16,vertresolution:b.getUint16(32)+b.getUint16(34)/16,frameCount:b.getUint16(40),depth:b.getUint16(74),config:oi(a.subarray(78,a.byteLength))}},avcC:function(a){var b,c,d,e,f=new DataView(a.buffer,a.byteOffset,a.byteLength),g={configurationVersion:a[0],avcProfileIndication:a[1],profileCompatibility:a[2],avcLevelIndication:a[3],lengthSizeMinusOne:3&a[4],sps:[],pps:[]},h=31&a[5];for(d=6,e=0;e<h;e++)c=f.getUint16(d),d+=2,g.sps.push(new Uint8Array(a.subarray(d,d+c))),d+=c;for(b=a[d],d++,e=0;e<b;e++)c=f.getUint16(d),d+=2,g.pps.push(new Uint8Array(a.subarray(d,d+c))),d+=c;return g},btrt:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{bufferSizeDB:b.getUint32(0),maxBitrate:b.getUint32(4),avgBitrate:b.getUint32(8)}},esds:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),esId:a[6]<<8|a[7],streamPriority:31&a[8],decoderConfig:{objectProfileIndication:a[11],streamType:a[12]>>>2&63,bufferSize:a[13]<<16|a[14]<<8|a[15],maxBitrate:a[16]<<24|a[17]<<16|a[18]<<8|a[19],avgBitrate:a[20]<<24|a[21]<<16|a[22]<<8|a[23],decoderConfigDescriptor:{tag:a[24],length:a[25],audioObjectType:a[26]>>>3&31,samplingFrequencyIndex:(7&a[26])<<1|a[27]>>>7&1,channelConfiguration:a[27]>>>3&15}}}},ftyp:function(a){for(var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c={majorBrand:zj(a.subarray(0,4)),minorVersion:b.getUint32(4),compatibleBrands:[]},d=8;d<a.byteLength;)c.compatibleBrands.push(zj(a.subarray(d,d+4))),d+=4;return c},dinf:function(a){return{boxes:oi(a)}},dref:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),dataReferences:oi(a.subarray(8))}},hdlr:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c={version:b.getUint8(0),flags:new Uint8Array(a.subarray(1,4)),handlerType:zj(a.subarray(8,12)),name:""},d=8;for(d=24;d<a.byteLength;d++){if(0===a[d]){d++;break}c.name+=String.fromCharCode(a[d])}return c.name=decodeURIComponent(escape(c.name)),c},mdat:function(a){return{byteLength:a.byteLength,nals:Bj(a)}},mdhd:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d=4,e={version:c.getUint8(0),flags:new Uint8Array(a.subarray(1,4)),language:""};return 1===e.version?(d+=4,e.creationTime=xj(c.getUint32(d)),d+=8,e.modificationTime=xj(c.getUint32(d)),d+=4,e.timescale=c.getUint32(d),d+=8,e.duration=c.getUint32(d)):(e.creationTime=xj(c.getUint32(d)),d+=4,e.modificationTime=xj(c.getUint32(d)),d+=4,e.timescale=c.getUint32(d),d+=4,e.duration=c.getUint32(d)),d+=4,b=c.getUint16(d),e.language+=String.fromCharCode((b>>10)+96),e.language+=String.fromCharCode(((992&b)>>5)+96),e.language+=String.fromCharCode((31&b)+96),e},mdia:function(a){return{boxes:oi(a)}},mfhd:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),sequenceNumber:a[4]<<24|a[5]<<16|a[6]<<8|a[7]}},minf:function(a){return{boxes:oi(a)}},mp4a:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c={dataReferenceIndex:b.getUint16(6),channelcount:b.getUint16(16),samplesize:b.getUint16(18),samplerate:b.getUint16(24)+b.getUint16(26)/65536};return a.byteLength>28&&(c.streamDescriptor=oi(a.subarray(28))[0]),c},moof:function(a){return{boxes:oi(a)}},moov:function(a){return{boxes:oi(a)}},mvex:function(a){return{boxes:oi(a)}},mvhd:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c=4,d={version:b.getUint8(0),flags:new Uint8Array(a.subarray(1,4))};return 1===d.version?(c+=4,d.creationTime=xj(b.getUint32(c)),c+=8,d.modificationTime=xj(b.getUint32(c)),c+=4,d.timescale=b.getUint32(c),c+=8,d.duration=b.getUint32(c)):(d.creationTime=xj(b.getUint32(c)),c+=4,d.modificationTime=xj(b.getUint32(c)),c+=4,d.timescale=b.getUint32(c),c+=4,d.duration=b.getUint32(c)),c+=4,d.rate=b.getUint16(c)+b.getUint16(c+2)/16,c+=4,d.volume=b.getUint8(c)+b.getUint8(c+1)/8,c+=2,c+=2,c+=8,d.matrix=new Uint32Array(a.subarray(c,c+36)),c+=36,c+=24,d.nextTrackId=b.getUint32(c),d},pdin:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{version:b.getUint8(0),flags:new Uint8Array(a.subarray(1,4)),rate:b.getUint32(4),initialDelay:b.getUint32(8)}},sdtp:function(a){var b,c={version:a[0],flags:new Uint8Array(a.subarray(1,4)),samples:[]};for(b=4;b<a.byteLength;b++)c.samples.push({dependsOn:(48&a[b])>>4,isDependedOn:(12&a[b])>>2,hasRedundancy:3&a[b]});return c},sidx:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d={version:a[0],flags:new Uint8Array(a.subarray(1,4)),references:[],referenceId:c.getUint32(4),timescale:c.getUint32(8),earliestPresentationTime:c.getUint32(12),firstOffset:c.getUint32(16)},e=c.getUint16(22);for(b=24;e;b+=12,e--)d.references.push({referenceType:(128&a[b])>>>7,referencedSize:2147483647&c.getUint32(b),subsegmentDuration:c.getUint32(b+4),startsWithSap:!!(128&a[b+8]),sapType:(112&a[b+8])>>>4,sapDeltaTime:268435455&c.getUint32(b+8)});return d},smhd:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),balance:a[4]+a[5]/256}},stbl:function(a){return{boxes:oi(a)}},stco:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d={version:a[0],flags:new Uint8Array(a.subarray(1,4)),chunkOffsets:[]},e=c.getUint32(4);for(b=8;e;b+=4,e--)d.chunkOffsets.push(c.getUint32(b));return d},stsc:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d=c.getUint32(4),e={version:a[0],flags:new Uint8Array(a.subarray(1,4)),sampleToChunks:[]};for(b=8;d;b+=12,d--)e.sampleToChunks.push({firstChunk:c.getUint32(b),samplesPerChunk:c.getUint32(b+4),sampleDescriptionIndex:c.getUint32(b+8)});return e},stsd:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),sampleDescriptions:oi(a.subarray(8))}},stsz:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d={version:a[0],flags:new Uint8Array(a.subarray(1,4)),sampleSize:c.getUint32(4),entries:[]};for(b=12;b<a.byteLength;b+=4)d.entries.push(c.getUint32(b));return d},stts:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d={version:a[0],flags:new Uint8Array(a.subarray(1,4)),timeToSamples:[]},e=c.getUint32(4);for(b=8;e;b+=8,e--)d.timeToSamples.push({sampleCount:c.getUint32(b),sampleDelta:c.getUint32(b+4)});return d},styp:function(a){return Cj.ftyp(a)},tfdt:function(a){var b={version:a[0],flags:new Uint8Array(a.subarray(1,4)),baseMediaDecodeTime:wj(a[4]<<24|a[5]<<16|a[6]<<8|a[7])};return 1===b.version&&(b.baseMediaDecodeTime*=Math.pow(2,32),b.baseMediaDecodeTime+=wj(a[8]<<24|a[9]<<16|a[10]<<8|a[11])),b},tfhd:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d={version:a[0],flags:new Uint8Array(a.subarray(1,4)),trackId:c.getUint32(4)},e=1&d.flags[2],f=2&d.flags[2],g=8&d.flags[2],h=16&d.flags[2],i=32&d.flags[2],j=65536&d.flags[0],k=131072&d.flags[0];return b=8,e&&(b+=4,d.baseDataOffset=c.getUint32(12),b+=4),f&&(d.sampleDescriptionIndex=c.getUint32(b),b+=4),g&&(d.defaultSampleDuration=c.getUint32(b),b+=4),h&&(d.defaultSampleSize=c.getUint32(b),b+=4),i&&(d.defaultSampleFlags=c.getUint32(b)),j&&(d.durationIsEmpty=!0),!e&&k&&(d.baseDataOffsetIsMoof=!0),d},tkhd:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c=4,d={version:b.getUint8(0),flags:new Uint8Array(a.subarray(1,4))};return 1===d.version?(c+=4,d.creationTime=xj(b.getUint32(c)),c+=8,d.modificationTime=xj(b.getUint32(c)),c+=4,d.trackId=b.getUint32(c),c+=4,c+=8,d.duration=b.getUint32(c)):(d.creationTime=xj(b.getUint32(c)),c+=4,d.modificationTime=xj(b.getUint32(c)),c+=4,d.trackId=b.getUint32(c),c+=4,c+=4,d.duration=b.getUint32(c)),c+=4,c+=8,d.layer=b.getUint16(c),c+=2,d.alternateGroup=b.getUint16(c),c+=2,d.volume=b.getUint8(c)+b.getUint8(c+1)/8,c+=2,c+=2,d.matrix=new Uint32Array(a.subarray(c,c+36)),c+=36,d.width=b.getUint16(c)+b.getUint16(c+2)/65536,c+=4,d.height=b.getUint16(c)+b.getUint16(c+2)/65536,d},traf:function(a){return{boxes:oi(a)}},trak:function(a){return{boxes:oi(a)}},trex:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),trackId:b.getUint32(4),defaultSampleDescriptionIndex:b.getUint32(8),defaultSampleDuration:b.getUint32(12),defaultSampleSize:b.getUint32(16),sampleDependsOn:3&a[20],sampleIsDependedOn:(192&a[21])>>6,sampleHasRedundancy:(48&a[21])>>4,samplePaddingValue:(14&a[21])>>1,sampleIsDifferenceSample:!!(1&a[21]),sampleDegradationPriority:b.getUint16(22)}},trun:function(a){var b,c={version:a[0],flags:new Uint8Array(a.subarray(1,4)),samples:[]},d=new DataView(a.buffer,a.byteOffset,a.byteLength),e=1&c.flags[2],f=4&c.flags[2],g=1&c.flags[1],h=2&c.flags[1],i=4&c.flags[1],j=8&c.flags[1],k=d.getUint32(4),l=8;for(e&&(c.dataOffset=d.getInt32(l),l+=4),f&&k&&(b={flags:yj(a.subarray(l,l+4))},l+=4,g&&(b.duration=d.getUint32(l),l+=4),h&&(b.size=d.getUint32(l),l+=4),j&&(b.compositionTimeOffset=d.getUint32(l),l+=4),c.samples.push(b),k--);k--;)b={},g&&(b.duration=d.getUint32(l),l+=4),h&&(b.size=d.getUint32(l),l+=4),i&&(b.flags=yj(a.subarray(l,l+4)),l+=4),j&&(b.compositionTimeOffset=d.getUint32(l),l+=4),c.samples.push(b);return c},"url ":function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4))}},vmhd:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),graphicsmode:b.getUint16(4),opcolor:new Uint16Array([b.getUint16(6),b.getUint16(8),b.getUint16(10)])}}};oi=function(a){for(var b,c,d,e,f,g=0,h=[],i=new ArrayBuffer(a.length),j=new Uint8Array(i),k=0;k<a.length;++k)j[k]=a[k];for(b=new DataView(i);g<a.byteLength;)c=b.getUint32(g),d=zj(a.subarray(g+4,g+8)),e=c>1?g+c:a.byteLength,f=(Cj[d]||function(a){return{data:a}})(a.subarray(g+8,e)),f.size=c,f.type=d,h.push(f),g=e;return h},pi=function(a,b){var c;return b=b||0,c=new Array(2*b+1).join(" "),a.map(function(a,d){return c+a.type+"\n"+Object.keys(a).filter(function(a){return"type"!==a&&"boxes"!==a}).map(function(b){var d=c+"  "+b+": ",e=a[b];if(e instanceof Uint8Array||e instanceof Uint32Array){
var f=Array.prototype.slice.call(new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).map(function(a){return" "+("00"+a.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return f?1===f.length?d+"<"+f.join("").slice(1)+">":d+"<\n"+f.map(function(a){return c+"  "+a}).join("\n")+"\n"+c+"  >":d+"<>"}return d+JSON.stringify(e,null,2).split("\n").map(function(a,b){return 0===b?a:c+"  "+a}).join("\n")}).join("\n")+(a.boxes?"\n"+pi(a.boxes,b+1):"")}).join("\n")};var Dj,Ej,Fj,Gj,Hj,Ij={inspect:oi,textify:pi,parseType:zj,findBox:Aj,parseTraf:Cj.traf,parseTfdt:Cj.tfdt,parseHdlr:Cj.hdlr,parseTfhd:Cj.tfhd,parseTrun:Cj.trun,parseSidx:Cj.sidx},Jj=vj.toUnsigned,Kj=vj.toHexString;Dj=function(a){var b={},c=Ij.findBox(a,["moov","trak"]);return c.reduce(function(a,b){var c,d,e,f,g;return(c=Ij.findBox(b,["tkhd"])[0])?(d=c[0],e=0===d?12:20,f=Jj(c[e]<<24|c[e+1]<<16|c[e+2]<<8|c[e+3]),(g=Ij.findBox(b,["mdia","mdhd"])[0])?(d=g[0],e=0===d?12:20,a[f]=Jj(g[e]<<24|g[e+1]<<16|g[e+2]<<8|g[e+3]),a):null):null},b)},Ej=function(a,b){var c,d,e;return c=Ij.findBox(b,["moof","traf"]),d=[].concat.apply([],c.map(function(b){return Ij.findBox(b,["tfhd"]).map(function(c){var d,e,f;return d=Jj(c[4]<<24|c[5]<<16|c[6]<<8|c[7]),e=a[d]||9e4,f=Ij.findBox(b,["tfdt"]).map(function(a){var b,c;return b=a[0],c=Jj(a[4]<<24|a[5]<<16|a[6]<<8|a[7]),1===b&&(c*=Math.pow(2,32),c+=Jj(a[8]<<24|a[9]<<16|a[10]<<8|a[11])),c})[0],f=f||1/0,f/e})})),e=Math.min.apply(null,d),isFinite(e)?e:0},Fj=function(a,b){var c,d=Ij.findBox(b,["moof","traf"]),e=0,f=0;if(d&&d.length)for(var g=Ij.parseTraf(d[0]),h=0;h<g.boxes.length;h++)"tfhd"===g.boxes[h].type?c=g.boxes[h].trackId:"tfdt"===g.boxes[h].type?e=g.boxes[h].baseMediaDecodeTime:"trun"===g.boxes[h].type&&g.boxes[h].samples.length&&(f=g.boxes[h].samples[0].compositionTimeOffset||0);var i=a[c]||9e4;return(e+f)/i},Gj=function(a){var b=Ij.findBox(a,["moov","trak"]),c=[];return b.forEach(function(a){var b=Ij.findBox(a,["mdia","hdlr"]),d=Ij.findBox(a,["tkhd"]);b.forEach(function(a,b){var e,f,g,h=Ij.parseType(a.subarray(8,12)),i=d[b];"vide"===h&&(e=new DataView(i.buffer,i.byteOffset,i.byteLength),f=e.getUint8(0),g=0===f?e.getUint32(12):e.getUint32(20),c.push(g))})}),c},Hj=function(a){var b=Ij.findBox(a,["moov","trak"]),c=[];return b.forEach(function(a){var b,d,e={},f=Ij.findBox(a,["tkhd"])[0];f&&(b=new DataView(f.buffer,f.byteOffset,f.byteLength),d=b.getUint8(0),e.id=0===d?b.getUint32(12):b.getUint32(20));var g=Ij.findBox(a,["mdia","hdlr"])[0];if(g){var h=Ij.parseType(g.subarray(8,12));"vide"===h?e.type="video":"soun"===h?e.type="audio":e.type=h}var i=Ij.findBox(a,["mdia","minf","stbl","stsd"])[0];if(i){var j=i.subarray(8);e.codec=Ij.parseType(j.subarray(4,8));var k,l,m=Ij.findBox(j,[e.codec])[0];m&&(/^[a-z]vc[1-9]$/i.test(e.codec)?(k=m.subarray(78),l=Ij.parseType(k.subarray(4,8)),"avcC"===l&&k.length>11?(e.codec+=".",e.codec+=Kj(k[9]),e.codec+=Kj(k[10]),e.codec+=Kj(k[11])):e.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(e.codec)&&(k=m.subarray(28),l=Ij.parseType(k.subarray(4,8)),"esds"===l&&k.length>20&&0!==k[19]?(e.codec+="."+Kj(k[19]),e.codec+="."+Kj(k[20]>>>2&63).replace(/^0/,"")):e.codec="mp4a.40.2"))}var n=Ij.findBox(a,["mdia","mdhd"])[0];if(n&&f){var o=0===d?12:20;e.timescale=Jj(n[o]<<24|n[o+1]<<16|n[o+2]<<8|n[o+3])}c.push(e)}),c};var Lj={findBox:Ij.findBox,parseType:Ij.parseType,timescale:Dj,startTime:Ej,compositionStartTime:Fj,videoTrackIds:Gj,tracks:Hj},Mj=4,Nj=128,Oj=function(a){for(var b=0,c={payloadType:-1,payloadSize:0},d=0,e=0;b<a.byteLength&&a[b]!==Nj;){for(;255===a[b];)d+=255,b++;for(d+=a[b++];255===a[b];)e+=255,b++;if(e+=a[b++],!c.payload&&d===Mj){c.payloadType=d,c.payloadSize=e,c.payload=a.subarray(b,b+e);var f=String.fromCharCode(c.payload[3],c.payload[4],c.payload[5],c.payload[6]);if("GA94"===f)break;c.payload=void 0}b+=e,d=0,e=0}return c},Pj=function(a){return 181!==a.payload[0]?null:49!==(a.payload[1]<<8|a.payload[2])?null:"GA94"!==String.fromCharCode(a.payload[3],a.payload[4],a.payload[5],a.payload[6])?null:3!==a.payload[7]?null:a.payload.subarray(8,a.payload.length-1)},Qj=function(a,b){var c,d,e,f,g=[];if(!(64&b[0]))return g;for(d=31&b[0],c=0;c<d;c++)e=3*c,f={type:3&b[e+2],pts:a},4&b[e+2]&&(f.ccData=b[e+3]<<8|b[e+4],g.push(f));return g},Rj=function(a){for(var b,c,d=a.byteLength,e=[],f=1;f<d-2;)0===a[f]&&0===a[f+1]&&3===a[f+2]?(e.push(f+2),f+=2):f++;if(0===e.length)return a;b=d-e.length,c=new Uint8Array(b);var g=0;for(f=0;f<b;g++,f++)g===e[0]&&(g++,e.shift()),c[f]=a[g];return c},Sj={parseSei:Oj,parseUserData:Pj,parseCaptionPackets:Qj,discardEmulationPreventionBytes:Rj,USER_DATA_REGISTERED_ITU_T_T35:Mj},Tj=function(){this.init=function(){var a={};this.on=function(b,c){a[b]||(a[b]=[]),a[b]=a[b].concat(c)},this.off=function(b,c){var d;return!!a[b]&&(d=a[b].indexOf(c),a[b]=a[b].slice(),a[b].splice(d,1),d>-1)},this.trigger=function(b){var c,d,e,f;if(c=a[b])if(2===arguments.length)for(e=c.length,d=0;d<e;++d)c[d].call(this,arguments[1]);else{for(f=[],d=arguments.length,d=1;d<arguments.length;++d)f.push(arguments[d]);for(e=c.length,d=0;d<e;++d)c[d].apply(this,f)}},this.dispose=function(){a={}}}};Tj.prototype.pipe=function(a){return this.on("data",function(b){a.push(b)}),this.on("done",function(b){a.flush(b)}),this.on("partialdone",function(b){a.partialFlush(b)}),this.on("endedtimeline",function(b){a.endTimeline(b)}),this.on("reset",function(b){a.reset(b)}),a},Tj.prototype.push=function(a){this.trigger("data",a)},Tj.prototype.flush=function(a){this.trigger("done",a)},Tj.prototype.partialFlush=function(a){this.trigger("partialdone",a)},Tj.prototype.endTimeline=function(a){this.trigger("endedtimeline",a)},Tj.prototype.reset=function(a){this.trigger("reset",a)};var Uj=Tj,Vj=function a(){a.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new _j(0,0),new _j(0,1),new _j(1,0),new _j(1,1)],this.reset(),this.ccStreams_.forEach(function(a){a.on("data",this.trigger.bind(this,"data")),a.on("partialdone",this.trigger.bind(this,"partialdone")),a.on("done",this.trigger.bind(this,"done"))},this)};Vj.prototype=new Uj,Vj.prototype.push=function(a){var b,c,d;if("sei_rbsp"===a.nalUnitType&&(b=Sj.parseSei(a.escapedRBSP),b.payloadType===Sj.USER_DATA_REGISTERED_ITU_T_T35&&(c=Sj.parseUserData(b)))){if(a.dts<this.latestDts_)return void(this.ignoreNextEqualDts_=!0);if(a.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));d=Sj.parseCaptionPackets(a.pts,c),this.captionPackets_=this.captionPackets_.concat(d),this.latestDts_!==a.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=a.dts}},Vj.prototype.flushCCStreams=function(a){this.ccStreams_.forEach(function(b){return"flush"===a?b.flush():b.partialFlush()},this)},Vj.prototype.flushStream=function(a){return this.captionPackets_.length?(this.captionPackets_.forEach(function(a,b){a.presortIndex=b}),this.captionPackets_.sort(function(a,b){return a.pts===b.pts?a.presortIndex-b.presortIndex:a.pts-b.pts}),this.captionPackets_.forEach(function(a){a.type<2&&this.dispatchCea608Packet(a)},this),this.captionPackets_.length=0,void this.flushCCStreams(a)):void this.flushCCStreams(a)},Vj.prototype.flush=function(){return this.flushStream("flush")},Vj.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Vj.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(a){a.reset()})},Vj.prototype.dispatchCea608Packet=function(a){this.setsTextOrXDSActive(a)?this.activeCea608Channel_[a.type]=null:this.setsChannel1Active(a)?this.activeCea608Channel_[a.type]=0:this.setsChannel2Active(a)&&(this.activeCea608Channel_[a.type]=1),null!==this.activeCea608Channel_[a.type]&&this.ccStreams_[(a.type<<1)+this.activeCea608Channel_[a.type]].push(a)},Vj.prototype.setsChannel1Active=function(a){return 4096===(30720&a.ccData)},Vj.prototype.setsChannel2Active=function(a){return 6144===(30720&a.ccData)},Vj.prototype.setsTextOrXDSActive=function(a){return 256===(28928&a.ccData)||4138===(30974&a.ccData)||6186===(30974&a.ccData)};var Wj={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Xj=function(a){return null===a?"":(a=Wj[a]||a,String.fromCharCode(a))},Yj=14,Zj=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],$j=function(){for(var a=[],b=Yj+1;b--;)a.push("");return a},_j=function a(b,c){a.prototype.init.call(this),this.field_=b||0,this.dataChannel_=c||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(a){var b,c,d,e,f;if(b=32639&a.ccData,b===this.lastControlCode_)return void(this.lastControlCode_=null);if(4096===(61440&b)?this.lastControlCode_=b:b!==this.PADDING_&&(this.lastControlCode_=null),d=b>>>8,e=255&b,b!==this.PADDING_)if(b===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(b===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(a.pts),this.flushDisplayed(a.pts),c=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=c,this.startPts_=a.pts;else if(b===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(a.pts);else if(b===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(a.pts);else if(b===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(a.pts);else if(b===this.CARRIAGE_RETURN_)this.clearFormatting(a.pts),this.flushDisplayed(a.pts),this.shiftRowsUp_(),this.startPts_=a.pts;else if(b===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(b===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(a.pts),this.displayed_=$j();else if(b===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=$j();else if(b===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(a.pts),this.displayed_=$j()),this.mode_="paintOn",this.startPts_=a.pts;else if(this.isSpecialCharacter(d,e))d=(3&d)<<8,f=Xj(d|e),this[this.mode_](a.pts,f),this.column_++;else if(this.isExtCharacter(d,e))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),d=(3&d)<<8,f=Xj(d|e),this[this.mode_](a.pts,f),this.column_++;else if(this.isMidRowCode(d,e))this.clearFormatting(a.pts),this[this.mode_](a.pts," "),this.column_++,14===(14&e)&&this.addFormatting(a.pts,["i"]),1===(1&e)&&this.addFormatting(a.pts,["u"]);else if(this.isOffsetControlCode(d,e))this.column_+=3&e;else if(this.isPAC(d,e)){var g=Zj.indexOf(7968&b);"rollUp"===this.mode_&&(g-this.rollUpRows_+1<0&&(g=this.rollUpRows_-1),this.setRollUp(a.pts,g)),g!==this.row_&&(this.clearFormatting(a.pts),this.row_=g),1&e&&this.formatting_.indexOf("u")===-1&&this.addFormatting(a.pts,["u"]),16===(16&b)&&(this.column_=4*((14&b)>>1)),this.isColorPAC(e)&&14===(14&e)&&this.addFormatting(a.pts,["i"])}else this.isNormalChar(d)&&(0===e&&(e=null),f=Xj(d),f+=Xj(e),this[this.mode_](a.pts,f),this.column_+=f.length)}};_j.prototype=new Uj,_j.prototype.flushDisplayed=function(a){var b=this.displayed_.map(function(a){try{return a.trim()}catch(a){return""}}).join("\n").replace(/^\n+|\n+$/g,"");b.length&&this.trigger("data",{startPts:this.startPts_,endPts:a,text:b,stream:this.name_})},_j.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=$j(),this.nonDisplayed_=$j(),this.lastControlCode_=null,this.column_=0,this.row_=Yj,this.rollUpRows_=2,this.formatting_=[]},_j.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},_j.prototype.isSpecialCharacter=function(a,b){return a===this.EXT_&&b>=48&&b<=63},_j.prototype.isExtCharacter=function(a,b){return(a===this.EXT_+1||a===this.EXT_+2)&&b>=32&&b<=63},_j.prototype.isMidRowCode=function(a,b){return a===this.EXT_&&b>=32&&b<=47},_j.prototype.isOffsetControlCode=function(a,b){return a===this.OFFSET_&&b>=33&&b<=35},_j.prototype.isPAC=function(a,b){return a>=this.BASE_&&a<this.BASE_+8&&b>=64&&b<=127},_j.prototype.isColorPAC=function(a){return a>=64&&a<=79||a>=96&&a<=127},_j.prototype.isNormalChar=function(a){return a>=32&&a<=127},_j.prototype.setRollUp=function(a,b){if("rollUp"!==this.mode_&&(this.row_=Yj,this.mode_="rollUp",this.flushDisplayed(a),this.nonDisplayed_=$j(),this.displayed_=$j()),void 0!==b&&b!==this.row_)for(var c=0;c<this.rollUpRows_;c++)this.displayed_[b-c]=this.displayed_[this.row_-c],this.displayed_[this.row_-c]="";void 0===b&&(b=this.row_),this.topRow_=b-this.rollUpRows_+1},_j.prototype.addFormatting=function(a,b){this.formatting_=this.formatting_.concat(b);var c=b.reduce(function(a,b){return a+"<"+b+">"},"");this[this.mode_](a,c)},_j.prototype.clearFormatting=function(a){if(this.formatting_.length){var b=this.formatting_.reverse().reduce(function(a,b){return a+"</"+b+">"},"");this.formatting_=[],this[this.mode_](a,b)}},_j.prototype.popOn=function(a,b){var c=this.nonDisplayed_[this.row_];c+=b,this.nonDisplayed_[this.row_]=c},_j.prototype.rollUp=function(a,b){var c=this.displayed_[this.row_];c+=b,this.displayed_[this.row_]=c},_j.prototype.shiftRowsUp_=function(){var a;for(a=0;a<this.topRow_;a++)this.displayed_[a]="";for(a=this.row_+1;a<Yj+1;a++)this.displayed_[a]="";for(a=this.topRow_;a<this.row_;a++)this.displayed_[a]=this.displayed_[a+1];this.displayed_[this.row_]=""},_j.prototype.paintOn=function(a,b){var c=this.displayed_[this.row_];c+=b,this.displayed_[this.row_]=c};var ak={CaptionStream:Vj,Cea608Stream:_j},bk=Sj.discardEmulationPreventionBytes,ck=ak.CaptionStream,dk=function(a,b){for(var c=a,d=0;d<b.length;d++){var e=b[d];if(c<e.size)return e;c-=e.size}return null},ek=function(a,b,c){var d,e,f,g,h=new DataView(a.buffer,a.byteOffset,a.byteLength),i=[];for(e=0;e+4<a.length;e+=f)if(f=h.getUint32(e),e+=4,!(f<=0))switch(31&a[e]){case 6:var j=a.subarray(e+1,e+1+f),k=dk(e,b);if(d={nalUnitType:"sei_rbsp",size:f,data:j,escapedRBSP:bk(j),trackId:c},k)d.pts=k.pts,d.dts=k.dts,g=k;else{if(!g)break;d.pts=g.pts,d.dts=g.dts}i.push(d)}return i},fk=function(a,b,c){var d=b,e=c.defaultSampleDuration||0,f=c.defaultSampleSize||0,g=c.trackId,h=[];return a.forEach(function(a){var b=Ij.parseTrun(a),c=b.samples;c.forEach(function(a){void 0===a.duration&&(a.duration=e),void 0===a.size&&(a.size=f),a.trackId=g,a.dts=d,void 0===a.compositionTimeOffset&&(a.compositionTimeOffset=0),a.pts=d+a.compositionTimeOffset,d+=a.duration}),h=h.concat(c)}),h},gk=function(a,b){var c=Lj.findBox(a,["moof","traf"]),d=Lj.findBox(a,["mdat"]),e={},f=[];return d.forEach(function(a,b){var d=c[b];f.push({mdat:a,traf:d})}),f.forEach(function(a){var c,d,f=a.mdat,g=a.traf,h=Lj.findBox(g,["tfhd"]),i=Ij.parseTfhd(h[0]),j=i.trackId,k=Lj.findBox(g,["tfdt"]),l=k.length>0?Ij.parseTfdt(k[0]).baseMediaDecodeTime:0,m=Lj.findBox(g,["trun"]);b===j&&m.length>0&&(c=fk(m,l,i),d=ek(f,c,j),e[j]||(e[j]=[]),e[j]=e[j].concat(d))}),e},hk=function(a,b,c){var d;return null===b?null:(d=gk(a,b),{seiNals:d[b],timescale:c})},ik=function(){var a,b,c,d,e,f,g=!1;this.isInitialized=function(){return g},this.init=function(b){a=new ck,g=!0,f=!!b&&b.isPartial,a.on("data",function(a){a.startTime=a.startPts/d,a.endTime=a.endPts/d,e.captions.push(a),e.captionStreams[a.stream]=!0})},this.isNewInit=function(a,b){return!(a&&0===a.length||b&&"object"==typeof b&&0===Object.keys(b).length)&&(c!==a[0]||d!==b[c])},this.parse=function(a,f,g){var h;if(!this.isInitialized())return null;if(!f||!g)return null;if(this.isNewInit(f,g))c=f[0],d=g[c];else if(null===c||!d)return b.push(a),null;for(;b.length>0;){var i=b.shift();this.parse(i,f,g)}return h=hk(a,c,d),null!==h&&h.seiNals?(this.pushNals(h.seiNals),this.flushStream(),e):null},this.pushNals=function(b){return this.isInitialized()&&b&&0!==b.length?void b.forEach(function(b){a.push(b)}):null},this.flushStream=function(){return this.isInitialized()?void(f?a.partialFlush():a.flush()):null},this.clearParsedCaptions=function(){e.captions=[],e.captionStreams={}},this.resetCaptionStream=function(){return this.isInitialized()?void a.reset():null},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){b=[],c=null,d=null,e?this.clearParsedCaptions():e={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()},jk=ik,kk={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},lk=8589934592,mk=4294967296,nk="shared",ok=function(a,b){var c=1;for(a>b&&(c=-1);Math.abs(b-a)>mk;)a+=c*lk;return a},pk=function a(b){var c,d;a.prototype.init.call(this),this.type_=b||nk,this.push=function(a){this.type_!==nk&&a.type!==this.type_||(void 0===d&&(d=a.dts),a.dts=ok(a.dts,d),a.pts=ok(a.pts,d),c=a.dts,this.trigger("data",a))},this.flush=function(){d=c,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){d=void 0,c=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};pk.prototype=new Uj;var qk,rk,sk,tk,uk,vk,wk,xk={TimestampRolloverStream:pk,handleRollover:ok},yk=function(a){var b=31&a[1];return b<<=8,b|=a[2]},zk=function(a){return!!(64&a[1])},Ak=function(a){var b=0;return(48&a[3])>>>4>1&&(b+=a[4]+1),b},Bk=function(a,b){var c=yk(a);return 0===c?"pat":c===b?"pmt":b?"pes":null},Ck=function(a){var b=zk(a),c=4+Ak(a);return b&&(c+=a[c]+1),(31&a[c+10])<<8|a[c+11]},Dk=function(a){var b={},c=zk(a),d=4+Ak(a);if(c&&(d+=a[d]+1),1&a[d+5]){var e,f,g;e=(15&a[d+1])<<8|a[d+2],f=3+e-4,g=(15&a[d+10])<<8|a[d+11];for(var h=12+g;h<f;){var i=d+h;b[(31&a[i+1])<<8|a[i+2]]=a[i],h+=((15&a[i+3])<<8|a[i+4])+5}return b}},Ek=function(a,b){var c=yk(a),d=b[c];switch(d){case kk.H264_STREAM_TYPE:return"video";case kk.ADTS_STREAM_TYPE:return"audio";case kk.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},Fk=function(a){var b=zk(a);if(!b)return null;var c=4+Ak(a);if(c>=a.byteLength)return null;var d,e=null;return d=a[c+7],192&d&&(e={},e.pts=(14&a[c+9])<<27|(255&a[c+10])<<20|(254&a[c+11])<<12|(255&a[c+12])<<5|(254&a[c+13])>>>3,e.pts*=4,e.pts+=(6&a[c+13])>>>1,e.dts=e.pts,64&d&&(e.dts=(14&a[c+14])<<27|(255&a[c+15])<<20|(254&a[c+16])<<12|(255&a[c+17])<<5|(254&a[c+18])>>>3,e.dts*=4,e.dts+=(6&a[c+18])>>>1)),e},Gk=function(a){switch(a){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Hk=function(a){for(var b,c=4+Ak(a),d=a.subarray(c),e=0,f=0,g=!1;f<d.byteLength-3;f++)if(1===d[f+2]){e=f+5;break}for(;e<d.byteLength;)switch(d[e]){case 0:if(0!==d[e-1]){e+=2;break}if(0!==d[e-2]){e++;break}f+3!==e-2&&(b=Gk(31&d[f+3]),"slice_layer_without_partitioning_rbsp_idr"===b&&(g=!0));do e++;while(1!==d[e]&&e<d.length);f=e-2,e+=3;break;case 1:if(0!==d[e-1]||0!==d[e-2]){e+=3;break}b=Gk(31&d[f+3]),"slice_layer_without_partitioning_rbsp_idr"===b&&(g=!0),f=e-2,e+=3;break;default:e+=3}return d=d.subarray(f),e-=f,f=0,d&&d.byteLength>3&&(b=Gk(31&d[f+3]),"slice_layer_without_partitioning_rbsp_idr"===b&&(g=!0)),g},Ik={parseType:Bk,parsePat:Ck,parsePmt:Dk,parsePayloadUnitStartIndicator:zk,parsePesType:Ek,parsePesTime:Fk,videoPacketContainsKeyFrame:Hk},Jk=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Kk=function(a){return a[0]==="I".charCodeAt(0)&&a[1]==="D".charCodeAt(0)&&a[2]==="3".charCodeAt(0)},Lk=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},Mk=function(a,b,c){var d,e="";for(d=b;d<c;d++)e+="%"+("00"+a[d].toString(16)).slice(-2);return e},Nk=function(a,b,c){return unescape(Mk(a,b,c))},Ok=function(a,b){var c=a[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9],d=a[b+5],e=(16&d)>>4;return e?c+20:c+10},Pk=function(a,b){var c=(224&a[b+5])>>5,d=a[b+4]<<3,e=6144&a[b+3];return e|d|c},Qk=function(a,b){return a[b]==="I".charCodeAt(0)&&a[b+1]==="D".charCodeAt(0)&&a[b+2]==="3".charCodeAt(0)?"timed-metadata":a[b]&!0&&240===(240&a[b+1])?"audio":null},Rk=function(a){for(var b=0;b+5<a.length;){if(255===a[b]&&240===(246&a[b+1]))return Jk[(60&a[b+2])>>>2];b++}return null},Sk=function(a){var b,c,d,e;b=10,64&a[5]&&(b+=4,b+=Lk(a.subarray(10,14)));do{if(c=Lk(a.subarray(b+4,b+8)),c<1)return null;if(e=String.fromCharCode(a[b],a[b+1],a[b+2],a[b+3]),"PRIV"===e){d=a.subarray(b+10,b+c+10);for(var f=0;f<d.byteLength;f++)if(0===d[f]){var g=Nk(d,0,f);if("com.apple.streaming.transportStreamTimestamp"===g){var h=d.subarray(f+1),i=(1&h[3])<<30|h[4]<<22|h[5]<<14|h[6]<<6|h[7]>>>2;return i*=4,i+=3&h[7]}break}}b+=10,b+=c}while(b<a.byteLength);return null},Tk={isLikelyAacData:Kk,parseId3TagSize:Ok,parseAdtsSize:Pk,parseType:Qk,parseSampleRate:Rk,parseAacTimestamp:Sk},Uk=9e4;qk=function(a){return a*Uk},rk=function(a,b){return a*b},sk=function(a){return a/Uk},tk=function(a,b){return a/b},uk=function(a,b){return qk(tk(a,b))},vk=function(a,b){return rk(sk(a),b)},wk=function(a,b,c){return sk(c?a:a-b)};var Vk={ONE_SECOND_IN_TS:Uk,secondsToVideoTs:qk,secondsToAudioTs:rk,videoTsToSeconds:sk,audioTsToSeconds:tk,audioTsToVideoTs:uk,videoTsToAudioTs:vk,metadataTsToSeconds:wk},Wk=xk.handleRollover,Xk={};Xk.ts=Ik,Xk.aac=Tk;var Yk=Vk.ONE_SECOND_IN_TS,Zk=188,$k=71,_k=function(a,b){for(var c,d,e=0,f=Zk;f<a.byteLength;)if(a[e]!==$k||a[f]!==$k)e++,f++;else{switch(c=a.subarray(e,f),d=Xk.ts.parseType(c,b.pid)){case"pat":b.pid||(b.pid=Xk.ts.parsePat(c));break;case"pmt":b.table||(b.table=Xk.ts.parsePmt(c))}if(b.pid&&b.table)return;e+=Zk,f+=Zk}},al=function(a,b,c){for(var d,e,f,g,h,i=0,j=Zk,k=!1;j<=a.byteLength;)if(a[i]!==$k||a[j]!==$k&&j!==a.byteLength)i++,j++;else{switch(d=a.subarray(i,j),e=Xk.ts.parseType(d,b.pid)){case"pes":f=Xk.ts.parsePesType(d,b.table),g=Xk.ts.parsePayloadUnitStartIndicator(d),"audio"===f&&g&&(h=Xk.ts.parsePesTime(d),h&&(h.type="audio",c.audio.push(h),k=!0))}if(k)break;i+=Zk,j+=Zk}for(j=a.byteLength,i=j-Zk,k=!1;i>=0;)if(a[i]!==$k||a[j]!==$k&&j!==a.byteLength)i--,j--;else{switch(d=a.subarray(i,j),e=Xk.ts.parseType(d,b.pid)){case"pes":f=Xk.ts.parsePesType(d,b.table),g=Xk.ts.parsePayloadUnitStartIndicator(d),"audio"===f&&g&&(h=Xk.ts.parsePesTime(d),h&&(h.type="audio",c.audio.push(h),k=!0))}if(k)break;i-=Zk,j-=Zk}},bl=function(a,b,c){for(var d,e,f,g,h,i,j,k,l=0,m=Zk,n=!1,o={data:[],size:0};m<a.byteLength;)if(a[l]!==$k||a[m]!==$k)l++,m++;else{switch(d=a.subarray(l,m),e=Xk.ts.parseType(d,b.pid)){case"pes":if(f=Xk.ts.parsePesType(d,b.table),g=Xk.ts.parsePayloadUnitStartIndicator(d),"video"===f&&(g&&!n&&(h=Xk.ts.parsePesTime(d),h&&(h.type="video",c.video.push(h),n=!0)),!c.firstKeyFrame)){if(g&&0!==o.size){for(i=new Uint8Array(o.size),j=0;o.data.length;)k=o.data.shift(),i.set(k,j),j+=k.byteLength;if(Xk.ts.videoPacketContainsKeyFrame(i)){var p=Xk.ts.parsePesTime(i);p&&(c.firstKeyFrame=p,c.firstKeyFrame.type="video")}o.size=0}o.data.push(d),o.size+=d.byteLength}}if(n&&c.firstKeyFrame)break;l+=Zk,m+=Zk}for(m=a.byteLength,l=m-Zk,n=!1;l>=0;)if(a[l]!==$k||a[m]!==$k)l--,m--;else{switch(d=a.subarray(l,m),e=Xk.ts.parseType(d,b.pid)){case"pes":f=Xk.ts.parsePesType(d,b.table),g=Xk.ts.parsePayloadUnitStartIndicator(d),"video"===f&&g&&(h=Xk.ts.parsePesTime(d),h&&(h.type="video",c.video.push(h),n=!0))}if(n)break;l-=Zk,m-=Zk}},cl=function(a,b){if(a.audio&&a.audio.length){var c=b;"undefined"==typeof c&&(c=a.audio[0].dts),a.audio.forEach(function(a){a.dts=Wk(a.dts,c),a.pts=Wk(a.pts,c),a.dtsTime=a.dts/Yk,a.ptsTime=a.pts/Yk})}if(a.video&&a.video.length){var d=b;if("undefined"==typeof d&&(d=a.video[0].dts),a.video.forEach(function(a){a.dts=Wk(a.dts,d),a.pts=Wk(a.pts,d),a.dtsTime=a.dts/Yk,a.ptsTime=a.pts/Yk}),a.firstKeyFrame){var e=a.firstKeyFrame;e.dts=Wk(e.dts,d),e.pts=Wk(e.pts,d),e.dtsTime=e.dts/Yk,e.ptsTime=e.dts/Yk}}},dl=function(a){for(var b,c=!1,d=0,e=null,f=null,g=0,h=0;a.length-h>=3;){var i=Xk.aac.parseType(a,h);switch(i){case"timed-metadata":if(a.length-h<10){c=!0;break}if(g=Xk.aac.parseId3TagSize(a,h),g>a.length){c=!0;break}null===f&&(b=a.subarray(h,h+g),f=Xk.aac.parseAacTimestamp(b)),h+=g;break;case"audio":if(a.length-h<7){c=!0;break}if(g=Xk.aac.parseAdtsSize(a,h),g>a.length){c=!0;break}null===e&&(b=a.subarray(h,h+g),e=Xk.aac.parseSampleRate(b)),d++,h+=g;break;default:h++}if(c)return null}if(null===e||null===f)return null;var j=Yk/e,k={audio:[{type:"audio",dts:f,pts:f},{type:"audio",dts:f+1024*d*j,pts:f+1024*d*j}]};return k},el=function(a){var b={pid:null,table:null},c={};_k(a,b);for(var d in b.table)if(b.table.hasOwnProperty(d)){var e=b.table[d];switch(e){case kk.H264_STREAM_TYPE:c.video=[],bl(a,b,c),0===c.video.length&&delete c.video;break;case kk.ADTS_STREAM_TYPE:c.audio=[],al(a,b,c),0===c.audio.length&&delete c.audio}}return c},fl=function(a,b){var c,d=Xk.aac.isLikelyAacData(a);return c=d?dl(a):el(a),c&&(c.audio||c.video)?(cl(c,b),c):null},gl={inspect:fl,parseAudioPes_:al},hl=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},il=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),jl=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},kl=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b},ll=function(){var a=[[[],[],[],[],[]],[[],[],[],[],[]]],b=a[0],c=a[1],d=b[4],e=c[4],f=void 0,g=void 0,h=void 0,i=[],j=[],k=void 0,l=void 0,m=void 0,n=void 0,o=void 0,p=void 0;for(f=0;f<256;f++)j[(i[f]=f<<1^283*(f>>7))^f]=f;for(g=h=0;!d[g];g^=k||1,h=j[h]||1)for(n=h^h<<1^h<<2^h<<3^h<<4,n=n>>8^255&n^99,d[g]=n,e[n]=g,m=i[l=i[k=i[g]]],p=16843009*m^65537*l^257*k^16843008*g,o=257*i[n]^16843008*n,f=0;f<4;f++)b[f][g]=o=o<<24^o>>>8,c[f][n]=p=p<<24^p>>>8;for(f=0;f<5;f++)b[f]=b[f].slice(0),c[f]=c[f].slice(0);return a},ml=null,nl=function(){function a(b){hl(this,a),ml||(ml=ll()),this._tables=[[ml[0][0].slice(),ml[0][1].slice(),ml[0][2].slice(),ml[0][3].slice(),ml[0][4].slice()],[ml[1][0].slice(),ml[1][1].slice(),ml[1][2].slice(),ml[1][3].slice(),ml[1][4].slice()]];var c=void 0,d=void 0,e=void 0,f=void 0,g=void 0,h=this._tables[0][4],i=this._tables[1],j=b.length,k=1;if(4!==j&&6!==j&&8!==j)throw new Error("Invalid aes key size");for(f=b.slice(0),g=[],this._key=[f,g],c=j;c<4*j+28;c++)e=f[c-1],(c%j===0||8===j&&c%j===4)&&(e=h[e>>>24]<<24^h[e>>16&255]<<16^h[e>>8&255]<<8^h[255&e],c%j===0&&(e=e<<8^e>>>24^k<<24,k=k<<1^283*(k>>7))),f[c]=f[c-j]^e;for(d=0;c;d++,c--)e=f[3&d?c:c-4],c<=4||d<4?g[d]=e:g[d]=i[0][h[e>>>24]]^i[1][h[e>>16&255]]^i[2][h[e>>8&255]]^i[3][h[255&e]]}return a.prototype.decrypt=function(a,b,c,d,e,f){var g=this._key[1],h=a^g[0],i=d^g[1],j=c^g[2],k=b^g[3],l=void 0,m=void 0,n=void 0,o=g.length/4-2,p=void 0,q=4,r=this._tables[1],s=r[0],t=r[1],u=r[2],v=r[3],w=r[4];for(p=0;p<o;p++)l=s[h>>>24]^t[i>>16&255]^u[j>>8&255]^v[255&k]^g[q],m=s[i>>>24]^t[j>>16&255]^u[k>>8&255]^v[255&h]^g[q+1],n=s[j>>>24]^t[k>>16&255]^u[h>>8&255]^v[255&i]^g[q+2],k=s[k>>>24]^t[h>>16&255]^u[i>>8&255]^v[255&j]^g[q+3],q+=4,h=l,i=m,j=n;for(p=0;p<4;p++)e[(3&-p)+f]=w[h>>>24]<<24^w[i>>16&255]<<16^w[j>>8&255]<<8^w[255&k]^g[q++],l=h,h=i,i=j,j=k,k=l},a}(),ol=function(){function a(){hl(this,a),this.listeners={}}return a.prototype.on=function(a,b){this.listeners[a]||(this.listeners[a]=[]),this.listeners[a].push(b)},a.prototype.off=function(a,b){if(!this.listeners[a])return!1;var c=this.listeners[a].indexOf(b);return this.listeners[a].splice(c,1),c>-1},a.prototype.trigger=function(a){var b=this.listeners[a];if(b)if(2===arguments.length)for(var c=b.length,d=0;d<c;++d)b[d].call(this,arguments[1]);else for(var e=Array.prototype.slice.call(arguments,1),f=b.length,g=0;g<f;++g)b[g].apply(this,e)},a.prototype.dispose=function(){this.listeners={}},a.prototype.pipe=function(a){this.on("data",function(b){a.push(b)})},a}(),pl=function(a){function b(){hl(this,b);var c=kl(this,a.call(this,ol));return c.jobs=[],c.delay=1,c.timeout_=null,c}return jl(b,a),b.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},b.prototype.push=function(a){this.jobs.push(a),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},b}(ol),ql=function(a){return a<<24|(65280&a)<<8|(16711680&a)>>8|a>>>24},rl=function(a,b,c){var d=new Int32Array(a.buffer,a.byteOffset,a.byteLength>>2),e=new nl(Array.prototype.slice.call(b)),f=new Uint8Array(a.byteLength),g=new Int32Array(f.buffer),h=void 0,i=void 0,j=void 0,k=void 0,l=void 0,m=void 0,n=void 0,o=void 0,p=void 0;for(h=c[0],i=c[1],j=c[2],k=c[3],p=0;p<d.length;p+=4)l=ql(d[p]),m=ql(d[p+1]),n=ql(d[p+2]),o=ql(d[p+3]),e.decrypt(l,m,n,o,g,p),g[p]=ql(g[p]^h),g[p+1]=ql(g[p+1]^i),g[p+2]=ql(g[p+2]^j),g[p+3]=ql(g[p+3]^k),h=l,i=m,j=n,k=o;return f},sl=function(){function a(b,c,d,e){hl(this,a);var f=a.STEP,g=new Int32Array(b.buffer),h=new Uint8Array(b.byteLength),i=0;for(this.asyncStream_=new pl,this.asyncStream_.push(this.decryptChunk_(g.subarray(i,i+f),c,d,h)),i=f;i<g.length;i+=f)d=new Uint32Array([ql(g[i-4]),ql(g[i-3]),ql(g[i-2]),ql(g[i-1])]),this.asyncStream_.push(this.decryptChunk_(g.subarray(i,i+f),c,d,h));this.asyncStream_.push(function(){e(null,pc(h))})}return a.prototype.decryptChunk_=function(a,b,c,d){return function(){var e=rl(a,b,c);d.set(e,a.byteOffset)}},il(a,null,[{key:"STEP",get:function(){return 32e3}}]),a}(),tl=function(b,c){return/^[a-z]+:/i.test(c)?c:(/\/\//i.test(b)||(b=vh.buildAbsoluteURL(a.location.href,b)),vh.buildAbsoluteURL(b,c))},ul=function(a,b,c){return a&&c.responseURL&&b!==c.responseURL?c.responseURL:b},vl=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},wl=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),xl=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},yl=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},zl=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b;
},Al=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Bl=ib.mergeOptions,Cl=ib.EventTarget,Dl=ib.log,El=function(a,b){["AUDIO","SUBTITLES"].forEach(function(c){for(var d in a.mediaGroups[c])for(var e in a.mediaGroups[c][d]){var f=a.mediaGroups[c][d][e];b(f,c,d,e)}})},Fl=function(a,b,c){var d=b.slice();c=c||0;for(var e=Math.min(a.length,b.length+c),f=c;f<e;f++)d[f-c]=Bl(a[f],d[f-c]);return d},Gl=function(a,b){a.resolvedUri||(a.resolvedUri=tl(b,a.uri)),a.key&&!a.key.resolvedUri&&(a.key.resolvedUri=tl(b,a.key.uri)),a.map&&!a.map.resolvedUri&&(a.map.resolvedUri=tl(b,a.map.uri))},Hl=function(a,b){var c=Bl(a,{}),d=c.playlists[b.id];if(!d)return null;if(d.segments&&b.segments&&d.segments.length===b.segments.length&&d.endList===b.endList&&d.mediaSequence===b.mediaSequence)return null;var e=Bl(d,b);d.segments&&(e.segments=Fl(d.segments,b.segments,b.mediaSequence-d.mediaSequence)),e.segments.forEach(function(a){Gl(a,e.resolvedUri)});for(var f=0;f<c.playlists.length;f++)c.playlists[f].id===b.id&&(c.playlists[f]=e);return c.playlists[b.id]=e,c.playlists[b.uri]=e,c},Il=function(a,b){return a+"-"+b},Jl=function(a){for(var b=a.playlists.length;b--;){var c=a.playlists[b];c.resolvedUri=tl(a.uri,c.uri),c.id=Il(b,c.uri),a.playlists[c.id]=c,a.playlists[c.uri]=c,c.attributes||(c.attributes={},Dl.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}},Kl=function(a){El(a,function(b){b.uri&&(b.resolvedUri=tl(a.uri,b.uri))})},Ll=function(a,b){var c=a.segments[a.segments.length-1],d=void 0;return d=b&&c&&c.duration?1e3*c.duration:500*(a.targetDuration||10)},Ml=function(b){function c(a,b){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};vl(this,c);var e=zl(this,(c.__proto__||Object.getPrototypeOf(c)).call(this)),f=d.withCredentials,g=void 0!==f&&f,h=d.handleManifestRedirects,i=void 0!==h&&h;e.srcUrl=a,e.hls_=b,e.withCredentials=g,e.handleManifestRedirects=i;var j=b.options_;if(e.customTagParsers=j&&j.customTagParsers||[],e.customTagMappers=j&&j.customTagMappers||[],!e.srcUrl)throw new Error("A non-empty playlist URL is required");return e.state="HAVE_NOTHING",e.on("mediaupdatetimeout",function(){"HAVE_METADATA"===e.state&&(e.state="HAVE_CURRENT_METADATA",e.request=e.hls_.xhr({uri:tl(e.master.uri,e.media().uri),withCredentials:e.withCredentials},function(a,b){if(e.request)return a?e.playlistRequestError(e.request,e.media(),"HAVE_METADATA"):void e.haveMetadata(e.request,e.media().uri,e.media().id)}))}),e}return yl(c,b),wl(c,[{key:"playlistRequestError",value:function(a,b,c){var d=b.uri,e=b.id;this.request=null,c&&(this.state=c),this.error={playlist:this.master.playlists[e],status:a.status,message:"HLS playlist request error at URL: "+d+".",responseText:a.responseText,code:a.status>=500?4:2},this.trigger("error")}},{key:"haveMetadata",value:function(b,c,d){var e=this;this.request=null,this.state="HAVE_METADATA";var f=new Bh;this.customTagParsers.forEach(function(a){return f.addParser(a)}),this.customTagMappers.forEach(function(a){return f.addTagMapper(a)}),f.push(b.responseText),f.end(),f.manifest.uri=c,f.manifest.id=d,f.manifest.attributes=f.manifest.attributes||{};var g=Hl(this.master,f.manifest);this.targetDuration=f.manifest.targetDuration,g?(this.master=g,this.media_=this.master.playlists[d]):this.trigger("playlistunchanged"),this.media().endList||(a.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=a.setTimeout(function(){e.trigger("mediaupdatetimeout")},Ll(this.media(),!!g))),this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.trigger("dispose"),this.stopRequest(),a.clearTimeout(this.mediaUpdateTimeout),a.clearTimeout(this.finalRenditionTimeout),this.off()}},{key:"stopRequest",value:function(){if(this.request){var a=this.request;this.request=null,a.onreadystatechange=null,a.abort()}}},{key:"media",value:function(b,c){var d=this;if(!b)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof b){if(!this.master.playlists[b])throw new Error("Unknown playlist URI: "+b);b=this.master.playlists[b]}if(a.clearTimeout(this.finalRenditionTimeout),c){var e=b.targetDuration/2*1e3||5e3;return void(this.finalRenditionTimeout=a.setTimeout(this.media.bind(this,b,!1),e))}var f=this.state,g=!this.media_||b.id!==this.media_.id;if(this.master.playlists[b.id].endList)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=b,void(g&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(g){if(this.state="SWITCHING_MEDIA",this.request){if(b.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.hls_.xhr({uri:b.resolvedUri,withCredentials:this.withCredentials},function(a,c){if(d.request){if(b.resolvedUri=ul(d.handleManifestRedirects,b.resolvedUri,c),a)return d.playlistRequestError(d.request,b,f);d.haveMetadata(c,b.uri,b.id),"HAVE_MASTER"===f?d.trigger("loadedmetadata"):d.trigger("mediachange")}})}}},{key:"pause",value:function(){this.stopRequest(),a.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(b){var c=this;a.clearTimeout(this.mediaUpdateTimeout);var d=this.media();if(b){var e=d?d.targetDuration/2*1e3:5e3;return void(this.mediaUpdateTimeout=a.setTimeout(function(){return c.load()},e))}return this.started?void(d&&!d.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")):void this.start()}},{key:"start",value:function(){var b=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(c,d){if(b.request){if(b.request=null,c)return b.error={status:d.status,message:"HLS playlist request error at URL: "+b.srcUrl+".",responseText:d.responseText,code:2},"HAVE_NOTHING"===b.state&&(b.started=!1),b.trigger("error");var e=new Bh;if(b.customTagParsers.forEach(function(a){return e.addParser(a)}),b.customTagMappers.forEach(function(a){return e.addTagMapper(a)}),e.push(d.responseText),e.end(),b.state="HAVE_MASTER",b.srcUrl=ul(b.handleManifestRedirects,b.srcUrl,d),e.manifest.uri=b.srcUrl,e.manifest.playlists)return b.master=e.manifest,Jl(b.master),Kl(b.master),b.trigger("loadedplaylist"),void(b.request||b.media(e.manifest.playlists[0]));var f=Il(0,b.srcUrl);return b.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:a.location.href,playlists:[{uri:b.srcUrl,id:f,resolvedUri:b.srcUrl,attributes:{}}]},b.master.playlists[f]=b.master.playlists[0],b.master.playlists[b.srcUrl]=b.master.playlists[0],b.haveMetadata(d,b.srcUrl,f),b.trigger("loadedmetadata")}})}}]),c}(Cl),Nl=ib.createTimeRange,Ol=function(a,b){var c=0,d=b-a.mediaSequence,e=a.segments[d];if(e){if("undefined"!=typeof e.start)return{result:e.start,precise:!0};if("undefined"!=typeof e.end)return{result:e.end-e.duration,precise:!0}}for(;d--;){if(e=a.segments[d],"undefined"!=typeof e.end)return{result:c+e.end,precise:!0};if(c+=e.duration,"undefined"!=typeof e.start)return{result:c+e.start,precise:!0}}return{result:c,precise:!1}},Pl=function(a,b){for(var c=0,d=void 0,e=b-a.mediaSequence;e<a.segments.length;e++){if(d=a.segments[e],"undefined"!=typeof d.start)return{result:d.start-c,precise:!0};if(c+=d.duration,"undefined"!=typeof d.end)return{result:d.end-c,precise:!0}}return{result:-1,precise:!1}},Ql=function(a,b,c){var d=void 0,e=void 0;return"undefined"==typeof b&&(b=a.mediaSequence+a.segments.length),b<a.mediaSequence?0:(d=Ol(a,b),d.precise?d.result:(e=Pl(a,b),e.precise?e.result:d.result+c))},Rl=function(b,c,d){if(!b)return 0;if("number"!=typeof d&&(d=0),"undefined"==typeof c){if(b.totalDuration)return b.totalDuration;if(!b.endList)return a.Infinity}return Ql(b,c,d)},Sl=function(a,b,c){var d=0;if(b>c){var e=[c,b];b=e[0],c=e[1]}if(b<0){for(var f=b;f<Math.min(0,c);f++)d+=a.targetDuration;b=0}for(var g=b;g<c;g++)d+=a.segments[g].duration;return d},Tl=function(a,b){if(!a.segments.length)return 0;var c=a.segments.length,d=a.segments[c-1].duration||a.targetDuration,e="number"==typeof b?b:d+2*a.targetDuration;if(0===e)return c;for(var f=0;c--&&(f+=a.segments[c].duration,!(f>=e)););return Math.max(0,c)},Ul=function(a,b,c,d){if(!a||!a.segments)return null;if(a.endList)return Rl(a);if(null===b)return null;b=b||0;var e=c?Tl(a,d):a.segments.length;return Ql(a,a.mediaSequence+e,b)},Vl=function(a,b,c){var d=!0,e=b||0,f=Ul(a,b,d,c);return null===f?Nl():Nl(e,f)},Wl=function(a){return a-Math.floor(a)===0},Xl=function(a,b){if(Wl(b))return b+.1*a;for(var c=b.toString().split(".")[1].length,d=1;d<=c;d++){var e=Math.pow(10,d),f=b*e;if(Wl(f)||d===c)return(f+a)/e}},Yl=Xl.bind(null,1),Zl=Xl.bind(null,-1),$l=function(a,b,c,d){var e=void 0,f=void 0,g=a.segments.length,h=b-d;if(h<0){if(c>0)for(e=c-1;e>=0;e--)if(f=a.segments[e],h+=Zl(f.duration),h>0)return{mediaIndex:e,startTime:d-Sl(a,c,e)};return{mediaIndex:0,startTime:b}}if(c<0){for(e=c;e<0;e++)if(h-=a.targetDuration,h<0)return{mediaIndex:0,startTime:b};c=0}for(e=c;e<g;e++)if(f=a.segments[e],h-=Yl(f.duration),h<0)return{mediaIndex:e,startTime:d+Sl(a,c,e)};return{mediaIndex:g-1,startTime:b}},_l=function(a){return a.excludeUntil&&a.excludeUntil>Date.now()},am=function(a){return a.excludeUntil&&a.excludeUntil===1/0},bm=function(a){var b=_l(a);return!a.disabled&&!b},cm=function(a){return a.disabled},dm=function(a){for(var b=0;b<a.segments.length;b++)if(a.segments[b].key)return!0;return!1},em=function(a){for(var b=0;b<a.segments.length;b++)if(a.segments[b].map)return!0;return!1},fm=function(a,b){return b.attributes&&b.attributes[a]},gm=function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!fm("BANDWIDTH",c))return NaN;var e=a*c.attributes.BANDWIDTH;return(e-8*d)/b},hm=function(a,b){if(1===a.playlists.length)return!0;var c=b.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===a.playlists.filter(function(a){return!!bm(a)&&(a.attributes.BANDWIDTH||0)<c}).length},im={duration:Rl,seekable:Vl,safeLiveIndex:Tl,getMediaInfoForTime:$l,isEnabled:bm,isDisabled:cm,isBlacklisted:_l,isIncompatible:am,playlistEnd:Ul,isAes:dm,isFmp4:em,hasAttribute:fm,estimateSegmentRequestTime:gm,isLowestEnabledRendition:hm},jm=ib.xhr,km=ib.mergeOptions,lm=function(){var a=function a(b,c){b=km({timeout:45e3},b);var d=a.beforeRequest||ib.Hls.xhr.beforeRequest;if(d&&"function"==typeof d){var e=d(b);e&&(b=e)}var f=jm(b,function(a,b){var d=f.response;!a&&d&&(f.responseTime=Date.now(),f.roundTripTime=f.responseTime-f.requestTime,f.bytesReceived=d.byteLength||d.length,f.bandwidth||(f.bandwidth=Math.floor(f.bytesReceived/f.roundTripTime*8*1e3))),b.headers&&(f.responseHeaders=b.headers),a&&"ETIMEDOUT"===a.code&&(f.timedout=!0),a||f.aborted||200===b.statusCode||206===b.statusCode||0===b.statusCode||(a=new Error("XHR Failed with a response of: "+(f&&(d||f.responseText)))),c(a,f)}),g=f.abort;return f.abort=function(){return f.aborted=!0,g.apply(f,arguments)},f.uri=b.uri,f.requestTime=Date.now(),f};return a},mm=function(a){var b=void 0,c=void 0;return c=a.offset+a.length-1,b=a.offset,"bytes="+b+"-"+c},nm=function(a){var b={};return a.byterange&&(b.Range=mm(a.byterange)),b},om=function(a,b){return a.start(b)+"-"+a.end(b)},pm=function(a,b){var c=a.toString(16);return"00".substring(0,2-c.length)+c+(b%2?" ":"")},qm=function(a){return a>=32&&a<126?String.fromCharCode(a):"."},rm=function(a){var b={};return Object.keys(a).forEach(function(c){var d=a[c];ArrayBuffer.isView(d)?b[c]={bytes:d.buffer,byteOffset:d.byteOffset,byteLength:d.byteLength}:b[c]=d}),b},sm=function(a){var b=a.byterange||{length:1/0,offset:0};return[b.length,b.offset,a.resolvedUri].join(",")},tm=function(a){return a.resolvedUri},um=function(a){for(var b=Array.prototype.slice.call(a),c=16,d="",e=void 0,f=void 0,g=0;g<b.length/c;g++)e=b.slice(g*c,g*c+c).map(pm).join(""),f=b.slice(g*c,g*c+c).map(qm).join(""),d+=e+" "+f+"\n";return d},vm=function(a){var b=a.bytes;return um(b)},wm=function(a){var b="",c=void 0;for(c=0;c<a.length;c++)b+=om(a,c)+" ";return b},xm=Object.freeze({createTransferableMessage:rm,initSegmentId:sm,segmentKeyId:tm,hexDump:um,tagDump:vm,textRanges:wm}),ym=.25,zm=function(a,b){if(!b.dateTimeObject)return null;var c=b.videoTimingInfo.transmuxerPrependedSeconds,d=b.videoTimingInfo.transmuxedPresentationStart,e=d+c,f=a-e;return new Date(b.dateTimeObject.getTime()+1e3*f)},Am=function(a){return a.transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds},Bm=function(a,b){var c=void 0;try{c=new Date(a)}catch(a){return null}if(!b||!b.segments||0===b.segments.length)return null;var d=b.segments[0];if(c<d.dateTimeObject)return null;for(var e=0;e<b.segments.length-1;e++){d=b.segments[e];var f=b.segments[e+1].dateTimeObject;if(c<f)break}var g=b.segments[b.segments.length-1],h=g.dateTimeObject,i=g.videoTimingInfo?Am(g.videoTimingInfo):g.duration+g.duration*ym,j=new Date(h.getTime()+1e3*i);return c>j?null:(c>h&&(d=g),{segment:d,estimatedStart:d.videoTimingInfo?d.videoTimingInfo.transmuxedPresentationStart:im.duration(b,b.mediaSequence+b.segments.indexOf(d)),type:d.videoTimingInfo?"accurate":"estimate"})},Cm=function(a,b){if(!b||!b.segments||0===b.segments.length)return null;for(var c=0,d=void 0,e=0;e<b.segments.length&&(d=b.segments[e],c=d.videoTimingInfo?d.videoTimingInfo.transmuxedPresentationEnd:c+d.duration,!(a<=c));e++);var f=b.segments[b.segments.length-1];if(f.videoTimingInfo&&f.videoTimingInfo.transmuxedPresentationEnd<a)return null;if(a>c){if(a>c+f.duration*ym)return null;d=f}return{segment:d,estimatedStart:d.videoTimingInfo?d.videoTimingInfo.transmuxedPresentationStart:c-d.duration,type:d.videoTimingInfo?"accurate":"estimate"}},Dm=function(a,b){var c=void 0,d=void 0;try{c=new Date(a),d=new Date(b)}catch(a){}var e=c.getTime(),f=d.getTime();return(f-e)/1e3},Em=function(a){if(!a.segments||0===a.segments.length)return!1;for(var b=0;b<a.segments.length;b++){var c=a.segments[b];if(!c.dateTimeObject)return!1}return!0},Fm=function(a){var b=a.playlist,c=a.time,d=void 0===c?void 0:c,e=a.callback;if(!e)throw new Error("getProgramTime: callback must be provided");if(!b||void 0===d)return e({message:"getProgramTime: playlist and time must be provided"});var f=Cm(d,b);if(!f)return e({message:"valid programTime was not found"});if("estimate"===f.type)return e({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:f.estimatedStart});var g={mediaSeconds:d},h=zm(d,f.segment);return h&&(g.programDateTime=h.toISOString()),e(null,g)},Gm=function a(b){var c=b.programTime,d=b.playlist,e=b.retryCount,f=void 0===e?2:e,g=b.seekTo,h=b.pauseAfterSeek,i=void 0===h||h,j=b.tech,k=b.callback;if(!k)throw new Error("seekToProgramTime: callback must be provided");if("undefined"==typeof c||!d||!g)return k({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!d.endList&&!j.hasStarted_)return k({message:"player must be playing a live stream to start buffering"});if(!Em(d))return k({message:"programDateTime tags must be provided in the manifest "+d.resolvedUri});var l=Bm(c,d);if(!l)return k({message:c+" was not found in the stream"});var m=l.segment,n=Dm(m.dateTimeObject,c);if("estimate"===l.type)return 0===f?k({message:c+" is not buffered yet. Try again"}):(g(l.estimatedStart+n),void j.one("seeked",function(){a({programTime:c,playlist:d,retryCount:f-1,seekTo:g,pauseAfterSeek:i,tech:j,callback:k})}));var o=m.start+n,p=function(){return k(null,j.currentTime())};j.one("seeked",p),i&&j.pause(),g(o)},Hm=1/30,Im=3*Hm,Jm=function(a,b){var c=[],d=void 0;if(a&&a.length)for(d=0;d<a.length;d++)b(a.start(d),a.end(d))&&c.push([a.start(d),a.end(d)]);return ib.createTimeRanges(c)},Km=function(a,b){return Jm(a,function(a,c){return a-Im<=b&&c+Im>=b})},Lm=function(a,b){return Jm(a,function(a){return a-Hm>=b})},Mm=function(a){if(a.length<2)return ib.createTimeRanges();for(var b=[],c=1;c<a.length;c++){var d=a.end(c-1),e=a.start(c);b.push([d,e])}return ib.createTimeRanges(b)},Nm=function(a){var b=[];if(!a||!a.length)return"";for(var c=0;c<a.length;c++)b.push(a.start(c)+" => "+a.end(c));return b.join(", ")},Om=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,d=a.length?a.end(a.length-1):0;return(d-b)/c},Pm=function(a){for(var b=[],c=0;c<a.length;c++)b.push({start:a.start(c),end:a.end(c)});return b},Qm=function(a,b,c){var d=b.player_;if(c.captions&&c.captions.length){a.inbandTextTracks_||(a.inbandTextTracks_={});for(var e in c.captionStreams)if(!a.inbandTextTracks_[e]){d.tech_.trigger({type:"usage",name:"hls-608"});var f=d.textTracks().getTrackById(e);f?a.inbandTextTracks_[e]=f:a.inbandTextTracks_[e]=d.addRemoteTextTrack({kind:"captions",id:e,label:e},!1).track}}c.metadata&&c.metadata.length&&!a.metadataTrack_&&(a.metadataTrack_=d.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,a.metadataTrack_.inBandMetadataTrackDispatchType=c.metadata.dispatchType)},Rm=function(a,b,c){var d=void 0,e=void 0;if(c&&c.cues)for(d=c.cues.length;d--;)e=c.cues[d],e.startTime<=b&&e.endTime>=a&&c.removeCue(e)},Sm=function(a){Object.defineProperties(a.frame,{id:{get:function(){return ib.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),a.value.key}},value:{get:function(){return ib.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),a.value.data}},privateData:{get:function(){return ib.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),a.value.data}}})},Tm=function(a){var b=void 0;return b=isNaN(a)||Math.abs(a)===1/0?Number.MAX_VALUE:a},Um=function(b,c,d){var e=a.WebKitDataCue||a.VTTCue;if(c&&c.forEach(function(a){var b=a.stream;this.inbandTextTracks_[b].addCue(new e(a.startTime+this.timestampOffset,a.endTime+this.timestampOffset,a.text))},b),d){var f=Tm(b.mediaSource_.duration);if(d.forEach(function(b){var c=b.cueTime+this.timestampOffset;!("number"!=typeof c||a.isNaN(c)||c<0)&&c<1/0&&b.frames.forEach(function(a){var b=new e(c,c,a.value||a.url||a.data||"");b.frame=a,b.value=a,Sm(b),this.metadataTrack_.addCue(b)},this)},b),b.metadataTrack_&&b.metadataTrack_.cues&&b.metadataTrack_.cues.length){for(var g=b.metadataTrack_.cues,h=[],i=0;i<g.length;i++)g[i]&&h.push(g[i]);var j=h.reduce(function(a,b){var c=a[b.startTime]||[];return c.push(b),a[b.startTime]=c,a},{}),k=Object.keys(j).sort(function(a,b){return Number(a)-Number(b)});k.forEach(function(a,b){var c=j[a],d=Number(k[b+1])||f;c.forEach(function(a){a.endTime=d})})}}},Vm="undefined"!=typeof window?window:{},Wm="undefined"==typeof Symbol?"__target":Symbol(),Xm="application/javascript",Ym=Vm.BlobBuilder||Vm.WebKitBlobBuilder||Vm.MozBlobBuilder||Vm.MSBlobBuilder,Zm=Vm.URL||Vm.webkitURL||Zm&&Zm.msURL,$m=Vm.Worker;if($m){var _m,an=rc("self.onmessage = function () {}"),bn=new Uint8Array(1);try{_m=new $m(an),_m.postMessage(bn,[bn.buffer])}catch(a){$m=null}finally{Zm.revokeObjectURL(an),_m&&_m.terminate()}}var cn=new qc("./transmuxer-worker.worker.js",function(a,b){var c=this;(function(){var a=function(){this.init=function(){var a={};this.on=function(b,c){a[b]||(a[b]=[]),a[b]=a[b].concat(c)},this.off=function(b,c){var d;return!!a[b]&&(d=a[b].indexOf(c),a[b]=a[b].slice(),a[b].splice(d,1),d>-1)},this.trigger=function(b){var c,d,e,f;if(c=a[b])if(2===arguments.length)for(e=c.length,d=0;d<e;++d)c[d].call(this,arguments[1]);else{for(f=[],d=arguments.length,d=1;d<arguments.length;++d)f.push(arguments[d]);for(e=c.length,d=0;d<e;++d)c[d].apply(this,f)}},this.dispose=function(){a={}}}};a.prototype.pipe=function(a){return this.on("data",function(b){a.push(b)}),this.on("done",function(b){a.flush(b)}),this.on("partialdone",function(b){a.partialFlush(b)}),this.on("endedtimeline",function(b){a.endTimeline(b)}),this.on("reset",function(b){a.reset(b)}),a},a.prototype.push=function(a){this.trigger("data",a)},a.prototype.flush=function(a){this.trigger("done",a)},a.prototype.partialFlush=function(a){this.trigger("partialdone",a)},a.prototype.endTimeline=function(a){this.trigger("endedtimeline",a)},a.prototype.reset=function(a){this.trigger("reset",a)};var b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M=a,N=Math.pow(2,32)-1;!function(){var a;if(y={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(a in y)y.hasOwnProperty(a)&&(y[a]=[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]);z=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),B=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),A=new Uint8Array([0,0,0,1]),C=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),D=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),E={video:C,audio:D},H=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),G=new Uint8Array([0,0,0,0,0,0,0,0]),I=new Uint8Array([0,0,0,0,0,0,0,0]),J=I,K=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),L=I,F=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),b=function(a){var b,c,d,e=[],f=0;for(b=1;b<arguments.length;b++)e.push(arguments[b]);for(b=e.length;b--;)f+=e[b].byteLength;for(c=new Uint8Array(f+8),d=new DataView(c.buffer,c.byteOffset,c.byteLength),d.setUint32(0,c.byteLength),c.set(a,4),b=0,f=8;b<e.length;b++)c.set(e[b],f),f+=e[b].byteLength;return c},d=function(){return b(y.dinf,b(y.dref,H))},e=function(a){return b(y.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,a.audioobjecttype<<3|a.samplingfrequencyindex>>>1,a.samplingfrequencyindex<<7|a.channelcount<<3,6,1,2]))},f=function(){return b(y.ftyp,z,A,z,B)},r=function(a){return b(y.hdlr,E[a])},g=function(a){return b(y.mdat,a)},q=function(a){var c=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,a.duration>>>24&255,a.duration>>>16&255,a.duration>>>8&255,255&a.duration,85,196,0,0]);return a.samplerate&&(c[12]=a.samplerate>>>24&255,c[13]=a.samplerate>>>16&255,c[14]=a.samplerate>>>8&255,c[15]=255&a.samplerate),b(y.mdhd,c)},p=function(a){return b(y.mdia,q(a),r(a.type),i(a))},h=function(a){return b(y.mfhd,new Uint8Array([0,0,0,0,(4278190080&a)>>24,(16711680&a)>>16,(65280&a)>>8,255&a]))},i=function(a){return b(y.minf,"video"===a.type?b(y.vmhd,F):b(y.smhd,G),d(),t(a))},j=function(a,c){for(var d=[],e=c.length;e--;)d[e]=v(c[e]);return b.apply(null,[y.moof,h(a)].concat(d))},k=function(a){for(var c=a.length,d=[];c--;)d[c]=n(a[c]);return b.apply(null,[y.moov,m(4294967295)].concat(d).concat(l(a)))},l=function(a){for(var c=a.length,d=[];c--;)d[c]=w(a[c]);return b.apply(null,[y.mvex].concat(d))},m=function(a){var c=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&a)>>24,(16711680&a)>>16,(65280&a)>>8,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return b(y.mvhd,c)},s=function(a){var c,d,e=a.samples||[],f=new Uint8Array(4+e.length);for(d=0;d<e.length;d++)c=e[d].flags,f[d+4]=c.dependsOn<<4|c.isDependedOn<<2|c.hasRedundancy;return b(y.sdtp,f)},t=function(a){return b(y.stbl,u(a),b(y.stts,L),b(y.stsc,J),b(y.stsz,K),b(y.stco,I))},function(){var a,c;u=function(d){return b(y.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===d.type?a(d):c(d))},a=function(a){var c,d,e=a.sps||[],f=a.pps||[],g=[],h=[];for(c=0;c<e.length;c++)g.push((65280&e[c].byteLength)>>>8),g.push(255&e[c].byteLength),g=g.concat(Array.prototype.slice.call(e[c]));for(c=0;c<f.length;c++)h.push((65280&f[c].byteLength)>>>8),h.push(255&f[c].byteLength),h=h.concat(Array.prototype.slice.call(f[c]));if(d=[y.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&a.width)>>8,255&a.width,(65280&a.height)>>8,255&a.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),b(y.avcC,new Uint8Array([1,a.profileIdc,a.profileCompatibility,a.levelIdc,255].concat([e.length],g,[f.length],h))),b(y.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],a.sarRatio){var i=a.sarRatio[0],j=a.sarRatio[1];d.push(b(y.pasp,new Uint8Array([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i,(4278190080&j)>>24,(16711680&j)>>16,(65280&j)>>8,255&j])))}return b.apply(null,d)},c=function(a){return b(y.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&a.channelcount)>>8,255&a.channelcount,(65280&a.samplesize)>>8,255&a.samplesize,0,0,0,0,(65280&a.samplerate)>>8,255&a.samplerate,0,0]),e(a))}}(),o=function(a){var c=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,0,(4278190080&a.duration)>>24,(16711680&a.duration)>>16,(65280&a.duration)>>8,255&a.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&a.width)>>8,255&a.width,0,0,(65280&a.height)>>8,255&a.height,0,0]);return b(y.tkhd,c)},v=function(a){var c,d,e,f,g,h,i;return c=b(y.tfhd,new Uint8Array([0,0,0,58,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),h=Math.floor(a.baseMediaDecodeTime/(N+1)),i=Math.floor(a.baseMediaDecodeTime%(N+1)),d=b(y.tfdt,new Uint8Array([1,0,0,0,h>>>24&255,h>>>16&255,h>>>8&255,255&h,i>>>24&255,i>>>16&255,i>>>8&255,255&i])),g=92,"audio"===a.type?(e=x(a,g),b(y.traf,c,d,e)):(f=s(a),e=x(a,f.length+g),b(y.traf,c,d,e,f))},n=function(a){return a.duration=a.duration||4294967295,b(y.trak,o(a),p(a))},w=function(a){var c=new Uint8Array([0,0,0,0,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==a.type&&(c[c.length-1]=0),b(y.trex,c)},function(){var a,c,d;d=function(a,b){var c=0,d=0,e=0,f=0;return a.length&&(void 0!==a[0].duration&&(c=1),void 0!==a[0].size&&(d=2),void 0!==a[0].flags&&(e=4),void 0!==a[0].compositionTimeOffset&&(f=8)),[0,0,c|d|e|f,1,(4278190080&a.length)>>>24,(16711680&a.length)>>>16,(65280&a.length)>>>8,255&a.length,(4278190080&b)>>>24,(16711680&b)>>>16,(65280&b)>>>8,255&b]},c=function(a,c){var e,f,g,h,i,j;for(h=a.samples||[],c+=20+16*h.length,g=d(h,c),f=new Uint8Array(g.length+16*h.length),f.set(g),e=g.length,j=0;j<h.length;j++)i=h[j],f[e++]=(4278190080&i.duration)>>>24,f[e++]=(16711680&i.duration)>>>16,f[e++]=(65280&i.duration)>>>8,f[e++]=255&i.duration,f[e++]=(4278190080&i.size)>>>24,f[e++]=(16711680&i.size)>>>16,f[e++]=(65280&i.size)>>>8,f[e++]=255&i.size,f[e++]=i.flags.isLeading<<2|i.flags.dependsOn,f[e++]=i.flags.isDependedOn<<6|i.flags.hasRedundancy<<4|i.flags.paddingValue<<1|i.flags.isNonSyncSample,f[e++]=61440&i.flags.degradationPriority,f[e++]=15&i.flags.degradationPriority,f[e++]=(4278190080&i.compositionTimeOffset)>>>24,f[e++]=(16711680&i.compositionTimeOffset)>>>16,f[e++]=(65280&i.compositionTimeOffset)>>>8,f[e++]=255&i.compositionTimeOffset;return b(y.trun,f)},a=function(a,c){var e,f,g,h,i,j;for(h=a.samples||[],c+=20+8*h.length,g=d(h,c),e=new Uint8Array(g.length+8*h.length),e.set(g),f=g.length,j=0;j<h.length;j++)i=h[j],e[f++]=(4278190080&i.duration)>>>24,e[f++]=(16711680&i.duration)>>>16,e[f++]=(65280&i.duration)>>>8,e[f++]=255&i.duration,e[f++]=(4278190080&i.size)>>>24,e[f++]=(16711680&i.size)>>>16,e[f++]=(65280&i.size)>>>8,e[f++]=255&i.size;return b(y.trun,e)},x=function(b,d){return"audio"===b.type?a(b,d):c(b,d)}}();var O,P,Q,R,S,T,U,V,W={ftyp:f,mdat:g,moof:j,moov:k,initSegment:function(a){var b,c=f(),d=k(a);return b=new Uint8Array(c.byteLength+d.byteLength),b.set(c),b.set(d,c.byteLength),b}},X=function(a){var b,c,d=[],e=[];for(e.byteLength=0,e.nalCount=0,e.duration=0,d.byteLength=0,b=0;b<a.length;b++)c=a[b],"access_unit_delimiter_rbsp"===c.nalUnitType?(d.length&&(d.duration=c.dts-d.dts,e.byteLength+=d.byteLength,e.nalCount+=d.length,e.duration+=d.duration,e.push(d)),d=[c],d.byteLength=c.data.byteLength,d.pts=c.pts,d.dts=c.dts):("slice_layer_without_partitioning_rbsp_idr"===c.nalUnitType&&(d.keyFrame=!0),d.duration=c.dts-d.dts,d.byteLength+=c.data.byteLength,d.push(c));return e.length&&(!d.duration||d.duration<=0)&&(d.duration=e[e.length-1].duration),e.byteLength+=d.byteLength,e.nalCount+=d.length,e.duration+=d.duration,e.push(d),e},Y=function(a){var b,c,d=[],e=[];for(d.byteLength=0,d.nalCount=0,d.duration=0,d.pts=a[0].pts,d.dts=a[0].dts,e.byteLength=0,e.nalCount=0,e.duration=0,e.pts=a[0].pts,e.dts=a[0].dts,b=0;b<a.length;b++)c=a[b],c.keyFrame?(d.length&&(e.push(d),e.byteLength+=d.byteLength,e.nalCount+=d.nalCount,e.duration+=d.duration),d=[c],d.nalCount=c.length,d.byteLength=c.byteLength,d.pts=c.pts,d.dts=c.dts,d.duration=c.duration):(d.duration+=c.duration,d.nalCount+=c.length,d.byteLength+=c.byteLength,d.push(c));return e.length&&d.duration<=0&&(d.duration=e[e.length-1].duration),e.byteLength+=d.byteLength,e.nalCount+=d.nalCount,e.duration+=d.duration,e.push(d),e},Z=function(a){var b;return!a[0][0].keyFrame&&a.length>1&&(b=a.shift(),a.byteLength-=b.byteLength,a.nalCount-=b.nalCount,a[0][0].dts=b.dts,a[0][0].pts=b.pts,a[0][0].duration+=b.duration),a},$=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},_=function(a,b){var c=$();return c.dataOffset=b,c.compositionTimeOffset=a.pts-a.dts,c.duration=a.duration,c.size=4*a.length,c.size+=a.byteLength,a.keyFrame&&(c.flags.dependsOn=2,c.flags.isNonSyncSample=0),c},aa=function(a,b){var c,d,e,f,g,h=b||0,i=[];for(c=0;c<a.length;c++)for(f=a[c],d=0;d<f.length;d++)g=f[d],e=_(g,h),h+=e.size,i.push(e);return i},ba=function(a){var b,c,d,e,f,g,h=0,i=a.byteLength,j=a.nalCount,k=i+4*j,l=new Uint8Array(k),m=new DataView(l.buffer);for(b=0;b<a.length;b++)for(e=a[b],c=0;c<e.length;c++)for(f=e[c],d=0;d<f.length;d++)g=f[d],m.setUint32(h,g.data.byteLength),h+=4,l.set(g.data,h),h+=g.data.byteLength;return l},ca=function(a,b){var c,d=b||0,e=[];return c=_(a,d),e.push(c),e},da=function(a){var b,c,d=0,e=a.byteLength,f=a.length,g=e+4*f,h=new Uint8Array(g),i=new DataView(h.buffer);for(b=0;b<a.length;b++)c=a[b],i.setUint32(d,c.data.byteLength),d+=4,h.set(c.data,d),d+=c.data.byteLength;return h},ea={groupNalsIntoFrames:X,groupFramesIntoGops:Y,extendFirstKeyFrame:Z,generateSampleTable:aa,concatenateNalData:ba,generateSampleTableForFrame:ca,concatenateNalDataForFrame:da},fa=[33,16,5,32,164,27],ga=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ha=function(a){for(var b=[];a--;)b.push(0);return b},ia=function(a){return Object.keys(a).reduce(function(b,c){return b[c]=new Uint8Array(a[c].reduce(function(a,b){return a.concat(b)},[])),b},{})},ja=function(){if(!O){var a={96e3:[fa,[227,64],ha(154),[56]],88200:[fa,[231],ha(170),[56]],64e3:[fa,[248,192],ha(240),[56]],48e3:[fa,[255,192],ha(268),[55,148,128],ha(54),[112]],44100:[fa,[255,192],ha(268),[55,163,128],ha(84),[112]],32e3:[fa,[255,192],ha(268),[55,234],ha(226),[112]],24e3:[fa,[255,192],ha(268),[55,255,128],ha(268),[111,112],ha(126),[224]],16e3:[fa,[255,192],ha(268),[55,255,128],ha(268),[111,255],ha(269),[223,108],ha(195),[1,192]],12e3:[ga,ha(268),[3,127,248],ha(268),[6,255,240],ha(268),[13,255,224],ha(268),[27,253,128],ha(259),[56]],11025:[ga,ha(268),[3,127,248],ha(268),[6,255,240],ha(268),[13,255,224],ha(268),[27,255,192],ha(268),[55,175,128],ha(108),[112]],
8e3:[ga,ha(268),[3,121,16],ha(47),[7]]};O=ia(a)}return O},ka=9e4;P=function(a){return a*ka},Q=function(a,b){return a*b},R=function(a){return a/ka},S=function(a,b){return a/b},T=function(a,b){return P(S(a,b))},U=function(a,b){return Q(R(a),b)},V=function(a,b,c){return R(c?a:a-b)};var la={ONE_SECOND_IN_TS:ka,secondsToVideoTs:P,secondsToAudioTs:Q,videoTsToSeconds:R,audioTsToSeconds:S,audioTsToVideoTs:T,videoTsToAudioTs:U,metadataTsToSeconds:V},ma=function(a){var b,c,d=0;for(b=0;b<a.length;b++)c=a[b],d+=c.data.byteLength;return d},na=function(a,b,c,d){var e,f,g,h,i=0,j=0,k=0,l=0;if(b.length&&(e=la.audioTsToVideoTs(a.baseMediaDecodeTime,a.samplerate),i=Math.ceil(la.ONE_SECOND_IN_TS/(a.samplerate/1024)),c&&d&&(j=e-Math.max(c,d),k=Math.floor(j/i),l=k*i),!(k<1||l>la.ONE_SECOND_IN_TS/2))){for(f=ja()[a.samplerate],f||(f=b[0].data),g=0;g<k;g++)h=b[0],b.splice(0,0,{data:f,dts:h.dts-i,pts:h.pts-i});a.baseMediaDecodeTime-=Math.floor(la.videoTsToAudioTs(l,a.samplerate))}},oa=function(a,b,c){return b.minSegmentDts>=c?a:(b.minSegmentDts=1/0,a.filter(function(a){return a.dts>=c&&(b.minSegmentDts=Math.min(b.minSegmentDts,a.dts),b.minSegmentPts=b.minSegmentDts,!0)}))},pa=function(a){var b,c,d=[];for(b=0;b<a.length;b++)c=a[b],d.push({size:c.data.byteLength,duration:1024});return d},qa=function(a){var b,c,d=0,e=new Uint8Array(ma(a));for(b=0;b<a.length;b++)c=a[b],e.set(c.data,d),d+=c.data.byteLength;return e},ra={prefixWithSilence:na,trimAdtsFramesByEarliestDts:oa,generateSampleTable:pa,concatenateFrameData:qa},sa=la.ONE_SECOND_IN_TS,ta=function(a,b){"number"==typeof b.pts&&(void 0===a.timelineStartInfo.pts&&(a.timelineStartInfo.pts=b.pts),void 0===a.minSegmentPts?a.minSegmentPts=b.pts:a.minSegmentPts=Math.min(a.minSegmentPts,b.pts),void 0===a.maxSegmentPts?a.maxSegmentPts=b.pts:a.maxSegmentPts=Math.max(a.maxSegmentPts,b.pts)),"number"==typeof b.dts&&(void 0===a.timelineStartInfo.dts&&(a.timelineStartInfo.dts=b.dts),void 0===a.minSegmentDts?a.minSegmentDts=b.dts:a.minSegmentDts=Math.min(a.minSegmentDts,b.dts),void 0===a.maxSegmentDts?a.maxSegmentDts=b.dts:a.maxSegmentDts=Math.max(a.maxSegmentDts,b.dts))},ua=function(a){delete a.minSegmentDts,delete a.maxSegmentDts,delete a.minSegmentPts,delete a.maxSegmentPts},va=function(a,b){var c,d,e=a.minSegmentDts;return b||(e-=a.timelineStartInfo.dts),c=a.timelineStartInfo.baseMediaDecodeTime,c+=e,c=Math.max(0,c),"audio"===a.type&&(d=a.samplerate/sa,c*=d,c=Math.floor(c)),c},wa={clearDtsInfo:ua,calculateTrackBaseMediaDecodeTime:va,collectDtsInfo:ta},xa=4,ya=128,za=function(a){for(var b=0,c={payloadType:-1,payloadSize:0},d=0,e=0;b<a.byteLength&&a[b]!==ya;){for(;255===a[b];)d+=255,b++;for(d+=a[b++];255===a[b];)e+=255,b++;if(e+=a[b++],!c.payload&&d===xa){c.payloadType=d,c.payloadSize=e,c.payload=a.subarray(b,b+e);break}b+=e,d=0,e=0}return c},Aa=function(a){return 181!==a.payload[0]?null:49!==(a.payload[1]<<8|a.payload[2])?null:"GA94"!==String.fromCharCode(a.payload[3],a.payload[4],a.payload[5],a.payload[6])?null:3!==a.payload[7]?null:a.payload.subarray(8,a.payload.length-1)},Ba=function(a,b){var c,d,e,f,g=[];if(!(64&b[0]))return g;for(d=31&b[0],c=0;c<d;c++)e=3*c,f={type:3&b[e+2],pts:a},4&b[e+2]&&(f.ccData=b[e+3]<<8|b[e+4],g.push(f));return g},Ca=function(a){for(var b,c,d=a.byteLength,e=[],f=1;f<d-2;)0===a[f]&&0===a[f+1]&&3===a[f+2]?(e.push(f+2),f+=2):f++;if(0===e.length)return a;b=d-e.length,c=new Uint8Array(b);var g=0;for(f=0;f<b;g++,f++)g===e[0]&&(g++,e.shift()),c[f]=a[g];return c},Da={parseSei:za,parseUserData:Aa,parseCaptionPackets:Ba,discardEmulationPreventionBytes:Ca,USER_DATA_REGISTERED_ITU_T_T35:xa},Ea=function a(){a.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new Ka(0,0),new Ka(0,1),new Ka(1,0),new Ka(1,1)],this.reset(),this.ccStreams_.forEach(function(a){a.on("data",this.trigger.bind(this,"data")),a.on("partialdone",this.trigger.bind(this,"partialdone")),a.on("done",this.trigger.bind(this,"done"))},this)};Ea.prototype=new M,Ea.prototype.push=function(a){var b,c,d;if("sei_rbsp"===a.nalUnitType&&(b=Da.parseSei(a.escapedRBSP),b.payloadType===Da.USER_DATA_REGISTERED_ITU_T_T35&&(c=Da.parseUserData(b)))){if(a.dts<this.latestDts_)return void(this.ignoreNextEqualDts_=!0);if(a.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));d=Da.parseCaptionPackets(a.pts,c),this.captionPackets_=this.captionPackets_.concat(d),this.latestDts_!==a.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=a.dts}},Ea.prototype.flushCCStreams=function(a){this.ccStreams_.forEach(function(b){return"flush"===a?b.flush():b.partialFlush()},this)},Ea.prototype.flushStream=function(a){return this.captionPackets_.length?(this.captionPackets_.forEach(function(a,b){a.presortIndex=b}),this.captionPackets_.sort(function(a,b){return a.pts===b.pts?a.presortIndex-b.presortIndex:a.pts-b.pts}),this.captionPackets_.forEach(function(a){a.type<2&&this.dispatchCea608Packet(a)},this),this.captionPackets_.length=0,void this.flushCCStreams(a)):void this.flushCCStreams(a)},Ea.prototype.flush=function(){return this.flushStream("flush")},Ea.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Ea.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(a){a.reset()})},Ea.prototype.dispatchCea608Packet=function(a){this.setsTextOrXDSActive(a)?this.activeCea608Channel_[a.type]=null:this.setsChannel1Active(a)?this.activeCea608Channel_[a.type]=0:this.setsChannel2Active(a)&&(this.activeCea608Channel_[a.type]=1),null!==this.activeCea608Channel_[a.type]&&this.ccStreams_[(a.type<<1)+this.activeCea608Channel_[a.type]].push(a)},Ea.prototype.setsChannel1Active=function(a){return 4096===(30720&a.ccData)},Ea.prototype.setsChannel2Active=function(a){return 6144===(30720&a.ccData)},Ea.prototype.setsTextOrXDSActive=function(a){return 256===(28928&a.ccData)||4138===(30974&a.ccData)||6186===(30974&a.ccData)};var Fa={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Ga=function(a){return null===a?"":(a=Fa[a]||a,String.fromCharCode(a))},Ha=14,Ia=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Ja=function(){for(var a=[],b=Ha+1;b--;)a.push("");return a},Ka=function a(b,c){a.prototype.init.call(this),this.field_=b||0,this.dataChannel_=c||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(a){var b,c,d,e,f;if(b=32639&a.ccData,b===this.lastControlCode_)return void(this.lastControlCode_=null);if(4096===(61440&b)?this.lastControlCode_=b:b!==this.PADDING_&&(this.lastControlCode_=null),d=b>>>8,e=255&b,b!==this.PADDING_)if(b===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(b===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(a.pts),this.flushDisplayed(a.pts),c=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=c,this.startPts_=a.pts;else if(b===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(a.pts);else if(b===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(a.pts);else if(b===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(a.pts);else if(b===this.CARRIAGE_RETURN_)this.clearFormatting(a.pts),this.flushDisplayed(a.pts),this.shiftRowsUp_(),this.startPts_=a.pts;else if(b===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(b===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(a.pts),this.displayed_=Ja();else if(b===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Ja();else if(b===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(a.pts),this.displayed_=Ja()),this.mode_="paintOn",this.startPts_=a.pts;else if(this.isSpecialCharacter(d,e))d=(3&d)<<8,f=Ga(d|e),this[this.mode_](a.pts,f),this.column_++;else if(this.isExtCharacter(d,e))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),d=(3&d)<<8,f=Ga(d|e),this[this.mode_](a.pts,f),this.column_++;else if(this.isMidRowCode(d,e))this.clearFormatting(a.pts),this[this.mode_](a.pts," "),this.column_++,14===(14&e)&&this.addFormatting(a.pts,["i"]),1===(1&e)&&this.addFormatting(a.pts,["u"]);else if(this.isOffsetControlCode(d,e))this.column_+=3&e;else if(this.isPAC(d,e)){var g=Ia.indexOf(7968&b);"rollUp"===this.mode_&&(g-this.rollUpRows_+1<0&&(g=this.rollUpRows_-1),this.setRollUp(a.pts,g)),g!==this.row_&&(this.clearFormatting(a.pts),this.row_=g),1&e&&this.formatting_.indexOf("u")===-1&&this.addFormatting(a.pts,["u"]),16===(16&b)&&(this.column_=4*((14&b)>>1)),this.isColorPAC(e)&&14===(14&e)&&this.addFormatting(a.pts,["i"])}else this.isNormalChar(d)&&(0===e&&(e=null),f=Ga(d),f+=Ga(e),this[this.mode_](a.pts,f),this.column_+=f.length)}};Ka.prototype=new M,Ka.prototype.flushDisplayed=function(a){var b=this.displayed_.map(function(a){try{return a.trim()}catch(a){return""}}).join("\n").replace(/^\n+|\n+$/g,"");b.length&&this.trigger("data",{startPts:this.startPts_,endPts:a,text:b,stream:this.name_})},Ka.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Ja(),this.nonDisplayed_=Ja(),this.lastControlCode_=null,this.column_=0,this.row_=Ha,this.rollUpRows_=2,this.formatting_=[]},Ka.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Ka.prototype.isSpecialCharacter=function(a,b){return a===this.EXT_&&b>=48&&b<=63},Ka.prototype.isExtCharacter=function(a,b){return(a===this.EXT_+1||a===this.EXT_+2)&&b>=32&&b<=63},Ka.prototype.isMidRowCode=function(a,b){return a===this.EXT_&&b>=32&&b<=47},Ka.prototype.isOffsetControlCode=function(a,b){return a===this.OFFSET_&&b>=33&&b<=35},Ka.prototype.isPAC=function(a,b){return a>=this.BASE_&&a<this.BASE_+8&&b>=64&&b<=127},Ka.prototype.isColorPAC=function(a){return a>=64&&a<=79||a>=96&&a<=127},Ka.prototype.isNormalChar=function(a){return a>=32&&a<=127},Ka.prototype.setRollUp=function(a,b){if("rollUp"!==this.mode_&&(this.row_=Ha,this.mode_="rollUp",this.flushDisplayed(a),this.nonDisplayed_=Ja(),this.displayed_=Ja()),void 0!==b&&b!==this.row_)for(var c=0;c<this.rollUpRows_;c++)this.displayed_[b-c]=this.displayed_[this.row_-c],this.displayed_[this.row_-c]="";void 0===b&&(b=this.row_),this.topRow_=b-this.rollUpRows_+1},Ka.prototype.addFormatting=function(a,b){this.formatting_=this.formatting_.concat(b);var c=b.reduce(function(a,b){return a+"<"+b+">"},"");this[this.mode_](a,c)},Ka.prototype.clearFormatting=function(a){if(this.formatting_.length){var b=this.formatting_.reverse().reduce(function(a,b){return a+"</"+b+">"},"");this.formatting_=[],this[this.mode_](a,b)}},Ka.prototype.popOn=function(a,b){var c=this.nonDisplayed_[this.row_];c+=b,this.nonDisplayed_[this.row_]=c},Ka.prototype.rollUp=function(a,b){var c=this.displayed_[this.row_];c+=b,this.displayed_[this.row_]=c},Ka.prototype.shiftRowsUp_=function(){var a;for(a=0;a<this.topRow_;a++)this.displayed_[a]="";for(a=this.row_+1;a<Ha+1;a++)this.displayed_[a]="";for(a=this.topRow_;a<this.row_;a++)this.displayed_[a]=this.displayed_[a+1];this.displayed_[this.row_]=""},Ka.prototype.paintOn=function(a,b){var c=this.displayed_[this.row_];c+=b,this.displayed_[this.row_]=c};var La={CaptionStream:Ea,Cea608Stream:Ka},Ma={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Na=8589934592,Oa=4294967296,Pa="shared",Qa=function(a,b){var c=1;for(a>b&&(c=-1);Math.abs(b-a)>Oa;)a+=c*Na;return a},Ra=function a(b){var c,d;a.prototype.init.call(this),this.type_=b||Pa,this.push=function(a){this.type_!==Pa&&a.type!==this.type_||(void 0===d&&(d=a.dts),a.dts=Qa(a.dts,d),a.pts=Qa(a.pts,d),c=a.dts,this.trigger("data",a))},this.flush=function(){d=c,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){d=void 0,c=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Ra.prototype=new M;var Sa,Ta={TimestampRolloverStream:Ra,handleRollover:Qa},Ua=function(a,b,c){var d,e="";for(d=b;d<c;d++)e+="%"+("00"+a[d].toString(16)).slice(-2);return e},Va=function(a,b,c){return decodeURIComponent(Ua(a,b,c))},Wa=function(a,b,c){return unescape(Ua(a,b,c))},Xa=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},Ya={TXXX:function(a){var b;if(3===a.data[0]){for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=Va(a.data,1,b),a.value=Va(a.data,b+1,a.data.length).replace(/\0*$/,"");break}a.data=a.value}},WXXX:function(a){var b;if(3===a.data[0])for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=Va(a.data,1,b),a.url=Va(a.data,b+1,a.data.length);break}},PRIV:function(a){var b;for(b=0;b<a.data.length;b++)if(0===a.data[b]){a.owner=Wa(a.data,0,b);break}a.privateData=a.data.subarray(b+1),a.data=a.privateData}};Sa=function(a){var b,c={debug:!(!a||!a.debug),descriptor:a&&a.descriptor},d=0,e=[],f=0;if(Sa.prototype.init.call(this),this.dispatchType=Ma.METADATA_STREAM_TYPE.toString(16),c.descriptor)for(b=0;b<c.descriptor.length;b++)this.dispatchType+=("00"+c.descriptor[b].toString(16)).slice(-2);this.push=function(a){var b,g,h,i,j,k;if("timed-metadata"===a.type){if(a.dataAlignmentIndicator&&(f=0,e.length=0),0===e.length&&(a.data.length<10||a.data[0]!=="I".charCodeAt(0)||a.data[1]!=="D".charCodeAt(0)||a.data[2]!=="3".charCodeAt(0)))return void c.debug;if(e.push(a),f+=a.data.byteLength,1===e.length&&(d=Xa(a.data.subarray(6,10)),d+=10),!(f<d)){for(b={data:new Uint8Array(d),frames:[],pts:e[0].pts,dts:e[0].dts},j=0;j<d;)b.data.set(e[0].data.subarray(0,d-j),j),j+=e[0].data.byteLength,f-=e[0].data.byteLength,e.shift();g=10,64&b.data[5]&&(g+=4,g+=Xa(b.data.subarray(10,14)),d-=Xa(b.data.subarray(16,20)));do{if(h=Xa(b.data.subarray(g+4,g+8)),h<1)return;if(k=String.fromCharCode(b.data[g],b.data[g+1],b.data[g+2],b.data[g+3]),i={id:k,data:b.data.subarray(g+10,g+h+10)},i.key=i.id,Ya[i.id]&&(Ya[i.id](i),"com.apple.streaming.transportStreamTimestamp"===i.owner)){var l=i.data,m=(1&l[3])<<30|l[4]<<22|l[5]<<14|l[6]<<6|l[7]>>>2;m*=4,m+=3&l[7],i.timeStamp=m,void 0===b.pts&&void 0===b.dts&&(b.pts=i.timeStamp,b.dts=i.timeStamp),this.trigger("timestamp",i)}b.frames.push(i),g+=10,g+=h}while(g<d);this.trigger("data",b)}}}},Sa.prototype=new M;var Za,$a,_a,ab=Sa,bb=Ta.TimestampRolloverStream,cb=188,db=71;Za=function(){var a=new Uint8Array(cb),b=0;Za.prototype.init.call(this),this.push=function(c){var d,e=0,f=cb;for(b?(d=new Uint8Array(c.byteLength+b),d.set(a.subarray(0,b)),d.set(c,b),b=0):d=c;f<d.byteLength;)d[e]!==db||d[f]!==db?(e++,f++):(this.trigger("data",d.subarray(e,f)),e+=cb,f+=cb);e<d.byteLength&&(a.set(d.subarray(e),0),b=d.byteLength-e)},this.flush=function(){b===cb&&a[0]===db&&(this.trigger("data",a),b=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){b=0,this.trigger("reset")}},Za.prototype=new M,$a=function(){var a,b,c,d;$a.prototype.init.call(this),d=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,a=function(a,d){var e=0;d.payloadUnitStartIndicator&&(e+=a[e]+1),"pat"===d.type?b(a.subarray(e),d):c(a.subarray(e),d)},b=function(a,b){b.section_number=a[7],b.last_section_number=a[8],d.pmtPid=(31&a[10])<<8|a[11],b.pmtPid=d.pmtPid},c=function(a,b){var c,e,f,g;if(1&a[5]){for(d.programMapTable={video:null,audio:null,"timed-metadata":{}},c=(15&a[1])<<8|a[2],e=3+c-4,f=(15&a[10])<<8|a[11],g=12+f;g<e;){var h=a[g],i=(31&a[g+1])<<8|a[g+2];h===Ma.H264_STREAM_TYPE&&null===d.programMapTable.video?d.programMapTable.video=i:h===Ma.ADTS_STREAM_TYPE&&null===d.programMapTable.audio?d.programMapTable.audio=i:h===Ma.METADATA_STREAM_TYPE&&(d.programMapTable["timed-metadata"][i]=h),g+=((15&a[g+3])<<8|a[g+4])+5}b.programMapTable=d.programMapTable}},this.push=function(b){var c={},d=4;if(c.payloadUnitStartIndicator=!!(64&b[1]),c.pid=31&b[1],c.pid<<=8,c.pid|=b[2],(48&b[3])>>>4>1&&(d+=b[d]+1),0===c.pid)c.type="pat",a(b.subarray(d),c),this.trigger("data",c);else if(c.pid===this.pmtPid)for(c.type="pmt",a(b.subarray(d),c),this.trigger("data",c);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([b,d,c]):this.processPes_(b,d,c)},this.processPes_=function(a,b,c){c.pid===this.programMapTable.video?c.streamType=Ma.H264_STREAM_TYPE:c.pid===this.programMapTable.audio?c.streamType=Ma.ADTS_STREAM_TYPE:c.streamType=this.programMapTable["timed-metadata"][c.pid],c.type="pes",c.data=a.subarray(b),this.trigger("data",c)}},$a.prototype=new M,$a.STREAM_TYPES={h264:27,adts:15},_a=function(){var a,b=this,c={data:[],size:0},d={data:[],size:0},e={data:[],size:0},f=function(a,b){var c;b.packetLength=6+(a[4]<<8|a[5]),b.dataAlignmentIndicator=0!==(4&a[6]),c=a[7],192&c&&(b.pts=(14&a[9])<<27|(255&a[10])<<20|(254&a[11])<<12|(255&a[12])<<5|(254&a[13])>>>3,b.pts*=4,b.pts+=(6&a[13])>>>1,b.dts=b.pts,64&c&&(b.dts=(14&a[14])<<27|(255&a[15])<<20|(254&a[16])<<12|(255&a[17])<<5|(254&a[18])>>>3,b.dts*=4,b.dts+=(6&a[18])>>>1)),b.data=a.subarray(9+a[8])},g=function(a,c,d){var e,g=new Uint8Array(a.size),h={type:c},i=0,j=0,k=!1;if(a.data.length&&!(a.size<9)){for(h.trackId=a.data[0].pid,i=0;i<a.data.length;i++)e=a.data[i],g.set(e.data,j),j+=e.data.byteLength;f(g,h),k="video"===c||h.packetLength<=a.size,(d||k)&&(a.size=0,a.data.length=0),k&&b.trigger("data",h)}};_a.prototype.init.call(this),this.push=function(f){({pat:function(){},pes:function(){var a,b;switch(f.streamType){case Ma.H264_STREAM_TYPE:a=c,b="video";break;case Ma.ADTS_STREAM_TYPE:a=d,b="audio";break;case Ma.METADATA_STREAM_TYPE:a=e,b="timed-metadata";break;default:return}f.payloadUnitStartIndicator&&g(a,b,!0),a.data.push(f),a.size+=f.data.byteLength},pmt:function(){var c={type:"metadata",tracks:[]};a=f.programMapTable,null!==a.video&&c.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+a.video,codec:"avc",type:"video"}),null!==a.audio&&c.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+a.audio,codec:"adts",type:"audio"}),b.trigger("data",c)}})[f.type]()},this.reset=function(){c.size=0,c.data.length=0,d.size=0,d.data.length=0,this.trigger("reset")},this.flushStreams_=function(){g(c,"video"),g(d,"audio"),g(e,"timed-metadata")},this.flush=function(){this.flushStreams_(),this.trigger("done")}},_a.prototype=new M;var eb={PAT_PID:0,MP2T_PACKET_LENGTH:cb,TransportPacketStream:Za,TransportParseStream:$a,ElementaryStream:_a,TimestampRolloverStream:bb,CaptionStream:La.CaptionStream,Cea608Stream:La.Cea608Stream,MetadataStream:ab};for(var fb in Ma)Ma.hasOwnProperty(fb)&&(eb[fb]=Ma[fb]);var gb,hb=eb,ib=la.ONE_SECOND_IN_TS,jb=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];gb=function(a){var b,c=0;gb.prototype.init.call(this),this.push=function(d){var e,f,g,h,i,j,k=0;if(a||(c=0),"audio"===d.type)for(b?(h=b,b=new Uint8Array(h.byteLength+d.data.byteLength),b.set(h),b.set(d.data,h.byteLength)):b=d.data;k+5<b.length;)if(255===b[k]&&240===(246&b[k+1])){if(f=2*(1&~b[k+1]),e=(3&b[k+3])<<11|b[k+4]<<3|(224&b[k+5])>>5,i=1024*((3&b[k+6])+1),j=i*ib/jb[(60&b[k+2])>>>2],g=k+e,b.byteLength<g)return;if(this.trigger("data",{pts:d.pts+c*j,dts:d.dts+c*j,sampleCount:i,audioobjecttype:(b[k+2]>>>6&3)+1,channelcount:(1&b[k+2])<<2|(192&b[k+3])>>>6,samplerate:jb[(60&b[k+2])>>>2],samplingfrequencyindex:(60&b[k+2])>>>2,samplesize:16,data:b.subarray(k+7+f,g)}),c++,b.byteLength===g)return void(b=void 0);b=b.subarray(g)}else k++},this.flush=function(){c=0,this.trigger("done")},this.reset=function(){b=void 0,this.trigger("reset")},this.endTimeline=function(){b=void 0,this.trigger("endedtimeline")}},gb.prototype=new M;var kb,lb=gb;kb=function(a){var b=a.byteLength,c=0,d=0;this.length=function(){return 8*b},this.bitsAvailable=function(){return 8*b+d},this.loadWord=function(){var e=a.byteLength-b,f=new Uint8Array(4),g=Math.min(4,b);if(0===g)throw new Error("no bytes available");f.set(a.subarray(e,e+g)),c=new DataView(f.buffer).getUint32(0),d=8*g,b-=g},this.skipBits=function(a){var e;d>a?(c<<=a,d-=a):(a-=d,e=Math.floor(a/8),a-=8*e,b-=e,this.loadWord(),c<<=a,d-=a)},this.readBits=function(a){var e=Math.min(d,a),f=c>>>32-e;return d-=e,d>0?c<<=e:b>0&&this.loadWord(),e=a-e,e>0?f<<e|this.readBits(e):f},this.skipLeadingZeros=function(){var a;for(a=0;a<d;++a)if(0!==(c&2147483648>>>a))return c<<=a,d-=a,a;return this.loadWord(),a+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var a=this.skipLeadingZeros();return this.readBits(a+1)-1},this.readExpGolomb=function(){var a=this.readUnsignedExpGolomb();return 1&a?1+a>>>1:-1*(a>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var mb,nb,ob,pb=kb;nb=function(){var a,b,c=0;nb.prototype.init.call(this),this.push=function(d){var e;b?(e=new Uint8Array(b.byteLength+d.data.byteLength),e.set(b),e.set(d.data,b.byteLength),b=e):b=d.data;for(var f=b.byteLength;c<f-3;c++)if(1===b[c+2]){a=c+5;break}for(;a<f;)switch(b[a]){case 0:if(0!==b[a-1]){a+=2;break}if(0!==b[a-2]){a++;break}c+3!==a-2&&this.trigger("data",b.subarray(c+3,a-2));do a++;while(1!==b[a]&&a<f);c=a-2,a+=3;break;case 1:if(0!==b[a-1]||0!==b[a-2]){a+=3;break}this.trigger("data",b.subarray(c+3,a-2)),c=a-2,a+=3;break;default:a+=3}b=b.subarray(c),a-=c,c=0},this.reset=function(){b=null,c=0,this.trigger("reset")},this.flush=function(){b&&b.byteLength>3&&this.trigger("data",b.subarray(c+3)),b=null,c=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},nb.prototype=new M,ob={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},mb=function(){var a,b,c,d,e,f,g,h=new nb;mb.prototype.init.call(this),a=this,this.push=function(a){"video"===a.type&&(b=a.trackId,c=a.pts,d=a.dts,h.push(a))},h.on("data",function(g){var h={trackId:b,pts:c,dts:d,data:g};switch(31&g[0]){case 5:h.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:h.nalUnitType="sei_rbsp",h.escapedRBSP=e(g.subarray(1));break;case 7:h.nalUnitType="seq_parameter_set_rbsp",h.escapedRBSP=e(g.subarray(1)),h.config=f(h.escapedRBSP);break;case 8:h.nalUnitType="pic_parameter_set_rbsp";break;case 9:h.nalUnitType="access_unit_delimiter_rbsp"}a.trigger("data",h)}),h.on("done",function(){a.trigger("done")}),h.on("partialdone",function(){a.trigger("partialdone")}),h.on("reset",function(){a.trigger("reset")}),h.on("endedtimeline",function(){a.trigger("endedtimeline")}),this.flush=function(){h.flush()},this.partialFlush=function(){h.partialFlush()},this.reset=function(){h.reset()},this.endTimeline=function(){h.endTimeline()},g=function(a,b){var c,d,e=8,f=8;for(c=0;c<a;c++)0!==f&&(d=b.readExpGolomb(),f=(e+d+256)%256),e=0===f?e:f},e=function(a){for(var b,c,d=a.byteLength,e=[],f=1;f<d-2;)0===a[f]&&0===a[f+1]&&3===a[f+2]?(e.push(f+2),f+=2):f++;if(0===e.length)return a;b=d-e.length,c=new Uint8Array(b);var g=0;for(f=0;f<b;g++,f++)g===e[0]&&(g++,e.shift()),c[f]=a[g];return c},f=function(a){var b,c,d,e,f,h,i,j,k,l,m,n,o,p,q=0,r=0,s=0,t=0,u=1;if(b=new pb(a),c=b.readUnsignedByte(),e=b.readUnsignedByte(),d=b.readUnsignedByte(),b.skipUnsignedExpGolomb(),ob[c]&&(f=b.readUnsignedExpGolomb(),3===f&&b.skipBits(1),b.skipUnsignedExpGolomb(),b.skipUnsignedExpGolomb(),b.skipBits(1),b.readBoolean()))for(m=3!==f?8:12,p=0;p<m;p++)b.readBoolean()&&(p<6?g(16,b):g(64,b));if(b.skipUnsignedExpGolomb(),h=b.readUnsignedExpGolomb(),0===h)b.readUnsignedExpGolomb();else if(1===h)for(b.skipBits(1),b.skipExpGolomb(),b.skipExpGolomb(),i=b.readUnsignedExpGolomb(),p=0;p<i;p++)b.skipExpGolomb();if(b.skipUnsignedExpGolomb(),b.skipBits(1),j=b.readUnsignedExpGolomb(),k=b.readUnsignedExpGolomb(),l=b.readBits(1),0===l&&b.skipBits(1),b.skipBits(1),b.readBoolean()&&(q=b.readUnsignedExpGolomb(),r=b.readUnsignedExpGolomb(),s=b.readUnsignedExpGolomb(),t=b.readUnsignedExpGolomb()),b.readBoolean()&&b.readBoolean()){switch(o=b.readUnsignedByte()){case 1:n=[1,1];break;case 2:n=[12,11];break;case 3:n=[10,11];break;case 4:n=[16,11];break;case 5:n=[40,33];break;case 6:n=[24,11];break;case 7:n=[20,11];break;case 8:n=[32,11];break;case 9:n=[80,33];break;case 10:n=[18,11];break;case 11:n=[15,11];break;case 12:n=[64,33];break;case 13:n=[160,99];break;case 14:n=[4,3];break;case 15:n=[3,2];break;case 16:n=[2,1];break;case 255:n=[b.readUnsignedByte()<<8|b.readUnsignedByte(),b.readUnsignedByte()<<8|b.readUnsignedByte()]}n&&(u=n[0]/n[1])}return{profileIdc:c,levelIdc:d,profileCompatibility:e,width:Math.ceil((16*(j+1)-2*q-2*r)*u),height:(2-l)*(k+1)*16-2*s-2*t,sarRatio:n}}},mb.prototype=new M;var qb,rb={H264Stream:mb,NalByteStream:nb},sb=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],tb=function(a){return a[0]==="I".charCodeAt(0)&&a[1]==="D".charCodeAt(0)&&a[2]==="3".charCodeAt(0)},ub=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},vb=function(a,b,c){var d,e="";for(d=b;d<c;d++)e+="%"+("00"+a[d].toString(16)).slice(-2);return e},wb=function(a,b,c){return unescape(vb(a,b,c))},xb=function(a,b){var c=a[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9],d=a[b+5],e=(16&d)>>4;return e?c+20:c+10},yb=function(a,b){var c=(224&a[b+5])>>5,d=a[b+4]<<3,e=6144&a[b+3];return e|d|c},zb=function(a,b){return a[b]==="I".charCodeAt(0)&&a[b+1]==="D".charCodeAt(0)&&a[b+2]==="3".charCodeAt(0)?"timed-metadata":a[b]&!0&&240===(240&a[b+1])?"audio":null},Ab=function(a){for(var b=0;b+5<a.length;){if(255===a[b]&&240===(246&a[b+1]))return sb[(60&a[b+2])>>>2];b++}return null},Bb=function(a){var b,c,d,e;b=10,64&a[5]&&(b+=4,b+=ub(a.subarray(10,14)));do{if(c=ub(a.subarray(b+4,b+8)),c<1)return null;if(e=String.fromCharCode(a[b],a[b+1],a[b+2],a[b+3]),"PRIV"===e){d=a.subarray(b+10,b+c+10);for(var f=0;f<d.byteLength;f++)if(0===d[f]){var g=wb(d,0,f);if("com.apple.streaming.transportStreamTimestamp"===g){var h=d.subarray(f+1),i=(1&h[3])<<30|h[4]<<22|h[5]<<14|h[6]<<6|h[7]>>>2;return i*=4,i+=3&h[7]}break}}b+=10,b+=c}while(b<a.byteLength);return null},Cb={isLikelyAacData:tb,parseId3TagSize:xb,parseAdtsSize:yb,parseType:zb,parseSampleRate:Ab,parseAacTimestamp:Bb};qb=function(){var a=new Uint8Array,b=0;qb.prototype.init.call(this),this.setTimestamp=function(a){b=a},this.push=function(c){var d,e,f,g,h=0,i=0;for(a.length?(g=a.length,a=new Uint8Array(c.byteLength+g),a.set(a.subarray(0,g)),a.set(c,g)):a=c;a.length-i>=3;)if(a[i]!=="I".charCodeAt(0)||a[i+1]!=="D".charCodeAt(0)||a[i+2]!=="3".charCodeAt(0))if(255!==(255&a[i])||240!==(240&a[i+1]))i++;else{if(a.length-i<7)break;if(h=Cb.parseAdtsSize(a,i),i+h>a.length)break;f={type:"audio",data:a.subarray(i,i+h),pts:b,dts:b},this.trigger("data",f),i+=h}else{if(a.length-i<10)break;if(h=Cb.parseId3TagSize(a,i),i+h>a.length)break;e={type:"timed-metadata",data:a.subarray(i,i+h)},this.trigger("data",e),i+=h}d=a.length-i,a=d>0?a.subarray(i):new Uint8Array},this.reset=function(){a=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){a=new Uint8Array,this.trigger("endedtimeline")}},qb.prototype=new M;var Db,Eb,Fb,Gb,Hb=qb,Ib=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Jb=Ib,Kb=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Lb=Kb,Mb=rb.H264Stream,Nb=Cb.isLikelyAacData,Ob=la.ONE_SECOND_IN_TS,Pb=function(a,b){var c;if(a.length!==b.length)return!1;for(c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},Qb=function(a,b,c,d,e,f){var g=c-b,h=d-b,i=e-c;return{start:{dts:a,pts:a+g},end:{dts:a+h,pts:a+i},prependedContentDuration:f,baseMediaDecodeTime:a}};Eb=function(a,b){var c=[],d=0,e=0,f=0,g=1/0;b=b||{},Eb.prototype.init.call(this),this.push=function(b){wa.collectDtsInfo(a,b),a&&Jb.forEach(function(c){a[c]=b[c]}),c.push(b)},this.setEarliestDts=function(a){e=a},this.setVideoBaseMediaDecodeTime=function(a){g=a},this.setAudioAppendStart=function(a){f=a},this.flush=function(){var h,i,j,k,l;return 0===c.length?void this.trigger("done","AudioSegmentStream"):(h=ra.trimAdtsFramesByEarliestDts(c,a,e),a.baseMediaDecodeTime=wa.calculateTrackBaseMediaDecodeTime(a,b.keepOriginalTimestamps),ra.prefixWithSilence(a,h,f,g),a.samples=ra.generateSampleTable(h),j=W.mdat(ra.concatenateFrameData(h)),c=[],i=W.moof(d,[a]),k=new Uint8Array(i.byteLength+j.byteLength),d++,k.set(i),k.set(j,i.byteLength),wa.clearDtsInfo(a),l=Math.ceil(1024*Ob/a.samplerate),h.length&&this.trigger("timingInfo",{start:h[0].pts,end:h[0].pts+h.length*l}),this.trigger("data",{track:a,boxes:k}),void this.trigger("done","AudioSegmentStream"))},this.reset=function(){wa.clearDtsInfo(a),c=[],this.trigger("reset")}},Eb.prototype=new M,Db=function(a,b){var c,d,e=0,f=[],g=[];b=b||{},Db.prototype.init.call(this),delete a.minPTS,this.gopCache_=[],this.push=function(b){wa.collectDtsInfo(a,b),"seq_parameter_set_rbsp"!==b.nalUnitType||c||(c=b.config,a.sps=[b.data],Lb.forEach(function(b){a[b]=c[b]},this)),"pic_parameter_set_rbsp"!==b.nalUnitType||d||(d=b.data,a.pps=[b.data]),f.push(b)},this.flush=function(){for(var c,d,h,i,j,k,l,m,n=0;f.length&&"access_unit_delimiter_rbsp"!==f[0].nalUnitType;)f.shift();if(0===f.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(c=ea.groupNalsIntoFrames(f),h=ea.groupFramesIntoGops(c),h[0][0].keyFrame||(d=this.getGopForFusion_(f[0],a),d?(n=d.duration,h.unshift(d),h.byteLength+=d.byteLength,h.nalCount+=d.nalCount,h.pts=d.pts,h.dts=d.dts,h.duration+=d.duration):h=ea.extendFirstKeyFrame(h)),g.length){var o;if(o=b.alignGopsAtEnd?this.alignGopsAtEnd_(h):this.alignGopsAtStart_(h),!o)return this.gopCache_.unshift({gop:h.pop(),pps:a.pps,sps:a.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),f=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");wa.clearDtsInfo(a),h=o}wa.collectDtsInfo(a,h),a.samples=ea.generateSampleTable(h),j=W.mdat(ea.concatenateNalData(h)),a.baseMediaDecodeTime=wa.calculateTrackBaseMediaDecodeTime(a,b.keepOriginalTimestamps),this.trigger("processedGopsInfo",h.map(function(a){return{pts:a.pts,dts:a.dts,byteLength:a.byteLength}})),l=h[0],m=h[h.length-1],this.trigger("segmentTimingInfo",Qb(a.baseMediaDecodeTime,l.dts,l.pts,m.dts+m.duration,m.pts+m.duration,n)),this.trigger("timingInfo",{start:h[0].pts,end:h[h.length-1].pts+h[h.length-1].duration}),this.gopCache_.unshift({gop:h.pop(),pps:a.pps,sps:a.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),f=[],this.trigger("baseMediaDecodeTime",a.baseMediaDecodeTime),this.trigger("timelineStartInfo",a.timelineStartInfo),i=W.moof(e,[a]),k=new Uint8Array(i.byteLength+j.byteLength),e++,k.set(i),k.set(j,i.byteLength),this.trigger("data",{track:a,boxes:k}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),
f=[],this.gopCache_.length=0,g.length=0,this.trigger("reset")},this.resetStream_=function(){wa.clearDtsInfo(a),c=void 0,d=void 0},this.getGopForFusion_=function(b){var c,d,e,f,g,h=45e3,i=1e4,j=1/0;for(g=0;g<this.gopCache_.length;g++)f=this.gopCache_[g],e=f.gop,a.pps&&Pb(a.pps[0],f.pps[0])&&a.sps&&Pb(a.sps[0],f.sps[0])&&(e.dts<a.timelineStartInfo.dts||(c=b.dts-e.dts-e.duration,c>=-i&&c<=h&&(!d||j>c)&&(d=f,j=c)));return d?d.gop:null},this.alignGopsAtStart_=function(a){var b,c,d,e,f,h,i,j;for(f=a.byteLength,h=a.nalCount,i=a.duration,b=c=0;b<g.length&&c<a.length&&(d=g[b],e=a[c],d.pts!==e.pts);)e.pts>d.pts?b++:(c++,f-=e.byteLength,h-=e.nalCount,i-=e.duration);return 0===c?a:c===a.length?null:(j=a.slice(c),j.byteLength=f,j.duration=i,j.nalCount=h,j.pts=j[0].pts,j.dts=j[0].dts,j)},this.alignGopsAtEnd_=function(a){var b,c,d,e,f,h;for(b=g.length-1,c=a.length-1,f=null,h=!1;b>=0&&c>=0;){if(d=g[b],e=a[c],d.pts===e.pts){h=!0;break}d.pts>e.pts?b--:(b===g.length-1&&(f=c),c--)}if(!h&&null===f)return null;var i;if(i=h?c:f,0===i)return a;var j=a.slice(i),k=j.reduce(function(a,b){return a.byteLength+=b.byteLength,a.duration+=b.duration,a.nalCount+=b.nalCount,a},{byteLength:0,duration:0,nalCount:0});return j.byteLength=k.byteLength,j.duration=k.duration,j.nalCount=k.nalCount,j.pts=j[0].pts,j.dts=j[0].dts,j},this.alignGopsWith=function(a){g=a}},Db.prototype=new M,Gb=function(a,b){this.numberOfTracks=0,this.metadataStream=b,a=a||{},"undefined"!=typeof a.remux?this.remuxTracks=!!a.remux:this.remuxTracks=!0,"boolean"==typeof a.keepOriginalTimestamps?this.keepOriginalTimestamps=a.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Gb.prototype.init.call(this),this.push=function(a){return a.text?this.pendingCaptions.push(a):a.frames?this.pendingMetadata.push(a):(this.pendingTracks.push(a.track),this.pendingBytes+=a.boxes.byteLength,"video"===a.track.type&&(this.videoTrack=a.track,this.pendingBoxes.push(a.boxes)),void("audio"===a.track.type&&(this.audioTrack=a.track,this.pendingBoxes.unshift(a.boxes))))}},Gb.prototype=new M,Gb.prototype.flush=function(a){var b,c,d,e,f=0,g={captions:[],captionStreams:{},metadata:[],info:{}},h=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==a&&"AudioSegmentStream"!==a)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(h=this.videoTrack.timelineStartInfo.pts,Lb.forEach(function(a){g.info[a]=this.videoTrack[a]},this)):this.audioTrack&&(h=this.audioTrack.timelineStartInfo.pts,Jb.forEach(function(a){g.info[a]=this.audioTrack[a]},this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?g.type=this.pendingTracks[0].type:g.type="combined",this.emittedTracks+=this.pendingTracks.length,d=W.initSegment(this.pendingTracks),g.initSegment=new Uint8Array(d.byteLength),g.initSegment.set(d),g.data=new Uint8Array(this.pendingBytes),e=0;e<this.pendingBoxes.length;e++)g.data.set(this.pendingBoxes[e],f),f+=this.pendingBoxes[e].byteLength;for(e=0;e<this.pendingCaptions.length;e++)b=this.pendingCaptions[e],b.startTime=la.metadataTsToSeconds(b.startPts,h,this.keepOriginalTimestamps),b.endTime=la.metadataTsToSeconds(b.endPts,h,this.keepOriginalTimestamps),g.captionStreams[b.stream]=!0,g.captions.push(b);for(e=0;e<this.pendingMetadata.length;e++)c=this.pendingMetadata[e],c.cueTime=la.metadataTsToSeconds(c.pts,h,this.keepOriginalTimestamps),g.metadata.push(c);for(g.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",g),e=0;e<g.captions.length;e++)b=g.captions[e],this.trigger("caption",b);for(e=0;e<g.metadata.length;e++)c=g.metadata[e],this.trigger("id3Frame",c)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Gb.prototype.setRemux=function(a){this.remuxTracks=a},Fb=function(a){var b,c,d=this,e=!0;Fb.prototype.init.call(this),a=a||{},this.baseMediaDecodeTime=a.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var e={};this.transmuxPipeline_=e,e.type="aac",e.metadataStream=new hb.MetadataStream,e.aacStream=new Hb,e.audioTimestampRolloverStream=new hb.TimestampRolloverStream("audio"),e.timedMetadataTimestampRolloverStream=new hb.TimestampRolloverStream("timed-metadata"),e.adtsStream=new lb,e.coalesceStream=new Gb(a,e.metadataStream),e.headOfPipeline=e.aacStream,e.aacStream.pipe(e.audioTimestampRolloverStream).pipe(e.adtsStream),e.aacStream.pipe(e.timedMetadataTimestampRolloverStream).pipe(e.metadataStream).pipe(e.coalesceStream),e.metadataStream.on("timestamp",function(a){e.aacStream.setTimestamp(a.timeStamp)}),e.aacStream.on("data",function(f){"timed-metadata"!==f.type||e.audioSegmentStream||(c=c||{timelineStartInfo:{baseMediaDecodeTime:d.baseMediaDecodeTime},codec:"adts",type:"audio"},e.coalesceStream.numberOfTracks++,e.audioSegmentStream=new Eb(c,a),e.audioSegmentStream.on("timingInfo",d.trigger.bind(d,"audioTimingInfo")),e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream)),d.trigger("trackinfo",{hasAudio:!!c,hasVideo:!!b})}),e.coalesceStream.on("data",this.trigger.bind(this,"data")),e.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var e={};this.transmuxPipeline_=e,e.type="ts",e.metadataStream=new hb.MetadataStream,e.packetStream=new hb.TransportPacketStream,e.parseStream=new hb.TransportParseStream,e.elementaryStream=new hb.ElementaryStream,e.timestampRolloverStream=new hb.TimestampRolloverStream,e.adtsStream=new lb,e.h264Stream=new Mb,e.captionStream=new hb.CaptionStream,e.coalesceStream=new Gb(a,e.metadataStream),e.headOfPipeline=e.packetStream,e.packetStream.pipe(e.parseStream).pipe(e.elementaryStream).pipe(e.timestampRolloverStream),e.timestampRolloverStream.pipe(e.h264Stream),e.timestampRolloverStream.pipe(e.adtsStream),e.timestampRolloverStream.pipe(e.metadataStream).pipe(e.coalesceStream),e.h264Stream.pipe(e.captionStream).pipe(e.coalesceStream),e.elementaryStream.on("data",function(f){var g,h=a.keepOriginalTimestamps?0:d.baseMediaDecodeTime;if("metadata"===f.type){for(g=f.tracks.length;g--;)b||"video"!==f.tracks[g].type?c||"audio"!==f.tracks[g].type||(c=f.tracks[g],c.timelineStartInfo.baseMediaDecodeTime=h):(b=f.tracks[g],b.timelineStartInfo.baseMediaDecodeTime=h);b&&!e.videoSegmentStream&&(e.coalesceStream.numberOfTracks++,e.videoSegmentStream=new Db(b,a),e.videoSegmentStream.on("timelineStartInfo",function(b){c&&!a.keepOriginalTimestamps&&(c.timelineStartInfo=b,e.audioSegmentStream.setEarliestDts(b.dts-d.baseMediaDecodeTime))}),e.videoSegmentStream.on("processedGopsInfo",d.trigger.bind(d,"gopInfo")),e.videoSegmentStream.on("segmentTimingInfo",d.trigger.bind(d,"videoSegmentTimingInfo")),e.videoSegmentStream.on("baseMediaDecodeTime",function(a){c&&e.audioSegmentStream.setVideoBaseMediaDecodeTime(a)}),e.videoSegmentStream.on("timingInfo",d.trigger.bind(d,"videoTimingInfo")),e.h264Stream.pipe(e.videoSegmentStream).pipe(e.coalesceStream)),c&&!e.audioSegmentStream&&(e.coalesceStream.numberOfTracks++,e.audioSegmentStream=new Eb(c,a),e.audioSegmentStream.on("timingInfo",d.trigger.bind(d,"audioTimingInfo")),e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream)),d.trigger("trackinfo",{hasAudio:!!c,hasVideo:!!b})}}),e.coalesceStream.on("data",this.trigger.bind(this,"data")),e.coalesceStream.on("id3Frame",function(a){a.dispatchType=e.metadataStream.dispatchType,d.trigger("id3Frame",a)}),e.coalesceStream.on("caption",this.trigger.bind(this,"caption")),e.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(a){var d=this.transmuxPipeline_;this.baseMediaDecodeTime=a,c&&(c.timelineStartInfo.dts=void 0,c.timelineStartInfo.pts=void 0,wa.clearDtsInfo(c),d.audioTimestampRolloverStream&&d.audioTimestampRolloverStream.discontinuity()),b&&(d.videoSegmentStream&&(d.videoSegmentStream.gopCache_=[]),b.timelineStartInfo.dts=void 0,b.timelineStartInfo.pts=void 0,wa.clearDtsInfo(b),d.captionStream.reset()),d.timestampRolloverStream&&d.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(a){c&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(a)},this.setRemux=function(b){var c=this.transmuxPipeline_;a.remux=b,c&&c.coalesceStream&&c.coalesceStream.setRemux(b)},this.alignGopsWith=function(a){b&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(a)},this.push=function(a){if(e){var b=Nb(a);b&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():b||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),e=!1}this.transmuxPipeline_.headOfPipeline.push(a)},this.flush=function(){e=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Fb.prototype=new M;var Rb={Transmuxer:Fb,VideoSegmentStream:Db,AudioSegmentStream:Eb,AUDIO_PROPERTIES:Jb,VIDEO_PROPERTIES:Lb,generateVideoSegmentTimingInfo:Qb},Sb=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},Tb=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),Ub=function(a,b){b.on("data",function(b){var c=b.initSegment;b.initSegment={data:c.buffer,byteOffset:c.byteOffset,byteLength:c.byteLength};var d=b.data;b.data=d.buffer,a.postMessage({action:"data",segment:b,byteOffset:d.byteOffset,byteLength:d.byteLength},[b.data])}),b.captionStream&&b.captionStream.on("data",function(b){a.postMessage({action:"caption",data:b})}),b.on("done",function(b){a.postMessage({action:"done"})}),b.on("gopInfo",function(b){a.postMessage({action:"gopInfo",gopInfo:b})}),b.on("videoSegmentTimingInfo",function(b){a.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:b})})},Vb=function(){function a(b,c){Sb(this,a),this.options=c||{},this.self=b,this.init()}return Tb(a,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Rb.Transmuxer(this.options),Ub(this.self,this.transmuxer)}},{key:"push",value:function(a){var b=new Uint8Array(a.data,a.byteOffset,a.byteLength);this.transmuxer.push(b)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(a){var b=a.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*b))}},{key:"setAudioAppendStart",value:function(a){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*a.appendStart))}},{key:"flush",value:function(a){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(a){this.transmuxer.alignGopsWith(a.gopsToAlignWith.slice())}}]),a}(),Wb=function(a){a.onmessage=function(b){return"init"===b.data.action&&b.data.options?void(this.messageHandlers=new Vb(a,b.data.options)):(this.messageHandlers||(this.messageHandlers=new Vb(a)),void(b.data&&b.data.action&&"init"!==b.data.action&&this.messageHandlers[b.data.action]&&this.messageHandlers[b.data.action](b.data)))}},Xb=new Wb(c);return Xb})()}),dn={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},en=function(a){return a.map(function(a){return a.replace(/avc1\.(\d+)\.(\d+)/i,function(a,b,c){var d=("00"+Number(b).toString(16)).slice(-2),e=("00"+Number(c).toString(16)).slice(-2);return"avc1."+d+"00"+e})})},fn=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",b={codecCount:0},c=void 0;return b.codecCount=a.split(",").length,b.codecCount=b.codecCount||2,c=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(a),c&&(b.videoCodec=c[2],b.videoObjectTypeIndicator=c[3]),b.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(a),b.audioProfile=b.audioProfile&&b.audioProfile[2],b},gn=function(a){return a.replace(/avc1\.(\d+)\.(\d+)/i,function(a){return en([a])[0]})},hn=function(a,b,c){return a+"/"+b+'; codecs="'+c.filter(function(a){return!!a}).join(", ")+'"'},jn=function(a){return a.segments&&a.segments.length&&a.segments[0].map?"mp4":"mp2t"},kn=function(a){var b=a.attributes||{};return b.CODECS?fn(b.CODECS):dn},ln=function(a,b){if(!a.mediaGroups.AUDIO||!b)return null;var c=a.mediaGroups.AUDIO[b];if(!c)return null;for(var d in c){var e=c[d];if(e.default&&e.playlists)return fn(e.playlists[0].attributes.CODECS).audioProfile}return null},mn=function(a,b){var c=jn(b),d=kn(b),e=b.attributes||{},f=!0,g=!1;if(!b)return[];if(a.mediaGroups.AUDIO&&e.AUDIO){var h=a.mediaGroups.AUDIO[e.AUDIO];if(h){g=!0,f=!1;for(var i in h)if(!h[i].uri&&!h[i].playlists){f=!0;break}}}g&&!d.audioProfile&&(f||(d.audioProfile=ln(a,e.AUDIO)),d.audioProfile||(ib.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),d.audioProfile=dn.audioProfile));var j={};d.videoCodec&&(j.video=""+d.videoCodec+d.videoObjectTypeIndicator),d.audioProfile&&(j.audio="mp4a.40."+d.audioProfile);var k=hn("audio",c,[j.audio]),l=hn("video",c,[j.video]),m=hn("video",c,[j.video,j.audio]);return g?!f&&j.video?[l,k]:f||j.video?[m,k]:[k,k]:j.video?[m]:[k]},nn=function(a){var b={type:"",parameters:{}},c=a.trim().split(";");return b.type=c.shift().trim(),c.forEach(function(a){var c=a.trim().split("=");if(c.length>1){var d=c[0].replace(/"/g,"").trim(),e=c[1].replace(/"/g,"").trim();b.parameters[d]=e}}),b},on=function(a){return/mp4a\.\d+.\d+/i.test(a)},pn=function(a){return/avc1\.[\da-f]+/i.test(a)},qn=function(a,b,c){if("undefined"==typeof b||null===b||!a.length)return[];var d=Math.ceil(9e4*(b-c+3)),e=void 0;for(e=0;e<a.length&&!(a[e].pts>d);e++);return a.slice(e)},rn=function(a,b,c){if(!b.length)return a;if(c)return b.slice();var d=b[0].pts,e=0;for(e;e<a.length&&!(a[e].pts>=d);e++);return a.slice(0,e).concat(b)},sn=function(a,b,c,d){for(var e=Math.ceil(9e4*(b-d)),f=Math.ceil(9e4*(c-d)),g=a.slice(),h=a.length;h--&&!(a[h].pts<=f););if(h===-1)return g;for(var i=h+1;i--&&!(a[i].pts<=e););return i=Math.max(i,0),g.splice(i,h-i+1),g},tn=function(a,b,c){var d=null,e=null,f=0,g=[],h=[];if(!a&&!b)return ib.createTimeRange();if(!a)return b.buffered;if(!b)return a.buffered;if(c)return a.buffered;if(0===a.buffered.length&&0===b.buffered.length)return ib.createTimeRange();for(var i=a.buffered,j=b.buffered,k=i.length;k--;)g.push({time:i.start(k),type:"start"}),g.push({time:i.end(k),type:"end"});for(k=j.length;k--;)g.push({time:j.start(k),type:"start"}),g.push({time:j.end(k),type:"end"});for(g.sort(function(a,b){return a.time-b.time}),k=0;k<g.length;k++)"start"===g[k].type?(f++,2===f&&(d=g[k].time)):"end"===g[k].type&&(f--,1===f&&(e=g[k].time)),null!==d&&null!==e&&(h.push([d,e]),d=null,e=null);return ib.createTimeRanges(h)},un=9e4,vn=function(a,b){var c=a.addSourceBuffer(b),d=Object.create(null);d.updating=!1,d.realBuffer_=c;var e=function(a){"function"==typeof c[a]?d[a]=function(){return c[a].apply(c,arguments)}:"undefined"==typeof d[a]&&Object.defineProperty(d,a,{get:function(){return c[a]},set:function(b){return c[a]=b}})};for(var f in c)e(f);return d},wn=function(a){function b(a,c){vl(this,b);var d=zl(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,ib.EventTarget));d.timestampOffset_=0,d.pendingBuffers_=[],d.bufferUpdating_=!1,d.mediaSource_=a,d.codecs_=c,d.audioCodec_=null,d.videoCodec_=null,d.audioDisabled_=!1,d.appendAudioInitSegment_=!0,d.gopBuffer_=[],d.timeMapping_=0,d.safeAppend_=ib.browser.IE_VERSION>=11;var e={remux:!1,alignGopsAtEnd:d.safeAppend_};return d.codecs_.forEach(function(a){on(a)?d.audioCodec_=a:pn(a)&&(d.videoCodec_=a)}),d.transmuxer_=new cn,d.transmuxer_.postMessage({action:"init",options:e}),d.transmuxer_.onmessage=function(a){return"data"===a.data.action?d.data_(a):"done"===a.data.action?d.done_(a):"gopInfo"===a.data.action?d.appendGopInfo_(a):"videoSegmentTimingInfo"===a.data.action?d.videoSegmentTimingInfo_(a.data.videoSegmentTimingInfo):void 0},Object.defineProperty(d,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(a){"number"==typeof a&&a>=0&&(this.timestampOffset_=a,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:a}))}}),Object.defineProperty(d,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(a){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=a),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=a)}}),Object.defineProperty(d,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(d,"buffered",{get:function(){return tn(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}}),d}return yl(b,a),wl(b,[{key:"data_",value:function(a){var b=a.data.segment;b.data=new Uint8Array(b.data,a.data.byteOffset,a.data.byteLength),b.initSegment=new Uint8Array(b.initSegment.data,b.initSegment.byteOffset,b.initSegment.byteLength),Qm(this,this.mediaSource_,b),this.pendingBuffers_.push(b)}},{key:"done_",value:function(a){return"closed"===this.mediaSource_.readyState?void(this.pendingBuffers_.length=0):void this.processPendingSegments_()}},{key:"videoSegmentTimingInfo_",value:function(a){var b={start:{decode:a.start.dts/un,presentation:a.start.pts/un},end:{decode:a.end.dts/un,presentation:a.end.pts/un},baseMediaDecodeTime:a.baseMediaDecodeTime/un};a.prependedContentDuration&&(b.prependedContentDuration=a.prependedContentDuration/un),this.trigger({type:"videoSegmentTimingInfo",videoSegmentTimingInfo:b})}},{key:"createRealSourceBuffers_",value:function(){var a=this,b=["audio","video"];b.forEach(function(c){if(a[c+"Codec_"]&&!a[c+"Buffer_"]){var d=null;if(a.mediaSource_[c+"Buffer_"])d=a.mediaSource_[c+"Buffer_"],d.updating=!1;else{var e=c+"Codec_",f=c+'/mp4;codecs="'+a[e]+'"';d=vn(a.mediaSource_.nativeMediaSource_,f),a.mediaSource_[c+"Buffer_"]=d}a[c+"Buffer_"]=d,["update","updatestart","updateend"].forEach(function(e){d.addEventListener(e,function(){if("audio"!==c||!a.audioDisabled_){"updateend"===e&&(a[c+"Buffer_"].updating=!1);var d=b.every(function(b){return!("audio"!==b||!a.audioDisabled_)||(c===b||!a[b+"Buffer_"]||!a[b+"Buffer_"].updating)});return d?a.trigger(e):void 0}})})}})}},{key:"appendBuffer",value:function(a){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var b=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:b.end(b.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:qn(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)}),this.transmuxer_.postMessage({action:"push",data:a.buffer,byteOffset:a.byteOffset,byteLength:a.byteLength},[a.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(a){this.gopBuffer_=rn(this.gopBuffer_,a.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function(a,b){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(a,b),this.gopBuffer_=sn(this.gopBuffer_,a,b,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(a,b)),Rm(a,b,this.metadataTrack_),this.inbandTextTracks_)for(var c in this.inbandTextTracks_)Rm(a,b,this.inbandTextTracks_[c])}},{key:"processPendingSegments_",value:function(){var a={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};if(!this.pendingBuffers_.length)return this.trigger("updateend"),void(this.bufferUpdating_=!1);a=this.pendingBuffers_.reduce(function(a,b){var c=b.type,d=b.data,e=b.initSegment;return a[c].segments.push(d),a[c].bytes+=d.byteLength,a[c].initSegment=e,b.captions&&(a.captions=a.captions.concat(b.captions)),b.info&&(a[c].info=b.info),b.metadata&&(a.metadata=a.metadata.concat(b.metadata)),a},a),this.videoBuffer_||this.audioBuffer_||(0===a.video.bytes&&(this.videoCodec_=null),0===a.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),a.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:a.audio.info}),a.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:a.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(a.audio.segments.unshift(a.audio.initSegment),a.audio.bytes+=a.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var b=!1;this.videoBuffer_&&a.video.bytes?(a.video.segments.unshift(a.video.initSegment),a.video.bytes+=a.video.initSegment.byteLength,this.concatAndAppendSegments_(a.video,this.videoBuffer_)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(b=!0),Um(this,a.captions,a.metadata),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(a.audio,this.audioBuffer_),this.pendingBuffers_.length=0,b&&this.trigger("updateend"),this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(a,b){var c=0,d=void 0;if(a.bytes){d=new Uint8Array(a.bytes),a.segments.forEach(function(a){d.set(a,c),c+=a.byteLength});try{b.updating=!0,b.appendBuffer(d)}catch(a){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:a.message,originalError:a})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}},{key:"dispose",value:function(){this.transmuxer_&&this.transmuxer_.terminate(),this.trigger("dispose"),this.off()}}]),b}(ib.EventTarget),xn=function(c){function d(){vl(this,d);var c=zl(this,(d.__proto__||Object.getPrototypeOf(d)).call(this)),e=void 0;c.nativeMediaSource_=new a.MediaSource;for(e in c.nativeMediaSource_)e in d.prototype||"function"!=typeof c.nativeMediaSource_[e]||(c[e]=c.nativeMediaSource_[e].bind(c.nativeMediaSource_));return c.duration_=NaN,Object.defineProperty(c,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(a){if(this.duration_=a,a!==1/0)return void(this.nativeMediaSource_.duration=a)}}),Object.defineProperty(c,"seekable",{get:function(){return this.duration_===1/0?ib.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(c,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(c,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),c.sourceBuffers=[],c.activeSourceBuffers_=[],c.updateActiveSourceBuffers_=function(){if(c.activeSourceBuffers_.length=0,1===c.sourceBuffers.length){var a=c.sourceBuffers[0];return a.appendAudioInitSegment_=!0,a.audioDisabled_=!a.audioCodec_,void c.activeSourceBuffers_.push(a)}for(var b=!1,d=!0,e=0;e<c.player_.audioTracks().length;e++){var f=c.player_.audioTracks()[e];if(f.enabled&&"main"!==f.kind){b=!0,d=!1;break}}c.sourceBuffers.forEach(function(a,e){if(a.appendAudioInitSegment_=!0,a.videoCodec_&&a.audioCodec_)a.audioDisabled_=b;else if(a.videoCodec_&&!a.audioCodec_)a.audioDisabled_=!0,d=!1;else if(!a.videoCodec_&&a.audioCodec_&&(a.audioDisabled_=e?d:!d,a.audioDisabled_))return;c.activeSourceBuffers_.push(a)})},c.onPlayerMediachange_=function(){c.sourceBuffers.forEach(function(a){a.appendAudioInitSegment_=!0})},c.onHlsReset_=function(){c.sourceBuffers.forEach(function(a){a.transmuxer_&&a.transmuxer_.postMessage({action:"resetCaptions"})})},c.onHlsSegmentTimeMapping_=function(a){c.sourceBuffers.forEach(function(b){return b.timeMapping_=a.mapping})},["sourceopen","sourceclose","sourceended"].forEach(function(a){this.nativeMediaSource_.addEventListener(a,this.trigger.bind(this))},c),c.on("sourceopen",function(a){var d=b.querySelector('[src="'+c.url_+'"]');d&&(c.player_=ib(d.parentNode),c.player_&&(c.player_.tech_.on("hls-reset",c.onHlsReset_),c.player_.tech_.on("hls-segment-time-mapping",c.onHlsSegmentTimeMapping_),c.player_.audioTracks&&c.player_.audioTracks()&&(c.player_.audioTracks().on("change",c.updateActiveSourceBuffers_),c.player_.audioTracks().on("addtrack",c.updateActiveSourceBuffers_),c.player_.audioTracks().on("removetrack",c.updateActiveSourceBuffers_)),c.player_.on("mediachange",c.onPlayerMediachange_)))}),c.on("sourceended",function(a){for(var b=Tm(c.duration),d=0;d<c.sourceBuffers.length;d++){var e=c.sourceBuffers[d],f=e.metadataTrack_&&e.metadataTrack_.cues;f&&f.length&&(f[f.length-1].endTime=b)}}),c.on("sourceclose",function(a){this.sourceBuffers.forEach(function(a){a.transmuxer_&&a.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_&&this.player_.tech_.el_&&(this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))}),c}return yl(d,c),wl(d,[{key:"addSeekableRange_",value:function(a,b){var c=void 0;if(this.duration!==1/0)throw c=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity"),c.name="InvalidStateError",c.code=11,c;(b>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=b)}},{key:"addSourceBuffer",value:function(a){var b=void 0,c=nn(a);if(/^(video|audio)\/mp2t$/i.test(c.type)){var d=[];c.parameters&&c.parameters.codecs&&(d=c.parameters.codecs.split(","),d=en(d),d=d.filter(function(a){return on(a)||pn(a)})),0===d.length&&(d=["avc1.4d400d","mp4a.40.2"]),b=new wn(this,d),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),b.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else b=this.nativeMediaSource_.addSourceBuffer(a);return this.sourceBuffers.push(b),b}},{key:"dispose",value:function(){this.trigger("dispose"),this.off(),this.sourceBuffers.forEach(function(a){a.dispose&&a.dispose()}),this.sourceBuffers.length=0}}]),d}(ib.EventTarget),yn=0;ib.mediaSources={};var zn=function(a,b){var c=ib.mediaSources[a];if(!c)throw new Error("Media Source not found (Video.js)");c.trigger({type:"sourceopen",swfId:b})},An=function(){return!!a.MediaSource&&!!a.MediaSource.isTypeSupported&&a.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},Bn=function(){if(this.MediaSource={open:zn,supportsNativeMediaSources:An},An())return new xn;throw new Error("Cannot use create a virtual MediaSource for this video")};Bn.open=zn,Bn.supportsNativeMediaSources=An;var Cn={createObjectURL:function(b){var c="blob:vjs-media-source/",d=void 0;return b instanceof xn?(d=a.URL.createObjectURL(b.nativeMediaSource_),b.url_=d,d):b instanceof xn?(d=c+yn,yn++,ib.mediaSources[d]=b,d):(d=a.URL.createObjectURL(b),b.url_=d,d)}};ib.MediaSource=Bn,ib.URL=Cn;var Dn=ib.EventTarget,En=ib.mergeOptions,Fn=function(a,b){for(var c=void 0,d=En(a,{duration:b.duration,minimumUpdatePeriod:b.minimumUpdatePeriod}),e=0;e<b.playlists.length;e++){var f=Hl(d,b.playlists[e]);f?d=f:c=!0}return El(b,function(a,b,e,f){if(a.playlists&&a.playlists.length){var g=a.playlists[0].id,h=Hl(d,a.playlists[0]);h&&(d=h,d.mediaGroups[b][e][f].playlists[0]=d.playlists[g],c=!1)}}),c?null:d},Gn=function(a){var b=a.byterange.offset+a.byterange.length-1;return a.uri+"-"+a.byterange.offset+"-"+b},Hn=function(a,b){var c=Boolean(!a.map&&!b.map),d=c||Boolean(a.map&&b.map&&a.map.byterange.offset===b.map.byterange.offset&&a.map.byterange.length===b.map.byterange.length);return d&&a.uri===b.uri&&a.byterange.offset===b.byterange.offset&&a.byterange.length===b.byterange.length},In=function(a,b){var c={};for(var d in a){var e=a[d],f=e.sidx;if(f){var g=Gn(f);if(!b[g])break;var h=b[g].sidxInfo;Hn(h,f)&&(c[g]=b[g])}}return c},Jn=function(a,b,c,d){var e=rj(a,{manifestUri:b,clientOffset:c}),f=In(e.playlists,d),g=f;return El(e,function(a,b,c,e){if(a.playlists&&a.playlists.length){var f=a.playlists;g=En(g,In(f,d))}}),g},Kn=function(a,b,c,d,e){var f={uri:ul(d.handleManifestRedirects,a.resolvedUri),byterange:a.byterange,playlist:b},g=ib.mergeOptions(f,{responseType:"arraybuffer",headers:nm(f)});return c(g,e)},Ln=function(b){function c(a,b){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},e=arguments[3];vl(this,c);var f=zl(this,(c.__proto__||Object.getPrototypeOf(c)).call(this)),g=d.withCredentials,h=void 0!==g&&g,i=d.handleManifestRedirects,j=void 0!==i&&i;if(f.hls_=b,f.withCredentials=h,f.handleManifestRedirects=j,!a)throw new Error("A non-empty playlist URL or playlist is required");return f.on("minimumUpdatePeriod",function(){f.refreshXml_()}),f.on("mediaupdatetimeout",function(){f.refreshMedia_(f.media().id)}),f.state="HAVE_NOTHING",f.loadedPlaylists_={},"string"==typeof a?(f.srcUrl=a,f.sidxMapping_={},zl(f)):(f.setupChildLoader(e,a),f)}return yl(c,b),wl(c,[{key:"setupChildLoader",value:function(a,b){this.masterPlaylistLoader_=a,this.childPlaylist_=b}},{key:"dispose",value:function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},a.clearTimeout(this.minimumUpdatePeriodTimeout_),a.clearTimeout(this.mediaRequest_),a.clearTimeout(this.mediaUpdateTimeout),this.off()}},{key:"hasPendingRequest",value:function(){return this.request||this.mediaRequest_}},{key:"stopRequest",value:function(){if(this.request){var a=this.request;this.request=null,a.onreadystatechange=null,a.abort()}}},{key:"sidxRequestFinished_",value:function(a,b,c,d){var e=this;return function(f,g){if(e.request){if(e.request=null,f)return e.error={status:g.status,message:"DASH playlist request error at URL: "+a.uri,response:g.response,code:2},c&&(e.state=c),e.trigger("error"),d(b,null);var h=new Uint8Array(g.response),i=Ij.parseSidx(h.subarray(8));return d(b,i)}}}},{key:"media",value:function(b){var c=this;if(!b)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var d=this.state;if("string"==typeof b){if(!this.master.playlists[b])throw new Error("Unknown playlist URI: "+b);b=this.master.playlists[b]}var e=!this.media_||b.id!==this.media_.id;if(e&&this.loadedPlaylists_[b.id]&&this.loadedPlaylists_[b.id].endList)return this.state="HAVE_METADATA",this.media_=b,void(e&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(e){if(this.media_&&this.trigger("mediachanging"),!b.sidx)return void(this.mediaRequest_=a.setTimeout(this.haveMetadata.bind(this,{startingState:d,playlist:b}),0));var f=void 0,g=void 0;this.masterPlaylistLoader_?(f=this.masterPlaylistLoader_.master,g=this.masterPlaylistLoader_.sidxMapping_):(f=this.master,g=this.sidxMapping_);var h=Gn(b.sidx);g[h]={sidxInfo:b.sidx},this.request=Kn(b.sidx,b,this.hls_.xhr,{handleManifestRedirects:this.handleManifestRedirects},this.sidxRequestFinished_(b,f,d,function(a,e){if(!a||!e)throw new Error("failed to request sidx");g[h].sidx=e,c.haveMetadata({startingState:d,playlist:a.playlists[b.id]})}))}}},{key:"haveMetadata",value:function(a){var b=a.startingState,c=a.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[c.id]=c,this.mediaRequest_=null,this.refreshMedia_(c.id),"HAVE_MASTER"===b?this.trigger("loadedmetadata"):this.trigger("mediachange");
}},{key:"pause",value:function(){this.stopRequest(),a.clearTimeout(this.mediaUpdateTimeout),a.clearTimeout(this.minimumUpdatePeriodTimeout_),"HAVE_NOTHING"===this.state&&(this.started=!1)}},{key:"load",value:function(b){var c=this;a.clearTimeout(this.mediaUpdateTimeout),a.clearTimeout(this.minimumUpdatePeriodTimeout_);var d=this.media();if(b){var e=d?d.targetDuration/2*1e3:5e3;return void(this.mediaUpdateTimeout=a.setTimeout(function(){return c.load()},e))}return this.started?void(d&&!d.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")):void this.start()}},{key:"parseMasterXml",value:function(){var a=rj(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_,sidxMapping:this.sidxMapping_});a.uri=this.srcUrl;for(var b=0;b<a.playlists.length;b++){var c="placeholder-uri-"+b;a.playlists[b].uri=c}return El(a,function(b,c,d,e){if(b.playlists&&b.playlists.length){var f="placeholder-uri-"+c+"-"+d+"-"+e,g=Il(0,f);b.playlists[0].uri=f,b.playlists[0].id=g,a.playlists[g]=b.playlists[0],a.playlists[f]=b.playlists[0]}}),Jl(a),Kl(a),a}},{key:"start",value:function(){var b=this;return this.started=!0,this.masterPlaylistLoader_?void(this.mediaRequest_=a.setTimeout(this.haveMaster_.bind(this),0)):void(this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(a,c){if(b.request){if(b.request=null,a)return b.error={status:c.status,message:"DASH playlist request error at URL: "+b.srcUrl,responseText:c.responseText,code:2},"HAVE_NOTHING"===b.state&&(b.started=!1),b.trigger("error");b.masterXml_=c.responseText,c.responseHeaders&&c.responseHeaders.date?b.masterLoaded_=Date.parse(c.responseHeaders.date):b.masterLoaded_=Date.now(),b.srcUrl=ul(b.handleManifestRedirects,b.srcUrl,c),b.syncClientServerClock_(b.onClientServerClockSync_.bind(b))}}))}},{key:"syncClientServerClock_",value:function(a){var b=this,c=sj(this.masterXml_);return null===c?(this.clientOffset_=this.masterLoaded_-Date.now(),a()):"DIRECT"===c.method?(this.clientOffset_=c.value-Date.now(),a()):void(this.request=this.hls_.xhr({uri:tl(this.srcUrl,c.value),method:c.method,withCredentials:this.withCredentials},function(d,e){if(b.request){if(d)return b.clientOffset_=b.masterLoaded_-Date.now(),a();var f=void 0;f="HEAD"===c.method?e.responseHeaders&&e.responseHeaders.date?Date.parse(e.responseHeaders.date):b.masterLoaded_:Date.parse(e.responseText),b.clientOffset_=f-Date.now(),a()}}))}},{key:"haveMaster_",value:function(){this.state="HAVE_MASTER",this.mediaRequest_=null,this.masterPlaylistLoader_?this.media_||this.media(this.childPlaylist_):(this.master=this.parseMasterXml(),this.trigger("loadedplaylist"))}},{key:"onClientServerClockSync_",value:function(){var b=this;this.haveMaster_(),this.hasPendingRequest()||this.media_||this.media(this.master.playlists[0]),this.master&&this.master.minimumUpdatePeriod&&(this.minimumUpdatePeriodTimeout_=a.setTimeout(function(){b.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod))}},{key:"refreshXml_",value:function(){var b=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(c,d){if(b.request){if(b.request=null,c)return b.error={status:d.status,message:"DASH playlist request error at URL: "+b.srcUrl,responseText:d.responseText,code:2},"HAVE_NOTHING"===b.state&&(b.started=!1),b.trigger("error");b.masterXml_=d.responseText,b.sidxMapping_=Jn(b.masterXml_,b.srcUrl,b.clientOffset_,b.sidxMapping_);var e=b.parseMasterXml(),f=Fn(b.master,e),g=b.media().sidx;if(f)if(g){var h=Gn(g);if(!b.sidxMapping_[h]){var i=b.media();b.request=Kn(i.sidx,i,b.hls_.xhr,{handleManifestRedirects:b.handleManifestRedirects},b.sidxRequestFinished_(i,e,b.state,function(c,d){if(!c||!d)throw new Error("failed to request sidx on minimumUpdatePeriod");b.sidxMapping_[h].sidx=d,b.minimumUpdatePeriodTimeout_=a.setTimeout(function(){b.trigger("minimumUpdatePeriod")},b.master.minimumUpdatePeriod),b.refreshMedia_(b.media().id)}))}}else b.master=f;b.minimumUpdatePeriodTimeout_=a.setTimeout(function(){b.trigger("minimumUpdatePeriod")},b.master.minimumUpdatePeriod)}})}},{key:"refreshMedia_",value:function(b){var c=this;if(!b)throw new Error("refreshMedia_ must take a media id");var d=void 0,e=void 0;this.masterPlaylistLoader_?(d=this.masterPlaylistLoader_.master,e=this.masterPlaylistLoader_.parseMasterXml()):(d=this.master,e=this.parseMasterXml());var f=Fn(d,e);f?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=f:this.master=f,this.media_=f.playlists[b]):(this.media_=e.playlists[b],this.trigger("playlistunchanged")),this.media().endList||(this.mediaUpdateTimeout=a.setTimeout(function(){c.trigger("mediaupdatetimeout")},Ll(this.media(),!!f))),this.trigger("loadedplaylist")}}]),c}(Dn),Mn=function(a){return ib.log.debug?ib.log.debug.bind(ib,"VHS:",a+" >"):function(){}},Nn=function(){function a(b,c,d,e){vl(this,a),this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=b,this.processedAppend_=!1,this.type_=d,this.mimeType_=c,this.logger_=Mn("SourceUpdater["+d+"]["+c+"]"),"closed"===b.readyState?b.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,c,e)):this.createSourceBuffer_(c,e)}return wl(a,[{key:"createSourceBuffer_",value:function(a,b){var c=this;return this.sourceBuffer_=this.mediaSource.addSourceBuffer(a),this.logger_("created SourceBuffer"),b&&(b.trigger("sourcebufferadded"),this.mediaSource.sourceBuffers.length<2)?void b.on("sourcebufferadded",function(){c.start_()}):void this.start_()}},{key:"start_",value:function(){var a=this;this.started_=!0,this.onUpdateendCallback_=function(){var b=a.pendingCallback_;a.pendingCallback_=null,a.sourceBuffer_.removing=!1,a.logger_("buffered ["+Nm(a.buffered())+"]"),b&&b(),a.runCallback_()},this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_),this.runCallback_()}},{key:"abort",value:function(a){var b=this;this.processedAppend_&&this.queueCallback_(function(){b.sourceBuffer_.abort()},a)}},{key:"appendBuffer",value:function(a,b){var c=this;this.processedAppend_=!0,this.queueCallback_(function(){a.videoSegmentTimingInfoCallback&&c.sourceBuffer_.addEventListener("videoSegmentTimingInfo",a.videoSegmentTimingInfoCallback),c.sourceBuffer_.appendBuffer(a.bytes)},function(){a.videoSegmentTimingInfoCallback&&c.sourceBuffer_.removeEventListener("videoSegmentTimingInfo",a.videoSegmentTimingInfoCallback),b()})}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:ib.createTimeRanges()}},{key:"remove",value:function(a,b){var c=this,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tc;this.processedAppend_&&this.queueCallback_(function(){c.logger_("remove ["+a+" => "+b+"]"),c.sourceBuffer_.removing=!0,c.sourceBuffer_.remove(a,b)},d)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||!!this.pendingCallback_&&this.pendingCallback_!==tc}},{key:"timestampOffset",value:function(a){var b=this;return"undefined"!=typeof a&&(this.queueCallback_(function(){b.sourceBuffer_.timestampOffset=a,b.runCallback_()}),this.timestampOffset_=a),this.timestampOffset_}},{key:"queueCallback_",value:function(a,b){this.callbacks_.push([a.bind(this),b]),this.runCallback_()}},{key:"runCallback_",value:function(){var a=void 0;!this.updating()&&this.callbacks_.length&&this.started_&&(a=this.callbacks_.shift(),this.pendingCallback_=a[1],a[0]())}},{key:"dispose",value:function(){var a=this,b=function b(){a.sourceBuffer_&&"open"===a.mediaSource.readyState&&a.sourceBuffer_.abort(),a.sourceBuffer_.removeEventListener("updateend",b)};this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_.removing?this.sourceBuffer_.addEventListener("updateend",b):b()}}]),a}(),On={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},Pn={FAILURE:2,TIMEOUT:-101,ABORTED:-102},Qn=function(a){a.forEach(function(a){a.abort()})},Rn=function(a){return{bandwidth:a.bandwidth,bytesReceived:a.bytesReceived||0,roundTripTime:a.roundTripTime||0}},Sn=function(a){var b=a.target,c=Date.now()-b.requestTime,d={bandwidth:1/0,bytesReceived:0,roundTripTime:c||0};return d.bytesReceived=a.loaded,d.bandwidth=Math.floor(d.bytesReceived/d.roundTripTime*8*1e3),d},Tn=function(a,b){return b.timedout?{status:b.status,message:"HLS request timed-out at URL: "+b.uri,code:Pn.TIMEOUT,xhr:b}:b.aborted?{status:b.status,message:"HLS request aborted at URL: "+b.uri,code:Pn.ABORTED,xhr:b}:a?{status:b.status,message:"HLS request errored at URL: "+b.uri,code:Pn.FAILURE,xhr:b}:null},Un=function(a,b){return function(c,d){var e=d.response,f=Tn(c,d);if(f)return b(f,a);if(16!==e.byteLength)return b({status:d.status,message:"Invalid HLS key at URL: "+d.uri,code:Pn.FAILURE,xhr:d},a);var g=new DataView(e);return a.key.bytes=new Uint32Array([g.getUint32(0),g.getUint32(4),g.getUint32(8),g.getUint32(12)]),b(null,a)}},Vn=function(a,b,c){return function(d,e){var f=e.response,g=Tn(d,e);return g?c(g,a):0===f.byteLength?c({status:e.status,message:"Empty HLS segment content at URL: "+e.uri,code:Pn.FAILURE,xhr:e},a):(a.map.bytes=new Uint8Array(e.response),b&&!b.isInitialized()&&b.init(),a.map.timescales=Lj.timescale(a.map.bytes),a.map.videoTrackIds=Lj.videoTrackIds(a.map.bytes),c(null,a))}},Wn=function(a,b,c){return function(d,e){var f=e.response,g=Tn(d,e),h=void 0;return g?c(g,a):0===f.byteLength?c({status:e.status,message:"Empty HLS segment content at URL: "+e.uri,code:Pn.FAILURE,xhr:e},a):(a.stats=Rn(e),a.key?a.encryptedBytes=new Uint8Array(e.response):a.bytes=new Uint8Array(e.response),b&&a.map&&a.map.bytes&&(b.isInitialized()||b.init(),h=b.parse(a.bytes,a.map.videoTrackIds,a.map.timescales),h&&h.captions&&(a.captionStreams=h.captionStreams,a.fmp4Captions=h.captions)),c(null,a))}},Xn=function(a,b,c){var d=function d(e){if(e.data.source===b.requestId){a.removeEventListener("message",d);var f=e.data.decrypted;return b.bytes=new Uint8Array(f.bytes,f.byteOffset,f.byteLength),c(null,b)}};a.addEventListener("message",d);var e=void 0;e=b.key.bytes.slice?b.key.bytes.slice():new Uint32Array(Array.prototype.slice.call(b.key.bytes)),a.postMessage(rm({source:b.requestId,encrypted:b.encryptedBytes,key:e,iv:b.key.iv}),[b.encryptedBytes.buffer,e.buffer])},Yn=function(a,b,c){var d=0,e=!1;return function(f,g){if(!e)return f?(e=!0,Qn(a),c(f,g)):(d+=1,d===a.length?(g.endOfAllRequests=Date.now(),g.encryptedBytes?Xn(b,g,c):c(null,g)):void 0)}},Zn=function(a,b){return function(c){return a.stats=ib.mergeOptions(a.stats,Sn(c)),!a.stats.firstBytesReceivedAt&&a.stats.bytesReceived&&(a.stats.firstBytesReceivedAt=Date.now()),b(c,a)}},$n=function(a,b,c,d,e,f,g){var h=[],i=Yn(h,c,g);if(e.key&&!e.key.bytes){var j=ib.mergeOptions(b,{uri:e.key.resolvedUri,responseType:"arraybuffer"}),k=Un(e,i),l=a(j,k);h.push(l)}if(e.map&&!e.map.bytes){var m=ib.mergeOptions(b,{uri:e.map.resolvedUri,responseType:"arraybuffer",headers:nm(e.map)}),n=Vn(e,d,i),o=a(m,n);h.push(o)}var p=ib.mergeOptions(b,{uri:e.resolvedUri,responseType:"arraybuffer",headers:nm(e)}),q=Wn(e,d,i),r=a(p,q);return r.addEventListener("progress",Zn(e,f)),h.push(r),function(){return Qn(h)}},_n=function(b,c){var d=void 0;return b?(d=a.getComputedStyle(b),d?d[c]:""):""},ao=function(a,b){var c=a.slice();a.sort(function(a,d){var e=b(a,d);return 0===e?c.indexOf(a)-c.indexOf(d):e})},bo=function(b,c){var d=void 0,e=void 0;return b.attributes.BANDWIDTH&&(d=b.attributes.BANDWIDTH),d=d||a.Number.MAX_VALUE,c.attributes.BANDWIDTH&&(e=c.attributes.BANDWIDTH),e=e||a.Number.MAX_VALUE,d-e},co=function(b,c){var d=void 0,e=void 0;return b.attributes.RESOLUTION&&b.attributes.RESOLUTION.width&&(d=b.attributes.RESOLUTION.width),d=d||a.Number.MAX_VALUE,c.attributes.RESOLUTION&&c.attributes.RESOLUTION.width&&(e=c.attributes.RESOLUTION.width),e=e||a.Number.MAX_VALUE,d===e&&b.attributes.BANDWIDTH&&c.attributes.BANDWIDTH?b.attributes.BANDWIDTH-c.attributes.BANDWIDTH:d-e},eo=function(b,c,d,e,f){var g=b.playlists.map(function(b){var c=void 0,d=void 0,e=void 0;return c=b.attributes.RESOLUTION&&b.attributes.RESOLUTION.width,d=b.attributes.RESOLUTION&&b.attributes.RESOLUTION.height,e=b.attributes.BANDWIDTH,e=e||a.Number.MAX_VALUE,{bandwidth:e,width:c,height:d,playlist:b}});ao(g,function(a,b){return a.bandwidth-b.bandwidth}),g=g.filter(function(a){return!im.isIncompatible(a.playlist)});var h=g.filter(function(a){return im.isEnabled(a.playlist)});h.length||(h=g.filter(function(a){return!im.isDisabled(a.playlist)}));var i=h.filter(function(a){return a.bandwidth*On.BANDWIDTH_VARIANCE<c}),j=i[i.length-1],k=i.filter(function(a){return a.bandwidth===j.bandwidth})[0];if(f===!1){var l=k||h[0]||g[0];return l?l.playlist:null}var m=i.filter(function(a){return a.width&&a.height});ao(m,function(a,b){return a.width-b.width});var n=m.filter(function(a){return a.width===d&&a.height===e});j=n[n.length-1];var o=n.filter(function(a){return a.bandwidth===j.bandwidth})[0],p=void 0,q=void 0,r=void 0;o||(p=m.filter(function(a){return a.width>d||a.height>e}),q=p.filter(function(a){return a.width===p[0].width&&a.height===p[0].height}),j=q[q.length-1],r=q.filter(function(a){return a.bandwidth===j.bandwidth})[0]);var s=r||o||k||h[0]||g[0];return s?s.playlist:null},fo=function(){var b=this.useDevicePixelRatio?a.devicePixelRatio||1:1;return eo(this.playlists.master,this.systemBandwidth,parseInt(_n(this.tech_.el(),"width"),10)*b,parseInt(_n(this.tech_.el(),"height"),10)*b,this.limitRenditionByPlayerDimensions)},go=function(a){var b=a.master,c=a.currentTime,d=a.bandwidth,e=a.duration,f=a.segmentDuration,g=a.timeUntilRebuffer,h=a.currentTimeline,i=a.syncController,j=b.playlists.filter(function(a){return!im.isIncompatible(a)}),k=j.filter(im.isEnabled);k.length||(k=j.filter(function(a){return!im.isDisabled(a)}));var l=k.filter(im.hasAttribute.bind(null,"BANDWIDTH")),m=l.map(function(a){var b=i.getSyncPoint(a,e,h,c),j=b?1:2,k=im.estimateSegmentRequestTime(f,d,a),l=k*j-g;return{playlist:a,rebufferingImpact:l}}),n=m.filter(function(a){return a.rebufferingImpact<=0});return ao(n,function(a,b){return bo(b.playlist,a.playlist)}),n.length?n[0]:(ao(m,function(a,b){return a.rebufferingImpact-b.rebufferingImpact}),m[0]||null)},ho=function(){var a=this.playlists.master.playlists.filter(im.isEnabled);ao(a,function(a,b){return bo(a,b)});var b=a.filter(function(a){return fn(a.attributes.CODECS).videoCodec});return b[0]||null},io=function(a,b,c){for(var d in c)if(!a[d]){b.trigger({type:"usage",name:"hls-608"});var e=b.textTracks().getTrackById(d);e?a[d]=e:a[d]=b.addRemoteTextTrack({kind:"captions",id:d,label:d},!1).track}},jo=function(a){var b=a.inbandTextTracks,c=a.captionArray,d=a.timestampOffset;if(c){var e=window.WebKitDataCue||window.VTTCue;c.forEach(function(a){var c=a.stream,f=a.startTime,g=a.endTime;b[c]&&(f+=d,g+=d,b[c].addCue(new e(f,g,a.text)))})}},ko=500,lo=function(a,b,c){if(!a||!b)return!1;var d=a.segments,e=c===d.length;return a.endList&&"open"===b.readyState&&e},mo=function(a){return"number"==typeof a&&isFinite(a)},no=function(a,b,c){return"main"===a&&b&&c?c.containsAudio||c.containsVideo?b.containsVideo&&!c.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!b.containsVideo&&c.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null},oo=function(a,b,c){var d=b-30;a.length&&(d=Math.max(d,a.start(0)));var e=b-c;return Math.min(e,d)},po=function(a){var b=a.segment,c=b.start,d=b.end,e=a.playlist,f=e.mediaSequence,g=e.id,h=e.segments,i=void 0===h?[]:h,j=a.mediaIndex,k=a.timeline;return["appending ["+j+"] of ["+f+", "+(f+i.length)+"] from playlist ["+g+"]","["+c+" => "+d+"] in timeline ["+k+"]"].join(" ")},qo=function(b){function c(a){vl(this,c);var b=zl(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));if(!a)throw new TypeError("Initialization settings are required");if("function"!=typeof a.currentTime)throw new TypeError("No currentTime getter specified");if(!a.mediaSource)throw new TypeError("No MediaSource specified");return b.bandwidth=a.bandwidth,b.throughput={rate:0,count:0},b.roundTrip=NaN,b.resetStats_(),b.mediaIndex=null,b.hasPlayed_=a.hasPlayed,b.currentTime_=a.currentTime,b.seekable_=a.seekable,b.seeking_=a.seeking,b.duration_=a.duration,b.mediaSource_=a.mediaSource,b.hls_=a.hls,b.loaderType_=a.loaderType,b.startingMedia_=void 0,b.segmentMetadataTrack_=a.segmentMetadataTrack,b.goalBufferLength_=a.goalBufferLength,b.sourceType_=a.sourceType,b.inbandTextTracks_=a.inbandTextTracks,b.state_="INIT",b.checkBufferTimeout_=null,b.error_=void 0,b.currentTimeline_=-1,b.pendingSegment_=null,b.mimeType_=null,b.sourceUpdater_=null,b.xhrOptions_=null,b.activeInitSegmentId_=null,b.initSegments_={},b.cacheEncryptionKeys_=a.cacheEncryptionKeys,b.keyCache_={},"main"===b.loaderType_?b.captionParser_=new jk:b.captionParser_=null,b.decrypter_=a.decrypter,b.syncController_=a.syncController,b.syncPoint_={segmentIndex:0,time:0},b.triggerSyncInfoUpdate_=function(){return b.trigger("syncinfoupdate")},b.syncController_.on("syncinfoupdate",b.triggerSyncInfoUpdate_),b.mediaSource_.addEventListener("sourceopen",function(){return b.ended_=!1}),b.fetchAtBuffer_=!1,b.logger_=Mn("SegmentLoader["+b.loaderType_+"]"),Object.defineProperty(b,"state",{get:function(){return this.state_},set:function(a){a!==this.state_&&(this.logger_(this.state_+" -> "+a),this.state_=a)}}),b}return yl(c,b),wl(c,[{key:"resetStats_",value:function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0}},{key:"dispose",value:function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_(),this.captionParser_&&this.captionParser_.reset(),this.checkBufferTimeout_&&a.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}},{key:"abort",value:function(){return"WAITING"!==this.state?void(this.pendingSegment_&&(this.pendingSegment_=null)):(this.abort_(),this.state="READY",void(this.paused()||this.monitorBuffer_()))}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null}},{key:"error",value:function(a){return"undefined"!=typeof a&&(this.error_=a),this.pendingSegment_=null,this.error_}},{key:"endOfStream",value:function(){this.ended_=!0,this.pause(),this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():ib.createTimeRanges()}},{key:"initSegment",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!a)return null;var c=sm(a),d=this.initSegments_[c];return b&&!d&&a.bytes&&(this.initSegments_[c]=d={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:a.bytes,timescales:a.timescales,videoTrackIds:a.videoTrackIds}),d||a}},{key:"segmentKey",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!a)return null;var c=tm(a),d=this.keyCache_[c];this.cacheEncryptionKeys_&&b&&!d&&a.bytes&&(this.keyCache_[c]=d={resolvedUri:a.resolvedUri,bytes:a.bytes});var e={resolvedUri:(d||a).resolvedUri};return d&&(e.bytes=d.bytes),e}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function(){if(this.monitorBuffer_(),this.playlist_)return this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))}},{key:"init_",value:function(){return this.state="READY",this.sourceUpdater_=new Nn(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_),this.resetEverything(),this.monitorBuffer_()}},{key:"playlist",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(a){var c=this.playlist_,d=this.pendingSegment_;this.playlist_=a,this.xhrOptions_=b,"INIT"===this.state&&(a.syncInfo={mediaSequence:a.mediaSequence,time:0});var e=null;if(c&&(c.id?e=c.id:c.uri&&(e=c.uri)),this.logger_("playlist update ["+e+" => "+(a.id||a.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!c||c.uri!==a.uri)return void(null!==this.mediaIndex&&this.resyncLoader());var f=a.mediaSequence-c.mediaSequence;this.logger_("live window shift ["+f+"]"),null!==this.mediaIndex&&(this.mediaIndex-=f),d&&(d.mediaIndex-=f,d.mediaIndex>=0&&(d.segment=a.segments[d.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(c,a)}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(a.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(a,b){this.mimeType_||(this.mimeType_=a,this.sourceBufferEmitter_=b,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(a){this.ended_=!1,this.resetLoader(),this.remove(0,1/0,a),this.captionParser_&&this.captionParser_.clearAllCaptions(),this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:function(){this.mediaIndex=null,this.syncPoint_=null,this.abort()}},{key:"remove",value:function(a,b,c){if(b===1/0&&(b=this.duration_()),this.sourceUpdater_&&this.sourceUpdater_.remove(a,b,c),Rm(a,b,this.segmentMetadataTrack_),this.inbandTextTracks_)for(var d in this.inbandTextTracks_)Rm(a,b,this.inbandTextTracks_[d])}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&a.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=a.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&a.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=a.setTimeout(this.monitorBufferTick_.bind(this),ko)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var a=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(a)return this.isEndOfStream_(a.mediaIndex)?void this.endOfStream():void((a.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_())&&(a.timeline!==this.currentTimeline_&&(this.syncController_.reset(),a.timestampOffset=a.startOfSegment,this.captionParser_&&this.captionParser_.clearAllCaptions()),this.loadSegment_(a)))}}},{key:"isEndOfStream_",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.playlist_;return lo(b,this.mediaSource_,a)&&!this.sourceUpdater_.updating()}},{key:"checkBuffer_",value:function(a,b,c,d,e,f){var g=0,h=void 0;a.length&&(g=a.end(a.length-1));var i=Math.max(0,g-e);if(!b.segments.length)return null;if(i>=this.goalBufferLength_())return null;if(!d&&i>=1)return null;if(null===f)return c=this.getSyncSegmentCandidate_(b),this.generateSegmentInfo_(b,c,null,!0);if(null!==c){b.segments[c];return h=g,this.generateSegmentInfo_(b,c+1,h,!1)}if(this.fetchAtBuffer_){var j=im.getMediaInfoForTime(b,g,f.segmentIndex,f.time);c=j.mediaIndex,h=j.startTime}else{var k=im.getMediaInfoForTime(b,e,f.segmentIndex,f.time);c=k.mediaIndex,h=k.startTime}return this.generateSegmentInfo_(b,c,h,!1)}},{key:"getSyncSegmentCandidate_",value:function(a){var b=this;if(this.currentTimeline_===-1)return 0;var c=a.segments.map(function(a,b){return{timeline:a.timeline,segmentIndex:b}}).filter(function(a){return a.timeline===b.currentTimeline_});return c.length?c[Math.min(c.length-1,1)].segmentIndex:Math.max(a.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(a,b,c,d){if(b<0||b>=a.segments.length)return null;var e=a.segments[b];return{requestId:"segment-loader-"+Math.random(),uri:e.resolvedUri,mediaIndex:b,isSyncRequest:d,startOfSegment:c,playlist:a,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:e.timeline,duration:e.duration,segment:e}}},{key:"abortRequestEarly_",value:function(a){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(Date.now()-(a.firstBytesReceivedAt||Date.now())<1e3)return!1;var b=this.currentTime_(),c=a.bandwidth,d=this.pendingSegment_.duration,e=im.estimateSegmentRequestTime(d,c,this.playlist_,a.bytesReceived),f=Om(this.buffered_(),b,this.hls_.tech_.playbackRate())-1;if(e<=f)return!1;var g=go({master:this.hls_.playlists.master,currentTime:b,bandwidth:c,duration:this.duration_(),segmentDuration:d,timeUntilRebuffer:f,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(g){var h=e-f,i=h-g.rebufferingImpact,j=.5;return f<=Hm&&(j=1),!(!g.playlist||g.playlist.uri===this.playlist_.uri||i<j)&&(this.bandwidth=g.playlist.attributes.BANDWIDTH*On.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),!0)}}},{key:"handleProgress_",value:function(a,b){this.pendingSegment_&&b.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(b.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(a){this.state="WAITING",this.pendingSegment_=a,this.trimBackBuffer_(a),a.abortRequests=$n(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(a),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(a){var b=oo(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);b>0&&this.remove(0,b)}},{key:"createSimplifiedSegmentObj_",value:function(a){var b=a.segment,c={resolvedUri:b.resolvedUri,byterange:b.byterange,requestId:a.requestId};if(b.key){var d=b.key.iv||new Uint32Array([0,0,0,a.mediaIndex+a.playlist.mediaSequence]);c.key=this.segmentKey(b.key),c.key.iv=d}return b.map&&(c.map=this.initSegment(b.map)),c}},{key:"segmentRequestFinished_",value:function(a,b){if(this.mediaRequests+=1,b.stats&&(this.mediaBytesTransferred+=b.stats.bytesReceived,this.mediaTransferDuration+=b.stats.roundTripTime),!this.pendingSegment_)return void(this.mediaRequestsAborted+=1);if(b.requestId===this.pendingSegment_.requestId){if(a)return this.pendingSegment_=null,this.state="READY",a.code===Pn.ABORTED?void(this.mediaRequestsAborted+=1):(this.pause(),a.code===Pn.TIMEOUT?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,void this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(a),void this.trigger("error")));this.bandwidth=b.stats.bandwidth,this.roundTrip=b.stats.roundTripTime,b.map&&(b.map=this.initSegment(b.map,!0)),b.key&&this.segmentKey(b.key,!0),this.processSegmentResponse_(b)}}},{key:"processSegmentResponse_",value:function(a){var b=this.pendingSegment_;b.bytes=a.bytes,a.map&&(b.segment.map.bytes=a.map.bytes),b.endOfAllRequests=a.endOfAllRequests,a.fmp4Captions&&(io(this.inbandTextTracks_,this.hls_.tech_,a.captionStreams),jo({inbandTextTracks:this.inbandTextTracks_,captionArray:a.fmp4Captions,timestampOffset:0}),this.captionParser_&&this.captionParser_.clearParsedCaptions()),this.handleSegment_()}},{key:"handleSegment_",value:function(){var a=this;if(!this.pendingSegment_)return void(this.state="READY");var b=this.pendingSegment_,c=b.segment,d=this.syncController_.probeSegmentInfo(b);"undefined"==typeof this.startingMedia_&&d&&(d.containsAudio||d.containsVideo)&&(this.startingMedia_={containsAudio:d.containsAudio,containsVideo:d.containsVideo});var e=no(this.loaderType_,this.startingMedia_,d);if(e)return this.error({message:e,blacklistDuration:1/0}),void this.trigger("error");if(b.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");if(null!==b.timestampOffset&&b.timestampOffset!==this.sourceUpdater_.timestampOffset()){if(d&&d.segmentTimestampInfo){var f=d.segmentTimestampInfo[0].ptsTime,g=d.segmentTimestampInfo[0].dtsTime;b.timestampOffset-=f-g}this.sourceUpdater_.timestampOffset(b.timestampOffset),this.trigger("timestampoffset")}var h=this.syncController_.mappingForTimeline(b.timeline);if(null!==h&&this.trigger({type:"segmenttimemapping",mapping:h}),this.state="APPENDING",c.map){var i=sm(c.map);if(!this.activeInitSegmentId_||this.activeInitSegmentId_!==i){var j=this.initSegment(c.map);this.sourceUpdater_.appendBuffer({bytes:j.bytes},function(){a.activeInitSegmentId_=i})}}b.byteLength=b.bytes.byteLength,"number"==typeof c.start&&"number"==typeof c.end?this.mediaSecondsLoaded+=c.end-c.start:this.mediaSecondsLoaded+=c.duration,this.logger_(po(b)),this.sourceUpdater_.appendBuffer({bytes:b.bytes,videoSegmentTimingInfoCallback:this.handleVideoSegmentTimingInfo_.bind(this,b.requestId)},this.handleUpdateEnd_.bind(this))}},{key:"handleVideoSegmentTimingInfo_",value:function(a,b){if(this.pendingSegment_&&a===this.pendingSegment_.requestId){var c=this.pendingSegment_.segment;c.videoTimingInfo||(c.videoTimingInfo={}),c.videoTimingInfo.transmuxerPrependedSeconds=b.videoSegmentTimingInfo.prependedContentDuration||0,c.videoTimingInfo.transmuxedPresentationStart=b.videoSegmentTimingInfo.start.presentation,c.videoTimingInfo.transmuxedPresentationEnd=b.videoSegmentTimingInfo.end.presentation,c.videoTimingInfo.baseMediaDecodeTime=b.videoSegmentTimingInfo.baseMediaDecodeTime}}},{key:"handleUpdateEnd_",value:function(){if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var a=this.pendingSegment_,b=a.segment,c=null!==this.mediaIndex;return this.pendingSegment_=null,this.recordThroughput_(a),this.addSegmentMetadataCue_(a),this.state="READY",this.mediaIndex=a.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=a.timeline,this.trigger("syncinfoupdate"),b.end&&this.currentTime_()-b.end>3*a.playlist.targetDuration?void this.resetEverything():(c&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.isEndOfStream_(a.mediaIndex+1,a.playlist)&&this.endOfStream(),void(this.paused()||this.monitorBuffer_()))}},{key:"recordThroughput_",value:function(a){var b=this.throughput.rate,c=Date.now()-a.endOfAllRequests+1,d=Math.floor(a.byteLength/c*8*1e3);this.throughput.rate+=(d-b)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function(b){if(this.segmentMetadataTrack_){var c=b.segment,d=c.start,e=c.end;if(mo(d)&&mo(e)){Rm(d,e,this.segmentMetadataTrack_);var f=a.WebKitDataCue||a.VTTCue,g={custom:c.custom,dateTimeObject:c.dateTimeObject,dateTimeString:c.dateTimeString,bandwidth:b.playlist.attributes.BANDWIDTH,resolution:b.playlist.attributes.RESOLUTION,codecs:b.playlist.attributes.CODECS,byteLength:b.byteLength,uri:b.uri,timeline:b.timeline,playlist:b.playlist.id,start:d,end:e},h=JSON.stringify(g),i=new f(d,e,h);i.value=g,this.segmentMetadataTrack_.addCue(i)}}}}]),c}(ib.EventTarget),ro=function(a){return decodeURIComponent(escape(String.fromCharCode.apply(null,a)))},so=new Uint8Array("\n\n".split("").map(function(a){return a.charCodeAt(0)})),to=function(b){function c(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};vl(this,c);var d=zl(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,a,b));return d.mediaSource_=null,d.subtitlesTrack_=null,d.featuresNativeTextTracks_=a.featuresNativeTextTracks,d}return yl(c,b),wl(c,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return ib.createTimeRanges();var a=this.subtitlesTrack_.cues,b=a[0].startTime,c=a[a.length-1].startTime;
return ib.createTimeRanges([[b,c]])}},{key:"initSegment",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!a)return null;var c=sm(a),d=this.initSegments_[c];if(b&&!d&&a.bytes){var e=so.byteLength+a.bytes.byteLength,f=new Uint8Array(e);f.set(a.bytes),f.set(so,a.bytes.byteLength),this.initSegments_[c]=d={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:f}}return d||a}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"track",value:function(a){return"undefined"==typeof a?this.subtitlesTrack_:(this.subtitlesTrack_=a,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}},{key:"remove",value:function(a,b){Rm(a,b,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var a=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var b=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(b=this.skipEmptySegments_(b)){if(null===this.syncController_.timestampOffsetForTimeline(b.timeline)){var c=function(){a.state="READY",a.paused()||a.monitorBuffer_()};return this.syncController_.one("timestampoffset",c),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(b)}}},{key:"skipEmptySegments_",value:function(a){for(;a&&a.segment.empty;)a=this.generateSegmentInfo_(a.playlist,a.mediaIndex+1,a.startOfSegment+a.duration,a.isSyncRequest);return a}},{key:"handleSegment_",value:function(){var b=this;if(!this.pendingSegment_||!this.subtitlesTrack_)return void(this.state="READY");this.state="APPENDING";var c=this.pendingSegment_,d=c.segment;if("function"!=typeof a.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var e=void 0,f=function(){b.subtitlesTrack_.tech_.off("vttjsloaded",e),b.error({message:"Error loading vtt.js"}),b.state="READY",b.pause(),b.trigger("error")};return e=function(){b.subtitlesTrack_.tech_.off("vttjserror",f),b.handleSegment_()},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",e),void this.subtitlesTrack_.tech_.one("vttjserror",f)}d.requested=!0;try{this.parseVTTCues_(c)}catch(a){return this.error({message:a.message}),this.state="READY",this.pause(),this.trigger("error")}return this.updateTimeMapping_(c,this.syncController_.timelines[c.timeline],this.playlist_),c.isSyncRequest?(this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY")):(c.byteLength=c.bytes.byteLength,this.mediaSecondsLoaded+=d.duration,c.cues.length&&this.remove(c.cues[0].endTime,c.cues[c.cues.length-1].endTime),c.cues.forEach(function(c){b.subtitlesTrack_.addCue(b.featuresNativeTextTracks_?new a.VTTCue(c.startTime,c.endTime,c.text):c)}),void this.handleUpdateEnd_())}},{key:"parseVTTCues_",value:function(b){var c=void 0,d=!1;"function"==typeof a.TextDecoder?c=new a.TextDecoder("utf8"):(c=a.WebVTT.StringDecoder(),d=!0);var e=new a.WebVTT.Parser(a,a.vttjs,c);if(b.cues=[],b.timestampmap={MPEGTS:0,LOCAL:0},e.oncue=b.cues.push.bind(b.cues),e.ontimestampmap=function(a){return b.timestampmap=a},e.onparsingerror=function(a){ib.log.warn("Error encountered when parsing cues: "+a.message)},b.segment.map){var f=b.segment.map.bytes;d&&(f=ro(f)),e.parse(f)}var g=b.bytes;d&&(g=ro(g)),e.parse(g),e.flush()}},{key:"updateTimeMapping_",value:function(a,b,c){var d=a.segment;if(b){if(!a.cues.length)return void(d.empty=!0);var e=a.timestampmap,f=e.MPEGTS/9e4-e.LOCAL+b.mapping;if(a.cues.forEach(function(a){a.startTime+=f,a.endTime+=f}),!c.syncInfo){var g=a.cues[0].startTime,h=a.cues[a.cues.length-1].startTime;c.syncInfo={mediaSequence:c.mediaSequence+a.mediaIndex,time:Math.min(g,h-d.duration)}}}}}]),c}(qo),uo=function(a,b){for(var c=a.cues,d=0;d<c.length;d++){var e=c[d];if(b>=e.adStartTime&&b<=e.adEndTime)return e}return null},vo=function(b,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(b.segments)for(var e=d,f=void 0,g=0;g<b.segments.length;g++){var h=b.segments[g];if(f||(f=uo(c,e+h.duration/2)),f){if("cueIn"in h){f.endTime=e,f.adEndTime=e,e+=h.duration,f=null;continue}if(e<f.endTime){e+=h.duration;continue}f.endTime+=h.duration}else if("cueOut"in h&&(f=new a.VTTCue(e,e+h.duration,h.cueOut),f.adStartTime=e,f.adEndTime=e+parseFloat(h.cueOut),c.addCue(f)),"cueOutCont"in h){var i=void 0,j=void 0,k=h.cueOutCont.split("/").map(parseFloat),l=Al(k,2);i=l[0],j=l[1],f=new a.VTTCue(e,e+h.duration,""),f.adStartTime=e-i,f.adEndTime=f.adStartTime+j,c.addCue(f)}e+=h.duration}},wo=gl.inspect,xo=[{name:"VOD",run:function(a,b,c,d,e){if(c!==1/0){var f={time:0,segmentIndex:0};return f}return null}},{name:"ProgramDateTime",run:function(a,b,c,d,e){if(!a.datetimeToDisplayTime)return null;var f=b.segments||[],g=null,h=null;e=e||0;for(var i=0;i<f.length;i++){var j=f[i];if(j.dateTimeObject){var k=j.dateTimeObject.getTime()/1e3,l=k+a.datetimeToDisplayTime,m=Math.abs(e-l);if(null!==h&&(0===m||h<m))break;h=m,g={time:l,segmentIndex:i}}}return g}},{name:"Segment",run:function(a,b,c,d,e){var f=b.segments||[],g=null,h=null;e=e||0;for(var i=0;i<f.length;i++){var j=f[i];if(j.timeline===d&&"undefined"!=typeof j.start){var k=Math.abs(e-j.start);if(null!==h&&h<k)break;(!g||null===h||h>=k)&&(h=k,g={time:j.start,segmentIndex:i})}}return g}},{name:"Discontinuity",run:function(a,b,c,d,e){var f=null;if(e=e||0,b.discontinuityStarts&&b.discontinuityStarts.length)for(var g=null,h=0;h<b.discontinuityStarts.length;h++){var i=b.discontinuityStarts[h],j=b.discontinuitySequence+h+1,k=a.discontinuities[j];if(k){var l=Math.abs(e-k.time);if(null!==g&&g<l)break;(!f||null===g||g>=l)&&(g=l,f={time:k.time,segmentIndex:i})}}return f}},{name:"Playlist",run:function(a,b,c,d,e){if(b.syncInfo){var f={time:b.syncInfo.time,segmentIndex:b.syncInfo.mediaSequence-b.mediaSequence};return f}return null}}],yo=function(a){function b(){vl(this,b);var a=zl(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.inspectCache_=void 0,a.timelines=[],a.discontinuities=[],a.datetimeToDisplayTime=null,a.logger_=Mn("SyncController"),a}return yl(b,a),wl(b,[{key:"getSyncPoint",value:function(a,b,c,d){var e=this.runStrategies_(a,b,c,d);return e.length?this.selectSyncPoint_(e,{key:"time",value:d}):null}},{key:"getExpiredTime",value:function(a,b){if(!a||!a.segments)return null;var c=this.runStrategies_(a,b,a.discontinuitySequence,0);if(!c.length)return null;var d=this.selectSyncPoint_(c,{key:"segmentIndex",value:0});return d.segmentIndex>0&&(d.time*=-1),Math.abs(d.time+Sl(a,d.segmentIndex,0))}},{key:"runStrategies_",value:function(a,b,c,d){for(var e=[],f=0;f<xo.length;f++){var g=xo[f],h=g.run(this,a,b,c,d);h&&(h.strategy=g.name,e.push({strategy:g.name,syncPoint:h}))}return e}},{key:"selectSyncPoint_",value:function(a,b){for(var c=a[0].syncPoint,d=Math.abs(a[0].syncPoint[b.key]-b.value),e=a[0].strategy,f=1;f<a.length;f++){var g=Math.abs(a[f].syncPoint[b.key]-b.value);g<d&&(d=g,c=a[f].syncPoint,e=a[f].strategy)}return this.logger_("syncPoint for ["+b.key+": "+b.value+"] chosen with strategy"+(" ["+e+"]: [time:"+c.time+",")+(" segmentIndex:"+c.segmentIndex+"]")),c}},{key:"saveExpiredSegmentInfo",value:function(a,b){for(var c=b.mediaSequence-a.mediaSequence,d=c-1;d>=0;d--){var e=a.segments[d];if(e&&"undefined"!=typeof e.start){b.syncInfo={mediaSequence:a.mediaSequence+d,time:e.start},this.logger_("playlist refresh sync: [time:"+b.syncInfo.time+","+(" mediaSequence: "+b.syncInfo.mediaSequence+"]")),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(a){if(!this.datetimeToDisplayTime&&a.segments&&a.segments.length&&a.segments[0].dateTimeObject){var b=a.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-b}}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(a){var b=a.segment,c=a.playlist,d=void 0;return d=b.map?this.probeMp4Segment_(a):this.probeTsSegment_(a),d&&this.calculateSegmentTimeMapping_(a,d)&&(this.saveDiscontinuitySyncInfo_(a),c.syncInfo||(c.syncInfo={mediaSequence:c.mediaSequence+a.mediaIndex,time:b.start})),d}},{key:"probeMp4Segment_",value:function(a){var b=a.segment,c=Lj.timescale(b.map.bytes),d=Lj.compositionStartTime(c,a.bytes);return null!==a.timestampOffset&&(a.timestampOffset-=d),{start:d,end:d+b.duration}}},{key:"probeTsSegment_",value:function(a){var b=wo(a.bytes,this.inspectCache_),c=void 0,d=void 0,e=void 0;if(!b)return null;b.video&&2===b.video.length?(this.inspectCache_=b.video[1].dts,c=b.video[0].dtsTime,d=b.video[1].dtsTime,e=b.video):b.audio&&2===b.audio.length&&(this.inspectCache_=b.audio[1].dts,c=b.audio[0].dtsTime,d=b.audio[1].dtsTime,e=b.audio);var f={segmentTimestampInfo:e,start:c,end:d,containsVideo:b.video&&2===b.video.length,containsAudio:b.audio&&2===b.audio.length};return f}},{key:"timestampOffsetForTimeline",value:function(a){return"undefined"==typeof this.timelines[a]?null:this.timelines[a].time}},{key:"mappingForTimeline",value:function(a){return"undefined"==typeof this.timelines[a]?null:this.timelines[a].mapping}},{key:"calculateSegmentTimeMapping_",value:function(a,b){var c=a.segment,d=this.timelines[a.timeline];if(null!==a.timestampOffset)d={time:a.startOfSegment,mapping:a.startOfSegment-b.start},this.timelines[a.timeline]=d,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+a.timeline+": "+("[time: "+d.time+"] [mapping: "+d.mapping+"]")),c.start=a.startOfSegment,c.end=b.end+d.mapping;else{if(!d)return!1;c.start=b.start+d.mapping,c.end=b.end+d.mapping}return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(a){var b=a.playlist,c=a.segment;if(c.discontinuity)this.discontinuities[c.timeline]={time:c.start,accuracy:0};else if(b.discontinuityStarts&&b.discontinuityStarts.length)for(var d=0;d<b.discontinuityStarts.length;d++){var e=b.discontinuityStarts[d],f=b.discontinuitySequence+d+1,g=e-a.mediaIndex,h=Math.abs(g);if(!this.discontinuities[f]||this.discontinuities[f].accuracy>h){var i=void 0;i=g<0?c.start-Sl(b,a.mediaIndex,e):c.end+Sl(b,a.mediaIndex+1,e),this.discontinuities[f]={time:i,accuracy:h}}}}},{key:"dispose",value:function(){this.trigger("dispose"),this.off()}}]),b}(ib.EventTarget),zo=new qc("./decrypter-worker.worker.js",function(a,b){var c=this;(function(){function a(a){return a.subarray(0,a.byteLength-a[a.byteLength-1])}var b=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b},g=function(){var a=[[[],[],[],[],[]],[[],[],[],[],[]]],b=a[0],c=a[1],d=b[4],e=c[4],f=void 0,g=void 0,h=void 0,i=[],j=[],k=void 0,l=void 0,m=void 0,n=void 0,o=void 0,p=void 0;for(f=0;f<256;f++)j[(i[f]=f<<1^283*(f>>7))^f]=f;for(g=h=0;!d[g];g^=k||1,h=j[h]||1)for(n=h^h<<1^h<<2^h<<3^h<<4,n=n>>8^255&n^99,d[g]=n,e[n]=g,m=i[l=i[k=i[g]]],p=16843009*m^65537*l^257*k^16843008*g,o=257*i[n]^16843008*n,f=0;f<4;f++)b[f][g]=o=o<<24^o>>>8,c[f][n]=p=p<<24^p>>>8;for(f=0;f<5;f++)b[f]=b[f].slice(0),c[f]=c[f].slice(0);return a},h=null,i=function(){function a(c){b(this,a),h||(h=g()),this._tables=[[h[0][0].slice(),h[0][1].slice(),h[0][2].slice(),h[0][3].slice(),h[0][4].slice()],[h[1][0].slice(),h[1][1].slice(),h[1][2].slice(),h[1][3].slice(),h[1][4].slice()]];var d=void 0,e=void 0,f=void 0,i=void 0,j=void 0,k=this._tables[0][4],l=this._tables[1],m=c.length,n=1;if(4!==m&&6!==m&&8!==m)throw new Error("Invalid aes key size");for(i=c.slice(0),j=[],this._key=[i,j],d=m;d<4*m+28;d++)f=i[d-1],(d%m===0||8===m&&d%m===4)&&(f=k[f>>>24]<<24^k[f>>16&255]<<16^k[f>>8&255]<<8^k[255&f],d%m===0&&(f=f<<8^f>>>24^n<<24,n=n<<1^283*(n>>7))),i[d]=i[d-m]^f;for(e=0;d;e++,d--)f=i[3&e?d:d-4],d<=4||e<4?j[e]=f:j[e]=l[0][k[f>>>24]]^l[1][k[f>>16&255]]^l[2][k[f>>8&255]]^l[3][k[255&f]]}return a.prototype.decrypt=function(a,b,c,d,e,f){var g=this._key[1],h=a^g[0],i=d^g[1],j=c^g[2],k=b^g[3],l=void 0,m=void 0,n=void 0,o=g.length/4-2,p=void 0,q=4,r=this._tables[1],s=r[0],t=r[1],u=r[2],v=r[3],w=r[4];for(p=0;p<o;p++)l=s[h>>>24]^t[i>>16&255]^u[j>>8&255]^v[255&k]^g[q],m=s[i>>>24]^t[j>>16&255]^u[k>>8&255]^v[255&h]^g[q+1],n=s[j>>>24]^t[k>>16&255]^u[h>>8&255]^v[255&i]^g[q+2],k=s[k>>>24]^t[h>>16&255]^u[i>>8&255]^v[255&j]^g[q+3],q+=4,h=l,i=m,j=n;for(p=0;p<4;p++)e[(3&-p)+f]=w[h>>>24]<<24^w[i>>16&255]<<16^w[j>>8&255]<<8^w[255&k]^g[q++],l=h,h=i,i=j,j=k,k=l},a}(),j=function(){function a(){b(this,a),this.listeners={}}return a.prototype.on=function(a,b){this.listeners[a]||(this.listeners[a]=[]),this.listeners[a].push(b)},a.prototype.off=function(a,b){if(!this.listeners[a])return!1;var c=this.listeners[a].indexOf(b);return this.listeners[a].splice(c,1),c>-1},a.prototype.trigger=function(a){var b=this.listeners[a];if(b)if(2===arguments.length)for(var c=b.length,d=0;d<c;++d)b[d].call(this,arguments[1]);else for(var e=Array.prototype.slice.call(arguments,1),f=b.length,g=0;g<f;++g)b[g].apply(this,e)},a.prototype.dispose=function(){this.listeners={}},a.prototype.pipe=function(a){this.on("data",function(b){a.push(b)})},a}(),k=function(a){function c(){b(this,c);var d=f(this,a.call(this,j));return d.jobs=[],d.delay=1,d.timeout_=null,d}return e(c,a),c.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},c.prototype.push=function(a){this.jobs.push(a),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},c}(j),l=function(a){return a<<24|(65280&a)<<8|(16711680&a)>>8|a>>>24},m=function(a,b,c){var d=new Int32Array(a.buffer,a.byteOffset,a.byteLength>>2),e=new i(Array.prototype.slice.call(b)),f=new Uint8Array(a.byteLength),g=new Int32Array(f.buffer),h=void 0,j=void 0,k=void 0,m=void 0,n=void 0,o=void 0,p=void 0,q=void 0,r=void 0;for(h=c[0],j=c[1],k=c[2],m=c[3],r=0;r<d.length;r+=4)n=l(d[r]),o=l(d[r+1]),p=l(d[r+2]),q=l(d[r+3]),e.decrypt(n,o,p,q,g,r),g[r]=l(g[r]^h),g[r+1]=l(g[r+1]^j),g[r+2]=l(g[r+2]^k),g[r+3]=l(g[r+3]^m),h=n,j=o,k=p,m=q;return f},n=function(){function c(d,e,f,g){b(this,c);var h=c.STEP,i=new Int32Array(d.buffer),j=new Uint8Array(d.byteLength),m=0;for(this.asyncStream_=new k,this.asyncStream_.push(this.decryptChunk_(i.subarray(m,m+h),e,f,j)),m=h;m<i.length;m+=h)f=new Uint32Array([l(i[m-4]),l(i[m-3]),l(i[m-2]),l(i[m-1])]),this.asyncStream_.push(this.decryptChunk_(i.subarray(m,m+h),e,f,j));this.asyncStream_.push(function(){g(null,a(j))})}return c.prototype.decryptChunk_=function(a,b,c,d){return function(){var e=m(a,b,c);d.set(e,a.byteOffset)}},d(c,null,[{key:"STEP",get:function(){return 32e3}}]),c}(),o=function(a){var b={};return Object.keys(a).forEach(function(c){var d=a[c];ArrayBuffer.isView(d)?b[c]={bytes:d.buffer,byteOffset:d.byteOffset,byteLength:d.byteLength}:b[c]=d}),b},p=function(a){a.onmessage=function(b){var c=b.data,d=new Uint8Array(c.encrypted.bytes,c.encrypted.byteOffset,c.encrypted.byteLength),e=new Uint32Array(c.key.bytes,c.key.byteOffset,c.key.byteLength/4),f=new Uint32Array(c.iv.bytes,c.iv.byteOffset,c.iv.byteLength/4);new n(d,e,f,function(b,d){a.postMessage(o({source:c.source,decrypted:d}),[d.buffer])})}},q=new p(c);return q})()}),Ao=function(a){var b=a.default?"main":"alternative";return a.characteristics&&a.characteristics.indexOf("public.accessibility.describes-video")>=0&&(b="main-desc"),b},Bo=function(a,b){a.abort(),a.pause(),b&&b.activePlaylistLoader&&(b.activePlaylistLoader.pause(),b.activePlaylistLoader=null)},Co=function(a,b){b.activePlaylistLoader=a,a.load()},Do=function(a,b){return function(){var c=b.segmentLoaders,d=c[a],e=c.main,f=b.mediaTypes[a],g=f.activeTrack(),h=f.activeGroup(g),i=f.activePlaylistLoader;if(Bo(d,f),h){if(!h.playlistLoader)return void(i&&e.resetEverything());d.resyncLoader(),Co(h.playlistLoader,f)}}},Eo=function(a,b){return function(){var c=b.segmentLoaders,d=c[a],e=c.main,f=b.mediaTypes[a],g=f.activeTrack(),h=f.activeGroup(g),i=f.activePlaylistLoader;if(Bo(d,f),h){if(!h.playlistLoader)return void e.resetEverything();if(i===h.playlistLoader)return void Co(h.playlistLoader,f);d.track&&d.track(g),d.resetEverything(),Co(h.playlistLoader,f)}}},Fo={AUDIO:function(a,b){return function(){var c=b.segmentLoaders[a],d=b.mediaTypes[a],e=b.blacklistCurrentPlaylist;Bo(c,d);var f=d.activeTrack(),g=d.activeGroup(),h=(g.filter(function(a){return a.default})[0]||g[0]).id,i=d.tracks[h];if(f===i)return void e({message:"Problem encountered loading the default audio track."});ib.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var j in d.tracks)d.tracks[j].enabled=d.tracks[j]===i;d.onTrackChanged()}},SUBTITLES:function(a,b){return function(){var c=b.segmentLoaders[a],d=b.mediaTypes[a];ib.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Bo(c,d);var e=d.activeTrack();e&&(e.mode="disabled"),d.onTrackChanged()}}},Go={AUDIO:function(a,b,c){if(b){var d=c.tech,e=c.requestOptions,f=c.segmentLoaders[a];b.on("loadedmetadata",function(){var a=b.media();f.playlist(a,e),(!d.paused()||a.endList&&"none"!==d.preload())&&f.load()}),b.on("loadedplaylist",function(){f.playlist(b.media(),e),d.paused()||f.load()}),b.on("error",Fo[a](a,c))}},SUBTITLES:function(a,b,c){var d=c.tech,e=c.requestOptions,f=c.segmentLoaders[a],g=c.mediaTypes[a];b.on("loadedmetadata",function(){var a=b.media();f.playlist(a,e),f.track(g.activeTrack()),(!d.paused()||a.endList&&"none"!==d.preload())&&f.load()}),b.on("loadedplaylist",function(){f.playlist(b.media(),e),d.paused()||f.load()}),b.on("error",Fo[a](a,c))}},Ho={AUDIO:function(a,b){var c=b.hls,d=b.sourceType,e=b.segmentLoaders[a],f=b.requestOptions,g=b.master.mediaGroups,h=b.mediaTypes[a],i=h.groups,j=h.tracks,k=b.masterPlaylistLoader;g[a]&&0!==Object.keys(g[a]).length||(g[a]={main:{default:{default:!0}}});for(var l in g[a]){i[l]||(i[l]=[]);for(var m in g[a][l]){var n=g[a][l][m],o=void 0;if(o=n.resolvedUri?new Ml(n.resolvedUri,c,f):n.playlists&&"dash"===d?new Ln(n.playlists[0],c,f,k):null,n=ib.mergeOptions({id:m,playlistLoader:o},n),Go[a](a,n.playlistLoader,b),i[l].push(n),"undefined"==typeof j[m]){var p=new ib.AudioTrack({id:m,kind:Ao(n),enabled:!1,language:n.language,default:n.default,label:m});j[m]=p}}}e.on("error",Fo[a](a,b))},SUBTITLES:function(a,b){var c=b.tech,d=b.hls,e=b.sourceType,f=b.segmentLoaders[a],g=b.requestOptions,h=b.master.mediaGroups,i=b.mediaTypes[a],j=i.groups,k=i.tracks,l=b.masterPlaylistLoader;for(var m in h[a]){j[m]||(j[m]=[]);for(var n in h[a][m])if(!h[a][m][n].forced){var o=h[a][m][n],p=void 0;if("hls"===e?p=new Ml(o.resolvedUri,d,g):"dash"===e&&(p=new Ln(o.playlists[0],d,g,l)),o=ib.mergeOptions({id:n,playlistLoader:p},o),Go[a](a,o.playlistLoader,b),j[m].push(o),"undefined"==typeof k[n]){var q=c.addRemoteTextTrack({id:n,kind:"subtitles",default:o.default&&o.autoselect,language:o.language,label:n},!1).track;k[n]=q}}}f.on("error",Fo[a](a,b))},"CLOSED-CAPTIONS":function(a,b){var c=b.tech,d=b.master.mediaGroups,e=b.mediaTypes[a],f=e.groups,g=e.tracks;for(var h in d[a]){f[h]||(f[h]=[]);for(var i in d[a][h]){var j=d[a][h][i];if(j.instreamId.match(/CC\d/)&&(f[h].push(ib.mergeOptions({id:i},j)),"undefined"==typeof g[i])){var k=c.addRemoteTextTrack({id:j.instreamId,kind:"captions",default:j.default&&j.autoselect,language:j.language,label:i},!1).track;g[i]=k}}}}},Io=function(a,b){return function(c){var d=b.masterPlaylistLoader,e=b.mediaTypes[a].groups,f=d.media();if(!f)return null;var g=null;return f.attributes[a]&&(g=e[f.attributes[a]]),g=g||e.main,"undefined"==typeof c?g:null===c?null:g.filter(function(a){return a.id===c.id})[0]||null}},Jo={AUDIO:function(a,b){return function(){var c=b.mediaTypes[a].tracks;for(var d in c)if(c[d].enabled)return c[d];return null}},SUBTITLES:function(a,b){return function(){var c=b.mediaTypes[a].tracks;for(var d in c)if("showing"===c[d].mode||"hidden"===c[d].mode)return c[d];return null}}},Ko=function(a){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(b){Ho[b](b,a)});var b=a.mediaTypes,c=a.masterPlaylistLoader,d=a.tech,e=a.hls;["AUDIO","SUBTITLES"].forEach(function(c){b[c].activeGroup=Io(c,a),b[c].activeTrack=Jo[c](c,a),b[c].onGroupChanged=Do(c,a),b[c].onTrackChanged=Eo(c,a)});var f=b.AUDIO.activeGroup(),g=(f.filter(function(a){return a.default})[0]||f[0]).id;b.AUDIO.tracks[g].enabled=!0,b.AUDIO.onTrackChanged(),c.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(a){return b[a].onGroupChanged()})});var h=function(){b.AUDIO.onTrackChanged(),d.trigger({type:"usage",name:"hls-audio-change"})};d.audioTracks().addEventListener("change",h),d.remoteTextTracks().addEventListener("change",b.SUBTITLES.onTrackChanged),e.on("dispose",function(){d.audioTracks().removeEventListener("change",h),d.remoteTextTracks().removeEventListener("change",b.SUBTITLES.onTrackChanged)}),d.clearTracks("audio");for(var i in b.AUDIO.tracks)d.audioTracks().addTrack(b.AUDIO.tracks[i])},Lo=function(){var a={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(b){a[b]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:tc,activeTrack:tc,onGroupChanged:tc,onTrackChanged:tc}}),a},Mo=120,No=void 0,Oo=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],Po=function(a){return this.audioSegmentLoader_[a]+this.mainSegmentLoader_[a]},Qo=function(a){var b=a.currentPlaylist,c=a.nextPlaylist,d=a.forwardBuffer,e=a.bufferLowWaterLine,f=a.duration;a.log;return c?!b.endList||(f<On.MAX_BUFFER_LOW_WATER_LINE||(c.attributes.BANDWIDTH<b.attributes.BANDWIDTH||d>=e)):(ib.log.warn("We received no playlist to switch to. Please check your stream."),!1)},Ro=function(b){function c(a){vl(this,c);var b=zl(this,(c.__proto__||Object.getPrototypeOf(c)).call(this)),d=a.url,e=a.handleManifestRedirects,f=a.withCredentials,g=a.tech,h=a.bandwidth,i=a.externHls,j=a.useCueTags,k=a.blacklistDuration,l=a.enableLowInitialPlaylist,m=a.cacheEncryptionKeys,n=a.sourceType;if(!d)throw new Error("A non-empty playlist URL is required");No=i,b.withCredentials=f,b.tech_=g,b.hls_=g.hls,b.sourceType_=n,b.useCueTags_=j,b.blacklistDuration=k,b.enableLowInitialPlaylist=l,b.useCueTags_&&(b.cueTagsTrack_=b.tech_.addTextTrack("metadata","ad-cues"),b.cueTagsTrack_.inBandMetadataTrackDispatchType=""),b.requestOptions_={withCredentials:f,handleManifestRedirects:e,timeout:null},b.mediaTypes_=Lo(),b.mediaSource=new ib.MediaSource,b.mediaSource.addEventListener("sourceopen",b.handleSourceOpen_.bind(b)),b.seekable_=ib.createTimeRanges(),b.hasPlayed_=!1,b.syncController_=new yo(a),b.segmentMetadataTrack_=g.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,b.decrypter_=new zo,b.inbandTextTracks_={};var o={hls:b.hls_,mediaSource:b.mediaSource,currentTime:b.tech_.currentTime.bind(b.tech_),seekable:function(){return b.seekable()},seeking:function(){return b.tech_.seeking()},duration:function(){return b.mediaSource.duration},hasPlayed:function(){return b.hasPlayed_},goalBufferLength:function(){return b.goalBufferLength()},bandwidth:h,syncController:b.syncController_,decrypter:b.decrypter_,sourceType:b.sourceType_,inbandTextTracks:b.inbandTextTracks_,cacheEncryptionKeys:m};return b.masterPlaylistLoader_="dash"===b.sourceType_?new Ln(d,b.hls_,b.requestOptions_):new Ml(d,b.hls_,b.requestOptions_),b.setupMasterPlaylistLoaderListeners_(),b.mainSegmentLoader_=new qo(ib.mergeOptions(o,{segmentMetadataTrack:b.segmentMetadataTrack_,loaderType:"main"}),a),b.audioSegmentLoader_=new qo(ib.mergeOptions(o,{loaderType:"audio"}),a),b.subtitleSegmentLoader_=new to(ib.mergeOptions(o,{loaderType:"vtt",featuresNativeTextTracks:b.tech_.featuresNativeTextTracks}),a),b.setupSegmentLoaderListeners_(),Oo.forEach(function(a){b[a+"_"]=Po.bind(b,a)}),b.logger_=Mn("MPC"),b.masterPlaylistLoader_.load(),b}return yl(c,b),wl(c,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var a=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var b=a.masterPlaylistLoader_.media(),c=1.5*b.targetDuration*1e3;hm(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=c,b.endList&&"none"!==a.tech_.preload()&&(a.mainSegmentLoader_.playlist(b,a.requestOptions_),a.mainSegmentLoader_.load()),Ko({sourceType:a.sourceType_,segmentLoaders:{AUDIO:a.audioSegmentLoader_,SUBTITLES:a.subtitleSegmentLoader_,main:a.mainSegmentLoader_},tech:a.tech_,requestOptions:a.requestOptions_,masterPlaylistLoader:a.masterPlaylistLoader_,hls:a.hls_,master:a.master(),mediaTypes:a.mediaTypes_,blacklistCurrentPlaylist:a.blacklistCurrentPlaylist.bind(a)}),a.triggerPresenceUsage_(a.master(),b);try{a.setupSourceBuffers_()}catch(b){return ib.log.warn("Failed to create SourceBuffers",b),a.mediaSource.endOfStream("decode")}a.setupFirstPlay(),!a.mediaTypes_.AUDIO.activePlaylistLoader||a.mediaTypes_.AUDIO.activePlaylistLoader.media()?a.trigger("selectedinitialmedia"):a.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){a.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var b=a.masterPlaylistLoader_.media();if(!b){a.excludeUnsupportedVariants_();var c=void 0;return a.enableLowInitialPlaylist&&(c=a.selectInitialPlaylist()),c||(c=a.selectPlaylist()),a.initialMedia_=c,void a.masterPlaylistLoader_.media(a.initialMedia_)}if(a.useCueTags_&&a.updateAdCues_(b),a.mainSegmentLoader_.playlist(b,a.requestOptions_),a.updateDuration(),a.tech_.paused()||(a.mainSegmentLoader_.load(),a.audioSegmentLoader_&&a.audioSegmentLoader_.load()),!b.endList){var d=function(){var b=a.seekable();0!==b.length&&a.mediaSource.addSeekableRange_(b.start(0),b.end(0))};if(a.duration()!==1/0){var e=function b(){a.duration()===1/0?d():a.tech_.one("durationchange",b)};a.tech_.one("durationchange",e)}else d()}}),this.masterPlaylistLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){a.mainSegmentLoader_.abort(),a.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var b=a.masterPlaylistLoader_.media(),c=1.5*b.targetDuration*1e3;hm(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=c,a.mainSegmentLoader_.playlist(b,a.requestOptions_),a.mainSegmentLoader_.load(),a.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var b=a.masterPlaylistLoader_.media(),c=a.stuckAtPlaylistEnd_(b);c&&(a.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),a.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){a.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){a.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function(a,b){var c=a.mediaGroups||{},d=!0,e=Object.keys(c.AUDIO);for(var f in c.AUDIO)for(var g in c.AUDIO[f]){var h=c.AUDIO[f][g];h.uri||(d=!1)}d&&this.tech_.trigger({type:"usage",name:"hls-demuxed"}),Object.keys(c.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"}),No.Playlist.isAes(b)&&this.tech_.trigger({type:"usage",name:"hls-aes"}),No.Playlist.isFmp4(b)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.length&&Object.keys(c.AUDIO[e[0]]).length>1&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var a=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var b=a.selectPlaylist(),c=a.masterPlaylistLoader_.media(),d=a.tech_.buffered(),e=d.length?d.end(d.length-1)-a.tech_.currentTime():0,f=a.bufferLowWaterLine();Qo({currentPlaylist:c,nextPlaylist:b,forwardBuffer:e,bufferLowWaterLine:f,duration:a.duration(),log:a.logger_})&&a.masterPlaylistLoader_.media(b),a.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){a.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){a.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("ended",function(){a.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(){a.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},Mo)}),this.mainSegmentLoader_.on("reseteverything",function(){a.tech_.trigger("hls-reset")}),this.mainSegmentLoader_.on("segmenttimemapping",function(b){a.tech_.trigger({type:"hls-segment-time-mapping",mapping:b.mapping})}),this.audioSegmentLoader_.on("ended",function(){a.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"smoothQualityChange_",value:function(){var a=this.selectPlaylist();a!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(a),this.mainSegmentLoader_.resetLoader())}},{key:"fastQualityChange_",value:function(){var a=this,b=this.selectPlaylist();b!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(b),this.mainSegmentLoader_.resetEverything(function(){ib.browser.IE_VERSION||ib.browser.IS_EDGE?a.tech_.setCurrentTime(a.tech_.currentTime()+.04):a.tech_.setCurrentTime(a.tech_.currentTime())}))}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var a=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<a.start(0)?this.tech_.setCurrentTime(a.end(a.length-1)):void 0}}},{key:"setupFirstPlay",value:function(){var a=this,b=this.masterPlaylistLoader_.media();if(!b||this.tech_.paused()||this.hasPlayed_)return!1;if(!b.endList){var c=this.seekable();if(!c.length)return!1;if(ib.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){a.trigger("firstplay"),a.tech_.setCurrentTime(c.end(0)),a.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(c.end(0))}return this.hasPlayed_=!0,this.load(),!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(a){return ib.log.warn("Failed to create Source Buffers",a),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var a=this.tech_.play();"undefined"!=typeof a&&"function"==typeof a.then&&a.then(null,function(a){})}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var a=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(a=!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?a&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_),a){this.logger_("calling mediaSource.endOfStream()");try{
this.mediaSource.endOfStream()}catch(a){ib.log.warn("Failed to call media source endOfStream",a)}}}},{key:"stuckAtPlaylistEnd_",value:function(a){var b=this.seekable();if(!b.length)return!1;var c=this.syncController_.getExpiredTime(a,this.mediaSource.duration);if(null===c)return!1;var d=No.Playlist.playlistEnd(a,c),e=this.tech_.currentTime(),f=this.tech_.buffered();if(!f.length)return d-e<=Im;var g=f.end(f.length-1);return g-e<=Im&&d-g<=Im}},{key:"blacklistCurrentPlaylist",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=arguments[1],c=void 0,d=void 0;if(c=a.playlist||this.masterPlaylistLoader_.media(),b=b||a.blacklistDuration||this.blacklistDuration,!c){this.error=a;try{return this.mediaSource.endOfStream("network")}catch(a){return this.trigger("error")}}var e=1===this.masterPlaylistLoader_.master.playlists.filter(bm).length,f=this.masterPlaylistLoader_.master.playlists;return 1===f.length?(ib.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(e)):(e&&(ib.log.warn("Removing all playlists from the blacklist because the last rendition is about to be blacklisted."),f.forEach(function(a){a.excludeUntil!==1/0&&delete a.excludeUntil}),this.tech_.trigger("retryplaylist")),c.excludeUntil=Date.now()+1e3*b,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),d=this.selectPlaylist(),ib.log.warn("Problem encountered with the current HLS playlist."+(a.message?" "+a.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(d,e))}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(a){var b=Km(this.tech_.buffered(),a);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?b&&b.length?a:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:No.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var a=void 0;if(this.masterPlaylistLoader_){var b=this.masterPlaylistLoader_.media();if(b){var c=this.syncController_.getExpiredTime(b,this.mediaSource.duration);if(null!==c){var d=this.masterPlaylistLoader_.master.suggestedPresentationDelay,e=No.Playlist.seekable(b,c,d);if(0!==e.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(b=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),c=this.syncController_.getExpiredTime(b,this.mediaSource.duration),null===c)return;if(a=No.Playlist.seekable(b,c,d),0===a.length)return}var f=void 0,g=void 0;this.seekable_&&this.seekable_.length&&(f=this.seekable_.end(0),g=this.seekable_.start(0)),a?a.start(0)>e.end(0)||e.start(0)>a.end(0)?this.seekable_=e:this.seekable_=ib.createTimeRanges([[a.start(0)>e.start(0)?a.start(0):e.start(0),a.end(0)<e.end(0)?a.end(0):e.end(0)]]):this.seekable_=e,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===f&&this.seekable_.start(0)===g||(this.logger_("seekable updated ["+Nm(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}}},{key:"updateDuration",value:function(){var a=this,b=this.mediaSource.duration,c=No.Playlist.duration(this.masterPlaylistLoader_.media()),d=this.tech_.buffered(),e=function b(){a.logger_("Setting duration from "+a.mediaSource.duration+" => "+c);try{a.mediaSource.duration=c}catch(a){ib.log.warn("Failed to set media source duration",a)}a.tech_.trigger("durationchange"),a.mediaSource.removeEventListener("sourceopen",b)};d.length>0&&(c=Math.max(c,d.end(d.length-1))),b!==c&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",e):e())}},{key:"dispose",value:function(){var a=this;this.trigger("dispose"),this.decrypter_&&this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach(function(b){var c=a.mediaTypes_[b].groups;for(var d in c)c[d].forEach(function(a){a.playlistLoader&&a.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.off(),this.mediaSource.dispose&&this.mediaSource.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var a=this.masterPlaylistLoader_.media(),b=void 0;if(a&&"open"===this.mediaSource.readyState){if(b=mn(this.masterPlaylistLoader_.master,a),b.length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+a.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(b),this.excludeIncompatibleVariants_(a)}}},{key:"configureLoaderMimeTypes_",value:function(a){var b=a.length>1&&a[0].indexOf(",")===-1&&a[0]!==a[1]?new ib.EventTarget:null;this.mainSegmentLoader_.mimeType(a[0],b),a[1]&&this.audioSegmentLoader_.mimeType(a[1],b)}},{key:"excludeUnsupportedVariants_",value:function(){this.master().playlists.forEach(function(b){b.attributes.CODECS&&a.MediaSource&&a.MediaSource.isTypeSupported&&!a.MediaSource.isTypeSupported('video/mp4; codecs="'+gn(b.attributes.CODECS)+'"')&&(b.excludeUntil=1/0)})}},{key:"excludeIncompatibleVariants_",value:function(a){var b=2,c=null,d=void 0;a.attributes.CODECS&&(d=fn(a.attributes.CODECS),c=d.videoCodec,b=d.codecCount),this.master().playlists.forEach(function(a){var d={codecCount:2,videoCodec:null};a.attributes.CODECS&&(d=fn(a.attributes.CODECS)),d.codecCount!==b&&(a.excludeUntil=1/0),d.videoCodec!==c&&(a.excludeUntil=1/0)})}},{key:"updateAdCues_",value:function(a){var b=0,c=this.seekable();c.length&&(b=c.start(0)),vo(a,this.cueTagsTrack_,b)}},{key:"goalBufferLength",value:function(){var a=this.tech_.currentTime(),b=On.GOAL_BUFFER_LENGTH,c=On.GOAL_BUFFER_LENGTH_RATE,d=Math.max(b,On.MAX_GOAL_BUFFER_LENGTH);return Math.min(b+a*c,d)}},{key:"bufferLowWaterLine",value:function(){var a=this.tech_.currentTime(),b=On.BUFFER_LOW_WATER_LINE,c=On.BUFFER_LOW_WATER_LINE_RATE,d=Math.max(b,On.MAX_BUFFER_LOW_WATER_LINE);return Math.min(b+a*c,d)}}]),c}(ib.EventTarget),So=function(a,b,c){return function(d){var e=a.master.playlists[b],f=am(e),g=bm(e);return"undefined"==typeof d?g:(d?delete e.disabled:e.disabled=!0,d===g||f||(c(),d?a.trigger("renditionenabled"):a.trigger("renditiondisabled")),d)}},To=function a(b,c,d){vl(this,a);var e=b.masterPlaylistController_,f=b.options_.smoothQualityChange,g=f?"smooth":"fast",h=e[g+"QualityChange_"].bind(e);if(c.attributes.RESOLUTION){var i=c.attributes.RESOLUTION;this.width=i.width,this.height=i.height}this.bandwidth=c.attributes.BANDWIDTH,this.id=d,this.enabled=So(b.playlists,c.id,h)},Uo=function(a){var b=a.playlists;a.representations=function(){return b&&b.master&&b.master.playlists?b.master.playlists.filter(function(a){return!am(a)}).map(function(b,c){return new To(a,b,b.id)}):[]}},Vo=["seeking","seeked","pause","playing","error"],Wo=function(){function b(c){var d=this;vl(this,b),this.tech_=c.tech,this.seekable=c.seekable,this.allowSeeksWithinUnsafeLiveWindow=c.allowSeeksWithinUnsafeLiveWindow,this.media=c.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Mn("PlaybackWatcher"),this.logger_("initialize");var e=function(){return d.monitorCurrentTime_()},f=function(){return d.techWaiting_()},g=function(){return d.cancelTimer_()},h=function(){return d.fixesBadSeeks_()};this.tech_.on("seekablechanged",h),this.tech_.on("waiting",f),this.tech_.on(Vo,g),this.tech_.on("canplay",e),this.dispose=function(){d.logger_("dispose"),d.tech_.off("seekablechanged",h),d.tech_.off("waiting",f),d.tech_.off(Vo,g),d.tech_.off("canplay",e),d.checkCurrentTimeTimeout_&&a.clearTimeout(d.checkCurrentTimeTimeout_),d.cancelTimer_()}}return wl(b,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&a.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=a.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var a=this.tech_.currentTime(),b=this.tech_.buffered();return this.lastRecordedTime===a&&(!b.length||a+Im>=b.end(b.length-1))?this.techWaiting_():void(this.consecutiveUpdates>=5&&a===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):a===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=a))}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"fixesBadSeeks_",value:function(){var a=this.tech_.seeking();if(!a)return!1;var b=this.seekable(),c=this.tech_.currentTime(),d=this.afterSeekableWindow_(b,c,this.media(),this.allowSeeksWithinUnsafeLiveWindow),e=void 0;if(d){var f=b.end(b.length-1);e=f}if(this.beforeSeekableWindow_(b,c)){var g=b.start(0);e=g+Im}return"undefined"!=typeof e&&(this.logger_("Trying to seek outside of seekable at time "+c+" with "+("seekable range "+Nm(b)+". Seeking to ")+(e+".")),this.tech_.setCurrentTime(e),!0)}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var a=this.tech_.currentTime(),b=this.tech_.buffered(),c=Km(b,a);return c.length&&a+3<=c.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(a),this.logger_("Stopped at "+a+" while inside a buffered region "+("["+c.start(0)+" -> "+c.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}}},{key:"techWaiting_",value:function(){var a=this.seekable(),b=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(a,b)){var c=a.end(a.length-1);return this.logger_("Fell out of live window at time "+b+". Seeking to live point (seekable end) "+c),this.cancelTimer_(),this.tech_.setCurrentTime(c),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var d=this.tech_.buffered(),e=Lm(d,b);if(this.videoUnderflow_(e,d,b))return this.cancelTimer_(),this.tech_.setCurrentTime(b),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;if(e.length>0){var f=e.start(0)-b;return this.logger_("Stopped at "+b+", setting timer for "+f+", seeking to "+e.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*f,b),!0}return!1}},{key:"afterSeekableWindow_",value:function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!a.length)return!1;var e=a.end(a.length-1)+Im,f=!c.endList;return f&&d&&(e=a.end(a.length-1)+3*c.targetDuration),b>e}},{key:"beforeSeekableWindow_",value:function(a,b){return!!(a.length&&a.start(0)>0&&b<a.start(0)-Im)}},{key:"videoUnderflow_",value:function(a,b,c){if(0===a.length){var d=this.gapFromVideoUnderflow_(b,c);if(d)return this.logger_("Encountered a gap in video from "+d.start+" to "+d.end+". Seeking to current time "+c),!0}return!1}},{key:"skipTheGap_",value:function(a){var b=this.tech_.buffered(),c=this.tech_.currentTime(),d=Lm(b,c);this.cancelTimer_(),0!==d.length&&c===a&&(this.logger_("skipTheGap_:","currentTime:",c,"scheduled currentTime:",a,"nextRange start:",d.start(0)),this.tech_.setCurrentTime(d.start(0)+Hm),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(a,b){for(var c=Mm(a),d=0;d<c.length;d++){var e=c.start(d),f=c.end(d);if(b-e<4&&b-e>2)return{start:e,end:f}}return null}}]),b}(),Xo={errorInterval:30,getSource:function(a){var b=this.tech({IWillNotUseThisInPlugins:!0}),c=b.currentSource_;return a(c)}},Yo=function a(b,c){var d=0,e=0,f=ib.mergeOptions(Xo,c);b.ready(function(){b.trigger({type:"usage",name:"hls-error-reload-initialized"})});var g=function(){e&&b.currentTime(e)},h=function(a){null!==a&&void 0!==a&&(e=b.duration()!==1/0&&b.currentTime()||0,b.one("loadedmetadata",g),b.src(a),b.trigger({type:"usage",name:"hls-error-reload"}),b.play())},i=function(){return Date.now()-d<1e3*f.errorInterval?void b.trigger({type:"usage",name:"hls-error-reload-canceled"}):f.getSource&&"function"==typeof f.getSource?(d=Date.now(),f.getSource.call(b,h)):void ib.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},j=function a(){b.off("loadedmetadata",g),b.off("error",i),b.off("dispose",a)},k=function(c){j(),a(b,c)};b.on("error",i),b.on("dispose",j),b.reloadSourceOnError=k},Zo=function(a){Yo(this,a)},$o="1.13.3",_o={PlaylistLoader:Ml,Playlist:im,Decrypter:sl,AsyncStream:pl,decrypt:rl,utils:xm,STANDARD_PLAYLIST_SELECTOR:fo,INITIAL_PLAYLIST_SELECTOR:ho,comparePlaylistBandwidth:bo,comparePlaylistResolution:co,xhr:lm()};["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(a){Object.defineProperty(_o,a,{get:function(){return ib.log.warn("using Hls."+a+" is UNSAFE be sure you know what you are doing"),On[a]},set:function(b){return ib.log.warn("using Hls."+a+" is UNSAFE be sure you know what you are doing"),"number"!=typeof b||b<0?void ib.log.warn("value of Hls."+a+" must be greater than or equal to 0"):void(On[a]=b)}})});var ap="videojs-vhs",bp=function(a){var b=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i;if(b.test(a))return"hls";var c=/^application\/dash\+xml/i;return c.test(a)?"dash":null},cp=function(a,b){for(var c=b.media(),d=-1,e=0;e<a.length;e++)if(a[e].id===c.id){d=e;break}a.selectedIndex_=d,a.trigger({selectedIndex:d,type:"change"})},dp=function(a,b){b.representations().forEach(function(b){a.addQualityLevel(b)}),cp(a,b.playlists)};_o.canPlaySource=function(){return ib.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var ep=function(a,b,c){if(!a)return a;var d=void 0,e=void 0;if(c.mimeType_)d=b.mimeType_,e=c.mimeType_;else{var f=nn(b.mimeType_),g=f.parameters.codecs.split(","),h=void 0,i=void 0;g.forEach(function(a){a=a.trim(),on(a)?h=a:pn(a)&&(i=a)}),d=f.type+'; codecs="'+i+'"',e=f.type.replace("video","audio")+'; codecs="'+h+'"'}var j={},k=b.playlist_;for(var l in a)j[l]={audioContentType:e,videoContentType:d},k.contentProtection&&k.contentProtection[l]&&k.contentProtection[l].pssh&&(j[l].pssh=k.contentProtection[l].pssh),"string"==typeof a[l]&&(j[l].url=a[l]);return ib.mergeOptions(a,j)},fp=function(a){var b=a.masterPlaylistController_.mainSegmentLoader_,c=a.masterPlaylistController_.audioSegmentLoader_,d=ib.players[a.tech_.options_.playerId];if(d.eme){var e=ep(a.source_.keySystems,b,c);e&&(d.currentSource().keySystems=e,11!==ib.browser.IE_VERSION&&d.eme.initializeMediaKeys&&d.eme.initializeMediaKeys())}},gp=function(){if(!window.localStorage)return null;var a=window.localStorage.getItem(ap);if(!a)return null;try{return JSON.parse(a)}catch(a){return null}},hp=function(a){if(!window.localStorage)return!1;var b=gp();b=b?ib.mergeOptions(b,a):a;try{window.localStorage.setItem(ap,JSON.stringify(b))}catch(a){return!1}return b};_o.supportsNativeHls=function(){var a=b.createElement("video");if(!ib.getTech("Html5").isSupported())return!1;var c=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return c.some(function(b){return/maybe|probably/i.test(a.canPlayType(b))})}(),_o.supportsNativeDash=function(){return!!ib.getTech("Html5").isSupported()&&/maybe|probably/i.test(b.createElement("video").canPlayType("application/dash+xml"))}(),_o.supportsTypeNatively=function(a){return"hls"===a?_o.supportsNativeHls:"dash"===a&&_o.supportsNativeDash},_o.isSupported=function(){return ib.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var ip=ib.getComponent("Component"),jp=function(a){function c(a,d,e){vl(this,c);var f=zl(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,d,e.hls));if(d.options_&&d.options_.playerId){var g=ib(d.options_.playerId);g.hasOwnProperty("hls")||Object.defineProperty(g,"hls",{get:function(){return ib.log.warn("player.hls is deprecated. Use player.tech().hls instead."),d.trigger({type:"usage",name:"hls-player-access"}),f},configurable:!0}),g.vhs=f,g.dash=f,f.player_=g}if(f.tech_=d,f.source_=a,f.stats={},f.ignoreNextSeekingEvent_=!1,f.setOptions_(),f.options_.overrideNative&&d.overrideNativeAudioTracks&&d.overrideNativeVideoTracks)d.overrideNativeAudioTracks(!0),d.overrideNativeVideoTracks(!0);else if(f.options_.overrideNative&&(d.featuresNativeVideoTracks||d.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return f.on(b,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(a){var c=b.fullscreenElement||b.webkitFullscreenElement||b.mozFullScreenElement||b.msFullscreenElement;c&&c.contains(f.tech_.el())&&f.masterPlaylistController_.smoothQualityChange_()}),f.on(f.tech_,"seeking",function(){return this.ignoreNextSeekingEvent_?void(this.ignoreNextSeekingEvent_=!1):void this.setCurrentTime(this.tech_.currentTime())}),f.on(f.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),f.on(f.tech_,"play",f.play),f}return yl(c,a),wl(c,[{key:"setOptions_",value:function(){var a=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage="undefined"!=typeof this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var b=gp();b&&b.bandwidth&&(this.options_.bandwidth=b.bandwidth,this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),b&&b.throughput&&(this.options_.throughput=b.throughput,this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=On.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===On.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys"].forEach(function(b){"undefined"!=typeof a.source_[b]&&(a.options_[b]=a.source_[b])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio}},{key:"src",value:function(a,b){var c=this;a&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=_o,this.options_.sourceType=bp(b),this.options_.seekTo=function(a){c.tech_.setCurrentTime(a)},this.masterPlaylistController_=new Ro(this.options_),this.playbackWatcher_=new Wo(ib.mergeOptions(this.options_,{seekable:function(){return c.seekable()},media:function(){return c.masterPlaylistController_.media()}})),this.masterPlaylistController_.on("error",function(){var a=ib.players[c.tech_.options_.playerId];a.error(c.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):_o.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=_o.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(a){this.masterPlaylistController_.selectPlaylist=a.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(a){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=a,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(a){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=a,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var a=1/(this.bandwidth||1),b=void 0;b=this.throughput>0?1/this.throughput:0;var c=Math.floor(1/(a+b));return c},set:function(){ib.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return c.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return c.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return c.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return c.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return c.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return c.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return c.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return c.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return Pm(c.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return c.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return c.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return c.tech_.name_},enumerable:!0},duration:{get:function(){return c.tech_.duration()},enumerable:!0},master:{get:function(){return c.playlists.master},enumerable:!0},playerDimensions:{get:function(){return c.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Pm(c.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return c.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){c.options_.useBandwidthFromLocalStorage&&hp({bandwidth:c.bandwidth,throughput:Math.round(c.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){Uo(c),fp(c)}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&this.tech_.src(ib.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var a=this,b=ib.players[this.tech_.options_.playerId];b&&b.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=b.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){dp(a.qualityLevels_,a)}),this.playlists.on("mediachange",function(){cp(a.qualityLevels_,a.playlists)}))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(a){this.masterPlaylistController_.setCurrentTime(a)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.hls&&delete this.tech_.hls,xl(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"dispose",this).call(this)}},{key:"convertToProgramTime",value:function(a,b){return Fm({playlist:this.masterPlaylistController_.media(),time:a,callback:b})}},{key:"seekToProgramTime",value:function(a,b){var c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;return Gm({programTime:a,playlist:this.masterPlaylistController_.media(),retryCount:d,pauseAfterSeek:c,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:b})}}]),c}(ip),kp={name:"videojs-http-streaming",VERSION:$o,canHandleSource:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=ib.mergeOptions(ib.options,b);return kp.canPlayType(a.type,c)},handleSource:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=ib.mergeOptions(ib.options,c);return b.hls=new jp(a,b,d),b.hls.xhr=lm(),b.hls.src(a.src,a.type),b.hls},canPlayType:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=ib.mergeOptions(ib.options,b),d=c.hls.overrideNative,e=bp(a),f=e&&(!_o.supportsTypeNatively(e)||d);return f?"maybe":""}};return"undefined"!=typeof ib.MediaSource&&"undefined"!=typeof ib.URL||(ib.MediaSource=Bn,ib.URL=Cn),Bn.supportsNativeMediaSources()&&ib.getTech("Html5").registerSourceHandler(kp,0),ib.HlsHandler=jp,ib.HlsSourceHandler=kp,ib.Hls=_o,ib.use||ib.registerComponent("Hls",_o),ib.options.hls=ib.options.hls||{},ib.registerPlugin?ib.registerPlugin("reloadSourceOnError",Zo):ib.plugin("reloadSourceOnError",Zo),ib}),"undefined"!=typeof window&&function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.Hls=b():a.Hls=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{enumerable:!0,get:d})},b.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},b.t=function(a,c){if(1&c&&(a=b(a)),8&c)return a;if(4&c&&"object"==typeof a&&a&&a.__esModule)return a;var d=Object.create(null);if(b.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:a}),2&c&&"string"!=typeof a)for(var e in a)b.d(d,e,function(b){return a[b]}.bind(null,e));return d},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="/dist/",b(b.s="./src/hls.ts")}({"./node_modules/@player/drm/index.js":function(a,b,c){"use strict";(function(a){var c,d,e,f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};!function(g,h){"object"==f(b)&&"object"==f(a)?a.exports=h():(d=[],c=h,e="function"==typeof c?c.apply(b,d):c,!(void 0!==e&&(a.exports=e)))}("undefined"==typeof self?void 0:self,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=1)}([function(a){function b(a){var b,c,d,f,g,h=.75*a.length,i=a.length,j=0;"="===a[a.length-1]&&(h--,"="===a[a.length-2]&&h--);var k=new ArrayBuffer(h),l=new Uint8Array(k);for(b=0;b<i;b+=4)c=e[a.charCodeAt(b)],d=e[a.charCodeAt(b+1)],f=e[a.charCodeAt(b+2)],g=e[a.charCodeAt(b+3)],l[j++]=c<<2|d>>4,l[j++]=(15&d)<<4|f>>2,l[j++]=(3&f)<<6|63&g;return k}for(var c="AGFzbQEAAAABNgZgA39/fwF/YAN/f38AYA1/f39/f39/f39/f39/AGAEf39/fwBgBn9/f39/fwBgBX9/f39/AAIiAgNlbnYGbWVtb3J5AgGAAoACA2VudghTVEFDS1RPUAN/AAMHBgMBAgAFBAYGAX8BIwALB0cEDl9hZXNfY3J5cHRfY2JjAAUOX2Flc19jcnlwdF9jdHIABA9fYWVzX3NldGtleV9kZWMAAg9fYWVzX3NldGtleV9lbmMAAQr+SgbdEAESfyACLQABQQh0IAItAAByIAItAAJBEHRyIAItAANBGHRyIAAoAgQiBSgCAHMhCSACLQAFQQh0IAItAARyIAItAAZBEHRyIAItAAdBGHRyIAUoAgRzIQYgAi0ACUEIdCACLQAIciACLQAKQRB0ciACLQALQRh0ciAFKAIIcyEKIAVBEGohBCACLQANQQh0IAItAAxyIAItAA5BEHRyIAItAA9BGHRyIAUoAgxzIQIgACgCAEEBdUF/aiEAIAEEfyAGIQEDQCABQf8BcUECdEGoKGooAgAgBCgCBHMgCkEIdkH/AXFBAnRBqDBqKAIAcyACQRB2Qf8BcUECdEGoOGooAgBzIAlBGHZBAnRBqMAAaigCAHMhCyAKQf8BcUECdEGoKGooAgAgBCgCCHMgAkEIdkH/AXFBAnRBqDBqKAIAcyAJQRB2Qf8BcUECdEGoOGooAgBzIAFBGHZBAnRBqMAAaigCAHMhByACQf8BcUECdEGoKGooAgAgBCgCDHMgCUEIdkH/AXFBAnRBqDBqKAIAcyABQRB2Qf8BcUECdEGoOGooAgBzIApBGHZBAnRBqMAAaigCAHMhBSAEQRRqIQYgBCgCECEMIAlB/wFxQQJ0QagoaigCACAEKAIAcyABQQh2Qf8BcUECdEGoMGooAgBzIApBEHZB/wFxQQJ0Qag4aigCAHMgAkEYdkECdEGowABqKAIAcyIBQf8BcSENIABBAEoEQCAFQf8BcUECdEGoKGooAgAgBCgCHHMgAUEIdkH/AXFBAnRBqDBqKAIAcyALQRB2Qf8BcUECdEGoOGooAgBzIAdBGHZBAnRBqMAAaigCAHMhAiAHQf8BcUECdEGoKGooAgAgBCgCGHMgBUEIdkH/AXFBAnRBqDBqKAIAcyABQRB2Qf8BcUECdEGoOGooAgBzIAtBGHZBAnRBqMAAaigCAHMhCiALQf8BcUECdEGoKGooAgAgBigCAHMgB0EIdkH/AXFBAnRBqDBqKAIAcyAFQRB2Qf8BcUECdEGoOGooAgBzIAFBGHZBAnRBqMAAaigCAHMhASANQQJ0QagoaigCACAMcyALQQh2Qf8BcUECdEGoMGooAgBzIAdBEHZB/wFxQQJ0Qag4aigCAHMgBUEYdkECdEGowABqKAIAcyEJIARBIGohBCAAQX9qIQAMAQsLIAQhDiABIgAhCiAHIQQgBSICIQcgBCEFIA1BqMgAaiEPQajIACEIIAsiAQUgBiEBA0AgAUH/AXFBAnRBqAhqKAIAIAQoAgRzIAlBCHZB/wFxQQJ0QagQaigCAHMgAkEQdkH/AXFBAnRBqBhqKAIAcyAKQRh2QQJ0QaggaigCAHMhCyAKQf8BcUECdEGoCGooAgAgBCgCCHMgAUEIdkH/AXFBAnRBqBBqKAIAcyAJQRB2Qf8BcUECdEGoGGooAgBzIAJBGHZBAnRBqCBqKAIAcyEHIAJB/wFxQQJ0QagIaigCACAEKAIMcyAKQQh2Qf8BcUECdEGoEGooAgBzIAFBEHZB/wFxQQJ0QagYaigCAHMgCUEYdkECdEGoIGooAgBzIQUgBEEUaiEGIAQoAhAhDCAJQf8BcUECdEGoCGooAgAgBCgCAHMgAkEIdkH/AXFBAnRBqBBqKAIAcyAKQRB2Qf8BcUECdEGoGGooAgBzIAFBGHZBAnRBqCBqKAIAcyIBQf8BcSENIABBAEoEQCAFQf8BcUECdEGoCGooAgAgBCgCHHMgB0EIdkH/AXFBAnRBqBBqKAIAcyALQRB2Qf8BcUECdEGoGGooAgBzIAFBGHZBAnRBqCBqKAIAcyECIAdB/wFxQQJ0QagIaigCACAEKAIYcyALQQh2Qf8BcUECdEGoEGooAgBzIAFBEHZB/wFxQQJ0QagYaigCAHMgBUEYdkECdEGoIGooAgBzIQogC0H/AXFBAnRBqAhqKAIAIAYoAgBzIAFBCHZB/wFxQQJ0QagQaigCAHMgBUEQdkH/AXFBAnRBqBhqKAIAcyAHQRh2QQJ0QaggaigCAHMhASANQQJ0QagIaigCACAMcyAFQQh2Qf8BcUECdEGoEGooAgBzIAdBEHZB/wFxQQJ0QagYaigCAHMgC0EYdkECdEGoIGooAgBzIQkgBEEgaiEEIABBf2ohAAwBCwsgBCEOIAchCiAFIQIgASIAIQQgCyIBIQcgCiEFIA1BqMoAaiEPQajKACEIIAILIQkgDCAIIAlBCHZB/wFxai0AAEEIdHMhECAMIAggBUEQdkH/AXFqLQAAQRB0cyERIAwgCCAHQRh2ai0AAEEYdHMhEiAGKAIAIgYgCCABQf8BcWotAABzIRMgBiAIIARBCHZB/wFxai0AAEEIdHMhFCAGIAggAkEQdkH/AXFqLQAAQRB0cyEVIAYgCCAKQRh2ai0AAEEYdHMhDSAOKAIYIgYgCCAFQf8BcWotAABzIQsgBiAIIAdBCHZB/wFxai0AAEEIdHMhByAGIAggAEEQdkH/AXFqLQAAQRB0cyEFIAYgCCAJQRh2ai0AAEEYdHMhCSAOKAIcIgAgCCACQf8BcWotAABzIQYgACAIIApBCHZB/wFxai0AAEEIdHMhAiAAIAggAUEQdkH/AXFqLQAAQRB0cyEBIAAgCCAEQRh2ai0AAEEYdHMhACADIAwgDy0AAHM6AAAgAyAQQQh2OgABIAMgEUEQdjoAAiADIBJBGHY6AAMgAyATOgAEIAMgFEEIdjoABSADIBVBEHY6AAYgAyANQRh2OgAHIAMgCzoACCADIAdBCHY6AAkgAyAFQRB2OgAKIAMgCUEYdjoACyADIAY6AAwgAyACQQh2OgANIAMgAUEQdjoADiADIABBGHY6AA8LmB0BEX8CQCMBIQUjAUEQaiQBIAEgASwAAEF/cyITOgAAIAFBAWoiBiwAAEF/cyEDIAYgAzoAACABQQJqIgQsAABBf3MhBiAEIAY6AAAgAUEDaiIILAAAQX9zIQQgCCAEOgAAIAFBBGoiBywAAEF/cyEIIAcgCDoAACABQQVqIgksAABBf3MhByAJIAc6AAAgAUEGaiIKLAAAQX9zIQkgCiAJOgAAIAFBB2oiCywAAEF/cyEKIAsgCjoAACABQQhqIgwsAABBf3MhCyAMIAs6AAAgAUEJaiINLAAAQX9zIQwgDSAMOgAAIAFBCmoiDiwAAEF/cyENIA4gDToAACABQQtqIg8sAABBf3MhDiAPIA46AAAgAUEMaiIQLAAAQX9zIQ8gECAPOgAAIAFBDWoiESwAAEF/cyEQIBEgEDoAACABQQ5qIhIsAABBf3MhESASIBE6AAAgAUEPaiISLAAAQX9zIQEgEiABOgAAIAUgBjoAACAFIA86AAEgBSAJOgACIAUgAToAAyAFIBM6AAQgBSAKOgAFIAUgCDoABiAFIBE6AAcgBSALOgAIIAUgBzoACSAFIAw6AAogBSANOgALIAUgEDoADCAFIAM6AA0gBSAOOgAOIAUgBDoADwJAAkACQAJAAkAgAkGAAWsOgQEAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAQMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwIDC0EKIQFBAiEGDAMLQQwhAUEEIQYMAgtBDiEBQQYhBgwBCwwBCyAAIAE2AgAgACAAQQhqIgM2AgQgAkEFdiEEQQAhAQNAIABBCGogAUECdGogBSABQQJ0IgJBAXJqLQAAQQh0IAUgAmotAAByIAUgAkECcmotAABBEHRyIAUgAkEDcmotAABBGHRyNgIAIAFBAWoiASAESQ0ACwJAAkACQAJAIAZBAmsOBQADAQMCAwsgACADKAIAQQFzIAAoAhQiAUEIdkH/AXFBqMgAai0AAHMgAUEQdkH/AXFBqMgAai0AAEEIdHMgAUEYdkGoyABqLQAAQRB0cyABQf8BcUGoyABqLQAAQRh0cyICNgIYIAAgAiAAKAIMcyIDNgIcIAAgACgCECADcyIDNgIgIAAgAyABcyIBNgIkIAAgAkECcyABQQh2Qf8BcUGoyABqLQAAcyABQRB2Qf8BcUGoyABqLQAAQQh0cyABQRh2QajIAGotAABBEHRzIAFB/wFxQajIAGotAABBGHRzIgI2AiggACACIAAoAhxzIgM2AiwgACAAKAIgIANzIgM2AjAgACADIAFzIgE2AjQgACACQQRzIAFBCHZB/wFxQajIAGotAABzIAFBEHZB/wFxQajIAGotAABBCHRzIAFBGHZBqMgAai0AAEEQdHMgAUH/AXFBqMgAai0AAEEYdHMiAjYCOCAAIAIgACgCLHMiAzYCPCAAQUBrIAAoAjAgA3MiAzYCACAAIAMgAXMiATYCRCAAIAJBCHMgAUEIdkH/AXFBqMgAai0AAHMgAUEQdkH/AXFBqMgAai0AAEEIdHMgAUEYdkGoyABqLQAAQRB0cyABQf8BcUGoyABqLQAAQRh0cyICNgJIIAAgAiAAKAI8cyIDNgJMIAAgAEFAaygCACADcyIDNgJQIAAgAyABcyIBNgJUIAAgAkEQcyABQQh2Qf8BcUGoyABqLQAAcyABQRB2Qf8BcUGoyABqLQAAQQh0cyABQRh2QajIAGotAABBEHRzIAFB/wFxQajIAGotAABBGHRzIgI2AlggACACIAAoAkxzIgM2AlwgACAAKAJQIANzIgM2AmAgACADIAFzIgE2AmQgACACQSBzIAFBCHZB/wFxQajIAGotAABzIAFBEHZB/wFxQajIAGotAABBCHRzIAFBGHZBqMgAai0AAEEQdHMgAUH/AXFBqMgAai0AAEEYdHMiAjYCaCAAIAIgACgCXHMiAzYCbCAAIAAoAmAgA3MiAzYCcCAAIAMgAXMiATYCdCAAIAJBwABzIAFBCHZB/wFxQajIAGotAABzIAFBEHZB/wFxQajIAGotAABBCHRzIAFBGHZBqMgAai0AAEEQdHMgAUH/AXFBqMgAai0AAEEYdHMiAjYCeCAAIAIgACgCbHMiAzYCfCAAIAAoAnAgA3MiAzYCgAEgACADIAFzIgE2AoQBIAAgAkGAAXMgAUEIdkH/AXFBqMgAai0AAHMgAUEQdkH/AXFBqMgAai0AAEEIdHMgAUEYdkGoyABqLQAAQRB0cyABQf8BcUGoyABqLQAAQRh0cyICNgKIASAAIAIgACgCfHMiAzYCjAEgACAAKAKAASADcyIDNgKQASAAIAMgAXMiATYClAEgACACQRtzIAFBCHZB/wFxQajIAGotAABzIAFBEHZB/wFxQajIAGotAABBCHRzIAFBGHZBqMgAai0AAEEQdHMgAUH/AXFBqMgAai0AAEEYdHMiAjYCmAEgACACIAAoAowBcyIDNgKcASAAIAAoApABIANzIgM2AqABIAAgAyABcyIBNgKkASAAIAJBNnMgAUEIdkH/AXFBqMgAai0AAHMgAUEQdkH/AXFBqMgAai0AAEEIdHMgAUEYdkGoyABqLQAAQRB0cyABQf8BcUGoyABqLQAAQRh0cyICNgKoASAAIAIgACgCnAFzIgI2AqwBIAAgACgCoAEgAnMiAjYCsAEgACACIAFzNgK0AQwDCyAAIAMoAgBBAXMgACgCHCIBQQh2Qf8BcUGoyABqLQAAcyABQRB2Qf8BcUGoyABqLQAAQQh0cyABQRh2QajIAGotAABBEHRzIAFB/wFxQajIAGotAABBGHRzIgI2AiAgACACIAAoAgxzIgM2AiQgACAAKAIQIgcgA3MiBjYCKCAAIAAoAhQgBnMiBjYCLCAAIAAoAhgiCCAGcyIENgIwIAAgBCABcyIBNgI0IAAgAkECcyABQQh2Qf8BcUGoyABqLQAAcyABQRB2Qf8BcUGoyABqLQAAQQh0cyABQRh2QajIAGotAABBEHRzIAFB/wFxQajIAGotAABBGHRzIgQ2AjggACAEIANzIgk2AjwgAEFAayAHIARzIgI2AgAgACAGIAJzNgJEIAAgCCACcyIHNgJIIAAgByABcyIDNgJMIAAgBEEEcyADQQh2Qf8BcUGoyABqLQAAcyADQRB2Qf8BcUGoyABqLQAAQQh0cyADQRh2QajIAGotAABBEHRzIANB/wFxQajIAGotAABBGHRzIgM2AlAgACADIAlzIgQ2AlQgACACIARzNgJYIAAgBiAEcyIGNgJcIAAgByAGczYCYCAAIAYgAXMiATYCZCAAIANBCHMgAUEIdkH/AXFBqMgAai0AAHMgAUEQdkH/AXFBqMgAai0AAEEIdHMgAUEYdkGoyABqLQAAQRB0cyABQf8BcUGoyABqLQAAQRh0cyIDNgJoIAAgAyAEczYCbCAAIAIgA3MiAjYCcCAAIAYgAnM2AnQgACAIIANzIgI2AnggACACIAFzIgE2AnwgAEGAAWoiAiADQRBzIAFBCHZB/wFxQajIAGotAABzIAFBEHZB/wFxQajIAGotAABBCHRzIAFBGHZBqMgAai0AAEEQdHMgAUH/AXFBqMgAai0AAEEYdHMiAzYCACAAIAMgACgCbHMiAzYChAEgACAAKAJwIANzIgM2AogBIAAgACgCdCADcyIDNgKMASAAIAAoAnggA3MiAzYCkAEgACADIAFzIgE2ApQBIABBmAFqIgMgAigCAEEgcyABQQh2Qf8BcUGoyABqLQAAcyABQRB2Qf8BcUGoyABqLQAAQQh0cyABQRh2QajIAGotAABBEHRzIAFB/wFxQajIAGotAABBGHRzIgI2AgAgACACIAAoAoQBcyICNgKcASAAIAAoAogBIAJzIgI2AqABIAAgACgCjAEgAnMiAjYCpAEgACAAKAKQASACcyICNgKoASAAIAIgAXMiATYCrAEgAEGwAWoiAiADKAIAQcAAcyABQQh2Qf8BcUGoyABqLQAAcyABQRB2Qf8BcUGoyABqLQAAQQh0cyABQRh2QajIAGotAABBEHRzIAFB/wFxQajIAGotAABBGHRzIgM2AgAgACADIAAoApwBcyIDNgK0ASAAIAAoAqABIANzIgM2ArgBIAAgACgCpAEgA3MiAzYCvAEgACAAKAKoASADcyIDNgLAASAAIAMgAXMiATYCxAEgACACKAIAQYABcyABQQh2Qf8BcUGoyABqLQAAcyABQRB2Qf8BcUGoyABqLQAAQQh0cyABQRh2QajIAGotAABBEHRzIAFB/wFxQajIAGotAABBGHRzIgI2AsgBIAAgAiAAKAK0AXMiAjYCzAEgACAAKAK4ASACcyICNgLQASAAIAAoArwBIAJzIgI2AtQBIAAgACgCwAEgAnMiAjYC2AEgACACIAFzNgLcAQwCC0EAIQEgAyIAKAIAIQIDQCAAQSBqIgMgAUECdEGACGooAgAgAnMgACgCHCIGQQh2Qf8BcUGoyABqLQAAcyAGQRB2Qf8BcUGoyABqLQAAQQh0cyAGQRh2QajIAGotAABBEHRzIAZB/wFxQajIAGotAABBGHRzIgI2AgAgACACIAAoAgRzIgQ2AiQgACAAKAIIIARzIgQ2AiggACAAKAIMIARzIgQ2AiwgACAAKAIQIARB/wFxQajIAGotAABzIARBCHZB/wFxQajIAGotAABBCHRzIARBEHZB/wFxQajIAGotAABBEHRzIARBGHZBqMgAai0AAEEYdHMiBDYCMCAAIAQgACgCFHMiBDYCNCAAIAAoAhggBHMiBDYCOCAAIAQgBnM2AjwgAUEBaiIBQQdHBEAgAyEADAELCwwBCyAFJAEPCyAFJAELhQsCAn8BfiMBIQ0jAUGgAmokASANIQ5BACENA0BBqMwAQajMACkDAEKt/tXk1IX9qNgAfkIBfCIPNwMAIAEgDWogD0IhiDwAAEGozABBqMwAKQMAQq3+1eTUhf2o2AB+QgF8Ig83AwAgAyANaiAPQiGIPAAAQajMAEGozAApAwBCrf7V5NSF/ajYAH5CAXwiDzcDACAEIA1qIA9CIYg8AABBqMwAQajMACkDAEKt/tXk1IX9qNgAfkIBfCIPNwMAIAUgDWogD0IhiDwAAEGozABBqMwAKQMAQq3+1eTUhf2o2AB+QgF8Ig83AwAgBiANaiAPQiGIPAAAQajMAEGozAApAwBCrf7V5NSF/ajYAH5CAXwiDzcDACAHIA1qIA9CIYg8AABBqMwAQajMACkDAEKt/tXk1IX9qNgAfkIBfCIPNwMAIAggDWogD0IhiDwAAEGozABBqMwAKQMAQq3+1eTUhf2o2AB+QgF8Ig83AwAgCiANaiAPQiGIPAAAQajMAEGozAApAwBCrf7V5NSF/ajYAH5CAXwiDzcDACALIA1qIA9CIYg8AABBqMwAQajMACkDAEKt/tXk1IX9qNgAfkIBfCIPNwMAIAwgDWogD0IhiDwAACANQQFqIg1BEEcNAAsCQAJAAkACQAJAIAJBgAFrDoEBAAMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwEDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCAwsgAEEKNgIADAMLIABBDDYCAAwCCyAAQQ42AgAMAQsgDiQBDwsgACIBIAFBCGoiAzYCBCAOIAkgAhABIA4oAgQiBiAOKAIAQQJ0IgRBAnRqIgJBBGohBSADIAIoAgA2AgAgASAFKAIANgIMIAVBBGoiAkEEaiEFIAEgAigCADYCECABQRhqIQMgASAFKAIANgIUIAVBBGoiAkFgaiEAIAEoAgAiAUEBSgRAIARBfGogASABQX9zIgJBfUoEfyACBUF9C2pBAnRrIQUgASECA0AgAkF/aiEEIANBEGohASADIAAoAgAiB0EIdkH/AXFBqMgAai0AAEECdEGoEGooAgAgB0H/AXFBqMgAai0AAEECdEGoCGooAgBzIAdBEHZB/wFxQajIAGotAABBAnRBqBhqKAIAcyAHQRh2QajIAGotAABBAnRBqCBqKAIAczYCACADIAAoAgQiB0EIdkH/AXFBqMgAai0AAEECdEGoEGooAgAgB0H/AXFBqMgAai0AAEECdEGoCGooAgBzIAdBEHZB/wFxQajIAGotAABBAnRBqBhqKAIAcyAHQRh2QajIAGotAABBAnRBqCBqKAIAczYCBCADIAAoAggiB0EIdkH/AXFBqMgAai0AAEECdEGoEGooAgAgB0H/AXFBqMgAai0AAEECdEGoCGooAgBzIAdBEHZB/wFxQajIAGotAABBAnRBqBhqKAIAcyAHQRh2QajIAGotAABBAnRBqCBqKAIAczYCCCADIAAoAgwiA0EIdkH/AXFBqMgAai0AAEECdEGoEGooAgAgA0H/AXFBqMgAai0AAEECdEGoCGooAgBzIANBEHZB/wFxQajIAGotAABBAnRBqBhqKAIAcyADQRh2QajIAGotAABBAnRBqCBqKAIAczYCDCAAQXBqIQAgAkECSgRAIAEhAyAEIQIMAQsLIAYgBUECdGohAgUgAyEBCyABIAAoAgA2AgAgASACQWRqKAIANgIEIAEgAkFoaigCADYCCCABIAJBbGooAgA2AgwgDkEAQZgCEAMaIA4kAQuYAgEEfyAAIAJqIQQgAUH/AXEhASACQcMATgRAA0AgAEEDcQRAIAAgAToAACAAQQFqIQAMAQsLIARBfHEiBUFAaiEGIAEgAUEIdHIgAUEQdHIgAUEYdHIhAwNAIAAgBkwEQCAAIAM2AgAgACADNgIEIAAgAzYCCCAAIAM2AgwgACADNgIQIAAgAzYCFCAAIAM2AhggACADNgIcIAAgAzYCICAAIAM2AiQgACADNgIoIAAgAzYCLCAAIAM2AjAgACADNgI0IAAgAzYCOCAAIAM2AjwgAEFAayEADAELCwNAIAAgBUgEQCAAIAM2AgAgAEEEaiEADAELCwsDQCAAIARIBEAgACABOgAAIABBAWohAAwBCwsgBCACawvwBwEifyMBIQUjAUEQaiQBIAFBAEwEQCAFJAEPCyAFQQFqIRYgBUECaiEXIAVBA2ohGCAFQQRqIRkgBUEFaiEaIAVBBmohGyAFQQdqIRwgBUEIaiEdIAVBCWohHiAFQQpqIR8gBUELaiEgIAVBDGohISAFQQ1qISIgBUEOaiEjIAVBD2ohJCACQQ9qIQYgAkEOaiEHIAJBDWohCCACQQxqIQkgAkELaiEKIAJBCmohCyACQQlqIQwgAkEIaiENIAJBB2ohDiACQQZqIQ8gAkEFaiEQIAJBBGohESACQQNqIRIgAkECaiETIAJBAWohFCABIRUDQCAAQQEgAiAFEAAgBCAFLAAAIAMsAABzOgAAIAQgFiwAACADLAABczoAASAEIBcsAAAgAywAAnM6AAIgBCAYLAAAIAMsAANzOgADIAQgGSwAACADLAAEczoABCAEIBosAAAgAywABXM6AAUgBCAbLAAAIAMsAAZzOgAGIAQgHCwAACADLAAHczoAByAEIB0sAAAgAywACHM6AAggBCAeLAAAIAMsAAlzOgAJIAQgHywAACADLAAKczoACiAEICAsAAAgAywAC3M6AAsgBCAhLAAAIAMsAAxzOgAMIAQgIiwAACADLAANczoADSAEICMsAAAgAywADnM6AA4gBCAkLAAAIAMsAA9zOgAPIANBEGohJSAEQRBqIQQgFUFwaiEmAkACQCAGLAAAIgFBf0YEQCAGQQA6AAAgBywAACIBQX9GBEAgB0EAOgAAIAgsAAAiAUF/RgRAIAhBADoAACAJLAAAIgFBf0YEQCAJQQA6AAAgCiwAACIBQX9GBEAgCkEAOgAAIAssAAAiAUF/RgRAIAtBADoAACAMLAAAIgFBf0YEQCAMQQA6AAAgDSwAACIBQX9GBEAgDUEAOgAAIA4sAAAiAUF/RgRAIA5BADoAACAPLAAAIgFBf0YEQCAPQQA6AAAgECwAACIBQX9GBEAgEEEAOgAAIBEsAAAiAUF/RgRAIBFBADoAACASLAAAIgFBf0YEQCASQQA6AAAgEywAACIBQX9GBEAgE0EAOgAAIBQsAAAiAUF/RgRAIBRBADoAACACLAAAIgFBf0YEQCACQQA6AAAFIAIhAwwQCwUgFCEDDA8LBSATIQMMDgsFIBIhAwwNCwUgESEDDAwLBSAQIQMMCwsFIA8hAwwKCwUgDiEDDAkLBSANIQMMCAsFIAwhAwwHCwUgCyEDDAYLBSAKIQMMBQsFIAkhAwwECwUgCCEDDAMLBSAHIQMMAgsFIAYhAwwBCwwBCyADIAFB/wFxQQFqOgAACyAVQRBKBEAgJSEDICYhFQwBCwsgBSQBC+8HARF/IwEhBiMBQRBqJAEgAkEASiEHIAEEQCAHRQRAIAYkAQ8LIANBAWohFiADQQJqIQggA0EDaiEJIANBBGohCiADQQVqIQsgA0EGaiEMIANBB2ohDSADQQhqIQ4gA0EJaiEPIANBCmohECADQQtqIREgA0EMaiESIANBDWohEyADQQ5qIRQgA0EPaiEVA0AgBSADLAAAIAQsAABzOgAAIAUgFiwAACAELAABczoAASAFIAgsAAAgBCwAAnM6AAIgBSAJLAAAIAQsAANzOgADIAUgCiwAACAELAAEczoABCAFIAssAAAgBCwABXM6AAUgBSAMLAAAIAQsAAZzOgAGIAUgDSwAACAELAAHczoAByAFIA4sAAAgBCwACHM6AAggBSAPLAAAIAQsAAlzOgAJIAUgECwAACAELAAKczoACiAFIBEsAAAgBCwAC3M6AAsgBSASLAAAIAQsAAxzOgAMIAUgEywAACAELAANczoADSAFIBQsAAAgBCwADnM6AA4gBSAVLAAAIAQsAA9zOgAPIAAgASAFIAUQACADIAUpAAA3AAAgAyAFKQAINwAIIARBEGohBCAFQRBqIQUgAkFwaiEHIAJBEEoEQCAHIQIMAQsLBSAHRQRAIAYkAQ8LIANBAWohCCADQQJqIQkgA0EDaiEKIANBBGohCyADQQVqIQwgA0EGaiENIANBB2ohDiADQQhqIQ8gA0EJaiEQIANBCmohESADQQtqIRIgA0EMaiETIANBDWohFCADQQ5qIRUgA0EPaiEHA0AgBiAEKQAANwAAIAYgBCkACDcACCAAQQAgBCAFEAAgBSADLAAAIAUsAABzOgAAIAVBAWoiASAILAAAIAEsAABzOgAAIAVBAmoiASAJLAAAIAEsAABzOgAAIAVBA2oiASAKLAAAIAEsAABzOgAAIAVBBGoiASALLAAAIAEsAABzOgAAIAVBBWoiASAMLAAAIAEsAABzOgAAIAVBBmoiASANLAAAIAEsAABzOgAAIAVBB2oiASAOLAAAIAEsAABzOgAAIAVBCGoiASAPLAAAIAEsAABzOgAAIAVBCWoiASAQLAAAIAEsAABzOgAAIAVBCmoiASARLAAAIAEsAABzOgAAIAVBC2oiASASLAAAIAEsAABzOgAAIAVBDGoiASATLAAAIAEsAABzOgAAIAVBDWoiASAULAAAIAEsAABzOgAAIAVBDmoiASAVLAAAIAEsAABzOgAAIAVBD2oiASAHLAAAIAEsAABzOgAAIAMgBikAADcAACADIAYpAAg3AAggBEEQaiEEIAVBEGohBSACQXBqIQEgAkEQSgRAIAEhAgwBCwsLIAYkAQsLsEQBAEGACAuoRAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAEAAAACAAAAAGwAAADYAAABR9KdQfkFlUxoXpMM6J16WO6tryx+dRfGs+lirS+MDkyAw+lWtdm32iMx2kfUCTCVP5df8xSrL1yY1RIC1YqOP3rFaSSW6G2dF6g6YXf7A4cMvdQKBTPASjUaXo2vT+cYDj1/nFZKclb9teuuVUlna1L6DLVh0IdNJ4GkpjsnIRHXCiWr0jnl4mVg+aye5cd2+4U+28IitF8kgrGZ9zjq0Y99KGOUaMYKXUTNgYlN/RbFkd+C7a66E/oGgHPkIK5RwSGhYj0X9GZTebIdSe/i3q3PTI3JLAuLjH49XZlWrKrLrKAcvtcIDhsV7mtM3CKUwKIfyI7+lsgIDarrtFoJcis8cK6d5tJLzB/LwTmnioWXa9M0GBb7V0TRiH8Sm/oo0LlOdovNVoAWK4TKk9ut1C4PsOUBg76pecZ8GvW4QUT4hivmW3QY93T4Frk3mvUaRVI21ccRdBQQG1G9gUBX/GZj7JNa96ZeJQEPMZ9med7DoQr0HiYuI5xlbOHnI7tuhfApHfEIP6fiEHskAAAAACYCGgzIr7UgeEXCsbFpyTv0O//sPhThWPa7VHjYtOScKD9lkaFymIZtbVNEkNi46DApnsZNX5w+07pbSG5uRnoDAxU9h3CCiWndLaRwSGhbik7oKwKAq5Twi4EMSGxcdDgkNC/KLx60ttqi5FB6pyFfxGYWvdQdM7pndu6N/YP33ASafXHL1vERmO8Vb+340i0Mpdssjxty27fxouOTxY9cx3MpCY4UQE5ciQITGESCFSiR90rs9+K75MhHHKaFtHZ4vS9yyMPMNhlLsd8Hj0CuzFmypcLmZEZRI+kfpZCKo/IzEoPA/GlZ9LNgiM5Dvh0lOx9k40cGMyqL+mNQLNqb1gc+let4o2reOJj+tv6QsOp3kUHiSDWpfzJtUfkZi9o0TwpDYuOguOfdegsOv9Z9dgL5p0JN8b9Utqc8lErPIrJk7EBh9p+icY27bO7t7zSZ4CW5ZGPTsmrcBg0+aqOaVbmWq/+Z+IbzPCO8V6Oa655vZSm82zuqfCdQpsHzWMaSyryo/IzHGpZQwNaJmwHROvDf8gsqm4JDQsDOn2BXxBJhKQeza93/NUA4XkfYvdk3WjUPvsE3Mqk1U5JYE357RteNMaogbwSwfuEZlUX+dXuoEAYw1XfqHdHP7C0Eus2cdWpLb0lLpEFYzbdZHE5rXYYw3oQx6WfgUjusTPInOqSfut2HJNeEc5e16R7E8nNLfWVXycz8YFM55c8c3v1P3zepf/apb3z1vFHhE24bKr/OBuWjEPjgkNCzCo0BfFh3DcrziJQwoPEmL/w2VQTmoAXEIDLPe2LTknGRWwZB7y4Rh1TK2cEhsXHTQuFdCUFH0p1N+QWXDGhekljonXss7q2vxH51Fq6z6WJNL4wNVIDD69q12bZGIzHYl9QJM/E/l19fFKsuAJjVEj7Vio0nesVpnJbobmEXqDuFd/sACwy91EoFM8KONRpfGa9P55wOPX5UVkpzrv2162pVSWS3UvoPTWHQhKUngaUSOychqdcKJePSOeWuZWD7dJ7lxtr7hTxfwiK1mySCstH3OOhhj30qC5RoxYJdRM0ViU3/gsWR3hLtrrhz+gaCU+QgrWHBIaBmPRf2HlN5st1J7+COrc9PicksCV+MfjypmVasHsusoAy+1wpqGxXul0zcI8jAoh7Ijv6W6AgNqXO0WgiuKzxySp3m08PMH8qFOaeLNZdr01QYFvh/RNGKKxKb+nTQuU6Ci81UyBYrhdaT26zkLg+yqQGDvBl5xn1G9bhD5PiGKPZbdBq7dPgVGTea9tZFUjQVxxF1vBAbU/2BQFSQZmPuX1r3pzIlAQ3dn2Z69sOhCiAeJizjnGVvbecjuR6F8Cul8Qg/J+IQeAAAAAIMJgIZIMivtrB4RcE5sWnL7/Q7/Vg+FOB49rtUnNi05ZAoP2SFoXKbRm1tUOiQ2LrEMCmcPk1fn0rTulp4bm5FPgMDFomHcIGlad0sWHBIaCuKTuuXAoCpDPCLgHRIbFwsOCQ2t8ovHuS22qMgUHqmFV/EZTK91B7vumd39o39gn/cBJrxccvXFRGY7NFv7fnaLQyncyyPGaLbt/GO45PHK1zHcEEJjhUATlyIghMYRfYVKJPjSuz0RrvkybccpoUsdni/z3LIw7A2GUtB3weNsK7MWmalwufoRlEgiR+lkxKj8jBqg8D/YVn0s7yIzkMeHSU7B2TjR/ozKojaY1AvPpvWBKKV63ibat46kP62/5Cw6nQ1QeJKbal/MYlR+RsL2jRPokNi4Xi459/WCw6++n12AfGnQk6lv1S2zzyUSO8ismacQGH1u6Jxje9s7uwnNJnj0blkYAeyat6iDT5pl5pVufqr/5gghvM/m7xXo2brnm85KbzbU6p8J1imwfK8xpLIxKj8jMMallMA1omY3dE68pvyCyrDgkNAVM6fYSvEEmPdB7NoOf81QLxeR9o12TdZNQ++wVMyqTd/klgTjntG1G0xqiLjBLB9/RmVRBJ1e6l0BjDVz+od0LvsLQVqzZx1SktvSM+kQVhNt1keMmtdhejehDI5Z+BSJ6xM87s6pJzW3Ycnt4RzlPHpHsVmc0t8/VfJzeRgUzr9zxzfqU/fNW1/9qhTfPW+GeETbgcqv8z65aMQsOCQ0X8KjQHIWHcMMvOIliyg8SUH/DZVxOagB3ggMs5zYtOSQZFbBYXvLhHDVMrZ0SGxcQtC4V6dQUfRlU35BpMMaF16WOidryzurRfEfnVirrPoDk0vj+lUgMG32rXZ2kYjMTCX1Atf8T+XL18UqRIAmNaOPtWJaSd6xG2clug6YRerA4V3+dQLDL/ASgUyXo41G+cZr01/nA4+clRWSeuu/bVnalVKDLdS+IdNYdGkpSeDIRI7JiWp1wnl49I4+a5lYcd0nuU+2vuGtF/CIrGbJIDq0fc5KGGPfMYLlGjNgl1F/RWJTd+CxZK6Eu2ugHP6BK5T5CGhYcEj9GY9FbIeU3vi3UnvTI6tzAuJyS49X4x+rKmZVKAey68IDL7V7mobFCKXTN4fyMCilsiO/aroCA4Jc7RYcK4rPtJKnefLw8wfioU5p9M1l2r7VBgViH9E0/orEplOdNC5VoKLz4TIFiut1pPbsOQuD76pAYJ8GXnEQUb1uivk+IQY9lt0Frt0+vUZN5o21kVRdBXHE1G8EBhX/YFD7JBmY6ZfWvUPMiUCed2fZQr2w6IuIB4lbOOcZ7tt5yApHoXwP6XxCHsn4hAAAAACGgwmA7UgyK3CsHhFyTmxa//v9DjhWD4XVHj2uOSc2LdlkCg+mIWhcVNGbWy46JDZnsQwK5w+TV5bStO6RnhubxU+AwCCiYdxLaVp3GhYcEroK4pMq5cCg4EM8IhcdEhsNCw4Jx63yi6i5LbapyBQeGYVX8QdMr3Xdu+6ZYP2jfyaf9wH1vFxyO8VEZn40W/spdotDxtzLI/xotu3xY7jk3MrXMYUQQmMiQBOXESCExiR9hUo9+NK7MhGu+aFtxykvSx2eMPPcslLsDYbj0HfBFmwrs7mZqXBI+hGUZCJH6YzEqPw/GqDwLNhWfZDvIjNOx4dJ0cHZOKL+jMoLNpjUgc+m9d4opXqOJtq3v6Q/rZ3kLDqSDVB4zJtqX0ZiVH4TwvaNuOiQ2PdeLjmv9YLDgL6fXZN8adAtqW/VErPPJZk7yKx9pxAYY27onLt72zt4Cc0mGPRuWbcB7JqaqINPbmXmleZ+qv/PCCG86ObvFZvZuuc2zkpvCdTqn3zWKbCyrzGkIzEqP5QwxqVmwDWivDd0Tsqm/ILQsOCQ2BUzp5hK8QTa90HsUA5/zfYvF5HWjXZNsE1D701UzKoE3+SWteOe0YgbTGofuMEsUX9GZeoEnV41XQGMdHP6h0Eu+wsdWrNn0lKS21Yz6RBHE23WYYya1wx6N6EUjln4PInrEyfuzqnJNbdh5e3hHLE8ekffWZzScz9V8s55GBQ3v3PHzepT96pbX/1vFN8924Z4RPOByq/EPrloNCw4JEBfwqPDchYdJQy84kmLKDyVQf8NAXE5qLPeCAzknNi0wZBkVoRhe8u2cNUyXHRIbFdC0Lj0p1BRQWVTfhekwxonXpY6q2vLO51F8R/6WKus4wOTSzD6VSB2bfatzHaRiAJMJfXl1/xPKsvXxTVEgCZio4+1sVpJ3robZyXqDphF/sDhXS91AsNM8BKBRpejjdP5xmuPX+cDkpyVFW16679SWdqVvoMt1HQh01jgaSlJychEjsKJanWOeXj0WD5rmblx3SfhT7a+iK0X8CCsZsnOOrR930oYYxoxguVRM2CXU39FYmR34LFrroS7gaAc/ggrlPlIaFhwRf0Zj95sh5R7+LdSc9Mjq0sC4nIfj1fjVasqZusoB7K1wgMvxXuahjcIpdMoh/Iwv6WyIwNqugIWglztzxwrinm0kqcH8vDzaeKhTtr0zWUFvtUGNGIf0ab+isQuU50081WgoorhMgX263Wkg+w5C2DvqkBxnwZebhBRvSGK+T7dBj2WPgWu3ea9Rk1UjbWRxF0FcQbUbwRQFf9gmPskGb3pl9ZAQ8yJ2Z53Z+hCvbCJi4gHGVs458ju23l8CkehQg/pfIQeyfgAAAAAgIaDCSvtSDIRcKweWnJObA7/+/2FOFYPrtUePS05JzYP2WQKXKYhaFtU0Zs2LjokCmexDFfnD5PultK0m5GeG8DFT4DcIKJhd0tpWhIaFhyTugrioCrlwCLgQzwbFx0SCQ0LDovHrfK2qLktHqnIFPEZhVd1B0yvmd277n9g/aMBJp/3cvW8XGY7xUT7fjRbQyl2iyPG3Mvt/Gi25PFjuDHcytdjhRBClyJAE8YRIIRKJH2Fuz340vkyEa4poW3Hni9LHbIw89yGUuwNwePQd7MWbCtwuZmplEj6EelkIkf8jMSo8D8aoH0s2FYzkO8iSU7HhzjRwdnKov6M1As2mPWBz6Z63iilt44m2q2/pD86neQseJINUF/Mm2p+RmJUjRPC9ti46JA5914uw6/1gl2Avp/Qk3xp1S2pbyUSs8+smTvIGH2nEJxjbug7u3vbJngJzVkY9G6atwHsT5qog5VuZeb/5n6qvM8IIRXo5u/nm9m6bzbOSp8J1OqwfNYppLKvMT8jMSqllDDGombANU68N3SCyqb8kNCw4KfYFTMEmErx7Nr3Qc1QDn+R9i8XTdaNdu+wTUOqTVTMlgTf5NG1455qiBtMLB+4wWVRf0Ze6gSdjDVdAYd0c/oLQS77Zx1as9vSUpIQVjPp1kcTbddhjJqhDHo3+BSOWRM8ieupJ+7OYck1txzl7eFHsTx60t9ZnPJzP1UUznkYxze/c/fN6lP9qltfPW8U30Tbhniv84HKaMQ+uSQ0LDijQF/CHcNyFuIlDLw8SYsoDZVB/6gBcTkMs94ItOSc2FbBkGTLhGF7MrZw1WxcdEi4V0LQxmNjpfh8fITud3eZ9nt7jf/y8g3Wa2u93m9vsZHFxVRgMDBQAgEBA85nZ6lWKyt95/7+GbXX12JNq6vm7HZ2mo/KykUfgoKdicnJQPp9fYfv+voVsllZ645HR8n78PALQa2t7LPU1GdfoqL9Ra+v6iOcnL9TpKT35HJylpvAwFt1t7fC4f39HD2Tk65MJiZqbDY2Wn4/P0H19/cCg8zMT2g0NFxRpaX00eXlNPnx8QjicXGTq9jYc2IxMVMqFRU/CAQEDJXHx1JGIyNlncPDXjAYGCg3lpahCgUFDy+amrUOBwcJJBISNhuAgJvf4uI9zevrJk4nJ2l/srLN6nV1nxIJCRsdg4OeWCwsdDQaGi42Gxst3G5usrRaWu5boKD7pFJS9nY7O0231tZhfbOzzlIpKXvd4+M+Xi8vcROEhJemU1P1udHRaAAAAADB7e0sQCAgYOP8/B95sbHItltb7dRqar6Ny8tGZ76+2XI5OUuUSkremExM1LBYWOiFz89Ku9DQa8Xv7ypPqqrl7fv7FoZDQ8WaTU3XZjMzVRGFhZSKRUXP6fn5EAQCAgb+f3+BoFBQ8Hg8PEQln5+6S6io46JRUfNdo6P+gEBAwAWPj4o/kpKtIZ2dvHA4OEjx9fUEY7y833e2tsGv2tp1QiEhYyAQEDDl//8a/fPzDr/S0m2Bzc1MGAwMFCYTEzXD7Owvvl9f4TWXl6KIRETMLhcXOZPExFdVp6fy/H5+gno9PUfIZGSsul1d5zIZGSvmc3OVwGBgoBmBgZieT0/Ro9zcf0QiImZUKip+O5CQqwuIiIOMRkbKx+7uKWu4uNMoFBQ8p97eebxeXuIWCwsdrdvbdtvg4DtkMjJWdDo6ThQKCh6SSUnbDAYGCkgkJGy4XFzkn8LCXb3T025DrKzvxGJipjmRkagxlZWk0+TkN/J5eYvV5+cyi8jIQ243N1nabW23AY2NjLHV1WScTk7SSamp4NhsbLSsVlb68/T0B8/q6iXKZWWv9Hp6jkeurukQCAgYb7q61fB4eIhKJSVvXC4ucjgcHCRXpqbxc7S0x5fGxlHL6Ogjod3dfOh0dJw+Hx8hlktL3WG9vdwNi4uGD4qKheBwcJB8Pj5CcbW1xMxmZqqQSEjYBgMDBff29gEcDg4SwmFho2o1NV+uV1f5abm50BeGhpGZwcFYOh0dJyeenrnZ4eE46/j4EyuYmLMiEREz0mlpu6nZ2XAHjo6JM5SUpy2bm7Y8Hh4iFYeHksnp6SCHzs5JqlVV/1AoKHil3996A4yMj1mhofgJiYmAGg0NF2W/v9rX5uYxhEJCxtBoaLiCQUHDKZmZsFotLXceDw8Re7Cwy6hUVPxtu7vWLBYWOqXGY2OE+Hx8me53d432e3sN//LyvdZra7Heb29UkcXFUGAwMAMCAQGpzmdnfVYrKxnn/v5itdfX5k2rq5rsdnZFj8rKnR+CgkCJycmH+n19Fe/6+uuyWVnJjkdHC/vw8OxBra1ns9TU/V+ioupFr6+/I5yc91OkpJbkcnJbm8DAwnW3txzh/f2uPZOTakwmJlpsNjZBfj8/AvX390+DzMxcaDQ09FGlpTTR5eUI+fHxk+JxcXOr2NhTYjExPyoVFQwIBARSlcfHZUYjI16dw8MoMBgYoTeWlg8KBQW1L5qaCQ4HBzYkEhKbG4CAPd/i4ibN6+tpTicnzX+ysp/qdXUbEgkJnh2Dg3RYLCwuNBoaLTYbG7Lcbm7utFpa+1ugoPakUlJNdjs7YbfW1s59s7N7UikpPt3j43FeLy+XE4SE9aZTU2i50dEAAAAALMHt7WBAICAf4/z8yHmxse22W1u+1GpqRo3Ly9lnvr5Lcjk53pRKStSYTEzosFhYSoXPz2u70NAqxe/v5U+qqhbt+/vFhkND15pNTVVmMzOUEYWFz4pFRRDp+fkGBAICgf5/f/CgUFBEeDw8uiWfn+NLqKjzolFR/l2jo8CAQECKBY+PrT+SkrwhnZ1IcDg4BPH19d9jvLzBd7a2da/a2mNCISEwIBAQGuX//w798/Ntv9LSTIHNzRQYDAw1JhMTL8Ps7OG+X1+iNZeXzIhERDkuFxdXk8TE8lWnp4L8fn5Hej09rMhkZOe6XV0rMhkZleZzc6DAYGCYGYGB0Z5PT3+j3NxmRCIiflQqKqs7kJCDC4iIyoxGRinH7u7Ta7i4PCgUFHmn3t7ivF5eHRYLC3at29s72+DgVmQyMk50OjoeFAoK25JJSQoMBgZsSCQk5LhcXF2fwsJuvdPT70OsrKbEYmKoOZGRpDGVlTfT5OSL8nl5MtXn50OLyMhZbjc3t9ptbYwBjY1ksdXV0pxOTuBJqam02Gxs+qxWVgfz9PQlz+rqr8plZY70enrpR66uGBAICNVvurqI8Hh4b0olJXJcLi4kOBwc8VempsdztLRRl8bGI8vo6Hyh3d2c6HR0IT4fH92WS0vcYb29hg2Li4UPioqQ4HBwQnw+PsRxtbWqzGZm2JBISAUGAwMB9/b2EhwODqPCYWFfajU1+a5XV9BpubmRF4aGWJnBwSc6HR25J56eONnh4RPr+PizK5iYMyIREbvSaWlwqdnZiQeOjqczlJS2LZubIjweHpIVh4cgyenpSYfOzv+qVVV4UCgoeqXf348DjIz4WaGhgAmJiRcaDQ3aZb+/Mdfm5saEQkK40Ghow4JBQbApmZl3Wi0tER4PD8t7sLD8qFRU1m27uzosFhZjpcZjfIT4fHeZ7nd7jfZ78g3/8mu91mtvsd5vxVSRxTBQYDABAwIBZ6nOZyt9Viv+Gef+12K116vmTat2mux2ykWPyoKdH4LJQInJfYf6ffoV7/pZ67JZR8mOR/AL+/Ct7EGt1Gez1KL9X6Kv6kWvnL8jnKT3U6RyluRywFubwLfCdbf9HOH9k649kyZqTCY2Wmw2P0F+P/cC9ffMT4PMNFxoNKX0UaXlNNHl8Qj58XGT4nHYc6vYMVNiMRU/KhUEDAgEx1KVxyNlRiPDXp3DGCgwGJahN5YFDwoFmrUvmgcJDgcSNiQSgJsbgOI93+LrJs3rJ2lOJ7LNf7J1n+p1CRsSCYOeHYMsdFgsGi40GhstNhtustxuWu60WqD7W6BS9qRSO012O9Zht9azzn2zKXtSKeM+3eMvcV4vhJcThFP1plPRaLnRAAAAAO0swe0gYEAg/B/j/LHIebFb7bZbar7UastGjcu+2We+OUtyOUrelEpM1JhMWOiwWM9Khc/Qa7vQ7yrF76rlT6r7Fu37Q8WGQ03Xmk0zVWYzhZQRhUXPikX5EOn5AgYEAn+B/n9Q8KBQPER4PJ+6JZ+o40uoUfOiUaP+XaNAwIBAj4oFj5KtP5KdvCGdOEhwOPUE8fW832O8tsF3ttp1r9ohY0IhEDAgEP8a5f/zDv3z0m2/0s1Mgc0MFBgMEzUmE+wvw+xf4b5fl6I1l0TMiEQXOS4XxFeTxKfyVad+gvx+PUd6PWSsyGRd57pdGSsyGXOV5nNgoMBggZgZgU/Rnk/cf6PcImZEIip+VCqQqzuQiIMLiEbKjEbuKcfuuNNruBQ8KBTeeafeXuK8XgsdFgvbdq3b4Dvb4DJWZDI6TnQ6Ch4UCknbkkkGCgwGJGxIJFzkuFzCXZ/C026906zvQ6xipsRikag5kZWkMZXkN9PkeYvyeecy1efIQ4vIN1luN2232m2NjAGN1WSx1U7SnE6p4EmpbLTYbFb6rFb0B/P06iXP6mWvymV6jvR6rulHrggYEAi61W+6eIjweCVvSiUuclwuHCQ4HKbxV6a0x3O0xlGXxugjy+jdfKHddJzodB8hPh9L3ZZLvdxhvYuGDYuKhQ+KcJDgcD5CfD61xHG1ZqrMZkjYkEgDBQYD9gH39g4SHA5ho8JhNV9qNVf5rle50Gm5hpEXhsFYmcEdJzodnrknnuE42eH4E+v4mLMrmBEzIhFpu9Jp2XCp2Y6JB46UpzOUm7Ytmx4iPB6HkhWH6SDJ6c5Jh85V/6pVKHhQKN96pd+MjwOMofhZoYmACYkNFxoNv9plv+Yx1+ZCxoRCaLjQaEHDgkGZsCmZLXdaLQ8RHg+wy3uwVPyoVLvWbbsWOiwWY2Olxnx8hPh3d5nue3uN9vLyDf9ra73Wb2+x3sXFVJEwMFBgAQEDAmdnqc4rK31W/v4Z59fXYrWrq+ZNdnaa7MrKRY+Cgp0fyclAiX19h/r6+hXvWVnrskdHyY7w8Av7ra3sQdTUZ7Oiov1fr6/qRZycvyOkpPdTcnKW5MDAW5u3t8J1/f0c4ZOTrj0mJmpMNjZabD8/QX739wL1zMxPgzQ0XGilpfRR5eU00fHxCPlxcZPi2NhzqzExU2IVFT8qBAQMCMfHUpUjI2VGw8NenRgYKDCWlqE3BQUPCpqatS8HBwkOEhI2JICAmxvi4j3f6+smzScnaU6yss1/dXWf6gkJGxKDg54dLCx0WBoaLjQbGy02bm6y3Fpa7rSgoPtbUlL2pDs7TXbW1mG3s7POfSkpe1Lj4z7dLy9xXoSElxNTU/Wm0dFouQAAAADt7SzBICBgQPz8H+Oxsch5W1vttmpqvtTLy0aNvr7ZZzk5S3JKSt6UTEzUmFhY6LDPz0qF0NBru+/vKsWqquVP+/sW7UNDxYZNTdeaMzNVZoWFlBFFRc+K+fkQ6QICBgR/f4H+UFDwoDw8RHifn7olqKjjS1FR86Kjo/5dQEDAgI+PigWSkq0/nZ28ITg4SHD19QTxvLzfY7a2wXfa2nWvISFjQhAQMCD//xrl8/MO/dLSbb/NzUyBDAwUGBMTNSbs7C/DX1/hvpeXojVERMyIFxc5LsTEV5Onp/JVfn6C/D09R3pkZKzIXV3nuhkZKzJzc5XmYGCgwIGBmBlPT9Ge3Nx/oyIiZkQqKn5UkJCrO4iIgwtGRsqM7u4px7i402sUFDwo3t55p15e4rwLCx0W29t2reDgO9syMlZkOjpOdAoKHhRJSduSBgYKDCQkbEhcXOS4wsJdn9PTbr2srO9DYmKmxJGRqDmVlaQx5OQ303l5i/Ln5zLVyMhDizc3WW5tbbfajY2MAdXVZLFOTtKcqangSWxstNhWVvqs9PQH8+rqJc9lZa/KenqO9K6u6UcICBgQurrVb3h4iPAlJW9KLi5yXBwcJDimpvFXtLTHc8bGUZfo6CPL3d18oXR0nOgfHyE+S0vdlr293GGLi4YNioqFD3BwkOA+PkJ8tbXEcWZmqsxISNiQAwMFBvb2AfcODhIcYWGjwjU1X2pXV/muubnQaYaGkRfBwViZHR0nOp6euSfh4TjZ+PgT65iYsysRETMiaWm70tnZcKmOjokHlJSnM5ubti0eHiI8h4eSFenpIMnOzkmHVVX/qigoeFDf33qljIyPA6Gh+FmJiYAJDQ0XGr+/2mXm5jHXQkLGhGhouNBBQcOCmZmwKS0td1oPDxEesLDLe1RU/Ki7u9ZtFhY6LGN8d3vya2/FMAFnK/7Xq3bKgsl9+llH8K3Uoq+cpHLAt/2TJjY/98w0peXxcdgxFQTHI8MYlgWaBxKA4usnsnUJgywaG25aoFI71rMp4y+EU9EA7SD8sVtqy745SkxYz9DvqvtDTTOFRfkCf1A8n6hRo0CPkp049by22iEQ//PSzQwT7F+XRBfEp349ZF0Zc2CBT9wiKpCIRu64FN5eC9vgMjoKSQYkXMLTrGKRleR558g3bY3VTqlsVvTqZXquCLp4JS4cprTG6N10H0u9i4pwPrVmSAP2DmE1V7mGwR2e4fiYEWnZjpSbHofpzlUo34yhiQ2/5kJoQZktD7BUuxZSCWrVMDalOL9Ao56B89f7fOM5gpsv/4c0jkNExN7py1R7lDKmwiM97kyVC0L6w04ILqFmKNkksnZboklti9Elcvj2ZIZomBbUpFzMXWW2kmxwSFD97bnaXhVGV6eNnYSQ2KsAjLzTCvfkWAW4s0UG0Cwej8o/DwLBr70DAROKazqREUFPZ9zql/LPzvC05nOWrHQi5601heL5N+gcdd9uR/EacR0pxYlvt2IOqhi+G/xWPkvG0nkgmtvA/njNWvQf3agziAfHMbESEFkngOxfYFF/qRm1Sg0t5Xqfk8mc76DgO02uKvWwyOu7PINTmWEXKwR+unfWJuFpFGNVIQx9",d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),f=0;f<d.length;f++)e[d.charCodeAt(f)]=f;
var g=WebAssembly,h=(g.Module,g.instantiate),i=g.Memory,j=g.Table;a.exports=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{global:{},env:{memory:new i({initial:10,limit:100}),table:new j({initial:0,element:"anyfunc"})}};return h(b(c),a)}},function(a,b,c){a.exports=c(2)},function(a,b,c){function d(a){return parseInt(a)===a}function e(a){if(!d(a.length))return!1;for(var b=0;b<a.length;b++)if(!d(a[b])||0>a[b]||255<a[b])return!1;return!0}function f(a,b){if(a.buffer&&ArrayBuffer.isView(a))return b&&(a=a.slice?a.slice():Array.prototype.slice.call(a)),a;if(Array.isArray(a)){if(!e(a))throw new Error("Array contains invalid value: "+a);return new Uint8Array(a)}if(d(a.length)&&e(a))return new Uint8Array(a);throw new Error("unsupported array-like object")}function g(){var a=new WebAssembly.Memory({initial:256,maximum:256});return{env:{memory:a,STACKTOP:0}}}function h(){var a=16384;return function(b){return a+=b,a-b}}Object.defineProperty(b,"__esModule",{value:!0});var i=function(a,b){return function(){var c=h(),d=g();return a(d).then(function(a){function e(a){var b=f(a);h.set(b,w)}var g=a.instance,h=new Uint8Array(d.env.memory.buffer),i=c(276),j=c(276),k=c(b/8),l=c(b/8),m=c(b/8),n=c(b/8),o=c(b/8),p=c(b/8),q=c(b/8),r=c(b/8),s=c(b/8),t=c(b/8),u=c(b/8),v=c(16),w=c(0),x=void 0;return{init:function(a,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"CBC";h.set(c,v),h.set(a,k),h.set(a,l),h.set(a,m),h.set(a,n),h.set(a,o),h.set(a,p),h.set(a,q),h.set(a,r),h.set(a,s),h.set(a,t),h.set(a,u),g.exports._aes_setkey_dec(j,k,b,l,m,n,o,p,q,r,s,t,u),x=d},decrypt:function(a){return e(a),"CBC"===x?g.exports._aes_crypt_cbc(j,0,a.length,v,w,w):g.exports._aes_crypt_ctr(i,a.length,v,w,w),h.subarray(w,w+a.length).slice()}}})}},j=c(0),k=c.n(j),l=i(k.a,128),m=i(k.a,192),n=i(k.a,256);c.d(b,"aes128",function(){return l}),c.d(b,"aes192",function(){return m}),c.d(b,"aes256",function(){return n})}])})}).call(this,c("./node_modules/webpack/buildin/module.js")(a))},"./node_modules/eventemitter3/index.js":function(a,b,c){"use strict";function d(){}function e(a,b,c){this.fn=a,this.context=b,this.once=c||!1}function f(a,b,c,d,f){if("function"!=typeof c)throw new TypeError("The listener must be a function");var g=new e(c,d||a,f),h=j?j+b:b;return a._events[h]?a._events[h].fn?a._events[h]=[a._events[h],g]:a._events[h].push(g):(a._events[h]=g,a._eventsCount++),a}function g(a,b){0===--a._eventsCount?a._events=new d:delete a._events[b]}function h(){this._events=new d,this._eventsCount=0}var i=Object.prototype.hasOwnProperty,j="~";Object.create&&(d.prototype=Object.create(null),(new d).__proto__||(j=!1)),h.prototype.eventNames=function(){var a,b,c=[];if(0===this._eventsCount)return c;for(b in a=this._events)i.call(a,b)&&c.push(j?b.slice(1):b);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(a)):c},h.prototype.listeners=function(a){var b=j?j+a:a,c=this._events[b];if(!c)return[];if(c.fn)return[c.fn];for(var d=0,e=c.length,f=new Array(e);d<e;d++)f[d]=c[d].fn;return f},h.prototype.listenerCount=function(a){var b=j?j+a:a,c=this._events[b];return c?c.fn?1:c.length:0},h.prototype.emit=function(a,b,c,d,e,f){var g=j?j+a:a;if(!this._events[g])return!1;var h,i,k=this._events[g],l=arguments.length;if(k.fn){switch(k.once&&this.removeListener(a,k.fn,void 0,!0),l){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,b),!0;case 3:return k.fn.call(k.context,b,c),!0;case 4:return k.fn.call(k.context,b,c,d),!0;case 5:return k.fn.call(k.context,b,c,d,e),!0;case 6:return k.fn.call(k.context,b,c,d,e,f),!0}for(i=1,h=new Array(l-1);i<l;i++)h[i-1]=arguments[i];k.fn.apply(k.context,h)}else{var m,n=k.length;for(i=0;i<n;i++)switch(k[i].once&&this.removeListener(a,k[i].fn,void 0,!0),l){case 1:k[i].fn.call(k[i].context);break;case 2:k[i].fn.call(k[i].context,b);break;case 3:k[i].fn.call(k[i].context,b,c);break;case 4:k[i].fn.call(k[i].context,b,c,d);break;default:if(!h)for(m=1,h=new Array(l-1);m<l;m++)h[m-1]=arguments[m];k[i].fn.apply(k[i].context,h)}}return!0},h.prototype.on=function(a,b,c){return f(this,a,b,c,!1)},h.prototype.once=function(a,b,c){return f(this,a,b,c,!0)},h.prototype.removeListener=function(a,b,c,d){var e=j?j+a:a;if(!this._events[e])return this;if(!b)return g(this,e),this;var f=this._events[e];if(f.fn)f.fn!==b||d&&!f.once||c&&f.context!==c||g(this,e);else{for(var h=0,i=[],k=f.length;h<k;h++)(f[h].fn!==b||d&&!f[h].once||c&&f[h].context!==c)&&i.push(f[h]);i.length?this._events[e]=1===i.length?i[0]:i:g(this,e)}return this},h.prototype.removeAllListeners=function(a){var b;return a?(b=j?j+a:a,this._events[b]&&g(this,b)):(this._events=new d,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=j,h.EventEmitter=h,a.exports=h},"./node_modules/url-toolkit/src/url-toolkit.js":function(a,b,c){!function(b){var c=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,d=/^([^\/?#]*)(.*)$/,e=/(?:\/|^)\.(?=\/)/g,f=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,g={buildAbsoluteURL:function(a,b,c){if(c=c||{},a=a.trim(),b=b.trim(),!b){if(!c.alwaysNormalize)return a;var e=g.parseURL(a);if(!e)throw new Error("Error trying to parse base URL.");return e.path=g.normalizePath(e.path),g.buildURLFromParts(e)}var f=g.parseURL(b);if(!f)throw new Error("Error trying to parse relative URL.");if(f.scheme)return c.alwaysNormalize?(f.path=g.normalizePath(f.path),g.buildURLFromParts(f)):b;var h=g.parseURL(a);if(!h)throw new Error("Error trying to parse base URL.");if(!h.netLoc&&h.path&&"/"!==h.path[0]){var i=d.exec(h.path);h.netLoc=i[1],h.path=i[2]}h.netLoc&&!h.path&&(h.path="/");var j={scheme:h.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment};if(!f.netLoc&&(j.netLoc=h.netLoc,"/"!==f.path[0]))if(f.path){var k=h.path,l=k.substring(0,k.lastIndexOf("/")+1)+f.path;j.path=g.normalizePath(l)}else j.path=h.path,f.params||(j.params=h.params,f.query||(j.query=h.query));return null===j.path&&(j.path=c.alwaysNormalize?g.normalizePath(f.path):f.path),g.buildURLFromParts(j)},parseURL:function(a){var b=c.exec(a);return b?{scheme:b[1]||"",netLoc:b[2]||"",path:b[3]||"",params:b[4]||"",query:b[5]||"",fragment:b[6]||""}:null},normalizePath:function(a){for(a=a.split("").reverse().join("").replace(e,"");a.length!==(a=a.replace(f,"")).length;);return a.split("").reverse().join("")},buildURLFromParts:function(a){return a.scheme+a.netLoc+a.path+a.params+a.query+a.fragment}};a.exports=g}(this)},"./node_modules/webpack/buildin/module.js":function(a,b){a.exports=function(a){return a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children||(a.children=[]),Object.defineProperty(a,"loaded",{enumerable:!0,get:function(){return a.l}}),Object.defineProperty(a,"id",{enumerable:!0,get:function(){return a.i}}),a.webpackPolyfill=1),a}},"./node_modules/webworkify-webpack/index.js":function(a,b,c){function d(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.r=function(a){Object.defineProperty(a,"__esModule",{value:!0})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="/",b.oe=function(a){throw a};var d=b(b.s=ENTRY_MODULE);return d.default||d}function e(a){return(a+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function f(a){return!isNaN(1*a)}function g(a,b,d){var g={};g[d]=[];var h=b.toString(),i=h.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!i)return g;for(var l,m=i[1],n=new RegExp("(\\\\n|\\W)"+e(m)+k,"g");l=n.exec(h);)"dll-reference"!==l[3]&&g[d].push(l[3]);for(n=new RegExp("\\("+e(m)+'\\("(dll-reference\\s('+j+'))"\\)\\)'+k,"g");l=n.exec(h);)a[l[2]]||(g[d].push(l[1]),a[l[2]]=c(l[1]).m),g[l[2]]=g[l[2]]||[],g[l[2]].push(l[4]);for(var o=Object.keys(g),p=0;p<o.length;p++)for(var q=0;q<g[o[p]].length;q++)f(g[o[p]][q])&&(g[o[p]][q]=1*g[o[p]][q]);return g}function h(a){var b=Object.keys(a);return b.reduce(function(b,c){return b||a[c].length>0},!1)}function i(a,b){for(var c={main:[b]},d={main:[]},e={main:{}};h(c);)for(var f=Object.keys(c),i=0;i<f.length;i++){var j=f[i],k=c[j],l=k.pop();if(e[j]=e[j]||{},!e[j][l]&&a[j][l]){e[j][l]=!0,d[j]=d[j]||[],d[j].push(l);for(var m=g(a,a[j][l],j),n=Object.keys(m),o=0;o<n.length;o++)c[n[o]]=c[n[o]]||[],c[n[o]]=c[n[o]].concat(m[n[o]])}}return d}var j="[\\.|\\-|\\+|\\w|/|@]+",k="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+j+").*?\\)";a.exports=function(a,b){b=b||{};var e={main:c.m},f=b.all?{main:Object.keys(e.main)}:i(e,a),g="";Object.keys(f).filter(function(a){return"main"!==a}).forEach(function(a){for(var b=0;f[a][b];)b++;f[a].push(b),e[a][b]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",g=g+"var "+a+" = ("+d.toString().replace("ENTRY_MODULE",JSON.stringify(b))+")({"+f[a].map(function(b){return""+JSON.stringify(b)+": "+e[a][b].toString()}).join(",")+"});\n"}),g=g+"new (("+d.toString().replace("ENTRY_MODULE",JSON.stringify(a))+")({"+f.main.map(function(a){return""+JSON.stringify(a)+": "+e.main[a].toString()}).join(",")+"}))(self);";var h=new window.Blob([g],{type:"text/javascript"});if(b.bare)return h;var j=window.URL||window.webkitURL||window.mozURL||window.msURL,k=j.createObjectURL(h),l=new window.Worker(k);return l.objectURL=k,l}},"./src/crypt/decrypter.js":function(a,b,c){"use strict";function d(a){var b=a.byteLength,c=b&&new DataView(a).getUint8(b-1);return c?a.slice(0,b-c):a}c.r(b);var e=(function(){function a(a,b){this.subtle=a,this.aesIV=b}var b=a.prototype;return b.decrypt=function(a,b){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},b,a)},a}(),function(){function a(a,b){this.subtle=a,this.key=b}var b=a.prototype;return b.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},a}(),function(){function a(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var b=a.prototype;return b.uint8ArrayToUint32Array_=function(a){for(var b=new DataView(a),c=new Uint32Array(4),d=0;d<4;d++)c[d]=b.getUint32(4*d);return c},b.initTable=function(){var a=this.sBox,b=this.invSBox,c=this.subMix,d=c[0],e=c[1],f=c[2],g=c[3],h=this.invSubMix,i=h[0],j=h[1],k=h[2],l=h[3],m=new Uint32Array(256),n=0,o=0,p=0;for(p=0;p<256;p++)p<128?m[p]=p<<1:m[p]=p<<1^283;for(p=0;p<256;p++){var q=o^o<<1^o<<2^o<<3^o<<4;q=q>>>8^255&q^99,a[n]=q,b[q]=n;var r=m[n],s=m[r],t=m[s],u=257*m[q]^16843008*q;d[n]=u<<24|u>>>8,e[n]=u<<16|u>>>16,f[n]=u<<8|u>>>24,g[n]=u,u=16843009*t^65537*s^257*r^16843008*n,i[q]=u<<24|u>>>8,j[q]=u<<16|u>>>16,k[q]=u<<8|u>>>24,l[q]=u,n?(n=r^m[m[m[t^r]]],o^=m[m[o]]):n=o=1}},b.expandKey=function(a){for(var b=this.uint8ArrayToUint32Array_(a),c=!0,d=0;d<b.length&&c;)c=b[d]===this.key[d],d++;if(!c){this.key=b;var e=this.keySize=b.length;if(4!==e&&6!==e&&8!==e)throw new Error("Invalid aes key size="+e);var f,g,h,i,j=this.ksRows=4*(e+6+1),k=this.keySchedule=new Uint32Array(j),l=this.invKeySchedule=new Uint32Array(j),m=this.sBox,n=this.rcon,o=this.invSubMix,p=o[0],q=o[1],r=o[2],s=o[3];for(f=0;f<j;f++)f<e?h=k[f]=b[f]:(i=h,f%e===0?(i=i<<8|i>>>24,i=m[i>>>24]<<24|m[i>>>16&255]<<16|m[i>>>8&255]<<8|m[255&i],i^=n[f/e|0]<<24):e>6&&f%e===4&&(i=m[i>>>24]<<24|m[i>>>16&255]<<16|m[i>>>8&255]<<8|m[255&i]),k[f]=h=(k[f-e]^i)>>>0);for(g=0;g<j;g++)f=j-g,i=3&g?k[f]:k[f-4],g<4||f<=4?l[g]=i:l[g]=p[m[i>>>24]]^q[m[i>>>16&255]]^r[m[i>>>8&255]]^s[m[255&i]],l[g]=l[g]>>>0}},b.networkToHostOrderSwap=function(a){return a<<24|(65280&a)<<8|(16711680&a)>>8|a>>>24},b.decrypt=function(a,b,c,e){for(var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=this.keySize+6,u=this.invKeySchedule,v=this.invSBox,w=this.invSubMix,x=w[0],y=w[1],z=w[2],A=w[3],B=this.uint8ArrayToUint32Array_(c),C=B[0],D=B[1],E=B[2],F=B[3],G=new Int32Array(a),H=new Int32Array(G.length),I=this.networkToHostOrderSwap;b<G.length;){for(n=I(G[b]),o=I(G[b+1]),p=I(G[b+2]),q=I(G[b+3]),j=n^u[0],k=q^u[1],l=p^u[2],m=o^u[3],r=4,s=1;s<t;s++)f=x[j>>>24]^y[k>>16&255]^z[l>>8&255]^A[255&m]^u[r],g=x[k>>>24]^y[l>>16&255]^z[m>>8&255]^A[255&j]^u[r+1],h=x[l>>>24]^y[m>>16&255]^z[j>>8&255]^A[255&k]^u[r+2],i=x[m>>>24]^y[j>>16&255]^z[k>>8&255]^A[255&l]^u[r+3],j=f,k=g,l=h,m=i,r+=4;f=v[j>>>24]<<24^v[k>>16&255]<<16^v[l>>8&255]<<8^v[255&m]^u[r],g=v[k>>>24]<<24^v[l>>16&255]<<16^v[m>>8&255]<<8^v[255&j]^u[r+1],h=v[l>>>24]<<24^v[m>>16&255]<<16^v[j>>8&255]<<8^v[255&k]^u[r+2],i=v[m>>>24]<<24^v[j>>16&255]<<16^v[k>>8&255]<<8^v[255&l]^u[r+3],r+=3,H[b]=I(f^C),H[b+1]=I(i^D),H[b+2]=I(h^E),H[b+3]=I(g^F),C=n,D=o,E=p,F=q,b+=4}return e?d(H.buffer):H.buffer},b.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},a}()),f=e,g=c("./src/errors.ts"),h=c("./src/utils/logger.js"),i=c("./src/events.js"),j=c("./src/utils/get-self-scope.js"),k=c("./node_modules/@player/drm/index.js"),l=Object(j.getSelfScope)(),m=function(){function a(a,b,c){var d=void 0===c?{}:c,e=d.removePKCS7Padding,f=void 0===e||e;if(this.logEnabled=!0,this.observer=a,this.config=b,this.removePKCS7Padding=f,f)try{var g=l.crypto;g&&(this.subtle=g.subtle||g.webkitSubtle)}catch(a){}this.disableWebCrypto=!this.subtle}var b=a.prototype;return b.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},b.decrypt=function(a,b,c,d){if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(h.logger.log("JS AES decrypt"),this.logEnabled=!1);var e=this.decryptor;e||(this.decryptor=e=new f),e.expandKey(b),d(e.decrypt(a,0,c,this.removePKCS7Padding))}else{h.logger.log("DRM AES decrypt");var g=this;if(this.aesApi__){h.logger.log("have aesApi__"),this.aesApi__.init(new Int8Array(b),new Int8Array(c));var i=this.aesApi__.decrypt(new Int8Array(a));d(i)}else h.logger.log("init aesApi__"),k.aes128().then(function(e){h.logger.log("init success aesApi__"),g.aesApi__=e,e.init(new Int8Array(b),new Int8Array(c));var f=e.decrypt(new Int8Array(a));d(f)})}},b.onWebCryptoError=function(a,b,c,d,e){this.config.enableSoftwareAES?(h.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(b,c,d,e)):(h.logger.error("decrypting error : "+a.message),this.observer.trigger(i.default.ERROR,{type:g.ErrorTypes.MEDIA_ERROR,details:g.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:a.message}))},b.destroy=function(){var a=this.decryptor;a&&(a.destroy(),this.decryptor=void 0)},a}();b.default=m},"./src/demux/demuxer-inline.js":function(a,b,c){"use strict";function d(a,b,c,d){var e,f,g,h,i,j=navigator.userAgent.toLowerCase(),k=d,l=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return e=((192&b[c+2])>>>6)+1,f=(60&b[c+2])>>>2,f>l.length-1?void a.trigger(r.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+f}):(h=(1&b[c+2])<<2,h|=(192&b[c+3])>>>6,v.logger.log("manifest codec:"+d+",ADTS data:type:"+e+",sampleingIndex:"+f+"["+l[f]+"Hz],channelConfig:"+h),/firefox/i.test(j)?f>=6?(e=5,i=new Array(4),g=f-3):(e=2,i=new Array(2),g=f):j.indexOf("android")!==-1?(e=2,i=new Array(2),g=f):(e=5,i=new Array(4),d&&(d.indexOf("mp4a.40.29")!==-1||d.indexOf("mp4a.40.5")!==-1)||!d&&f>=6?g=f-3:((d&&d.indexOf("mp4a.40.2")!==-1&&(f>=6&&1===h||/vivaldi/i.test(j))||!d&&1===h)&&(e=2,i=new Array(2)),g=f)),i[0]=e<<3,i[0]|=(14&f)>>1,i[1]|=(1&f)<<7,i[1]|=h<<3,5===e&&(i[1]|=(14&g)>>1,i[2]=(1&g)<<7,i[2]|=8,i[3]=0),{config:i,samplerate:l[f],channelCount:h,codec:"mp4a.40."+e,manifestCodec:k})}function e(a,b){return 255===a[b]&&240===(246&a[b+1])}function f(a,b){return 1&a[b+1]?7:9}function g(a,b){return(3&a[b+3])<<11|a[b+4]<<3|(224&a[b+5])>>>5}function h(a,b){return!!(b+1<a.length&&e(a,b))}function i(a,b){if(h(a,b)){var c=f(a,b);if(b+c>=a.length)return!1;var d=g(a,b);if(d<=c)return!1;var i=b+d;if(i===a.length||i+1<a.length&&e(a,i))return!0}return!1}function j(a,b,c,e,f){if(!a.samplerate){var g=d(b,c,e,f);a.config=g.config,a.samplerate=g.samplerate,a.channelCount=g.channelCount,a.codec=g.codec,a.manifestCodec=g.manifestCodec,v.logger.log("parsed codec:"+a.codec+",rate:"+g.samplerate+",nb channel:"+g.channelCount)}}function k(a){return 9216e4/a}function l(a,b,c,d,e){var h,i,j,k=a.length;if(h=f(a,b),i=g(a,b),i-=h,i>0&&b+h+i<=k)return j=c+d*e,{headerLength:h,frameLength:i,stamp:j}}function m(a,b,c,d,e){var f=k(a.samplerate),g=l(b,c,d,e,f);if(g){var h=g.stamp,i=g.headerLength,j=g.frameLength,m={unit:b.subarray(c+i,c+i+j),pts:h,dts:h};return a.samples.push(m),{sample:m,length:j+i}}}function n(a,b,c,d){void 0===c&&(c=1),void 0===d&&(d=!1);var e=a*b*c;return d?Math.round(e):e}function o(a,b){return void 0===b&&(b=!1),n(a,1e3,1/R,b)}function p(a,b){return void 0===b&&(b=1),n(a,R,1/b)}c.r(b);var q,r=c("./src/events.js"),s=c("./src/errors.ts"),t=c("./src/crypt/decrypter.js"),u=c("./src/polyfills/number-isFinite.js"),v=c("./src/utils/logger.js"),w=c("./src/utils/get-self-scope.js"),x=c("./src/demux/id3.js"),y=function(){function a(a,b,c){this.observer=a,this.config=c,this.remuxer=b}var b=a.prototype;return b.resetInitSegment=function(a,b,c,d){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:b,duration:d,inputTimeScale:9e4}},b.resetTimeStamp=function(){},a.probe=function(a){if(!a)return!1;for(var b=x.default.getID3Data(a,0)||[],c=b.length,d=a.length;c<d;c++)if(i(a,c))return v.logger.log("ADTS sync word found !"),!0;return!1},b.append=function(a,b,c,d){for(var e=this._audioTrack,f=x.default.getID3Data(a,0)||[],g=x.default.getTimeStamp(f),i=Object(u.isFiniteNumber)(g)?90*g:9e4*b,k=0,l=i,n=a.length,o=f.length,p=[{pts:l,dts:l,data:f}];o<n-1;)if(h(a,o)&&o+5<n){j(e,this.observer,a,o,e.manifestCodec);var q=m(e,a,o,i,k);if(!q){v.logger.log("Unable to parse AAC frame");break}o+=q.length,l=q.sample.pts,k++}else x.default.isHeader(a,o)?(f=x.default.getID3Data(a,o),p.push({pts:l,dts:l,data:f}),o+=f.length):o++;this.remuxer.remux(e,{samples:[]},{samples:p,inputTimeScale:9e4},{samples:[]},b,c,d)},b.destroy=function(){},a}(),z=y,A=c("./src/demux/mp4demuxer.js"),B={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(a,b,c,d,e){if(!(c+24>b.length)){var f=this.parseHeader(b,c);if(f&&c+f.frameLength<=b.length){var g=9e4*f.samplesPerFrame/f.sampleRate,h=d+e*g,i={unit:b.subarray(c,c+f.frameLength),pts:h,dts:h};return a.config=[],a.channelCount=f.channelCount,a.samplerate=f.sampleRate,a.samples.push(i),{sample:i,length:f.frameLength}}}},parseHeader:function(a,b){var c=a[b+1]>>3&3,d=a[b+1]>>1&3,e=a[b+2]>>4&15,f=a[b+2]>>2&3,g=a[b+2]>>1&1;if(1!==c&&0!==e&&15!==e&&3!==f){var h=3===c?3-d:3===d?3:4,i=1e3*B.BitratesMap[14*h+e-1],j=3===c?0:2===c?1:2,k=B.SamplingRateMap[3*j+f],l=a[b+3]>>6===3?1:2,m=B.SamplesCoefficients[c][d],n=B.BytesInSlot[d],o=8*m*n,p=parseInt(m*i/k+g,10)*n;return{sampleRate:k,channelCount:l,frameLength:p,samplesPerFrame:o}}},isHeaderPattern:function(a,b){return 255===a[b]&&224===(224&a[b+1])&&0!==(6&a[b+1])},isHeader:function(a,b){return!!(b+1<a.length&&this.isHeaderPattern(a,b))},probe:function(a,b){if(b+1<a.length&&this.isHeaderPattern(a,b)){var c=4,d=this.parseHeader(a,b),e=c;d&&d.frameLength&&(e=d.frameLength);var f=b+e;if(f===a.length||f+1<a.length&&this.isHeaderPattern(a,f))return!0}return!1}},C=B,D=function(){function a(a){this.data=a,this.bytesAvailable=a.byteLength,this.word=0,this.bitsAvailable=0}var b=a.prototype;return b.loadWord=function(){var a=this.data,b=this.bytesAvailable,c=a.byteLength-b,d=new Uint8Array(4),e=Math.min(4,b);if(0===e)throw new Error("no bytes available");d.set(a.subarray(c,c+e)),this.word=new DataView(d.buffer).getUint32(0),this.bitsAvailable=8*e,this.bytesAvailable-=e},b.skipBits=function(a){var b;this.bitsAvailable>a?(this.word<<=a,this.bitsAvailable-=a):(a-=this.bitsAvailable,b=a>>3,a-=b>>3,this.bytesAvailable-=b,this.loadWord(),this.word<<=a,this.bitsAvailable-=a)},b.readBits=function(a){var b=Math.min(this.bitsAvailable,a),c=this.word>>>32-b;return a>32&&v.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=b,this.bitsAvailable>0?this.word<<=b:this.bytesAvailable>0&&this.loadWord(),b=a-b,b>0&&this.bitsAvailable?c<<b|this.readBits(b):c},b.skipLZ=function(){var a;for(a=0;a<this.bitsAvailable;++a)if(0!==(this.word&2147483648>>>a))return this.word<<=a,this.bitsAvailable-=a,a;return this.loadWord(),a+this.skipLZ()},b.skipUEG=function(){this.skipBits(1+this.skipLZ())},b.skipEG=function(){this.skipBits(1+this.skipLZ())},b.readUEG=function(){var a=this.skipLZ();return this.readBits(a+1)-1},b.readEG=function(){var a=this.readUEG();return 1&a?1+a>>>1:-1*(a>>>1)},b.readBoolean=function(){return 1===this.readBits(1)},b.readUByte=function(){return this.readBits(8)},b.readUShort=function(){return this.readBits(16)},b.readUInt=function(){return this.readBits(32)},b.skipScalingList=function(a){var b,c,d=8,e=8;for(b=0;b<a;b++)0!==e&&(c=this.readEG(),e=(d+c+256)%256),d=0===e?d:e},b.readSPS=function(){var a,b,c,d,e,f,g,h,i,j=0,k=0,l=0,m=0,n=this.readUByte.bind(this),o=this.readBits.bind(this),p=this.readUEG.bind(this),q=this.readBoolean.bind(this),r=this.skipBits.bind(this),s=this.skipEG.bind(this),t=this.skipUEG.bind(this),u=this.skipScalingList.bind(this);if(n(),a=n(),b=o(5),r(3),c=n(),t(),100===a||110===a||122===a||244===a||44===a||83===a||86===a||118===a||128===a){var v=p();if(3===v&&r(1),t(),t(),r(1),q())for(h=3!==v?8:12,i=0;i<h;i++)q()&&u(i<6?16:64)}t();var w=p();if(0===w)p();else if(1===w)for(r(1),s(),s(),d=p(),i=0;i<d;i++)s();t(),r(1),e=p(),f=p(),g=o(1),0===g&&r(1),r(1),q()&&(j=p(),k=p(),l=p(),m=p());var x=[1,1];if(q()&&q()){var y=n();switch(y){case 1:x=[1,1];break;case 2:x=[12,11];break;case 3:x=[10,11];break;case 4:x=[16,11];break;case 5:x=[40,33];break;case 6:x=[24,11];break;case 7:x=[20,11];break;case 8:x=[32,11];break;case 9:x=[80,33];break;case 10:x=[18,11];break;case 11:x=[15,11];break;case 12:x=[64,33];break;case 13:x=[160,99];break;case 14:x=[4,3];break;case 15:x=[3,2];break;case 16:x=[2,1];break;case 255:x=[n()<<8|n(),n()<<8|n()]}}return{width:Math.ceil(16*(e+1)-2*j-2*k),height:(2-g)*(f+1)*16-(g?2:4)*(l+m),pixelRatio:x}},b.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},a}(),E=D,F=function(){function a(a,b,c,d){this.decryptdata=c,this.discardEPB=d,this.decrypter=new t.default(a,b,{removePKCS7Padding:!1})}var b=a.prototype;return b.decryptBuffer=function(a,b){this.decrypter.decrypt(a,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,b)},b.decryptAacSample=function(a,b,c,d){var e=a[b].unit,f=e.subarray(16,e.length-e.length%16),g=f.buffer.slice(f.byteOffset,f.byteOffset+f.length),h=this;this.decryptBuffer(g,function(f){f=new Uint8Array(f),e.set(f,16),d||h.decryptAacSamples(a,b+1,c)})},b.decryptAacSamples=function(a,b,c){for(;;b++){if(b>=a.length)return void c();if(!(a[b].unit.length<32)){var d=this.decrypter.isSync();if(this.decryptAacSample(a,b,c,d),!d)return}}},b.getAvcEncryptedData=function(a){for(var b=16*Math.floor((a.length-48)/160)+16,c=new Int8Array(b),d=0,e=32;e<=a.length-16;e+=160,d+=16)c.set(a.subarray(e,e+16),d);return c},b.getAvcDecryptedUnit=function(a,b){b=new Uint8Array(b);for(var c=0,d=32;d<=a.length-16;d+=160,c+=16)a.set(b.subarray(c,c+16),d);return a},b.decryptAvcSample=function(a,b,c,d,e,f){var g=this.discardEPB(e.data),h=this.getAvcEncryptedData(g),i=this;this.decryptBuffer(h.buffer,function(h){e.data=i.getAvcDecryptedUnit(g,h),f||i.decryptAvcSamples(a,b,c+1,d)})},b.decryptAvcSamples=function(a,b,c,d){for(;;b++,c=0){if(b>=a.length)return void d();for(var e=a[b].units;!(c>=e.length);c++){var f=e[c];if(!(f.length<=48||1!==f.type&&5!==f.type)){var g=this.decrypter.isSync();if(this.decryptAvcSample(a,b,c,d,f,g),!g)return}}}},a}(),G=F,H={video:1,audio:2,id3:3,text:4},I=function(){function a(a,b,c,d){this.observer=a,this.config=c,this.typeSupported=d,this.remuxer=b,this.sampleAes=null,this.pmtUnknownTypes={}}var b=a.prototype;return b.setDecryptData=function(a){null!=a&&null!=a.key&&"SAMPLE-AES"===a.method?this.sampleAes=new G(this.observer,this.config,a,this.discardEPB):this.sampleAes=null},a.probe=function(b){var c=a._syncOffset(b);return!(c<0)&&(c&&v.logger.warn("MPEG2-TS detected but first sync word found @ offset "+c+", junk ahead ?"),!0)},a._syncOffset=function(a){for(var b=Math.min(1e3,a.length-564),c=0;c<b;){if(71===a[c]&&71===a[c+188]&&71===a[c+376])return c;c++}return-1},a.createTrack=function(a,b){return{container:"video"===a||"audio"===a?"video/mp2t":void 0,type:a,id:H[a],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===a?0:void 0,isAAC:"audio"===a||void 0,duration:"audio"===a?b:void 0}},b.resetInitSegment=function(b,c,d,e){this.pmtParsed=!1,this._pmtId=-1,this.pmtUnknownTypes={},this._avcTrack=a.createTrack("video",e),this._audioTrack=a.createTrack("audio",e),this._id3Track=a.createTrack("id3",e),this._txtTrack=a.createTrack("text",e),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=c,this.videoCodec=d,this._duration=e},b.resetTimeStamp=function(){},b.append=function(b,c,d,e){var f,g,h,i,j,k,l=b.length,m=!1;this.pmtUnknownTypes={},this.contiguous=d;var n=this.pmtParsed,o=this._avcTrack,p=this._audioTrack,q=this._id3Track,t=o.pid,u=p.pid,w=q.pid,x=this._pmtId,y=o.pesData,z=p.pesData,A=q.pesData,B=this._parsePAT,C=this._parsePMT.bind(this),D=this._parsePES,E=this._parseAVCPES.bind(this),F=this._parseAACPES.bind(this),G=this._parseMPEGPES.bind(this),H=this._parseID3PES.bind(this),I=a._syncOffset(b);for(l-=(l+I)%188,f=I;f<l;f+=188)if(71===b[f]){if(g=!!(64&b[f+1]),h=((31&b[f+1])<<8)+b[f+2],i=(48&b[f+3])>>4,i>1){if(j=f+5+b[f+4],j===f+188)continue}else j=f+4;switch(h){case t:g&&(y&&(k=D(y))&&E(k,!1),y={data:[],size:0}),y&&(y.data.push(b.subarray(j,f+188)),y.size+=f+188-j);break;case u:g&&(z&&(k=D(z))&&(p.isAAC?F(k):G(k)),z={data:[],size:0}),z&&(z.data.push(b.subarray(j,f+188)),z.size+=f+188-j);break;case w:g&&(A&&(k=D(A))&&H(k),A={data:[],size:0}),A&&(A.data.push(b.subarray(j,f+188)),A.size+=f+188-j);break;case 0:g&&(j+=b[j]+1),x=this._pmtId=B(b,j);break;case x:g&&(j+=b[j]+1);var J=C(b,j,this.typeSupported.mpeg===!0||this.typeSupported.mp3===!0,null!=this.sampleAes);t=J.avc,t>0&&(o.pid=t),u=J.audio,u>0&&(p.pid=u,p.isAAC=J.isAAC),w=J.id3,w>0&&(q.pid=w),m&&!n&&(v.logger.log("reparse from beginning"),m=!1,f=I-188),n=this.pmtParsed=!0;break;case 17:case 8191:break;default:m=!0}}else this.observer.trigger(r.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});y&&(k=D(y))?(E(k,!0),o.pesData=null):o.pesData=y,z&&(k=D(z))?(p.isAAC?F(k):G(k),p.pesData=null):(z&&z.size&&v.logger.log("last AAC PES packet truncated,might overlap between fragments"),p.pesData=z),A&&(k=D(A))?(H(k),q.pesData=null):q.pesData=A,null==this.sampleAes?this.remuxer.remux(p,o,q,this._txtTrack,c,d,e):this.decryptAndRemux(p,o,q,this._txtTrack,c,d,e)},b.decryptAndRemux=function(a,b,c,d,e,f,g){if(a.samples&&a.isAAC){var h=this;this.sampleAes.decryptAacSamples(a.samples,0,function(){h.decryptAndRemuxAvc(a,b,c,d,e,f,g)})}else this.decryptAndRemuxAvc(a,b,c,d,e,f,g)},b.decryptAndRemuxAvc=function(a,b,c,d,e,f,g){if(b.samples){var h=this;this.sampleAes.decryptAvcSamples(b.samples,0,0,function(){h.remuxer.remux(a,b,c,d,e,f,g)})}else this.remuxer.remux(a,b,c,d,e,f,g)},b.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},b._parsePAT=function(a,b){return(31&a[b+10])<<8|a[b+11]},b._trackUnknownPmt=function(a,b,c){var d=this.pmtUnknownTypes[a]||0;return 0===d&&(this.pmtUnknownTypes[a]=0,b.call(v.logger,c)),this.pmtUnknownTypes[a]++,d},b._parsePMT=function(a,b,c,d){var e,f,g,h,i={audio:-1,avc:-1,id3:-1,isAAC:!0};for(e=(15&a[b+1])<<8|a[b+2],f=b+3+e-4,g=(15&a[b+10])<<8|a[b+11],b+=12+g;b<f;){switch(h=(31&a[b+1])<<8|a[b+2],a[b]){case 207:if(!d){this._trackUnknownPmt(a[b],v.logger.warn,"ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:i.audio===-1&&(i.audio=h);break;case 21:i.id3===-1&&(i.id3=h);break;case 219:if(!d){this._trackUnknownPmt(a[b],v.logger.warn,"H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:i.avc===-1&&(i.avc=h);break;case 3:case 4:c?i.audio===-1&&(i.audio=h,i.isAAC=!1):this._trackUnknownPmt(a[b],v.logger.warn,"MPEG audio found, not supported in this browser");break;case 36:this._trackUnknownPmt(a[b],v.logger.warn,"Unsupported HEVC stream type found");break;default:this._trackUnknownPmt(a[b],v.logger.log,"Unknown stream type:"+a[b])}b+=((15&a[b+3])<<8|a[b+4])+5}return i},b._parsePES=function(a){var b,c,d,e,f,g,h,i,j,k=0,l=a.data;if(!a||0===a.size)return null;for(;l[0].length<19&&l.length>1;){var m=new Uint8Array(l[0].length+l[1].length);m.set(l[0]),m.set(l[1],l[0].length),l[0]=m,l.splice(1,1)}if(b=l[0],d=(b[0]<<16)+(b[1]<<8)+b[2],1===d){if(e=(b[4]<<8)+b[5],e&&e>a.size-6)return null;if(c=b[7],192&c&&(h=536870912*(14&b[9])+4194304*(255&b[10])+16384*(254&b[11])+128*(255&b[12])+(254&b[13])/2,h>4294967295&&(h-=8589934592),64&c?(i=536870912*(14&b[14])+4194304*(255&b[15])+16384*(254&b[16])+128*(255&b[17])+(254&b[18])/2,i>4294967295&&(i-=8589934592),h-i>54e5&&(v.logger.warn(Math.round((h-i)/9e4)+"s delta between PTS and DTS, align them"),h=i)):i=h),f=b[8],j=f+9,a.size<=j)return null;a.size-=j,g=new Uint8Array(a.size);for(var n=0,o=l.length;n<o;n++){b=l[n];var p=b.byteLength;if(j){if(j>p){j-=p;continue}b=b.subarray(j),p-=j,j=0}g.set(b,k),k+=p}return e&&(e-=f+3),{data:g,pts:h,dts:i,len:e}}return null},b.pushAccesUnit=function(a,b){if(a.units.length&&a.frame){var c=b.samples,d=c.length;if(isNaN(a.pts)){if(!d)return void b.dropped++;var e=c[d-1];a.pts=e.pts,a.dts=e.dts}!this.config.forceKeyFrameOnDiscontinuity||a.key===!0||b.sps&&(d||this.contiguous)?(a.id=d,c.push(a)):b.dropped++}a.debug.length&&v.logger.log(a.pts+"/"+a.dts+":"+a.debug)},b._parseAVCPES=function(a,b){var c,d,e,f=this,g=this._avcTrack,h=this._parseAVCNALu(a.data),i=!1,j=this.avcSample,k=!1,l=this.pushAccesUnit.bind(this),m=function(a,b,c,d){return{key:a,pts:b,dts:c,units:[],debug:d}};a.data=null,j&&h.length&&!g.audFound&&(l(j,g),j=this.avcSample=m(!1,a.pts,a.dts,"")),h.forEach(function(b){switch(b.type){case 1:d=!0,j||(j=f.avcSample=m(!0,a.pts,a.dts,"")),i&&(j.debug+="NDR "),j.frame=!0;var h=b.data;if(k&&h.length>4){var n=new E(h).readSliceType();2!==n&&4!==n&&7!==n&&9!==n||(j.key=!0)}break;case 5:d=!0,j||(j=f.avcSample=m(!0,a.pts,a.dts,"")),i&&(j.debug+="IDR "),j.key=!0,j.frame=!0;break;case 6:d=!0,i&&j&&(j.debug+="SEI "),c=new E(f.discardEPB(b.data)),c.readUByte();for(var o=0,p=0,q=!1,r=0;!q&&c.bytesAvailable>1;){o=0;do r=c.readUByte(),o+=r;while(255===r);p=0;do r=c.readUByte(),p+=r;while(255===r);if(4===o&&0!==c.bytesAvailable){q=!0;var s=c.readUByte();if(181===s){var t=c.readUShort();if(49===t){var u=c.readUInt();if(1195456820===u){var v=c.readUByte();if(3===v){var w=c.readUByte(),y=c.readUByte(),z=31&w,A=[w,y];for(e=0;e<z;e++)A.push(c.readUByte()),A.push(c.readUByte()),A.push(c.readUByte());f._insertSampleInOrder(f._txtTrack.samples,{type:3,pts:a.pts,bytes:A})}}}}}else if(5===o&&0!==c.bytesAvailable){if(q=!0,p>16){var B=[];for(e=0;e<16;e++)B.push(c.readUByte().toString(16)),
3!==e&&5!==e&&7!==e&&9!==e||B.push("-");var C=p-16,D=new Uint8Array(C);for(e=0;e<C;e++)D[e]=c.readUByte();f._insertSampleInOrder(f._txtTrack.samples,{pts:a.pts,payloadType:o,uuid:B.join(""),userDataBytes:D,userData:Object(x.utf8ArrayToStr)(D.buffer)})}}else if(p<c.bytesAvailable)for(e=0;e<p;e++)c.readUByte()}break;case 7:if(d=!0,k=!0,i&&j&&(j.debug+="SPS "),!g.sps){c=new E(b.data);var F=c.readSPS();g.width=F.width,g.height=F.height,g.pixelRatio=F.pixelRatio,g.sps=[b.data],g.duration=f._duration;var G=b.data.subarray(1,4),H="avc1.";for(e=0;e<3;e++){var I=G[e].toString(16);I.length<2&&(I="0"+I),H+=I}g.codec=H}break;case 8:d=!0,i&&j&&(j.debug+="PPS "),g.pps||(g.pps=[b.data]);break;case 9:d=!1,g.audFound=!0,j&&l(j,g),j=f.avcSample=m(!1,a.pts,a.dts,i?"AUD ":"");break;case 12:d=!1;break;default:d=!1,j&&(j.debug+="unknown NAL "+b.type+" ")}if(j&&d){var J=j.units;J.push(b)}}),b&&j&&(l(j,g),this.avcSample=null)},b._insertSampleInOrder=function(a,b){var c=a.length;if(c>0){if(b.pts>=a[c-1].pts)a.push(b);else for(var d=c-1;d>=0;d--)if(b.pts<a[d].pts){a.splice(d,0,b);break}}else a.push(b)},b._getLastNalUnit=function(){var a,b=this.avcSample;if(!b||0===b.units.length){var c=this._avcTrack,d=c.samples;b=d[d.length-1]}if(b){var e=b.units;a=e[e.length-1]}return a},b._parseAVCNALu=function(a){var b,c,d,e,f,g=0,h=a.byteLength,i=this._avcTrack,j=i.naluState||0,k=j,l=[],m=-1;for(j===-1&&(m=0,f=31&a[0],j=0,g=1);g<h;)if(b=a[g++],j)if(1!==j)if(b)if(1===b){if(m>=0)d={data:a.subarray(m,g-j-1),type:f},l.push(d);else{var n=this._getLastNalUnit();if(n&&(k&&g<=4-k&&n.state&&(n.data=n.data.subarray(0,n.data.byteLength-k)),c=g-j-1,c>0)){var o=new Uint8Array(n.data.byteLength+c);o.set(n.data,0),o.set(a.subarray(0,c),n.data.byteLength),n.data=o}}g<h?(e=31&a[g],m=g,f=e,j=0):j=-1}else j=0;else j=3;else j=b?0:2;else j=b?0:1;if(m>=0&&j>=0&&(d={data:a.subarray(m,h),type:f,state:j},l.push(d)),0===l.length){var p=this._getLastNalUnit();if(p){var q=new Uint8Array(p.data.byteLength+a.byteLength);q.set(p.data,0),q.set(a,p.data.byteLength),p.data=q}}return i.naluState=j,l},b.discardEPB=function(a){for(var b,c,d=a.byteLength,e=[],f=1;f<d-2;)0===a[f]&&0===a[f+1]&&3===a[f+2]?(e.push(f+2),f+=2):f++;if(0===e.length)return a;b=d-e.length,c=new Uint8Array(b);var g=0;for(f=0;f<b;g++,f++)g===e[0]&&(g++,e.shift()),c[f]=a[g];return c},b._parseAACPES=function(a){var b,c,d,e,f,g=this._audioTrack,i=a.data,l=a.pts,n=0,o=this.aacOverFlow,p=this.aacLastPTS;if(o){var q=new Uint8Array(o.byteLength+i.byteLength);q.set(o,0),q.set(i,o.byteLength),i=q}for(d=n,f=i.length;d<f-1&&!h(i,d);d++);if(d){var t,u;if(d<f-1?(t="AAC PES did not start with ADTS header,offset:"+d,u=!1):(t="no ADTS header found in AAC PES",u=!0),v.logger.warn("parsing error:"+t),this.observer.trigger(r.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.FRAG_PARSING_ERROR,fatal:u,reason:t}),u)return}if(j(g,this.observer,i,d,this.audioCodec),c=0,b=k(g.samplerate),o&&p){var w=p+b;Math.abs(w-l)>1&&(v.logger.log("AAC: align PTS for overlapping frames by "+Math.round((w-l)/90)),l=w)}for(;d<f;){if(h(i,d)){if(d+5<f){var x=m(g,i,d,l,c);if(x){d+=x.length,e=x.sample.pts,c++;continue}}break}d++}o=d<f?i.subarray(d,f):null,this.aacOverFlow=o,this.aacLastPTS=e},b._parseMPEGPES=function(a){for(var b=a.data,c=b.length,d=0,e=0,f=a.pts;e<c;)if(C.isHeader(b,e)){var g=C.appendFrame(this._audioTrack,b,e,f,d);if(!g)break;e+=g.length,d++}else e++},b._parseID3PES=function(a){this._id3Track.samples.push(a)},a}(),J=I,K=function(){function a(a,b,c){this.observer=a,this.config=c,this.remuxer=b}var b=a.prototype;return b.resetInitSegment=function(a,b,c,d){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:b,duration:d,inputTimeScale:9e4}},b.resetTimeStamp=function(){},a.probe=function(a){var b,c,d=x.default.getID3Data(a,0);if(d&&void 0!==x.default.getTimeStamp(d))for(b=d.length,c=Math.min(a.length-1,b+100);b<c;b++)if(C.probe(a,b))return v.logger.log("MPEG Audio sync word found !"),!0;return!1},b.append=function(a,b,c,d){for(var e=x.default.getID3Data(a,0),f=x.default.getTimeStamp(e),g=f?90*f:9e4*b,h=e.length,i=a.length,j=0,k=0,l=this._audioTrack,m=[{pts:g,dts:g,data:e}];h<i;)if(C.isHeader(a,h)){var n=C.appendFrame(l,a,h,g,j);if(!n)break;h+=n.length,k=n.sample.pts,j++}else x.default.isHeader(a,h)?(e=x.default.getID3Data(a,h),m.push({pts:k,dts:k,data:e}),h+=e.length):h++;this.remuxer.remux(l,{samples:[]},{samples:m,inputTimeScale:9e4},{samples:[]},b,c,d)},b.destroy=function(){},a}(),L=K,M=function(){function a(){}return a.getSilentFrame=function(a,b){switch(a){case"mp4a.40.2":if(1===b)return new Uint8Array([0,200,0,128,35,128]);if(2===b)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===b)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===b)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===b)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===b)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===b)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===b)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===b)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},a}(),N=M,O=Math.pow(2,32)-1,P=function(){function a(){}return a.init=function(){a.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var b;for(b in a.types)a.types.hasOwnProperty(b)&&(a.types[b]=[b.charCodeAt(0),b.charCodeAt(1),b.charCodeAt(2),b.charCodeAt(3)]);var c=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),d=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);a.HDLR_TYPES={video:c,audio:d};var e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),f=new Uint8Array([0,0,0,0,0,0,0,0]);a.STTS=a.STSC=a.STCO=f,a.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),a.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),a.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),a.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var g=new Uint8Array([105,115,111,109]),h=new Uint8Array([97,118,99,49]),i=new Uint8Array([0,0,0,1]);a.FTYP=a.box(a.types.ftyp,g,i,g,h),a.DINF=a.box(a.types.dinf,a.box(a.types.dref,e))},a.box=function(a){for(var b,c=Array.prototype.slice.call(arguments,1),d=8,e=c.length,f=e;e--;)d+=c[e].byteLength;for(b=new Uint8Array(d),b[0]=d>>24&255,b[1]=d>>16&255,b[2]=d>>8&255,b[3]=255&d,b.set(a,4),e=0,d=8;e<f;e++)b.set(c[e],d),d+=c[e].byteLength;return b},a.hdlr=function(b){return a.box(a.types.hdlr,a.HDLR_TYPES[b])},a.mdat=function(b){return a.box(a.types.mdat,b)},a.mdhd=function(b,c){c*=b;var d=Math.floor(c/(O+1)),e=Math.floor(c%(O+1));return a.box(a.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,b>>24&255,b>>16&255,b>>8&255,255&b,d>>24,d>>16&255,d>>8&255,255&d,e>>24,e>>16&255,e>>8&255,255&e,85,196,0,0]))},a.mdia=function(b){return a.box(a.types.mdia,a.mdhd(b.timescale,b.duration),a.hdlr(b.type),a.minf(b))},a.mfhd=function(b){return a.box(a.types.mfhd,new Uint8Array([0,0,0,0,b>>24,b>>16&255,b>>8&255,255&b]))},a.minf=function(b){return"audio"===b.type?a.box(a.types.minf,a.box(a.types.smhd,a.SMHD),a.DINF,a.stbl(b)):a.box(a.types.minf,a.box(a.types.vmhd,a.VMHD),a.DINF,a.stbl(b))},a.moof=function(b,c,d){return a.box(a.types.moof,a.mfhd(b),a.traf(d,c))},a.moov=function(b){for(var c=b.length,d=[];c--;)d[c]=a.trak(b[c]);return a.box.apply(null,[a.types.moov,a.mvhd(b[0].timescale,b[0].duration)].concat(d).concat(a.mvex(b)))},a.mvex=function(b){for(var c=b.length,d=[];c--;)d[c]=a.trex(b[c]);return a.box.apply(null,[a.types.mvex].concat(d))},a.mvhd=function(b,c){c*=b;var d=Math.floor(c/(O+1)),e=Math.floor(c%(O+1)),f=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,b>>24&255,b>>16&255,b>>8&255,255&b,d>>24,d>>16&255,d>>8&255,255&d,e>>24,e>>16&255,e>>8&255,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return a.box(a.types.mvhd,f)},a.sdtp=function(b){var c,d,e=b.samples||[],f=new Uint8Array(4+e.length);for(d=0;d<e.length;d++)c=e[d].flags,f[d+4]=c.dependsOn<<4|c.isDependedOn<<2|c.hasRedundancy;return a.box(a.types.sdtp,f)},a.stbl=function(b){return a.box(a.types.stbl,a.stsd(b),a.box(a.types.stts,a.STTS),a.box(a.types.stsc,a.STSC),a.box(a.types.stsz,a.STSZ),a.box(a.types.stco,a.STCO))},a.avc1=function(b){var c,d,e,f=[],g=[];for(c=0;c<b.sps.length;c++)d=b.sps[c],e=d.byteLength,f.push(e>>>8&255),f.push(255&e),f=f.concat(Array.prototype.slice.call(d));for(c=0;c<b.pps.length;c++)d=b.pps[c],e=d.byteLength,g.push(e>>>8&255),g.push(255&e),g=g.concat(Array.prototype.slice.call(d));var h=a.box(a.types.avcC,new Uint8Array([1,f[3],f[4],f[5],255,224|b.sps.length].concat(f).concat([b.pps.length]).concat(g))),i=b.width,j=b.height,k=b.pixelRatio[0],l=b.pixelRatio[1];return a.box(a.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i>>8&255,255&i,j>>8&255,255&j,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),h,a.box(a.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),a.box(a.types.pasp,new Uint8Array([k>>24,k>>16&255,k>>8&255,255&k,l>>24,l>>16&255,l>>8&255,255&l])))},a.esds=function(a){var b=a.config.length;return new Uint8Array([0,0,0,0,3,23+b,0,1,0,4,15+b,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([b]).concat(a.config).concat([6,1,2]))},a.mp4a=function(b){var c=b.samplerate;return a.box(a.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,b.channelCount,0,16,0,0,0,0,c>>8&255,255&c,0,0]),a.box(a.types.esds,a.esds(b)))},a.mp3=function(b){var c=b.samplerate;return a.box(a.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,b.channelCount,0,16,0,0,0,0,c>>8&255,255&c,0,0]))},a.stsd=function(b){return"audio"===b.type?b.isAAC||"mp3"!==b.codec?a.box(a.types.stsd,a.STSD,a.mp4a(b)):a.box(a.types.stsd,a.STSD,a.mp3(b)):a.box(a.types.stsd,a.STSD,a.avc1(b))},a.tkhd=function(b){var c=b.id,d=b.duration*b.timescale,e=b.width,f=b.height,g=Math.floor(d/(O+1)),h=Math.floor(d%(O+1));return a.box(a.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,c>>24&255,c>>16&255,c>>8&255,255&c,0,0,0,0,g>>24,g>>16&255,g>>8&255,255&g,h>>24,h>>16&255,h>>8&255,255&h,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,e>>8&255,255&e,0,0,f>>8&255,255&f,0,0]))},a.traf=function(b,c){var d=a.sdtp(b),e=b.id,f=Math.floor(c/(O+1)),g=Math.floor(c%(O+1));return a.box(a.types.traf,a.box(a.types.tfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e])),a.box(a.types.tfdt,new Uint8Array([1,0,0,0,f>>24,f>>16&255,f>>8&255,255&f,g>>24,g>>16&255,g>>8&255,255&g])),a.trun(b,d.length+16+20+8+16+8+8),d)},a.trak=function(b){return b.duration=b.duration||4294967295,a.box(a.types.trak,a.tkhd(b),a.mdia(b))},a.trex=function(b){var c=b.id;return a.box(a.types.trex,new Uint8Array([0,0,0,0,c>>24,c>>16&255,c>>8&255,255&c,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},a.trun=function(b,c){var d,e,f,g,h,i,j=b.samples||[],k=j.length,l=12+16*k,m=new Uint8Array(l);for(c+=8+l,m.set([0,0,15,1,k>>>24&255,k>>>16&255,k>>>8&255,255&k,c>>>24&255,c>>>16&255,c>>>8&255,255&c],0),d=0;d<k;d++)e=j[d],f=e.duration,g=e.size,h=e.flags,i=e.cts,m.set([f>>>24&255,f>>>16&255,f>>>8&255,255&f,g>>>24&255,g>>>16&255,g>>>8&255,255&g,h.isLeading<<2|h.dependsOn,h.isDependedOn<<6|h.hasRedundancy<<4|h.paddingValue<<1|h.isNonSync,61440&h.degradPrio,15&h.degradPrio,i>>>24&255,i>>>16&255,i>>>8&255,255&i],12+16*d);return a.box(a.types.trun,m)},a.initSegment=function(b){a.types||a.init();var c,d=a.moov(b);return c=new Uint8Array(a.FTYP.byteLength+d.byteLength),c.set(a.FTYP),c.set(d,a.FTYP.byteLength),c},a}(),Q=P,R=9e4,S=p(10),T=p(.2),U=function(){function a(a,b,c,d){this.observer=a,this.config=b,this.typeSupported=c;var e=navigator.userAgent;this.isSafari=d&&d.indexOf("Apple")>-1&&e&&!e.match("CriOS"),this.ISGenerated=!1}var b=a.prototype;return b.destroy=function(){},b.resetTimeStamp=function(a){this._initPTS=this._initDTS=a},b.resetInitSegment=function(){this.ISGenerated=!1},b.remux=function(a,b,c,d,e,f,g){if(this.ISGenerated||this.generateIS(a,b,e),this.ISGenerated){var h=a.samples.length,i=b.samples.length,j=e,k=e;if(h&&i){var l=(a.samples[0].pts-b.samples[0].pts)/b.inputTimeScale;j+=Math.max(0,l),k+=Math.max(0,-l)}if(h){a.timescale||(v.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(a,b,e));var m=this.remuxAudio(a,j,f,g);if(i){var n;m&&(n=m.endPTS-m.startPTS),b.timescale||(v.logger.warn("regenerate InitSegment as video detected"),this.generateIS(a,b,e)),this.remuxVideo(b,k,f,n,g)}}else if(i){var o=this.remuxVideo(b,k,f,0,g);o&&a.codec&&this.remuxEmptyAudio(a,j,f,o)}}c.samples.length&&this.remuxID3(c,e),d.samples.length&&this.remuxText(d,e),this.observer.trigger(r.default.FRAG_PARSED)},b.generateIS=function(a,b,c){var d,e,f=this.observer,g=a.samples,h=b.samples,i=this.typeSupported,j="audio/mp4",k={},l={tracks:k},m=void 0===this._initPTS;if(m&&(d=e=1/0),a.config&&g.length&&(a.timescale=a.samplerate,v.logger.log("audio sampling rate : "+a.samplerate),a.isAAC||(i.mpeg?(j="audio/mpeg",a.codec=""):i.mp3&&(a.codec="mp3")),k.audio={container:j,codec:a.codec,initSegment:!a.isAAC&&i.mpeg?new Uint8Array:Q.initSegment([a]),metadata:{channelCount:a.channelCount}},m&&(d=e=g[0].pts-a.inputTimeScale*c)),b.sps&&b.pps&&h.length){var n=b.inputTimeScale;b.timescale=n,k.video={container:"video/mp4",codec:b.codec,initSegment:Q.initSegment([b]),metadata:{width:b.width,height:b.height}},m&&(d=Math.min(d,h[0].pts-n*c),e=Math.min(e,h[0].dts-n*c),this.observer.trigger(r.default.INIT_PTS_FOUND,{initPTS:d}))}Object.keys(k).length?(f.trigger(r.default.FRAG_PARSING_INIT_SEGMENT,l),this.ISGenerated=!0,m&&(this._initPTS=d,this._initDTS=e)):f.trigger(r.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},b.remuxVideo=function(a,b,c,d,e){var f,g,h,i,j,k,l,m=8,n=a.timescale,p=a.samples,q=[],t=p.length,u=this._PTSNormalize,w=this._initPTS,x=this.nextAvcDts,y=this.isSafari;if(0!==t){y&&(c|=p.length&&x&&(e&&Math.abs(b-x/n)<.1||Math.abs(p[0].pts-x-w)<n/5)),c||(x=b*n),p.forEach(function(a){a.pts=u(a.pts-w,x),a.dts=u(a.dts-w,x)}),p.sort(function(a,b){var c=a.dts-b.dts,d=a.pts-b.pts;return c||d||a.id-b.id});var z=p.reduce(function(a,b){return Math.max(Math.min(a,b.pts-b.dts),-1*T)},0);if(z<0){v.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+o(z,!0)+" ms to overcome this issue");for(var A=0;A<p.length;A++)p[A].dts+=z}var B=p[0];j=Math.max(B.dts,0),i=Math.max(B.pts,0);var C=j-x;c&&C&&(C>1?v.logger.log("AVC: "+o(C,!0)+" ms hole between fragments detected,filling it"):C<-1&&v.logger.log("AVC: "+o(-C,!0)+" ms overlapping between fragments detected"),j=x,p[0].dts=j,i=Math.max(i-C,x),p[0].pts=i,v.logger.log("Video: PTS/DTS adjusted: "+o(i,!0)+"/"+o(j,!0)+", delta: "+o(C,!0)+" ms")),B=p[p.length-1],l=Math.max(B.dts,0),k=Math.max(B.pts,0,l),y&&(f=Math.round((l-j)/(p.length-1)));for(var D=0,E=0,F=0;F<t;F++){for(var G=p[F],H=G.units,I=H.length,J=0,K=0;K<I;K++)J+=H[K].data.length;E+=J,D+=I,G.length=J,y?G.dts=j+F*f:G.dts=Math.max(G.dts,j),G.pts=Math.max(G.pts,G.dts)}var L=E+4*D+8;try{g=new Uint8Array(L)}catch(a){return void this.observer.trigger(r.default.ERROR,{type:s.ErrorTypes.MUX_ERROR,details:s.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:L,reason:"fail allocating video mdat "+L})}var M=new DataView(g.buffer);M.setUint32(0,L),g.set(Q.types.mdat,4);for(var N=0;N<t;N++){for(var O=p[N],P=O.units,R=0,S=void 0,U=0,V=P.length;U<V;U++){var W=P[U],X=W.data,Y=W.data.byteLength;M.setUint32(m,Y),m+=4,g.set(X,m),m+=Y,R+=4+Y}if(y)S=Math.max(0,f*Math.round((O.pts-O.dts)/f));else{if(N<t-1)f=p[N+1].dts-O.dts;else{var Z=this.config,$=O.dts-p[N>0?N-1:N].dts;if(Z.stretchShortVideoTrack){var _=Z.maxBufferHole,aa=Math.floor(_*n),ba=(d?i+d*n:this.nextAudioPts)-O.pts;ba>aa?(f=ba-$,f<0&&(f=$),v.logger.log("It is approximately "+o(ba,!1)+" ms to the next segment; using duration "+o(f,!1)+" ms for the last video frame.")):f=$}else f=$}S=Math.round(O.pts-O.dts)}q.push({size:R,duration:f,cts:S,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:O.key?2:1,isNonSync:O.key?0:1}})}this.nextAvcDts=l+f;var ca=a.dropped;if(a.nbNalu=0,a.dropped=0,q.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var da=q[0].flags;da.dependsOn=2,da.isNonSync=0}a.samples=q,h=Q.moof(a.sequenceNumber++,j,a),a.samples=[];var ea={data1:h,data2:g,startPTS:i/n,endPTS:(k+f)/n,startDTS:j/n,endDTS:this.nextAvcDts/n,type:"video",hasAudio:!1,hasVideo:!0,nb:q.length,dropped:ca};return this.observer.trigger(r.default.FRAG_PARSING_DATA,ea),ea}},b.remuxAudio=function(a,b,c,d){var e,f,g,h,i,j,k=a.inputTimeScale,l=a.timescale,m=k/l,n=a.isAAC?1024:1152,p=n*m,q=this._PTSNormalize,t=this._initPTS,u=!a.isAAC&&this.typeSupported.mpeg,w=u?0:8,x=a.samples,y=[],z=this.nextAudioPts;if(c|=x.length&&z&&(d&&Math.abs(b-z/k)<.1||Math.abs(x[0].pts-z-t)<20*p),x.forEach(function(a){a.pts=a.dts=q(a.pts-t,b*k)}),x=x.filter(function(a){return a.pts>=0}),0!==x.length){if(c||(z=d?b*k:x[0].pts),a.isAAC)for(var A=this.config.maxAudioFramesDrift,B=0,C=z;B<x.length;){var D,E=x[B],F=E.pts;if(D=F-C,D<=-A*p)v.logger.warn("Dropping 1 audio frame @ "+o(C,!0)+" ms due to "+o(D,!0)+" ms overlap."),x.splice(B,1);else if(D>=A*p&&D<S&&C){var G=Math.round(D/p);v.logger.warn("Injecting "+G+" audio frames @ "+o(C,!0)+" ms due to "+o(D,!0)+" ms gap.");for(var H=0;H<G;H++){var I=Math.max(C,0);f=N.getSilentFrame(a.manifestCodec||a.codec,a.channelCount),f||(v.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),f=E.unit.subarray()),x.splice(B,0,{unit:f,pts:I,dts:I}),C+=p,B++}E.pts=E.dts=C,C+=p,B++}else Math.abs(D)>.1*p,E.pts=E.dts=C,C+=p,B++}for(var J=x.length,K=0;J--;)K+=x[J].unit.byteLength;for(var L=0,M=x.length;L<M;L++){var O=x[L],P=O.unit,R=O.pts;if(void 0!==j)e.duration=Math.round((R-j)/m);else{var T=R-z,U=0;if(c&&a.isAAC&&T){if(T>0&&T<S)U=Math.round((R-z)/p),v.logger.log(o(T,!0)+" ms hole between AAC samples detected,filling it"),U>0&&(f=N.getSilentFrame(a.manifestCodec||a.codec,a.channelCount),f||(f=P.subarray()),K+=U*f.length);else if(T<-12){v.logger.log("drop overlapping AAC sample, expected/parsed/delta: "+o(z,!0)+" ms / "+o(R,!0)+" ms / "+o(-T,!0)+" ms"),K-=P.byteLength;continue}R=z}if(i=R,!(K>0))return;K+=w;try{g=new Uint8Array(K)}catch(a){return void this.observer.trigger(r.default.ERROR,{type:s.ErrorTypes.MUX_ERROR,details:s.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:K,reason:"fail allocating audio mdat "+K})}if(!u){var V=new DataView(g.buffer);V.setUint32(0,K),g.set(Q.types.mdat,4)}for(var W=0;W<U;W++)f=N.getSilentFrame(a.manifestCodec||a.codec,a.channelCount),f||(v.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),f=P.subarray()),g.set(f,w),w+=f.byteLength,e={size:f.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},y.push(e)}g.set(P,w);var X=P.byteLength;w+=X,e={size:X,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},y.push(e),j=R}var Y=0;if(J=y.length,J>=2&&(Y=y[J-2].duration,e.duration=Y),J){this.nextAudioPts=z=j+m*Y,a.samples=y,h=u?new Uint8Array:Q.moof(a.sequenceNumber++,i/m,a),a.samples=[];var Z=i/k,$=z/k,_={data1:h,data2:g,startPTS:Z,endPTS:$,startDTS:Z,endDTS:$,type:"audio",hasAudio:!0,hasVideo:!1,nb:J};return this.observer.trigger(r.default.FRAG_PARSING_DATA,_),_}return null}},b.remuxEmptyAudio=function(a,b,c,d){var e=a.inputTimeScale,f=a.samplerate?a.samplerate:e,g=e/f,h=this.nextAudioPts,i=(void 0!==h?h:d.startDTS*e)+this._initDTS,j=d.endDTS*e+this._initDTS,k=1024,l=g*k,m=Math.ceil((j-i)/l),n=N.getSilentFrame(a.manifestCodec||a.codec,a.channelCount);if(v.logger.warn("remux empty Audio"),!n)return void v.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(var o=[],p=0;p<m;p++){var q=i+p*l;o.push({unit:n,pts:q,dts:q})}a.samples=o,this.remuxAudio(a,b,c)},b.remuxID3=function(a){var b=a.samples.length;if(b){for(var c=a.inputTimeScale,d=this._initPTS,e=this._initDTS,f=0;f<b;f++){var g=a.samples[f];g.pts=(g.pts-d)/c,g.dts=(g.dts-e)/c}this.observer.trigger(r.default.FRAG_PARSING_METADATA,{samples:a.samples}),a.samples=[]}},b.remuxText=function(a){a.samples.sort(function(a,b){return a.pts-b.pts});var b,c=a.samples.length,d=a.inputTimeScale,e=this._initPTS;if(c){for(var f=0;f<c;f++)b=a.samples[f],b.pts=(b.pts-e)/d;this.observer.trigger(r.default.FRAG_PARSING_USERDATA,{samples:a.samples})}a.samples=[]},b._PTSNormalize=function(a,b){var c;if(void 0===b)return a;for(c=b<a?-8589934592:8589934592;Math.abs(a-b)>4294967296;)a+=c;return a},a}(),V=U,W=function(){function a(a){this.observer=a}var b=a.prototype;return b.destroy=function(){},b.resetTimeStamp=function(){},b.resetInitSegment=function(){},b.remux=function(a,b,c,d,e,f,g,h){var i=this.observer,j="";a&&(j+="audio"),b&&(j+="video"),i.trigger(r.default.FRAG_PARSING_DATA,{data1:h,startPTS:e,startDTS:e,type:j,hasAudio:!!a,hasVideo:!!b,nb:1,dropped:0}),i.trigger(r.default.FRAG_PARSED)},a}(),X=W,Y=Object(w.getSelfScope)();try{q=Y.performance.now.bind(Y.performance)}catch(a){v.logger.debug("Unable to use Performance API on this environment"),q=Y.Date.now}var Z=function(){function a(a,b,c,d){this.observer=a,this.typeSupported=b,this.config=c,this.vendor=d}var b=a.prototype;return b.destroy=function(){var a=this.demuxer;a&&a.destroy()},b.push=function(a,b,c,d,e,f,g,h,i,j,k,l){var m=this;if(a.byteLength>0&&null!=b&&null!=b.key&&"AES-128"===b.method){var n=this.decrypter;null==n&&(n=this.decrypter=new t.default(this.observer,this.config));var o=q();n.decrypt(a,b.key.buffer,b.iv.buffer,function(a){var n=q();m.observer.trigger(r.default.FRAG_DECRYPTED,{stats:{tstart:o,tdecrypt:n}}),m.pushDecrypted(new Uint8Array(a),b,new Uint8Array(c),d,e,f,g,h,i,j,k,l)})}else this.pushDecrypted(new Uint8Array(a),b,new Uint8Array(c),d,e,f,g,h,i,j,k,l)},b.pushDecrypted=function(a,b,c,d,e,f,g,h,i,j,k,l){var m=this.demuxer;if(!m||(g||h)&&!this.probe(a)){for(var n=this.observer,o=this.typeSupported,p=this.config,q=[{demux:J,remux:V},{demux:A.default,remux:X},{demux:z,remux:V},{demux:L,remux:V}],t=0,u=q.length;t<u;t++){var v=q[t],w=v.demux.probe;if(w(a)){var x=this.remuxer=new v.remux(n,p,o,this.vendor);m=new v.demux(n,x,p,o),this.probe=w;break}}if(!m)return void n.trigger(r.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=m}var y=this.remuxer;(g||h)&&(m.resetInitSegment(c,d,e,j),y.resetInitSegment()),g&&(m.resetTimeStamp(l),y.resetTimeStamp(l)),"function"==typeof m.setDecryptData&&m.setDecryptData(b),m.append(a,f,i,k)},a}();b.default=Z},"./src/demux/demuxer-worker.js":function(a,b,c){"use strict";c.r(b);var d=c("./src/demux/demuxer-inline.js"),e=c("./src/events.js"),f=c("./src/utils/logger.js"),g=c("./node_modules/eventemitter3/index.js"),h=(c.n(g),function(a){var b=new g.EventEmitter;b.trigger=function(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];b.emit.apply(b,[a,a].concat(d))},b.off=function(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];b.removeListener.apply(b,[a].concat(d))};var c=function(b,c){a.postMessage({event:b,data:c})};a.addEventListener("message",function(e){var g=e.data;switch(g.cmd){case"init":var h=JSON.parse(g.config);a.demuxer=new d.default(b,g.typeSupported,h,g.vendor),Object(f.enableLogs)(h.debug),c("init",null);break;case"demux":a.demuxer.push(g.data,g.decryptdata,g.initSegment,g.audioCodec,g.videoCodec,g.timeOffset,g.discontinuity,g.trackSwitch,g.contiguous,g.duration,g.accurateTimeOffset,g.defaultInitPTS)}}),b.on(e.default.FRAG_DECRYPTED,c),b.on(e.default.FRAG_PARSING_INIT_SEGMENT,c),b.on(e.default.FRAG_PARSED,c),b.on(e.default.ERROR,c),b.on(e.default.FRAG_PARSING_METADATA,c),b.on(e.default.FRAG_PARSING_USERDATA,c),b.on(e.default.INIT_PTS_FOUND,c),b.on(e.default.FRAG_PARSING_DATA,function(b,c){var d=[],e={event:b,data:c};c.data1&&(e.data1=c.data1.buffer,d.push(c.data1.buffer),delete c.data1),c.data2&&(e.data2=c.data2.buffer,d.push(c.data2.buffer),delete c.data2),a.postMessage(e,d)})});b.default=h},"./src/demux/id3.js":function(a,b,c){"use strict";function d(){var a=Object(f.getSelfScope)();return e||"undefined"==typeof a.TextDecoder||(e=new a.TextDecoder("utf-8")),e}c.r(b),c.d(b,"utf8ArrayToStr",function(){return h});var e,f=c("./src/utils/get-self-scope.js"),g=function(){function a(){}return a.isHeader=function(a,b){return b+10<=a.length&&73===a[b]&&68===a[b+1]&&51===a[b+2]&&a[b+3]<255&&a[b+4]<255&&a[b+6]<128&&a[b+7]<128&&a[b+8]<128&&a[b+9]<128},a.isFooter=function(a,b){return b+10<=a.length&&51===a[b]&&68===a[b+1]&&73===a[b+2]&&a[b+3]<255&&a[b+4]<255&&a[b+6]<128&&a[b+7]<128&&a[b+8]<128&&a[b+9]<128},a.getID3Data=function(b,c){for(var d=c,e=0;a.isHeader(b,c);){e+=10;var f=a._readSize(b,c+6);e+=f,a.isFooter(b,c+10)&&(e+=10),c+=e}if(e>0)return b.subarray(d,d+e)},a._readSize=function(a,b){var c=0;return c=(127&a[b])<<21,c|=(127&a[b+1])<<14,c|=(127&a[b+2])<<7,c|=127&a[b+3]},a.getTimeStamp=function(b){for(var c=a.getID3Frames(b),d=0;d<c.length;d++){var e=c[d];if(a.isTimeStampFrame(e))return a._readTimeStamp(e)}},a.isTimeStampFrame=function(a){return a&&"PRIV"===a.key&&"com.apple.streaming.transportStreamTimestamp"===a.info},a._getFrameData=function(b){var c=String.fromCharCode(b[0],b[1],b[2],b[3]),d=a._readSize(b,4),e=10;return{type:c,size:d,data:b.subarray(e,e+d)}},a.getID3Frames=function(b){for(var c=0,d=[];a.isHeader(b,c);){var e=a._readSize(b,c+6);c+=10;for(var f=c+e;c+8<f;){var g=a._getFrameData(b.subarray(c)),h=a._decodeFrame(g);h&&d.push(h),c+=g.size+10}a.isFooter(b,c)&&(c+=10)}return d},a._decodeFrame=function(b){return"PRIV"===b.type?a._decodePrivFrame(b):"T"===b.type[0]?a._decodeTextFrame(b):"W"===b.type[0]?a._decodeURLFrame(b):void 0},a._readTimeStamp=function(a){if(8===a.data.byteLength){var b=new Uint8Array(a.data),c=1&b[3],d=(b[4]<<23)+(b[5]<<15)+(b[6]<<7)+b[7];return d/=45,c&&(d+=47721858.84),Math.round(d)}},a._decodePrivFrame=function(b){if(!(b.size<2)){var c=a._utf8ArrayToStr(b.data,!0),d=new Uint8Array(b.data.subarray(c.length+1));return{key:b.type,info:c,data:d.buffer}}},a._decodeTextFrame=function(b){if(!(b.size<2)){if("TXXX"===b.type){var c=1,d=a._utf8ArrayToStr(b.data.subarray(c),!0);c+=d.length+1;var e=a._utf8ArrayToStr(b.data.subarray(c));return{key:b.type,info:d,data:e}}var f=a._utf8ArrayToStr(b.data.subarray(1));return{key:b.type,data:f}}},a._decodeURLFrame=function(b){if("WXXX"===b.type){if(b.size<2)return;var c=1,d=a._utf8ArrayToStr(b.data.subarray(c));c+=d.length+1;var e=a._utf8ArrayToStr(b.data.subarray(c));return{key:b.type,info:d,data:e}}var f=a._utf8ArrayToStr(b.data);return{key:b.type,data:f}},a._utf8ArrayToStr=function(a,b){void 0===b&&(b=!1);var c=d();if(c){var e=c.decode(a);if(b){var f=e.indexOf("\0");return f!==-1?e.substring(0,f):e}return e.replace(/\0/g,"")}for(var g,h,i,j=a.length,k="",l=0;l<j;){if(g=a[l++],0===g&&b)return k;if(0!==g&&3!==g)switch(g>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:k+=String.fromCharCode(g);break;case 12:case 13:h=a[l++],k+=String.fromCharCode((31&g)<<6|63&h);break;case 14:h=a[l++],i=a[l++],k+=String.fromCharCode((15&g)<<12|(63&h)<<6|(63&i)<<0)}}return k},a}(),h=g._utf8ArrayToStr;b.default=g},"./src/demux/mp4demuxer.js":function(a,b,c){"use strict";c.r(b);var d=c("./src/utils/logger.js"),e=c("./src/events.js"),f=Math.pow(2,32)-1,g=function(){function a(a,b){this.observer=a,this.remuxer=b}var b=a.prototype;return b.resetTimeStamp=function(a){this.initPTS=a},b.resetInitSegment=function(b,c,d,f){if(b&&b.byteLength){var g=this.initData=a.parseInitSegment(b);null==c&&(c="mp4a.40.5"),null==d&&(d="avc1.42e01e");var h={};g.audio&&g.video?h.audiovideo={container:"video/mp4",codec:c+","+d,initSegment:f?b:null}:(g.audio&&(h.audio={container:"audio/mp4",codec:c,initSegment:f?b:null}),g.video&&(h.video={container:"video/mp4",codec:d,initSegment:f?b:null})),this.observer.trigger(e.default.FRAG_PARSING_INIT_SEGMENT,{tracks:h})}else c&&(this.audioCodec=c),d&&(this.videoCodec=d)},a.probe=function(b){return a.findBox({data:b,start:0,end:Math.min(b.length,16384)},["moof"]).length>0},a.bin2str=function(a){return String.fromCharCode.apply(null,a)},a.readUint16=function(a,b){a.data&&(b+=a.start,a=a.data);var c=a[b]<<8|a[b+1];return c<0?65536+c:c},a.readUint32=function(a,b){a.data&&(b+=a.start,a=a.data);var c=a[b]<<24|a[b+1]<<16|a[b+2]<<8|a[b+3];return c<0?4294967296+c:c},a.writeUint32=function(a,b,c){a.data&&(b+=a.start,a=a.data),a[b]=c>>24,a[b+1]=c>>16&255,a[b+2]=c>>8&255,a[b+3]=255&c},a.findBox=function(b,c){var d,e,f,g,h,i,j,k=[];if(b.data?(i=b.start,g=b.end,b=b.data):(i=0,g=b.byteLength),!c.length)return null;for(d=i;d<g;)e=a.readUint32(b,d),f=a.bin2str(b.subarray(d+4,d+8)),j=e>1?d+e:g,f===c[0]&&(1===c.length?k.push({data:b,start:d+8,end:j}):(h=a.findBox({data:b,start:d+8,end:j},c.slice(1)),h.length&&(k=k.concat(h)))),d=j;return k},a.parseSegmentIndex=function(b){var c,d=a.findBox(b,["moov"])[0],e=d?d.end:null,f=0,g=a.findBox(b,["sidx"]);if(!g||!g[0])return null;c=[],g=g[0];var h=g.data[0];f=0===h?8:16;var i=a.readUint32(g,f);f+=4;var j=0,k=0;f+=0===h?8:16,f+=2;var l=g.end+k,m=a.readUint16(g,f);f+=2;for(var n=0;n<m;n++){var o=f,p=a.readUint32(g,o);o+=4;var q=2147483647&p,r=(2147483648&p)>>>31;if(1===r)return;var s=a.readUint32(g,o);o+=4,c.push({referenceSize:q,subsegmentDuration:s,info:{duration:s/i,start:l,end:l+q-1}}),l+=q,o+=4,f=o}return{earliestPresentationTime:j,timescale:i,version:h,referencesCount:m,references:c,moovEndOffset:e}},a.parseInitSegment=function(b){var c=[],e=a.findBox(b,["moov","trak"]);return e.forEach(function(b){var e=a.findBox(b,["tkhd"])[0];if(e){var f=e.data[e.start],g=0===f?12:20,h=a.readUint32(e,g),i=a.findBox(b,["mdia","mdhd"])[0];if(i){f=i.data[i.start],g=0===f?12:20;var j=a.readUint32(i,g),k=a.findBox(b,["mdia","hdlr"])[0];if(k){var l=a.bin2str(k.data.subarray(k.start+8,k.start+12)),m={soun:"audio",vide:"video"}[l];if(m){var n=a.findBox(b,["mdia","minf","stbl","stsd"]);if(n.length){n=n[0];var o=a.bin2str(n.data.subarray(n.start+12,n.start+16));d.logger.log("MP4Demuxer:"+m+":"+o+" found")}c[h]={timescale:j,type:m},c[m]={timescale:j,id:h}}}}}}),c},a.getStartDTS=function(b,c){var d,e,f;return d=a.findBox(c,["moof","traf"]),e=[].concat.apply([],d.map(function(c){return a.findBox(c,["tfhd"]).map(function(d){var e,f,g;return e=a.readUint32(d,4),f=b[e].timescale||9e4,g=a.findBox(c,["tfdt"]).map(function(b){var c,d;return c=b.data[b.start],d=a.readUint32(b,4),1===c&&(d*=Math.pow(2,32),d+=a.readUint32(b,8)),d})[0],g/f})})),f=Math.min.apply(null,e),isFinite(f)?f:0},a.offsetStartDTS=function(b,c,d){a.findBox(c,["moof","traf"]).map(function(c){return a.findBox(c,["tfhd"]).map(function(e){var g=a.readUint32(e,4),h=b[g].timescale||9e4;a.findBox(c,["tfdt"]).map(function(b){var c=b.data[b.start],e=a.readUint32(b,4);if(0===c)a.writeUint32(b,4,e-d*h);else{e*=Math.pow(2,32),
e+=a.readUint32(b,8),e-=d*h,e=Math.max(e,0);var g=Math.floor(e/(f+1)),i=Math.floor(e%(f+1));a.writeUint32(b,4,g),a.writeUint32(b,8,i)}})})})},b.append=function(b,c,d,f){var g=this.initData;g||(this.resetInitSegment(b,this.audioCodec,this.videoCodec,!1),g=this.initData);var h,i=this.initPTS;if(void 0===i){var j=a.getStartDTS(g,b);this.initPTS=i=j-c,this.observer.trigger(e.default.INIT_PTS_FOUND,{initPTS:i})}a.offsetStartDTS(g,b,i),h=a.getStartDTS(g,b),this.remuxer.remux(g.audio,g.video,null,null,h,d,f,b)},b.destroy=function(){},a}();b.default=g},"./src/errors.ts":function(a,b,c){"use strict";c.r(b),c.d(b,"ErrorTypes",function(){return d}),c.d(b,"ErrorDetails",function(){return e});var d;!function(a){a.NETWORK_ERROR="networkError",a.MEDIA_ERROR="mediaError",a.KEY_SYSTEM_ERROR="keySystemError",a.MUX_ERROR="muxError",a.OTHER_ERROR="otherError"}(d||(d={}));var e;!function(a){a.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",a.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",a.KEY_SYSTEM_NO_SESSION="keySystemNoSession",a.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",a.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",a.MANIFEST_LOAD_ERROR="manifestLoadError",a.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",a.MANIFEST_PARSING_ERROR="manifestParsingError",a.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",a.LEVEL_EMPTY_ERROR="levelEmptyError",a.LEVEL_LOAD_ERROR="levelLoadError",a.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",a.LEVEL_SWITCH_ERROR="levelSwitchError",a.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",a.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",a.FRAG_LOAD_ERROR="fragLoadError",a.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",a.FRAG_DECRYPT_ERROR="fragDecryptError",a.FRAG_PARSING_ERROR="fragParsingError",a.REMUX_ALLOC_ERROR="remuxAllocError",a.KEY_LOAD_ERROR="keyLoadError",a.KEY_LOAD_TIMEOUT="keyLoadTimeOut",a.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",a.BUFFER_APPEND_ERROR="bufferAppendError",a.BUFFER_APPENDING_ERROR="bufferAppendingError",a.BUFFER_STALLED_ERROR="bufferStalledError",a.BUFFER_FULL_ERROR="bufferFullError",a.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",a.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",a.INTERNAL_EXCEPTION="internalException"}(e||(e={}))},"./src/events.js":function(a,b,c){"use strict";c.r(b);var d={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVELS_UPDATED:"hlsLevelsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",CUES_PARSED:"hlsCuesParsed",NON_NATIVE_TEXT_TRACKS_FOUND:"hlsNonNativeTextTracksFound",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"};b.default=d},"./src/hls.ts":function(a,b,c){"use strict";function d(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function e(a,b,c){return b&&d(a.prototype,b),c&&d(a,c),a}function f(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function g(a,b,c){return b&&f(a.prototype,b),c&&f(a,c),a}function h(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function i(a,b,c){return b&&h(a.prototype,b),c&&h(a,c),a}function j(a,b){var c=sb[b];return!!c&&c[a.slice(0,4)]===!0}function k(a,b){return MediaSource.isTypeSupported((b||"video")+'/mp4;codecs="'+a+'"')}function l(a,b){for(var c=a[b],d=b-1;d>=0;d--){var e=a[d];e.programDateTime=c.programDateTime-1e3*e.duration,c=e}}function m(a,b){a.rawProgramDateTime?a.programDateTime=Date.parse(a.rawProgramDateTime):b&&b.programDateTime&&(a.programDateTime=b.endProgramDateTime),Object(bb.isFiniteNumber)(a.programDateTime)||(a.programDateTime=null,a.rawProgramDateTime=null)}function n(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function o(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function p(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function q(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function r(){return window.MediaSource||window.WebKitMediaSource}function s(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function t(a,b,c){switch(b){case"audio":a.audioGroupIds||(a.audioGroupIds=[]),a.audioGroupIds.push(c);break;case"text":a.textGroupIds||(a.textGroupIds=[]),a.textGroupIds.push(c)}}function u(a,b,c){var d=a[b],e=a[c],f=e.startPTS;Object(bb.isFiniteNumber)(f)?c>b?(d.duration=f-d.start,d.duration<0&&db.logger.warn("negative duration computed for frag "+d.sn+",level "+d.level+", there should be some duration drift between playlist and fragment!")):(e.duration=d.start-f,e.duration<0&&db.logger.warn("negative duration computed for frag "+e.sn+",level "+e.level+", there should be some duration drift between playlist and fragment!")):c>b?e.start=d.start+d.duration:e.start=Math.max(d.start-e.duration,0)}function v(a,b,c,d,e,f){var g=c;if(Object(bb.isFiniteNumber)(b.startPTS)){var h=Math.abs(b.startPTS-c);Object(bb.isFiniteNumber)(b.deltaPTS)?b.deltaPTS=Math.max(h,b.deltaPTS):b.deltaPTS=h,g=Math.max(c,b.startPTS),c=Math.min(c,b.startPTS),d=Math.max(d,b.endPTS),e=Math.min(e,b.startDTS),f=Math.max(f,b.endDTS)}var i=c-b.start;b.start=b.startPTS=c,b.maxStartPTS=g,b.endPTS=d,b.startDTS=e,b.endDTS=f,b.duration=d-c;var j=b.sn;if(!a||j<a.startSN||j>a.endSN)return 0;var k,l,m;for(k=j-a.startSN,l=a.fragments,l[k]=b,m=k;m>0;m--)u(l,m,m-1);for(m=k;m<l.length-1;m++)u(l,m,m+1);return a.PTSKnown=!0,i}function w(a,b){b.initSegment&&a.initSegment&&(b.initSegment=a.initSegment);var c,d=0;if(y(a,b,function(a,e){d=a.cc-e.cc,Object(bb.isFiniteNumber)(a.startPTS)&&(e.start=e.startPTS=a.startPTS,e.endPTS=a.endPTS,e.duration=a.duration,e.backtracked=a.backtracked,e.dropped=a.dropped,c=e),b.PTSKnown=!0}),b.PTSKnown){if(d){db.logger.log("discontinuity sliding from playlist, take drift into account");for(var e=b.fragments,f=0;f<e.length;f++)e[f].cc+=d}c?v(b,c,c.startPTS,c.endPTS,c.startDTS,c.endDTS):z(a,b),b.PTSKnown=a.PTSKnown}}function x(a,b,c){void 0===c&&(c=0);var d=-1;y(a,b,function(a,b,c){b.start=a.start,d=c});var e=b.fragments;if(d<0)return void e.forEach(function(a){a.start+=c});for(var f=d+1;f<e.length;f++)e[f].start=e[f-1].start+e[f-1].duration}function y(a,b,c){if(a&&b)for(var d=Math.max(a.startSN,b.startSN)-b.startSN,e=Math.min(a.endSN,b.endSN)-b.startSN,f=b.startSN-a.startSN,g=d;g<=e;g++){var h=a.fragments[f+g],i=b.fragments[g];if(!h||!i)break;c(h,i,g)}}function z(a,b){var c=b.startSN-a.startSN,d=a.fragments,e=b.fragments;if(!(c<0||c>d.length))for(var f=0;f<e.length;f++)e[f].start+=d[c].start}function A(a,b,c){var d=1e3*(b.averagetargetduration?b.averagetargetduration:b.targetduration),e=d/2;return a&&b.endSN===a.endSN&&(d=e),c&&(d=Math.max(e,d-(window.performance.now()-c))),Math.round(d)}function B(a,b){for(var c=null,d=0;d<a.length;d+=1){var e=a[d];if(e&&e.cc===b){c=e;break}}return c}function C(a,b){return Kb.search(a,function(a){return a.cc<b?1:a.cc>b?-1:0})}function D(a,b,c){var d=!1;return b&&b.details&&c&&(c.endCC>c.startCC||a&&a.cc<c.startCC)&&(d=!0),d}function E(a,b){var c=a.fragments,d=b.fragments;if(!d.length||!c.length)return void db.logger.log("No fragments to align");var e=B(c,d[0].cc);return!e||e&&!e.startPTS?void db.logger.log("No frag in previous level to align on"):e}function F(a,b){b.fragments.forEach(function(b){if(b){var c=b.start+a;b.start=b.startPTS=c,b.endPTS=c+b.duration}}),b.PTSKnown=!0}function G(a,b,c){H(a,c,b),!c.PTSKnown&&b&&I(c,b.details)}function H(a,b,c){if(D(a,c,b)){var d=E(c.details,b);d&&(db.logger.log("Adjusting PTS using last level due to CC increase within current level"),F(d.start,b))}}function I(a,b){if(b&&b.fragments.length){if(!a.hasProgramDateTime||!b.hasProgramDateTime)return;var c=b.fragments[0].programDateTime,d=a.fragments[0].programDateTime,e=(d-c)/1e3+b.fragments[0].start;Object(bb.isFiniteNumber)(e)&&(db.logger.log("adjusting PTS using programDateTime delta, sliding:"+e.toFixed(3)),F(e,a))}}function J(a,b,c){if(null===b||!Array.isArray(a)||!a.length||!Object(bb.isFiniteNumber)(b))return null;var d=a[0].programDateTime;if(b<(d||0))return null;var e=a[a.length-1].endProgramDateTime;if(b>=(e||0))return null;c=c||0;for(var f=0;f<a.length;++f){var g=a[f];if(M(b,c,g))return g}return null}function K(a,b,c,d){void 0===c&&(c=0),void 0===d&&(d=0);var e=a?b[a.sn-b[0].sn+1]:null;return e&&!L(c,d,e)?e:Kb.search(b,L.bind(null,c,d))}function L(a,b,c){void 0===a&&(a=0),void 0===b&&(b=0);var d=Math.min(b,c.duration+(c.deltaPTS?c.deltaPTS:0));return c.start+c.duration-d<=a?1:c.start-d>a&&c.start?-1:0}function M(a,b,c){var d=1e3*Math.min(b,c.duration+(c.deltaPTS?c.deltaPTS:0)),e=c.endProgramDateTime||0;return e-d>a}function N(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function O(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function P(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function Q(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function R(a,b,c){return b&&Q(a.prototype,b),c&&Q(a,c),a}function S(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function T(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function U(a,b,c){return b&&T(a.prototype,b),c&&T(a,c),a}function V(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function W(a,b){var c;try{c=new Event("addtrack")}catch(a){c=document.createEvent("Event"),c.initEvent("addtrack",!1,!1)}c.track=a,b.dispatchEvent(c)}function X(a){if(a&&a.cues)for(;a.cues.length>0;)a.removeCue(a.cues[0])}function Y(a,b){if(b<a[0].endTime)return a[0];if(b>a[a.length-1].endTime)return a[a.length-1];for(var c=0,d=a.length-1;c<=d;){var e=Math.floor((d+c)/2);if(b<a[e].endTime)d=e-1;else{if(!(b>a[e].endTime))return a[e];c=e+1}}return a[c].endTime-b<b-a[d].endTime?a[c]:a[d]}function Z(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function $(){var a=r();if(!a)return!1;var b=self.SourceBuffer||self.WebKitSourceBuffer,c=a&&"function"==typeof a.isTypeSupported&&a.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),d=!b||b.prototype&&"function"==typeof b.prototype.appendBuffer&&"function"==typeof b.prototype.remove;return!!c&&!!d}function _(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function aa(a,b,c){return b&&_(a.prototype,b),c&&_(a,c),a}function ba(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ca(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function da(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function ea(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function fa(a,b,c){return b&&ea(a.prototype,b),c&&ea(a,c),a}function ga(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function ha(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function ia(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function ja(a,b,c){return b&&ia(a.prototype,b),c&&ia(a,c),a}function ka(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function la(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function ma(a,b,c){return b&&la(a.prototype,b),c&&la(a,c),a}function na(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function oa(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new Lc,this.regionList=[]}function pa(a){function b(a,b,c,d){return 3600*(0|a)+60*(0|b)+(0|c)+(0|d)/1e3}var c=a.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return c?c[3]?b(c[1],c[2],c[3].replace(":",""),c[4]):c[1]>59?b(c[1],c[2],0,c[4]):b(0,c[1],c[2],c[4]):null}function qa(){this.values=Object.create(null)}function ra(a,b,c,d){var e=d?a.split(d):[a];for(var f in e)if("string"==typeof e[f]){var g=e[f].split(c);if(2===g.length){var h=g[0],i=g[1];b(h,i)}}}function sa(a,b,c){function d(){var b=pa(a);if(null===b)throw new Error("Malformed timestamp: "+g);return a=a.replace(/^[^\sa-zA-Z-]+/,""),b}function e(a,b){var d=new qa;ra(a,function(a,b){switch(a){case"region":for(var e=c.length-1;e>=0;e--)if(c[e].id===b){d.set(a,c[e].region);break}break;case"vertical":d.alt(a,b,["rl","lr"]);break;case"line":var f=b.split(","),g=f[0];d.integer(a,g),d.percent(a,g)&&d.set("snapToLines",!1),d.alt(a,g,["auto"]),2===f.length&&d.alt("lineAlign",f[1],["start",Nc,"end"]);break;case"position":f=b.split(","),d.percent(a,f[0]),2===f.length&&d.alt("positionAlign",f[1],["start",Nc,"end","line-left","line-right","auto"]);break;case"size":d.percent(a,b);break;case"align":d.alt(a,b,["start",Nc,"end","left","right"])}},/:/,/\s/),b.region=d.get("region",null),b.vertical=d.get("vertical","");var e=d.get("line","auto");"auto"===e&&Mc.line===-1&&(e=-1),b.line=e,b.lineAlign=d.get("lineAlign","start"),b.snapToLines=d.get("snapToLines",!0),b.size=d.get("size",100),b.align=d.get("align",Nc);var f=d.get("position","auto");"auto"===f&&50===Mc.position&&(f="start"===b.align||"left"===b.align?0:"end"===b.align||"right"===b.align?100:50),b.position=f}function f(){a=a.replace(/^\s+/,"")}var g=a;if(f(),b.startTime=d(),f(),"-->"!==a.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+g);a=a.substr(3),f(),b.endTime=d(),f(),e(a,b)}function ta(a){return a.replace(/<br(?: \/)?>/gi,"\n")}function ua(a,b,c,d){for(var e,f,g,h,i,j=[],k=window.VTTCue||TextTrackCue,l=0;l<d.rows.length;l++)if(e=d.rows[l],g=!0,h=0,i="",!e.isEmpty()){for(var m=0;m<e.chars.length;m++)e.chars[m].uchar.match(/\s/)&&g?h++:(i+=e.chars[m].uchar,g=!1);e.cueStartTime=b,b===c&&(c+=1e-4),f=new k(b,c,ta(i.trim())),h>=16?h--:h++,navigator.userAgent.match(/Firefox\//)?f.line=l+1:f.line=l>7?l-2:l+1,f.align="left",f.position=Math.max(0,Math.min(100,100*(h/32))),j.push(f),a&&a.addCue(f)}return j}function va(a){return 20===a?1:28===a?2:21===a?3:29===a?4:0}function wa(a,b){var c=null;return 23===a?c=b:31===a&&(c=b+1),c}function xa(a,b,c){c&&(c.a=a,c.b=b)}function ya(a,b,c){if(c)return c.a===a&&c.b===b}function za(){return{1:{a:null,b:null},3:{a:null,b:null}}}function Aa(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ba(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function Ca(a,b){return a&&a.label===b.name&&!(a.textTrack1||a.textTrack2)}function Da(a,b,c,d){return Math.min(b,d)-Math.max(a,c)}function Ea(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}}}function Fa(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function Ga(a,b,c){return b&&Fa(a.prototype,b),c&&Fa(a,c),a}function Ha(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function Ia(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];"subtitles"===d.kind&&d.label&&b.push(a[c])}return b}function Ja(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ka(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function La(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function Ma(a,b,c){return b&&La(a.prototype,b),c&&La(a,c),a}function Na(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function Oa(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function Pa(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?Oa(Object(c),!0).forEach(function(b){Qa(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):Oa(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function Qa(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function Ra(){return{cueHandler:Za,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function Sa(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function Ta(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?Sa(Object(c),!0).forEach(function(b){Ua(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):Sa(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function Ua(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function Va(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Wa(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function Xa(a,b,c){return b&&Wa(a.prototype,b),c&&Wa(a,c),a}function Ya(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}c.r(b),c.d(b,"default",function(){return Ed});var Za={};c.r(Za),c.d(Za,"newCue",function(){return ua});var $a,_a=c("./node_modules/url-toolkit/src/url-toolkit.js"),ab=c("./src/errors.ts"),bb=c("./src/polyfills/number-isFinite.js"),cb=c("./src/events.js"),db=c("./src/utils/logger.js"),eb={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},fb=function(){function a(a){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=a,this.onEvent=this.onEvent.bind(this);for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.handledEvents=c,this.useGenericHandler=!0,this.registerListeners()}var b=a.prototype;return b.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},b.onHandlerDestroying=function(){},b.onHandlerDestroyed=function(){},b.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},b.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(a){if(eb[a])throw new Error("Forbidden event-name: "+a);this.hls.on(a,this.onEvent)},this)},b.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(a){this.hls.off(a,this.onEvent)},this)},b.onEvent=function(a,b){this.onEventGeneric(a,b)},b.onEventGeneric=function(a,b){var c=function(a,b){var c="on"+a.replace("hls","");if("function"!=typeof this[c])throw new Error("Event "+a+" has no generic handler in this "+this.constructor.name+" class (tried "+c+")");return this[c].bind(this,b)};try{c.call(this,a,b).call()}catch(b){db.logger.error("An internal error happened while handling event "+a+'. Error message: "'+b.message+'". Here is a stacktrace:',b),this.hls.trigger(cb.default.ERROR,{type:ab.ErrorTypes.OTHER_ERROR,details:ab.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:a,err:b})}},a}(),gb=fb;!function(a){a.MANIFEST="manifest",a.LEVEL="level",a.AUDIO_TRACK="audioTrack",a.SUBTITLE_TRACK="subtitleTrack"}($a||($a={}));var hb;!function(a){a.MAIN="main",a.AUDIO="audio",a.SUBTITLE="subtitle"}(hb||(hb={}));var ib,jb=c("./src/demux/mp4demuxer.js"),kb=function(){function a(a,b){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=a,this.reluri=b}return e(a,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Object(_a.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),a}();!function(a){a.AUDIO="audio",a.VIDEO="video"}(ib||(ib={}));var lb,mb=function(){function a(){var a;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=(a={},a[ib.AUDIO]=!1,a[ib.VIDEO]=!1,a),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var b=a.prototype;return b.setByteRange=function(a,b){var c=a.split("@",2),d=[];1===c.length?d[0]=b?b.byteRangeEndOffset:0:d[0]=parseInt(c[1]),d[1]=parseInt(c[0])+d[0],this._byteRange=d},b.addElementaryStream=function(a){this._elementaryStreams[a]=!0},b.hasElementaryStream=function(a){return this._elementaryStreams[a]===!0},b.createInitializationVector=function(a){for(var b=new Uint8Array(16),c=12;c<16;c++)b[c]=a>>8*(15-c)&255;return b},b.setDecryptDataFromLevelKey=function(a,b){var c=a;return a&&a.method&&a.uri&&!a.iv&&(c=new kb(a.baseuri,a.reluri),c.method=a.method,c.iv=this.createInitializationVector(b)),c},g(a,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Object(_a.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(a){this._url=a}},{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var a=this.sn;"number"!=typeof a&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&db.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),a=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,a)}return this._decryptdata}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(bb.isFiniteNumber)(this.programDateTime))return null;var a=Object(bb.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*a}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}]),a}(),nb=function(){function a(a){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=a,this.version=null}return i(a,[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(bb.isFiniteNumber)(this.fragments[0].programDateTime))}}]),a}(),ob=/^(\d+)x(\d+)$/,pb=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,qb=function(){function a(b){"string"==typeof b&&(b=a.parseAttrList(b));for(var c in b)b.hasOwnProperty(c)&&(this[c]=b[c])}var b=a.prototype;return b.decimalInteger=function(a){var b=parseInt(this[a],10);return b>Number.MAX_SAFE_INTEGER?1/0:b},b.hexadecimalInteger=function(a){if(this[a]){var b=(this[a]||"0x").slice(2);b=(1&b.length?"0":"")+b;for(var c=new Uint8Array(b.length/2),d=0;d<b.length/2;d++)c[d]=parseInt(b.slice(2*d,2*d+2),16);return c}return null},b.hexadecimalIntegerAsNumber=function(a){var b=parseInt(this[a],16);return b>Number.MAX_SAFE_INTEGER?1/0:b},b.decimalFloatingPoint=function(a){return parseFloat(this[a])},b.enumeratedString=function(a){return this[a]},b.decimalResolution=function(a){var b=ob.exec(this[a]);if(null!==b)return{width:parseInt(b[1],10),height:parseInt(b[2],10)}},a.parseAttrList=function(a){var b,c={};for(pb.lastIndex=0;null!==(b=pb.exec(a));){var d=b[2],e='"';0===d.indexOf(e)&&d.lastIndexOf(e)===d.length-1&&(d=d.slice(1,-1)),c[b[1]]=d}return c},a}(),rb=qb,sb={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}},tb=/(?:#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)|#EXT-X-SESSION-DATA:([^\n\r]*)[\r\n]+)/g,ub=/#EXT-X-MEDIA:(.*)/g,vb=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),wb=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,xb=/\.(mp4|m4s|m4v|m4a)$/i,yb=function(){function a(){}return a.findGroup=function(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d.id===b)return d}},a.convertAVC1ToAVCOTI=function(a){var b,c=a.split(".");return c.length>2?(b=c.shift()+".",b+=parseInt(c.shift()).toString(16),b+=("000"+parseInt(c.shift()).toString(16)).substr(-4)):b=a,b},a.resolve=function(a,b){return _a.buildAbsoluteURL(b,a,{alwaysNormalize:!0})},a.parseMasterPlaylist=function(b,c){function d(a,b){["video","audio"].forEach(function(c){var d=a.filter(function(a){return j(a,c)});if(d.length){var e=d.filter(function(a){return 0===a.lastIndexOf("avc1",0)||0===a.lastIndexOf("mp4a",0)});b[c+"Codec"]=e.length>0?e[0]:d[0],a=a.filter(function(a){return d.indexOf(a)===-1})}}),b.unknownCodecs=a}var e=[],f={},g=!1;tb.lastIndex=0;for(var h;null!=(h=tb.exec(b));)if(h[1]){var i={},k=i.attrs=new rb(h[1]);i.url=a.resolve(h[2],c);var l=k.decimalResolution("RESOLUTION");l&&(i.width=l.width,i.height=l.height),i.bitrate=k.decimalInteger("AVERAGE-BANDWIDTH")||k.decimalInteger("BANDWIDTH"),i.name=k.NAME,d([].concat((k.CODECS||"").split(/[ ,]+/)),i),i.videoCodec&&i.videoCodec.indexOf("avc1")!==-1&&(i.videoCodec=a.convertAVC1ToAVCOTI(i.videoCodec)),e.push(i)}else if(h[3]){var m=new rb(h[3]);m["DATA-ID"]&&(g=!0,f[m["DATA-ID"]]=m)}return{levels:e,sessionData:g?f:null}},a.parseMasterPlaylistMedia=function(b,c,d,e){void 0===e&&(e=[]);var f,g=[],h=0;for(ub.lastIndex=0;null!==(f=ub.exec(b));){var i=new rb(f[1]);if(i.TYPE===d){var j={attrs:i,id:h++,groupId:i["GROUP-ID"],instreamId:i["INSTREAM-ID"],name:i.NAME||i.LANGUAGE,type:d,default:"YES"===i.DEFAULT,autoselect:"YES"===i.AUTOSELECT,forced:"YES"===i.FORCED,lang:i.LANGUAGE};if(i.URI&&(j.url=a.resolve(i.URI,c)),e.length){var k=a.findGroup(e,j.groupId);j.audioCodec=k?k.codec:e[0].codec}g.push(j)}}return g},a.parseLevelPlaylist=function(a,b,c,d,e){var f,g,h,i=0,j=0,k=new nb(b),n=0,o=null,p=new mb,q=null;for(vb.lastIndex=0;null!==(f=vb.exec(a));){var r=f[1];if(r){p.duration=parseFloat(r);var s=(" "+f[2]).slice(1);p.title=s||null,p.tagList.push(s?["INF",r,s]:["INF",r])}else if(f[3]){if(Object(bb.isFiniteNumber)(p.duration)){var t=i++;p.type=d,p.start=j,h&&(p.levelkey=h),p.sn=t,p.level=c,p.cc=n,p.urlId=e,p.baseurl=b,p.relurl=(" "+f[3]).slice(1),m(p,o),k.fragments.push(p),o=p,j+=p.duration,p=new mb}}else if(f[4]){var u=(" "+f[4]).slice(1);o?p.setByteRange(u,o):p.setByteRange(u)}else if(f[5])p.rawProgramDateTime=(" "+f[5]).slice(1),p.tagList.push(["PROGRAM-DATE-TIME",p.rawProgramDateTime]),null===q&&(q=k.fragments.length);else{if(f=f[0].match(wb),!f){db.logger.warn("No matches on slow regex match for level playlist!");continue}for(g=1;g<f.length&&"undefined"==typeof f[g];g++);var v=(" "+f[g+1]).slice(1),w=(" "+f[g+2]).slice(1);switch(f[g]){case"#":p.tagList.push(w?[v,w]:[v]);break;case"PLAYLIST-TYPE":k.type=v.toUpperCase();break;case"MEDIA-SEQUENCE":i=k.startSN=parseInt(v);break;case"TARGETDURATION":k.targetduration=parseFloat(v);break;case"VERSION":k.version=parseInt(v);break;case"EXTM3U":break;case"ENDLIST":k.live=!1;break;case"DIS":n++,p.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":n=parseInt(v);break;case"KEY":var x=v,y=new rb(x),z=y.enumeratedString("METHOD"),A=y.URI,B=y.hexadecimalInteger("IV"),C=y.KEYFORMAT||"identity";if("com.apple.streamingkeydelivery"===C){db.logger.warn("Keyformat com.apple.streamingkeydelivery is not supported");continue}z&&(h=new kb(b,A),A&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(z)>=0&&(h.method=z,h.key=null,h.iv=B));break;case"START":var D=new rb(v),E=D.decimalFloatingPoint("TIME-OFFSET");Object(bb.isFiniteNumber)(E)&&(k.startTimeOffset=E);break;case"MAP":var F=new rb(v);p.relurl=F.URI,F.BYTERANGE&&p.setByteRange(F.BYTERANGE),p.baseurl=b,p.level=c,p.type=d,p.sn="initSegment",k.initSegment=p,p=new mb,p.rawProgramDateTime=k.initSegment.rawProgramDateTime;break;default:db.logger.warn("line parsed but not handled: "+f)}}}return p=o,p&&!p.relurl&&(k.fragments.pop(),j-=p.duration),k.totalduration=j,k.averagetargetduration=j/k.fragments.length,k.endSN=i-1,k.startCC=k.fragments[0]?k.fragments[0].cc:0,
k.endCC=n,!k.initSegment&&k.fragments.length&&k.fragments.every(function(a){return xb.test(a.relurl)})&&(db.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),p=new mb,p.relurl=k.fragments[0].relurl,p.baseurl=b,p.level=c,p.type=d,p.sn="initSegment",k.initSegment=p,k.needSidxRanges=!0),q&&l(k.fragments,q),k},a}(),zb=window,Ab=zb.performance,Bb=function(a){function b(b){var c;return c=a.call(this,b,cb.default.MANIFEST_LOADING,cb.default.LEVEL_LOADING,cb.default.AUDIO_TRACK_LOADING,cb.default.SUBTITLE_TRACK_LOADING)||this,c.loaders={},c}n(b,a),b.canHaveQualityLevels=function(a){return a!==$a.AUDIO_TRACK&&a!==$a.SUBTITLE_TRACK},b.mapContextToLevelType=function(a){var b=a.type;switch(b){case $a.AUDIO_TRACK:return hb.AUDIO;case $a.SUBTITLE_TRACK:return hb.SUBTITLE;default:return hb.MAIN}},b.getResponseUrl=function(a,b){var c=a.url;return void 0!==c&&0!==c.indexOf("data:")||(c=b.url),c};var c=b.prototype;return c.createInternalLoader=function(a){var b=this.hls.config,c=b.pLoader,d=b.loader,e=c||d,f=new e(b);return a.loader=f,this.loaders[a.type]=f,f},c.getInternalLoader=function(a){return this.loaders[a.type]},c.resetInternalLoader=function(a){this.loaders[a]&&delete this.loaders[a]},c.destroyInternalLoaders=function(){for(var a in this.loaders){var b=this.loaders[a];b&&b.destroy(),this.resetInternalLoader(a)}},c.destroy=function(){this.destroyInternalLoaders(),a.prototype.destroy.call(this)},c.onManifestLoading=function(a){this.load({url:a.url,type:$a.MANIFEST,level:0,id:null,responseType:"text"})},c.onLevelLoading=function(a){this.load({url:a.url,type:$a.LEVEL,level:a.level,id:a.id,responseType:"text"})},c.onAudioTrackLoading=function(a){this.load({url:a.url,type:$a.AUDIO_TRACK,level:null,id:a.id,responseType:"text"})},c.onSubtitleTrackLoading=function(a){this.load({url:a.url,type:$a.SUBTITLE_TRACK,level:null,id:a.id,responseType:"text"})},c.load=function(a){var b=this.hls.config;db.logger.debug("Loading playlist of type "+a.type+", level: "+a.level+", id: "+a.id);var c=this.getInternalLoader(a);if(c){var d=c.context;if(d&&d.url===a.url)return db.logger.trace("playlist request ongoing"),!1;db.logger.warn("aborting previous loader for type: "+a.type),c.abort()}var e,f,g,h;switch(a.type){case $a.MANIFEST:e=b.manifestLoadingMaxRetry,f=b.manifestLoadingTimeOut,g=b.manifestLoadingRetryDelay,h=b.manifestLoadingMaxRetryTimeout;break;case $a.LEVEL:e=0,h=0,g=0,f=b.levelLoadingTimeOut;break;default:e=b.levelLoadingMaxRetry,f=b.levelLoadingTimeOut,g=b.levelLoadingRetryDelay,h=b.levelLoadingMaxRetryTimeout}c=this.createInternalLoader(a);var i={timeout:f,maxRetry:e,retryDelay:g,maxRetryDelay:h},j={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return db.logger.debug("Calling internal loader delegate for URL: "+a.url),c.load(a,i,j),!0},c.loadsuccess=function(a,b,c,d){if(void 0===d&&(d=null),c.isSidxRequest)return this._handleSidxRequest(a,c),void this._handlePlaylistLoaded(a,b,c,d);if(this.resetInternalLoader(c.type),"string"!=typeof a.data)throw new Error('expected responseType of "text" for PlaylistLoader');var e=a.data;return b.tload=Ab.now(),0!==e.indexOf("#EXTM3U")?void this._handleManifestParsingError(a,c,"no EXTM3U delimiter",d):void(e.indexOf("#EXTINF:")>0||e.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(a,b,c,d):this._handleMasterPlaylist(a,b,c,d))},c.loaderror=function(a,b,c){void 0===c&&(c=null),this._handleNetworkError(b,c,!1,a)},c.loadtimeout=function(a,b,c){void 0===c&&(c=null),this._handleNetworkError(b,c,!0)},c._handleMasterPlaylist=function(a,c,d,e){var f=this.hls,g=a.data,h=b.getResponseUrl(a,d),i=yb.parseMasterPlaylist(g,h),j=i.levels,k=i.sessionData;if(!j.length)return void this._handleManifestParsingError(a,d,"no level found in manifest",e);var l=j.map(function(a){return{id:a.attrs.AUDIO,codec:a.audioCodec}}),m=yb.parseMasterPlaylistMedia(g,h,"AUDIO",l),n=yb.parseMasterPlaylistMedia(g,h,"SUBTITLES"),o=yb.parseMasterPlaylistMedia(g,h,"CLOSED-CAPTIONS");if(m.length){var p=!1;m.forEach(function(a){a.url||(p=!0)}),p===!1&&j[0].audioCodec&&!j[0].attrs.AUDIO&&(db.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),m.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:{},url:""}))}f.trigger(cb.default.MANIFEST_LOADED,{levels:j,audioTracks:m,subtitles:n,captions:o,url:h,stats:c,networkDetails:e,sessionData:k})},c._handleTrackOrLevelPlaylist=function(a,c,d,e){var f=this.hls,g=d.id,h=d.level,i=d.type,j=b.getResponseUrl(a,d),k=Object(bb.isFiniteNumber)(g)?g:0,l=Object(bb.isFiniteNumber)(h)?h:k,m=b.mapContextToLevelType(d),n=yb.parseLevelPlaylist(a.data,j,l,m,k);if(n.tload=c.tload,!n.fragments.length)return void f.trigger(cb.default.ERROR,{type:ab.ErrorTypes.NETWORK_ERROR,details:ab.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:j,reason:"no fragments found in level",level:"number"==typeof d.level?d.level:void 0});if(i===$a.MANIFEST){var o={url:j,details:n};f.trigger(cb.default.MANIFEST_LOADED,{levels:[o],audioTracks:[],url:j,stats:c,networkDetails:e,sessionData:null})}if(c.tparsed=Ab.now(),n.needSidxRanges){var p=n.initSegment.url;return void this.load({url:p,isSidxRequest:!0,type:i,level:h,levelDetails:n,id:g,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}d.levelDetails=n,this._handlePlaylistLoaded(a,c,d,e)},c._handleSidxRequest=function(a,b){if("string"==typeof a.data)throw new Error("sidx request must be made with responseType of array buffer");var c=jb.default.parseSegmentIndex(new Uint8Array(a.data));if(c){var d=c.references,e=b.levelDetails;d.forEach(function(a,b){var c=a.info;if(e){var d=e.fragments[b];0===d.byteRange.length&&d.setByteRange(String(1+c.end-c.start)+"@"+String(c.start))}}),e&&e.initSegment.setByteRange(String(c.moovEndOffset)+"@0")}},c._handleManifestParsingError=function(a,b,c,d){this.hls.trigger(cb.default.ERROR,{type:ab.ErrorTypes.NETWORK_ERROR,details:ab.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:a.url,reason:c,networkDetails:d})},c._handleNetworkError=function(a,b,c,d){void 0===c&&(c=!1),void 0===d&&(d=null),db.logger.info("A network error occured while loading a "+a.type+"-type playlist");var e,f,g=this.getInternalLoader(a);switch(a.type){case $a.MANIFEST:e=c?ab.ErrorDetails.MANIFEST_LOAD_TIMEOUT:ab.ErrorDetails.MANIFEST_LOAD_ERROR,f=!0;break;case $a.LEVEL:e=c?ab.ErrorDetails.LEVEL_LOAD_TIMEOUT:ab.ErrorDetails.LEVEL_LOAD_ERROR,f=!1;break;case $a.AUDIO_TRACK:e=c?ab.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:ab.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,f=!1;break;default:f=!1}g&&(g.abort(),this.resetInternalLoader(a.type));var h={type:ab.ErrorTypes.NETWORK_ERROR,details:e,fatal:f,url:a.url,loader:g,context:a,networkDetails:b};d&&(h.response=d),this.hls.trigger(cb.default.ERROR,h)},c._handlePlaylistLoaded=function(a,c,d,e){var f=d.type,g=d.level,h=d.id,i=d.levelDetails;if(!i||!i.targetduration)return void this._handleManifestParsingError(a,d,"invalid target duration",e);var j=b.canHaveQualityLevels(d.type);if(j)this.hls.trigger(cb.default.LEVEL_LOADED,{details:i,level:g||0,id:h||0,stats:c,networkDetails:e});else switch(f){case $a.AUDIO_TRACK:this.hls.trigger(cb.default.AUDIO_TRACK_LOADED,{details:i,id:h,stats:c,networkDetails:e});break;case $a.SUBTITLE_TRACK:this.hls.trigger(cb.default.SUBTITLE_TRACK_LOADED,{details:i,id:h,stats:c,networkDetails:e})}},b}(gb),Cb=Bb,Db=function(a){function b(b){var c;return c=a.call(this,b,cb.default.FRAG_LOADING)||this,c.loaders={},c}o(b,a);var c=b.prototype;return c.destroy=function(){var b=this.loaders;for(var c in b){var d=b[c];d&&d.destroy()}this.loaders={},a.prototype.destroy.call(this)},c.onFragLoading=function(a){var b=a.frag,c=b.type,d=this.loaders,e=this.hls.config,f=e.fLoader,g=e.loader;b.loaded=0;var h=d[c];h&&(db.logger.warn("abort previous fragment loader for type: "+c),h.abort()),h=d[c]=b.loader=e.fLoader?new f(e):new g(e);var i,j,k;i={url:b.url,frag:b,responseType:"arraybuffer",progressData:!1};var l=b.byteRangeStartOffset,m=b.byteRangeEndOffset;Object(bb.isFiniteNumber)(l)&&Object(bb.isFiniteNumber)(m)&&(i.rangeStart=l,i.rangeEnd=m),j={timeout:e.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:e.fragLoadingMaxRetryTimeout},k={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},h.load(i,j,k)},c.loadsuccess=function(a,b,c,d){void 0===d&&(d=null);var e=a.data,f=c.frag;f.loader=void 0,this.loaders[f.type]=void 0,this.hls.trigger(cb.default.FRAG_LOADED,{payload:e,frag:f,stats:b,networkDetails:d})},c.loaderror=function(a,b,c){void 0===c&&(c=null);var d=b.frag,e=d.loader;e&&e.abort(),this.loaders[d.type]=void 0,this.hls.trigger(cb.default.ERROR,{type:ab.ErrorTypes.NETWORK_ERROR,details:ab.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:b.frag,response:a,networkDetails:c})},c.loadtimeout=function(a,b,c){void 0===c&&(c=null);var d=b.frag,e=d.loader;e&&e.abort(),this.loaders[d.type]=void 0,this.hls.trigger(cb.default.ERROR,{type:ab.ErrorTypes.NETWORK_ERROR,details:ab.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:b.frag,networkDetails:c})},c.loadprogress=function(a,b,c,d){void 0===d&&(d=null);var e=b.frag;e.loaded=a.loaded,this.hls.trigger(cb.default.FRAG_LOAD_PROGRESS,{frag:e,stats:a,networkDetails:d})},b}(gb),Eb=Db,Fb=function(a){function b(b){var c;return c=a.call(this,b,cb.default.KEY_LOADING)||this,c.loaders={},c.decryptkey=null,c.decrypturl=null,c}p(b,a);var c=b.prototype;return c.destroy=function(){for(var b in this.loaders){var c=this.loaders[b];c&&c.destroy()}this.loaders={},a.prototype.destroy.call(this)},c.onKeyLoading=function(a){var b=a.frag,c=b.type,d=this.loaders[c];if(!b.decryptdata)return void db.logger.warn("Missing decryption data on fragment in onKeyLoading");var e=b.decryptdata.uri;if(e!==this.decrypturl||null===this.decryptkey){var f=this.hls.config;if(d&&(db.logger.warn("abort previous key loader for type:"+c),d.abort()),!e)return void db.logger.warn("key uri is falsy");b.loader=this.loaders[c]=new f.loader(f),this.decrypturl=e,this.decryptkey=null;var g={url:e,frag:b,responseType:"arraybuffer"},h={timeout:f.fragLoadingTimeOut,maxRetry:0,retryDelay:f.fragLoadingRetryDelay,maxRetryDelay:f.fragLoadingMaxRetryTimeout},i={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};b.loader.load(g,h,i)}else this.decryptkey&&(b.decryptdata.key=this.decryptkey,this.hls.trigger(cb.default.KEY_LOADED,{frag:b}))},c.loadsuccess=function(a,b,c){var d=c.frag;return d.decryptdata?(this.decryptkey=d.decryptdata.key=new Uint8Array(a.data),d.loader=void 0,delete this.loaders[d.type],void this.hls.trigger(cb.default.KEY_LOADED,{frag:d})):void db.logger.error("after key load, decryptdata unset")},c.loaderror=function(a,b){var c=b.frag,d=c.loader;d&&d.abort(),delete this.loaders[c.type],this.hls.trigger(cb.default.ERROR,{type:ab.ErrorTypes.NETWORK_ERROR,details:ab.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:c,response:a})},c.loadtimeout=function(a,b){var c=b.frag,d=c.loader;d&&d.abort(),delete this.loaders[c.type],this.hls.trigger(cb.default.ERROR,{type:ab.ErrorTypes.NETWORK_ERROR,details:ab.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:c})},b}(gb),Gb=Fb,Hb={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"},Ib=function(a){function b(b){var c;return c=a.call(this,b,cb.default.BUFFER_APPENDED,cb.default.FRAG_BUFFERED,cb.default.FRAG_LOADED)||this,c.bufferPadding=.2,c.fragments=Object.create(null),c.timeRanges=Object.create(null),c.config=b.config,c}q(b,a);var c=b.prototype;return c.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,gb.prototype.destroy.call(this),a.prototype.destroy.call(this)},c.getBufferedFrag=function(a,b){var c=this.fragments,d=Object.keys(c).filter(function(d){var e=c[d];if(e.body.type!==b)return!1;if(!e.buffered)return!1;var f=e.body;return f.startPTS<=a&&a<=f.endPTS});if(0===d.length)return null;var e=d.pop();return c[e].body},c.detectEvictedFragments=function(a,b){var c=this;Object.keys(this.fragments).forEach(function(d){var e=c.fragments[d];if(e&&e.buffered){var f=e.range[a];if(f)for(var g=f.time,h=0;h<g.length;h++){var i=g[h];if(!c.isTimeBuffered(i.startPTS,i.endPTS,b)){c.removeFragment(e.body);break}}}})},c.detectPartialFragments=function(a){var b=this,c=this.getFragmentKey(a),d=this.fragments[c];d&&(d.buffered=!0,Object.keys(this.timeRanges).forEach(function(c){if(a.hasElementaryStream(c)){var e=b.timeRanges[c];d.range[c]=b.getBufferedTimes(a.startPTS,a.endPTS,e)}}))},c.getBufferedTimes=function(a,b,c){for(var d,e,f=[],g=!1,h=0;h<c.length;h++){if(d=c.start(h)-this.bufferPadding,e=c.end(h)+this.bufferPadding,a>=d&&b<=e){f.push({startPTS:Math.max(a,c.start(h)),endPTS:Math.min(b,c.end(h))});break}if(a<e&&b>d)f.push({startPTS:Math.max(a,c.start(h)),endPTS:Math.min(b,c.end(h))}),g=!0;else if(b<=d)break}return{time:f,partial:g}},c.getFragmentKey=function(a){return a.type+"_"+a.level+"_"+a.urlId+"_"+a.sn},c.getPartialFragment=function(a){var b,c,d,e=this,f=null,g=0;return Object.keys(this.fragments).forEach(function(h){var i=e.fragments[h];e.isPartial(i)&&(c=i.body.startPTS-e.bufferPadding,d=i.body.endPTS+e.bufferPadding,a>=c&&a<=d&&(b=Math.min(a-c,d-a),g<=b&&(f=i.body,g=b)))}),f},c.getState=function(a){var b=this.getFragmentKey(a),c=this.fragments[b],d=Hb.NOT_LOADED;return void 0!==c&&(d=c.buffered?this.isPartial(c)===!0?Hb.PARTIAL:Hb.OK:Hb.APPENDING),d},c.isPartial=function(a){return a.buffered===!0&&(void 0!==a.range.video&&a.range.video.partial===!0||void 0!==a.range.audio&&a.range.audio.partial===!0)},c.isTimeBuffered=function(a,b,c){for(var d,e,f=0;f<c.length;f++){if(d=c.start(f)-this.bufferPadding,e=c.end(f)+this.bufferPadding,a>=d&&b<=e)return!0;if(b<=d)return!1}return!1},c.onFragLoaded=function(a){var b=a.frag;Object(bb.isFiniteNumber)(b.sn)&&!b.bitrateTest&&(this.fragments[this.getFragmentKey(b)]={body:b,range:Object.create(null),buffered:!1})},c.onBufferAppended=function(a){var b=this;this.timeRanges=a.timeRanges,Object.keys(this.timeRanges).forEach(function(a){var c=b.timeRanges[a];b.detectEvictedFragments(a,c)})},c.onFragBuffered=function(a){this.detectPartialFragments(a.frag)},c.hasFragment=function(a){var b=this.getFragmentKey(a);return void 0!==this.fragments[b]},c.removeFragment=function(a){var b=this.getFragmentKey(a);delete this.fragments[b]},c.removeAllFragments=function(){this.fragments=Object.create(null)},b}(gb),Jb={search:function(a,b){for(var c=0,d=a.length-1,e=null,f=null;c<=d;){e=(c+d)/2|0,f=a[e];var g=b(f);if(g>0)c=e+1;else{if(!(g<0))return f;d=e-1}}return null}},Kb=Jb,Lb=function(){function a(){}return a.isBuffered=function(a,b){try{if(a)for(var c=a.buffered,d=0;d<c.length;d++)if(b>=c.start(d)&&b<=c.end(d))return!0}catch(a){}return!1},a.bufferInfo=function(a,b,c){try{if(a){var d,e=a.buffered,f=[];for(d=0;d<e.length;d++)f.push({start:e.start(d),end:e.end(d)});return this.bufferedInfo(f,b,c)}}catch(a){}return{len:0,start:b,end:b,nextStart:void 0}},a.bufferedInfo=function(a,b,c){a.sort(function(a,b){var c=a.start-b.start;return c?c:b.end-a.end});var d=[];if(c)for(var e=0;e<a.length;e++){var f=d.length;if(f){var g=d[f-1].end;a[e].start-g<c?a[e].end>g&&(d[f-1].end=a[e].end):d.push(a[e])}else d.push(a[e])}else d=a;for(var h,i=0,j=b,k=b,l=0;l<d.length;l++){var m=d[l].start,n=d[l].end;if(b+c>=m&&b<n)j=m,k=n,i=k-b;else if(b+c<m){h=m;break}}return{len:i,start:j,end:k,nextStart:h}},a}(),Mb=c("./node_modules/eventemitter3/index.js"),Nb=c("./node_modules/webworkify-webpack/index.js"),Ob=c("./src/demux/demuxer-inline.js"),Pb=c("./src/utils/get-self-scope.js"),Qb=function(a){function b(){return a.apply(this,arguments)||this}s(b,a);var c=b.prototype;return c.trigger=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.emit.apply(this,[a,a].concat(c))},b}(Mb.EventEmitter),Rb=Object(Pb.getSelfScope)(),Sb=r()||{isTypeSupported:function(){return!1}},Tb=function(){function a(a,b){var c=this;this.hls=a,this.id=b;var d=this.observer=new Qb,e=a.config,f=function(b,d){d=d||{},d.frag=c.frag,d.id=c.id,a.trigger(b,d)};d.on(cb.default.FRAG_DECRYPTED,f),d.on(cb.default.FRAG_PARSING_INIT_SEGMENT,f),d.on(cb.default.FRAG_PARSING_DATA,f),d.on(cb.default.FRAG_PARSED,f),d.on(cb.default.ERROR,f),d.on(cb.default.FRAG_PARSING_METADATA,f),d.on(cb.default.FRAG_PARSING_USERDATA,f),d.on(cb.default.INIT_PTS_FOUND,f);var g={mp4:Sb.isTypeSupported("video/mp4"),mpeg:Sb.isTypeSupported("audio/mpeg"),mp3:Sb.isTypeSupported('audio/mp4; codecs="mp3"')},h=navigator.vendor;if(e.enableWorker&&"undefined"!=typeof Worker){db.logger.log("demuxing in webworker");var i;try{i=this.w=Nb("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),i.addEventListener("message",this.onwmsg),i.onerror=function(b){a.trigger(cb.default.ERROR,{type:ab.ErrorTypes.OTHER_ERROR,details:ab.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:b.message+" ("+b.filename+":"+b.lineno+")"}})},i.postMessage({cmd:"init",typeSupported:g,vendor:h,id:b,config:JSON.stringify(e)})}catch(a){db.logger.warn("Error in worker:",a),db.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),i&&Rb.URL.revokeObjectURL(i.objectURL),this.demuxer=new Ob.default(d,g,e,h),this.w=void 0}}else this.demuxer=new Ob.default(d,g,e,h)}var b=a.prototype;return b.destroy=function(){var a=this.w;if(a)a.removeEventListener("message",this.onwmsg),a.terminate(),this.w=null;else{var b=this.demuxer;b&&(b.destroy(),this.demuxer=null)}var c=this.observer;c&&(c.removeAllListeners(),this.observer=null)},b.push=function(a,b,c,d,e,f,g,h){var i=this.w,j=Object(bb.isFiniteNumber)(e.startPTS)?e.startPTS:e.start,k=e.decryptdata,l=this.frag,m=!(l&&e.cc===l.cc),n=!(l&&e.level===l.level),o=l&&e.sn===l.sn+1,p=!n&&o;if(m&&db.logger.log(this.id+":discontinuity detected"),n&&db.logger.log(this.id+":switch detected"),this.frag=e,i)i.postMessage({cmd:"demux",data:a,decryptdata:k,initSegment:b,audioCodec:c,videoCodec:d,timeOffset:j,discontinuity:m,trackSwitch:n,contiguous:p,duration:f,accurateTimeOffset:g,defaultInitPTS:h},a instanceof ArrayBuffer?[a]:[]);else{var q=this.demuxer;q&&q.push(a,k,b,c,d,j,m,n,p,f,g,h)}},b.onWorkerMessage=function(a){var b=a.data,c=this.hls;switch(b.event){case"init":Rb.URL.revokeObjectURL(this.w.objectURL);break;case cb.default.FRAG_PARSING_DATA:b.data.data1=new Uint8Array(b.data1),b.data2&&(b.data.data2=new Uint8Array(b.data2));default:b.data=b.data||{},b.data.frag=this.frag,b.data.id=this.id,c.trigger(b.event,b.data)}},a}(),Ub=Tb,Vb={toString:function(a){for(var b="",c=a.length,d=0;d<c;d++)b+="["+a.start(d).toFixed(3)+","+a.end(d).toFixed(3)+"]";return b}},Wb=Vb,Xb=250,Yb=2,Zb=.1,$b=.05,_b=function(){function a(a,b,c,d){this.config=a,this.media=b,this.fragmentTracker=c,this.hls=d,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var b=a.prototype;return b.poll=function(a){var b=this.config,c=this.media,d=this.stalled,e=c.currentTime,f=c.seeking,g=this.seeking&&!f,h=!this.seeking&&f;if(this.seeking=f,e===a){if((h||g)&&(this.stalled=null),!c.paused&&!c.ended&&0!==c.playbackRate&&c.buffered.length){var i=Lb.bufferInfo(c,e,0),j=i.len>0,k=i.nextStart||0;if(j||k){if(f){var l=i.len>Yb,m=!k||k-e>Yb&&!this.fragmentTracker.getPartialFragment(e);if(l||m)return;this.moved=!1}if(!this.moved&&this.stalled){var n=Math.max(k,i.start||0)-e;if(n>0&&n<=Yb)return void this._trySkipBufferHole(null)}var o=self.performance.now();if(null===d)return void(this.stalled=o);var p=o-d;!f&&p>=Xb&&this._reportStall(i.len);var q=Lb.bufferInfo(c,e,b.maxBufferHole);this._tryFixBufferStall(q,p)}}}else if(this.moved=!0,null!==d){if(this.stallReported){var r=self.performance.now()-d;db.logger.warn("playback not stuck anymore @"+e+", after "+Math.round(r)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},b._tryFixBufferStall=function(a,b){var c=this.config,d=this.fragmentTracker,e=this.media,f=e.currentTime,g=d.getPartialFragment(f);if(g){var h=this._trySkipBufferHole(g);if(h)return}a.len>c.maxBufferHole&&b>1e3*c.highBufferWatchdogPeriod&&(db.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},b._reportStall=function(a){var b=this.hls,c=this.media,d=this.stallReported;d||(this.stallReported=!0,db.logger.warn("Playback stalling at @"+c.currentTime+" due to low buffer (buffer="+a+")"),b.trigger(cb.default.ERROR,{type:ab.ErrorTypes.MEDIA_ERROR,details:ab.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:a}))},b._trySkipBufferHole=function(a){for(var b=this.config,c=this.hls,d=this.media,e=d.currentTime,f=0,g=0;g<d.buffered.length;g++){var h=d.buffered.start(g);if(e+b.maxBufferHole>=f&&e<h){var i=Math.max(h+$b,d.currentTime+Zb);return db.logger.warn("skipping hole, adjusting currentTime from "+e+" to "+i),this.moved=!0,this.stalled=null,d.currentTime=i,a&&c.trigger(cb.default.ERROR,{type:ab.ErrorTypes.MEDIA_ERROR,details:ab.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+e+" to "+i,frag:a}),i}f=d.buffered.end(g)}return 0},b._tryNudgeBuffer=function(){var a=this.config,b=this.hls,c=this.media,d=c.currentTime,e=(this.nudgeRetry||0)+1;if(this.nudgeRetry=e,e<a.nudgeMaxRetry){var f=d+e*a.nudgeOffset;db.logger.warn("Nudging 'currentTime' from "+d+" to "+f),c.currentTime=f,b.trigger(cb.default.ERROR,{type:ab.ErrorTypes.MEDIA_ERROR,details:ab.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else db.logger.error("Playhead still not moving while enough data buffered @"+d+" after "+a.nudgeMaxRetry+" nudges"),b.trigger(cb.default.ERROR,{type:ab.ErrorTypes.MEDIA_ERROR,details:ab.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},a}(),ac=function(a){function b(b){for(var c,d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];return c=a.call.apply(a,[this,b].concat(e))||this,c._boundTick=void 0,c._tickTimer=null,c._tickInterval=null,c._tickCallCount=0,c._boundTick=c.tick.bind(N(c)),c}O(b,a);var c=b.prototype;return c.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},c.hasInterval=function(){return!!this._tickInterval},c.hasNextTick=function(){return!!this._tickTimer},c.setInterval=function(a){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,a),!0)},c.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},c.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},c.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},c.doTick=function(){},b}(gb),bc={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},cc=function(a){function b(){return a.apply(this,arguments)||this}P(b,a);var c=b.prototype;return c.doTick=function(){},c.startLoad=function(){},c.stopLoad=function(){var a=this.fragCurrent;a&&(a.loader&&a.loader.abort(),this.fragmentTracker.removeFragment(a)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=bc.STOPPED},c._streamEnded=function(a,b){var c=this.fragCurrent,d=this.fragmentTracker;if(!b.live&&c&&!c.backtracked&&c.sn===b.endSN&&!a.nextStart){var e=d.getState(c);return e===Hb.PARTIAL||e===Hb.OK}return!1},c.onMediaSeeking=function(){var a=this.config,b=this.media,c=this.mediaBuffer,d=this.state,e=b?b.currentTime:null,f=Lb.bufferInfo(c||b,e,this.config.maxBufferHole);if(Object(bb.isFiniteNumber)(e)&&db.logger.log("media seeking to "+e.toFixed(3)),d===bc.FRAG_LOADING){var g=this.fragCurrent;if(0===f.len&&g){var h=a.maxFragLookUpTolerance,i=g.start-h,j=g.start+g.duration+h;e<i||e>j?(g.loader&&(db.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),g.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=bc.IDLE):db.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else d===bc.ENDED&&(0===f.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=bc.IDLE);b&&(this.lastCurrentTime=e),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=e),this.tick()},c.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},c.onHandlerDestroying=function(){this.stopLoad(),a.prototype.onHandlerDestroying.call(this)},c.onHandlerDestroyed=function(){this.state=bc.STOPPED,this.fragmentTracker=null},c.computeLivePosition=function(a,b){var c=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*b.targetduration;return a+Math.max(0,b.totalduration-c)},b}(ac),dc=100,ec=function(a){function b(b,c){var d;return d=a.call(this,b,cb.default.MEDIA_ATTACHED,cb.default.MEDIA_DETACHING,cb.default.MANIFEST_LOADING,cb.default.MANIFEST_PARSED,cb.default.LEVEL_LOADED,cb.default.LEVELS_UPDATED,cb.default.KEY_LOADED,cb.default.FRAG_LOADED,cb.default.FRAG_LOAD_EMERGENCY_ABORTED,cb.default.FRAG_PARSING_INIT_SEGMENT,cb.default.FRAG_PARSING_DATA,cb.default.FRAG_PARSED,cb.default.ERROR,cb.default.AUDIO_TRACK_SWITCHING,cb.default.AUDIO_TRACK_SWITCHED,cb.default.BUFFER_CREATED,cb.default.BUFFER_APPENDED,cb.default.BUFFER_FLUSHED)||this,d.fragmentTracker=c,d.config=b.config,d.audioCodecSwap=!1,d._state=bc.STOPPED,d.stallReported=!1,d.gapController=null,d.altAudio=!1,d.bitrateTest=!1,d}S(b,a);var c=b.prototype;return c.startLoad=function(a){if(this.levels){var b=this.lastCurrentTime,c=this.hls;if(this.stopLoad(),this.setInterval(dc),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var d=c.startLevel;d===-1&&(c.config.testBandwidth?(d=0,this.bitrateTest=!0):d=c.nextAutoLevel),this.level=c.nextLoadLevel=d,this.loadedmetadata=!1}b>0&&a===-1&&(db.logger.log("override startPosition with lastCurrentTime @"+b.toFixed(3)),a=b),this.state=bc.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=a,this.tick()}else this.forceStartLoad=!0,this.state=bc.STOPPED},c.stopLoad=function(){this.forceStartLoad=!1,a.prototype.stopLoad.call(this)},c.doTick=function(){switch(this.state){case bc.BUFFER_FLUSHING:this.fragLoadError=0;break;case bc.IDLE:this._doTickIdle();break;case bc.WAITING_LEVEL:var a=this.levels[this.level];a&&a.details&&(this.state=bc.IDLE);break;case bc.FRAG_LOADING_WAITING_RETRY:var b=window.performance.now(),c=this.retryDate;(!c||b>=c||this.media&&this.media.seeking)&&(db.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=bc.IDLE);break;case bc.ERROR:case bc.STOPPED:case bc.FRAG_LOADING:case bc.PARSING:case bc.PARSED:case bc.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},c._doTickIdle=function(){var a=this.hls,b=a.config,c=this.media;if(void 0!==this.levelLastLoaded&&(c||!this.startFragRequested&&b.startFragPrefetch)){var d;d=this.loadedmetadata?c.currentTime:this.nextLoadPosition;var e=a.nextLoadLevel,f=this.levels[e];if(f){var g,h=f.bitrate;g=h?Math.max(8*b.maxBufferSize/h,b.maxBufferLength):b.maxBufferLength,g=Math.min(g,b.maxMaxBufferLength);var i=d<b.maxBufferHole?Math.max(Yb,b.maxBufferHole):b.maxBufferHole,j=Lb.bufferInfo(this.mediaBuffer?this.mediaBuffer:c,d,i),k=j.len;if(!(k>=g)){db.logger.trace("buffer length of "+k.toFixed(3)+" is below max of "+g.toFixed(3)+". checking for more payload ..."),this.level=a.nextLoadLevel=e;var l=f.details;if(!l||l.live&&this.levelLastLoaded!==e)return void(this.state=bc.WAITING_LEVEL);if(this._streamEnded(j,l)){var m={};return this.altAudio&&(m.type="video"),this.hls.trigger(cb.default.BUFFER_EOS,m),void(this.state=bc.ENDED)}this._fetchPayloadOrEos(d,j,l)}}}},c._fetchPayloadOrEos=function(a,b,c){var d=this.fragPrevious,e=(this.level,c.fragments),f=e.length;if(0!==f){var g,h=e[0].start,i=e[f-1].start+e[f-1].duration,j=b.end;if(c.initSegment&&!c.initSegment.data)g=c.initSegment;else if(c.live){var k=this.config.initialLiveManifestSize;if(f<k)return void db.logger.warn("Can not start playback of a level, reason: not enough fragments "+f+" < "+k);if(g=this._ensureFragmentAtLivePoint(c,j,h,i,d,e),null===g)return}else j<h&&(g=e[0]);g||(g=this._findFragment(h,d,f,e,j,i,c)),g&&(g.encrypted?this._loadKey(g,c):this._loadFragment(g,c,a,j))}},c._ensureFragmentAtLivePoint=function(a,b,c,d,e,f){var g,h=this.hls.config,i=this.media,j=1/0;if(void 0!==h.liveMaxLatencyDuration?j=h.liveMaxLatencyDuration:Object(bb.isFiniteNumber)(h.liveMaxLatencyDurationCount)&&(j=h.liveMaxLatencyDurationCount*a.targetduration),b<Math.max(c-h.maxFragLookUpTolerance,d-j)){var k=this.liveSyncPosition=this.computeLivePosition(c,a);b=k,i&&!i.paused&&i.readyState&&i.duration>k&&k>i.currentTime&&(db.logger.log("buffer end: "+b.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+k.toFixed(3)),i.currentTime=k),this.nextLoadPosition=k}if(a.PTSKnown&&b>d&&i&&i.readyState)return null;if(this.startFragRequested&&!a.PTSKnown&&e)if(a.hasProgramDateTime)db.logger.log("live playlist, switching playlist, load frag with same PDT: "+e.programDateTime),g=J(f,e.endProgramDateTime,h.maxFragLookUpTolerance);else{var l=e.sn+1;if(l>=a.startSN&&l<=a.endSN){var m=f[l-a.startSN];e.cc===m.cc&&(g=m,db.logger.log("live playlist, switching playlist, load frag with next SN: "+g.sn))}g||(g=Kb.search(f,function(a){return e.cc-a.cc}),g&&db.logger.log("live playlist, switching playlist, load frag with same CC: "+g.sn))}return g},c._findFragment=function(a,b,c,d,e,f,g){var h,i=this.hls.config;if(e<f){var j=e>f-i.maxFragLookUpTolerance?0:i.maxFragLookUpTolerance;h=K(b,d,e,j)}else h=d[c-1];if(h){var k=h.sn-g.startSN,l=b&&h.level===b.level,m=d[k-1],n=d[k+1];if(b&&h.sn===b.sn)if(l&&!h.backtracked)if(h.sn<g.endSN){var o=b.deltaPTS;o&&o>i.maxBufferHole&&b.dropped&&k?(h=m,db.logger.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(h=n,db.logger.log("Re-loading fragment with SN: "+h.sn))}else h=null;else h.backtracked&&(n&&n.backtracked?(db.logger.warn("Already backtracked from fragment "+n.sn+", will not backtrack to fragment "+h.sn+". Loading fragment "+n.sn),h=n):(db.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),h.dropped=0,m?(h=m,h.backtracked=!0):k&&(h=null)))}return h},c._loadKey=function(a,b){db.logger.log("Loading key for "+a.sn+" of ["+b.startSN+" ,"+b.endSN+"],level "+this.level),this.state=bc.KEY_LOADING,this.hls.trigger(cb.default.KEY_LOADING,{frag:a})},c._loadFragment=function(a,b,c,d){var e=this.fragmentTracker.getState(a);this.fragCurrent=a,"initSegment"!==a.sn&&(this.startFragRequested=!0),Object(bb.isFiniteNumber)(a.sn)&&!a.bitrateTest&&(this.nextLoadPosition=a.start+a.duration),a.backtracked||e===Hb.NOT_LOADED||e===Hb.PARTIAL?(a.autoLevel=this.hls.autoLevelEnabled,a.bitrateTest=this.bitrateTest,db.logger.log("Loading "+a.sn+" of ["+b.startSN+" ,"+b.endSN+"],level "+this.level+", currentTime:"+c.toFixed(3)+",bufferEnd:"+d.toFixed(3)),this.hls.trigger(cb.default.FRAG_LOADING,{frag:a}),this.demuxer||(this.demuxer=new Ub(this.hls,"main")),this.state=bc.FRAG_LOADING):e===Hb.APPENDING&&this._reduceMaxBufferLength(a.duration)&&this.fragmentTracker.removeFragment(a)},c.getBufferedFrag=function(a){return this.fragmentTracker.getBufferedFrag(a,hb.MAIN)},c.followingBufferedFrag=function(a){return a?this.getBufferedFrag(a.endPTS+.5):null},c._checkFragmentChanged=function(){var a,b,c=this.media;if(c&&c.readyState&&c.seeking===!1&&(b=c.currentTime,
b>this.lastCurrentTime&&(this.lastCurrentTime=b),Lb.isBuffered(c,b)?a=this.getBufferedFrag(b):Lb.isBuffered(c,b+.1)&&(a=this.getBufferedFrag(b+.1)),a)){var d=a;if(d!==this.fragPlaying){this.hls.trigger(cb.default.FRAG_CHANGED,{frag:d});var e=d.level;this.fragPlaying&&this.fragPlaying.level===e||this.hls.trigger(cb.default.LEVEL_SWITCHED,{level:e}),this.fragPlaying=d}}},c.immediateLevelSwitch=function(){if(db.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var a,b=this.media;b?(a=b.paused,b.pause()):a=!0,this.previouslyPaused=a}var c=this.fragCurrent;c&&c.loader&&c.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},c.immediateLevelSwitchEnd=function(){var a=this.media;a&&a.buffered.length&&(this.immediateSwitch=!1,Lb.isBuffered(a,a.currentTime)&&(a.currentTime-=1e-4),this.previouslyPaused||a.play())},c.nextLevelSwitch=function(){var a=this.media;if(a&&a.readyState){var b,c,d;if(c=this.getBufferedFrag(a.currentTime),c&&c.startPTS>1&&this.flushMainBuffer(0,c.startPTS-1),a.paused)b=0;else{var e=this.hls.nextLoadLevel,f=this.levels[e],g=this.fragLastKbps;b=g&&this.fragCurrent?this.fragCurrent.duration*f.bitrate/(1e3*g)+1:0}if(d=this.getBufferedFrag(a.currentTime+b),d&&(d=this.followingBufferedFrag(d))){var h=this.fragCurrent;h&&h.loader&&h.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(d.maxStartPTS,Number.POSITIVE_INFINITY)}}},c.flushMainBuffer=function(a,b){this.state=bc.BUFFER_FLUSHING;var c={startOffset:a,endOffset:b};this.altAudio&&(c.type="video"),this.hls.trigger(cb.default.BUFFER_FLUSHING,c)},c.onMediaAttached=function(a){var b=this.media=this.mediaBuffer=a.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),b.addEventListener("seeking",this.onvseeking),b.addEventListener("seeked",this.onvseeked),b.addEventListener("ended",this.onvended);var c=this.config;this.levels&&c.autoStartLoad&&this.hls.startLoad(c.startPosition),this.gapController=new _b(c,b,this.fragmentTracker,this.hls)},c.onMediaDetaching=function(){var a=this.media;a&&a.ended&&(db.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var b=this.levels;b&&b.forEach(function(a){a.details&&a.details.fragments.forEach(function(a){a.backtracked=void 0})}),a&&(a.removeEventListener("seeking",this.onvseeking),a.removeEventListener("seeked",this.onvseeked),a.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},c.onMediaSeeked=function(){var a=this.media,b=a?a.currentTime:void 0;Object(bb.isFiniteNumber)(b)&&db.logger.log("media seeked to "+b.toFixed(3)),this.tick()},c.onManifestLoading=function(){db.logger.log("trigger BUFFER_RESET"),this.hls.trigger(cb.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},c.onManifestParsed=function(a){var b,c=!1,d=!1;a.levels.forEach(function(a){b=a.audioCodec,b&&(b.indexOf("mp4a.40.2")!==-1&&(c=!0),b.indexOf("mp4a.40.5")!==-1&&(d=!0))}),this.audioCodecSwitch=c&&d,this.audioCodecSwitch&&db.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=a.altAudio,this.levels=a.levels,this.startFragRequested=!1;var e=this.config;(e.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(e.startPosition)},c.onLevelLoaded=function(a){var b=a.details,c=a.level,d=this.levels[this.levelLastLoaded],e=this.levels[c],f=b.totalduration,g=0;if(db.logger.log("level "+c+" loaded ["+b.startSN+","+b.endSN+"],duration:"+f),b.live){var h=e.details;h&&b.fragments.length>0?(w(h,b),g=b.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(g,h),b.PTSKnown&&Object(bb.isFiniteNumber)(g)?db.logger.log("live playlist sliding:"+g.toFixed(3)):(db.logger.log("live playlist - outdated PTS, unknown sliding"),G(this.fragPrevious,d,b))):(db.logger.log("live playlist - first load, unknown sliding"),b.PTSKnown=!1,G(this.fragPrevious,d,b))}else b.PTSKnown=!1;if(e.details=b,this.levelLastLoaded=c,this.hls.trigger(cb.default.LEVEL_UPDATED,{details:b,level:c}),this.startFragRequested===!1){if(this.startPosition===-1||this.lastCurrentTime===-1){var i=b.startTimeOffset;Object(bb.isFiniteNumber)(i)?(i<0&&(db.logger.log("negative start time offset "+i+", count from end of last fragment"),i=g+f+i),db.logger.log("start time offset found in playlist, adjust startPosition to "+i),this.startPosition=i):b.live?(this.startPosition=this.computeLivePosition(g,b),db.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===bc.WAITING_LEVEL&&(this.state=bc.IDLE),this.tick()},c.onKeyLoaded=function(){this.state===bc.KEY_LOADING&&(this.state=bc.IDLE,this.tick())},c.onFragLoaded=function(a){var b=this.fragCurrent,c=this.hls,d=this.levels,e=this.media,f=a.frag;if(this.state===bc.FRAG_LOADING&&b&&"main"===f.type&&f.level===b.level&&f.sn===b.sn){var g=a.stats,h=d[b.level],i=h.details;if(this.bitrateTest=!1,this.stats=g,db.logger.log("Loaded "+b.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+b.level),f.bitrateTest&&c.nextLoadLevel)this.state=bc.IDLE,this.startFragRequested=!1,g.tparsed=g.tbuffered=window.performance.now(),c.trigger(cb.default.FRAG_BUFFERED,{stats:g,frag:b,id:"main"}),this.tick();else if("initSegment"===f.sn)this.state=bc.IDLE,g.tparsed=g.tbuffered=window.performance.now(),i.initSegment.data=a.payload,c.trigger(cb.default.FRAG_BUFFERED,{stats:g,frag:b,id:"main"}),this.tick();else{db.logger.log("Parsing "+b.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+b.level+", cc "+b.cc),this.state=bc.PARSING,this.pendingBuffering=!0,this.appended=!1,f.bitrateTest&&(f.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:f}));var j=!(e&&e.seeking)&&(i.PTSKnown||!i.live),k=i.initSegment?i.initSegment.data:[],l=this._getAudioCodec(h),m=this.demuxer=this.demuxer||new Ub(this.hls,"main");m.push(a.payload,k,l,h.videoCodec,b,i.totalduration,j)}}this.fragLoadError=0},c.onFragParsingInitSegment=function(a){var b=this.fragCurrent,c=a.frag;if(b&&"main"===a.id&&c.sn===b.sn&&c.level===b.level&&this.state===bc.PARSING){var d,e,f=a.tracks;if(f.audio&&this.altAudio&&delete f.audio,e=f.audio){var g=this.levels[this.level].audioCodec,h=navigator.userAgent.toLowerCase();g&&this.audioCodecSwap&&(db.logger.log("swapping playlist audio codec"),g=g.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==e.metadata.channelCount&&h.indexOf("firefox")===-1&&(g="mp4a.40.5"),h.indexOf("android")!==-1&&"audio/mpeg"!==e.container&&(g="mp4a.40.2",db.logger.log("Android: force audio codec to "+g)),e.levelCodec=g,e.id=a.id}e=f.video,e&&(e.levelCodec=this.levels[this.level].videoCodec,e.id=a.id),this.hls.trigger(cb.default.BUFFER_CODECS,f);for(d in f){e=f[d],db.logger.log("main track:"+d+",container:"+e.container+",codecs[level/parsed]=["+e.levelCodec+"/"+e.codec+"]");var i=e.initSegment;i&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(cb.default.BUFFER_APPENDING,{type:d,data:i,parent:"main",content:"initSegment"}))}this.tick()}},c.onFragParsingData=function(a){var b=this,c=this.fragCurrent,d=a.frag;if(c&&"main"===a.id&&d.sn===c.sn&&d.level===c.level&&("audio"!==a.type||!this.altAudio)&&this.state===bc.PARSING){var e=this.levels[this.level],f=c;if(Object(bb.isFiniteNumber)(a.endPTS)||(a.endPTS=a.startPTS+c.duration,a.endDTS=a.startDTS+c.duration),a.hasAudio===!0&&f.addElementaryStream(ib.AUDIO),a.hasVideo===!0&&f.addElementaryStream(ib.VIDEO),db.logger.log("Parsed "+a.type+",PTS:["+a.startPTS.toFixed(3)+","+a.endPTS.toFixed(3)+"],DTS:["+a.startDTS.toFixed(3)+"/"+a.endDTS.toFixed(3)+"],nb:"+a.nb+",dropped:"+(a.dropped||0)),"video"===a.type)if(f.dropped=a.dropped,f.dropped)if(f.backtracked)db.logger.warn("Already backtracked on this fragment, appending with the gap",f.sn);else{var g=e.details;if(!g||f.sn!==g.startSN)return db.logger.warn("missing video frame(s), backtracking fragment",f.sn),this.fragmentTracker.removeFragment(f),f.backtracked=!0,this.nextLoadPosition=a.startPTS,this.state=bc.IDLE,this.fragPrevious=f,void this.tick();db.logger.warn("missing video frame(s) on first frag, appending with gap",f.sn)}else f.backtracked=!1;var h=v(e.details,f,a.startPTS,a.endPTS,a.startDTS,a.endDTS),i=this.hls;i.trigger(cb.default.LEVEL_PTS_UPDATED,{details:e.details,level:this.level,drift:h,type:a.type,start:a.startPTS,end:a.endPTS}),[a.data1,a.data2].forEach(function(c){c&&c.length&&b.state===bc.PARSING&&(b.appended=!0,b.pendingBuffering=!0,i.trigger(cb.default.BUFFER_APPENDING,{type:a.type,data:c,parent:"main",content:"data"}))}),this.tick()}},c.onFragParsed=function(a){var b=this.fragCurrent,c=a.frag;b&&"main"===a.id&&c.sn===b.sn&&c.level===b.level&&this.state===bc.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=bc.PARSED,this._checkAppendedParsed())},c.onAudioTrackSwitching=function(a){var b=!!a.url,c=a.id;if(!b){if(this.mediaBuffer!==this.media){db.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var d=this.fragCurrent;d.loader&&(db.logger.log("switching to main audio track, cancel main fragment load"),d.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=bc.IDLE}var e=this.hls;e.trigger(cb.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),e.trigger(cb.default.AUDIO_TRACK_SWITCHED,{id:c}),this.altAudio=!1}},c.onAudioTrackSwitched=function(a){var b=a.id,c=!!this.hls.audioTracks[b].url;if(c){var d=this.videoBuffer;d&&this.mediaBuffer!==d&&(db.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=d)}this.altAudio=c,this.tick()},c.onBufferCreated=function(a){var b,c,d=a.tracks,e=!1;for(var f in d){var g=d[f];"main"===g.id?(c=f,b=g,"video"===f&&(this.videoBuffer=d[f].buffer)):e=!0}e&&b?(db.logger.log("alternate track found, use "+c+".buffered to schedule main fragment loading"),this.mediaBuffer=b.buffer):this.mediaBuffer=this.media},c.onBufferAppended=function(a){if("main"===a.parent){var b=this.state;b!==bc.PARSING&&b!==bc.PARSED||(this.pendingBuffering=a.pending>0,this._checkAppendedParsed())}},c._checkAppendedParsed=function(){if(!(this.state!==bc.PARSED||this.appended&&this.pendingBuffering)){var a=this.fragCurrent;if(a){var b=this.mediaBuffer?this.mediaBuffer:this.media;db.logger.log("main buffered : "+Wb.toString(b.buffered)),this.fragPrevious=a;var c=this.stats;c.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*c.total/(c.tbuffered-c.tfirst)),this.hls.trigger(cb.default.FRAG_BUFFERED,{stats:c,frag:a,id:"main"}),this.state=bc.IDLE}(this.loadedmetadata||this.startPosition<=0)&&this.tick()}},c.onError=function(a){var b=a.frag||this.fragCurrent;if(!b||"main"===b.type){var c=!!this.media&&Lb.isBuffered(this.media,this.media.currentTime)&&Lb.isBuffered(this.media,this.media.currentTime+.5);switch(a.details){case ab.ErrorDetails.FRAG_LOAD_ERROR:case ab.ErrorDetails.FRAG_LOAD_TIMEOUT:case ab.ErrorDetails.KEY_LOAD_ERROR:case ab.ErrorDetails.KEY_LOAD_TIMEOUT:if(!a.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var d=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);db.logger.warn("mediaController: frag loading failed, retry in "+d+" ms"),this.retryDate=window.performance.now()+d,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=bc.FRAG_LOADING_WAITING_RETRY}else db.logger.error("mediaController: "+a.details+" reaches max retry, redispatch as fatal ..."),a.fatal=!0,this.state=bc.ERROR;break;case ab.ErrorDetails.LEVEL_LOAD_ERROR:case ab.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==bc.ERROR&&(a.fatal?(this.state=bc.ERROR,db.logger.warn("streamController: "+a.details+",switch to "+this.state+" state ...")):a.levelRetry||this.state!==bc.WAITING_LEVEL||(this.state=bc.IDLE));break;case ab.ErrorDetails.BUFFER_FULL_ERROR:"main"!==a.parent||this.state!==bc.PARSING&&this.state!==bc.PARSED||(c?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=bc.IDLE):(db.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},c._reduceMaxBufferLength=function(a){var b=this.config;return b.maxMaxBufferLength>=a&&(b.maxMaxBufferLength/=2,db.logger.warn("main:reduce max buffer length to "+b.maxMaxBufferLength+"s"),!0)},c._checkBuffer=function(){var a=this.media;if(a&&0!==a.readyState){var b=this.mediaBuffer?this.mediaBuffer:a,c=b.buffered;!this.loadedmetadata&&c.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,c)}},c.onFragLoadEmergencyAborted=function(){this.state=bc.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},c.onBufferFlushed=function(){var a=this.mediaBuffer?this.mediaBuffer:this.media;a&&this.fragmentTracker.detectEvictedFragments(ib.VIDEO,a.buffered),this.state=bc.IDLE,this.fragPrevious=null},c.onLevelsUpdated=function(a){this.levels=a.levels},c.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},c._seekToStartPos=function(){var a=this.media,b=this.startPosition,c=a.currentTime;if(c!==b&&b>=0){if(a.seeking)return void db.logger.log("could not seek to "+b+", already seeking at "+c);db.logger.log("seek to target start position "+b+" from current time "+c+". ready state "+a.readyState),a.currentTime=b}},c._getAudioCodec=function(a){var b=this.config.defaultAudioCodec||a.audioCodec;return this.audioCodecSwap&&(db.logger.log("swapping playlist audio codec"),b&&(b=b.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5")),b},R(b,[{key:"state",set:function(a){if(this.state!==a){var b=this.state;this._state=a,db.logger.log("main stream-controller: "+b+"->"+a),this.hls.trigger(cb.default.STREAM_STATE_TRANSITION,{previousState:b,nextState:a})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var a=this.media;if(a){var b=this.getBufferedFrag(a.currentTime);if(b)return b.level}return-1}},{key:"nextBufferedFrag",get:function(){var a=this.media;return a?this.followingBufferedFrag(this.getBufferedFrag(a.currentTime)):null}},{key:"nextLevel",get:function(){var a=this.nextBufferedFrag;return a?a.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(a){this._liveSyncPosition=a}}]),b}(cc),fc=ec,gc=function(a){function b(b){var c;return c=a.call(this,b,cb.default.MANIFEST_LOADED,cb.default.LEVEL_LOADED,cb.default.AUDIO_TRACK_SWITCHED,cb.default.FRAG_LOADED,cb.default.ERROR)||this,c.canload=!1,c.currentLevelIndex=null,c.manualLevelIndex=-1,c.timer=null,lb=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),c}V(b,a);var c=b.prototype;return c.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},c.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},c.startLoad=function(){var a=this._levels;this.canload=!0,this.levelRetryCount=0,a&&a.forEach(function(a){a.loadError=0;var b=a.details;b&&b.live&&(a.details=void 0)}),null!==this.timer&&this.loadLevel()},c.stopLoad=function(){this.canload=!1},c.onManifestLoaded=function(a){var b,c=[],d=[],e={},f=null,g=!1,h=!1;if(a.levels.forEach(function(a){var b=a.attrs;a.loadError=0,a.fragmentError=!1,g=g||!!a.videoCodec,h=h||!!a.audioCodec,lb&&a.audioCodec&&a.audioCodec.indexOf("mp4a.40.34")!==-1&&(a.audioCodec=void 0),f=e[a.bitrate],f?f.url.push(a.url):(a.url=[a.url],a.urlId=0,e[a.bitrate]=a,c.push(a)),b&&(b.AUDIO&&(h=!0,t(f||a,"audio",b.AUDIO)),b.SUBTITLES&&t(f||a,"text",b.SUBTITLES))}),g&&h&&(c=c.filter(function(a){var b=a.videoCodec;return!!b})),c=c.filter(function(a){var b=a.audioCodec,c=a.videoCodec;return(!b||k(b,"audio"))&&(!c||k(c,"video"))}),a.audioTracks&&(d=a.audioTracks.filter(function(a){return!a.audioCodec||k(a.audioCodec,"audio")}),d.forEach(function(a,b){a.id=b})),c.length>0){b=c[0].bitrate,c.sort(function(a,b){return a.bitrate-b.bitrate}),this._levels=c;for(var i=0;i<c.length;i++)if(c[i].bitrate===b){this._firstLevel=i,db.logger.log("manifest loaded,"+c.length+" level(s) found, first bitrate:"+b);break}this.hls.trigger(cb.default.MANIFEST_PARSED,{levels:c,audioTracks:d,firstLevel:this._firstLevel,stats:a.stats,audio:h,video:g,altAudio:d.some(function(a){return!!a.url})})}else this.hls.trigger(cb.default.ERROR,{type:ab.ErrorTypes.MEDIA_ERROR,details:ab.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},c.setLevelInternal=function(a){var b=this._levels,c=this.hls;if(a>=0&&a<b.length){if(this.clearTimer(),this.currentLevelIndex!==a){db.logger.log("switching to level "+a),this.currentLevelIndex=a;var d=b[a];d.level=a,c.trigger(cb.default.LEVEL_SWITCHING,d)}var e=b[a],f=e.details;if(!f||f.live){var g=e.urlId;c.trigger(cb.default.LEVEL_LOADING,{url:e.url[g],level:a,id:g})}}else c.trigger(cb.default.ERROR,{type:ab.ErrorTypes.OTHER_ERROR,details:ab.ErrorDetails.LEVEL_SWITCH_ERROR,level:a,fatal:!1,reason:"invalid level idx"})},c.onError=function(a){if(a.fatal)return void(a.type===ab.ErrorTypes.NETWORK_ERROR&&this.clearTimer());var b,c=!1,d=!1;switch(a.details){case ab.ErrorDetails.FRAG_LOAD_ERROR:case ab.ErrorDetails.FRAG_LOAD_TIMEOUT:case ab.ErrorDetails.KEY_LOAD_ERROR:case ab.ErrorDetails.KEY_LOAD_TIMEOUT:b=a.frag.level,d=!0;break;case ab.ErrorDetails.LEVEL_LOAD_ERROR:case ab.ErrorDetails.LEVEL_LOAD_TIMEOUT:b=a.context.level,c=!0;break;case ab.ErrorDetails.REMUX_ALLOC_ERROR:b=a.level,c=!0}void 0!==b&&this.recoverLevel(a,b,c,d)},c.recoverLevel=function(a,b,c,d){var e,f,g,h=this,i=this.hls.config,j=a.details,k=this._levels[b];if(k.loadError++,k.fragmentError=d,c){if(!(this.levelRetryCount+1<=i.levelLoadingMaxRetry))return db.logger.error("level controller, cannot recover from "+j+" error"),this.currentLevelIndex=null,this.clearTimer(),void(a.fatal=!0);f=Math.min(Math.pow(2,this.levelRetryCount)*i.levelLoadingRetryDelay,i.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return h.loadLevel()},f),a.levelRetry=!0,this.levelRetryCount++,db.logger.warn("level controller, "+j+", retry in "+f+" ms, current retry count is "+this.levelRetryCount)}(c||d)&&(e=k.url.length,e>1&&k.loadError<e?(k.urlId=(k.urlId+1)%e,k.details=void 0,db.logger.warn("level controller, "+j+" for level "+b+": switching to redundant URL-id "+k.urlId)):this.manualLevelIndex===-1?(g=0===b?this._levels.length-1:b-1,db.logger.warn("level controller, "+j+": switch to "+g),this.hls.nextAutoLevel=this.currentLevelIndex=g):d&&(db.logger.warn("level controller, "+j+": reload a fragment"),this.currentLevelIndex=null))},c.onFragLoaded=function(a){var b=a.frag;if(void 0!==b&&"main"===b.type){var c=this._levels[b.level];void 0!==c&&(c.fragmentError=!1,c.loadError=0,this.levelRetryCount=0)}},c.onLevelLoaded=function(a){var b=this,c=a.level,d=a.details;if(c===this.currentLevelIndex){var e=this._levels[c];if(e.fragmentError||(e.loadError=0,this.levelRetryCount=0),d.live){var f=A(e.details,d,a.stats.trequest);db.logger.log("live playlist, reload in "+Math.round(f)+" ms"),this.timer=setTimeout(function(){return b.loadLevel()},f)}else this.clearTimer()}},c.onAudioTrackSwitched=function(a){var b=this.hls.audioTracks[a.id].groupId,c=this.hls.levels[this.currentLevelIndex];if(c&&c.audioGroupIds){for(var d=-1,e=0;e<c.audioGroupIds.length;e++)if(c.audioGroupIds[e]===b){d=e;break}d!==c.urlId&&(c.urlId=d,this.startLoad())}},c.loadLevel=function(){if(db.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var a=this._levels[this.currentLevelIndex];if("object"==typeof a&&a.url.length>0){var b=this.currentLevelIndex,c=a.urlId,d=a.url[c];db.logger.log("Attempt loading level index "+b+" with URL-id "+c),this.hls.trigger(cb.default.LEVEL_LOADING,{url:d,level:b,id:c})}}},c.removeLevel=function(a,b){var c=this.levels.filter(function(c,d){return d!==a||c.url.length>1&&void 0!==b&&(c.url=c.url.filter(function(a,c){return c!==b}),c.urlId=0,!0)}).map(function(a,b){var c=a.details;return c&&c.fragments&&c.fragments.forEach(function(a){a.level=b}),a});this._levels=c,this.hls.trigger(cb.default.LEVELS_UPDATED,{levels:c})},U(b,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(a){var b=this._levels;b&&(a=Math.min(a,b.length-1),this.currentLevelIndex===a&&b[a].details||this.setLevelInternal(a))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(a){this.manualLevelIndex=a,void 0===this._startLevel&&(this._startLevel=a),a!==-1&&(this.level=a)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(a){this._firstLevel=a}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var a=this.hls.config.startLevel;return void 0!==a?a:this._firstLevel}return this._startLevel},set:function(a){this._startLevel=a}},{key:"nextLoadLevel",get:function(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(a){this.level=a,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=a)}}]),b}(gb),hc=c("./src/demux/id3.js"),ic=function(a){function b(b){var c;return c=a.call(this,b,cb.default.MEDIA_ATTACHED,cb.default.MEDIA_DETACHING,cb.default.FRAG_PARSING_METADATA,cb.default.LIVE_BACK_BUFFER_REACHED)||this,c.id3Track=void 0,c.media=void 0,c}Z(b,a);var c=b.prototype;return c.destroy=function(){gb.prototype.destroy.call(this)},c.onMediaAttached=function(a){this.media=a.media,!this.media},c.onMediaDetaching=function(){X(this.id3Track),this.id3Track=void 0,this.media=void 0},c.getID3Track=function(a){for(var b=0;b<a.length;b++){var c=a[b];if("metadata"===c.kind&&"id3"===c.label)return W(c,this.media),c}return this.media.addTextTrack("metadata","id3")},c.onFragParsingMetadata=function(a){var b=a.frag,c=a.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var d=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,e=0;e<c.length;e++){var f=hc.default.getID3Frames(c[e].data);if(f){var g=Math.max(c[e].pts,0),h=e<c.length-1?c[e+1].pts:b.endPTS;h||(h=b.start+b.duration),g===h?h+=1e-4:g>h&&(db.logger.warn("detected an id3 sample with endTime < startTime, adjusting endTime to (startTime + 0.25)"),h=g+.25);for(var i=0;i<f.length;i++){var j=f[i];if(!hc.default.isTimeStampFrame(j)){var k=new d(g,h,"");k.value=j,this.id3Track.addCue(k)}}}}},c.onLiveBackBufferReached=function(a){var b=a.bufferEnd,c=this.id3Track;if(c&&c.cues&&c.cues.length){var d=Y(c.cues,b);if(d)for(;c.cues[0]!==d;)c.removeCue(c.cues[0])}},b}(gb),jc=ic,kc=function(){function a(a){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=a?Math.exp(Math.log(.5)/a):0,this.estimate_=0,this.totalWeight_=0}var b=a.prototype;return b.sample=function(a,b){var c=Math.pow(this.alpha_,a);this.estimate_=b*(1-c)+c*this.estimate_,this.totalWeight_+=a},b.getTotalWeight=function(){return this.totalWeight_},b.getEstimate=function(){if(this.alpha_){var a=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/a}return this.estimate_},a}(),lc=kc,mc=function(){function a(a,b,c,d){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=a,this.defaultEstimate_=d,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new lc(b),this.fast_=new lc(c)}var b=a.prototype;return b.sample=function(a,b){a=Math.max(a,this.minDelayMs_);var c=8*b,d=a/1e3,e=c/d;this.fast_.sample(d,e),this.slow_.sample(d,e)},b.canEstimate=function(){var a=this.fast_;return a&&a.getTotalWeight()>=this.minWeight_},b.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},b.destroy=function(){},a}(),nc=mc,oc=window,pc=oc.performance,qc=function(a){function b(b){var c;return c=a.call(this,b,cb.default.FRAG_LOADING,cb.default.FRAG_LOADED,cb.default.FRAG_BUFFERED,cb.default.ERROR)||this,c.lastLoadedFragLevel=0,c._nextAutoLevel=-1,c.hls=b,c.timer=null,c._bwEstimator=null,c.onCheck=c._abandonRulesCheck.bind(ba(c)),c}ca(b,a);var c=b.prototype;return c.destroy=function(){this.clearTimer(),gb.prototype.destroy.call(this)},c.onFragLoading=function(a){var b=a.frag;if("main"===b.type&&(this.timer||(this.fragCurrent=b,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var c,d,e=this.hls,f=e.config,g=b.level,h=e.levels[g].details.live;h?(c=f.abrEwmaFastLive,d=f.abrEwmaSlowLive):(c=f.abrEwmaFastVoD,d=f.abrEwmaSlowVoD),this._bwEstimator=new nc(e,d,c,f.abrEwmaDefaultEstimate)}},c._abandonRulesCheck=function(){var a=this.hls,b=a.media,c=this.fragCurrent;if(c){var d=c.loader;if(!d||d.stats&&d.stats.aborted)return db.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var e=d.stats;if(b&&e&&(!b.paused&&0!==b.playbackRate||!b.readyState)&&c.autoLevel&&c.level){var f=pc.now()-e.trequest,g=Math.abs(b.playbackRate);if(f>500*c.duration/g){var h=a.levels,i=Math.max(1,e.bw?e.bw/8:1e3*e.loaded/f),j=h[c.level];if(!j)return;var k=j.realBitrate?Math.max(j.realBitrate,j.bitrate):j.bitrate,l=e.total?e.total:Math.max(e.loaded,Math.round(c.duration*k/8)),m=b.currentTime,n=(l-e.loaded)/i,o=(Lb.bufferInfo(b,m,a.config.maxBufferHole).end-m)/g;if(o<2*c.duration/g&&n>o){var p,q,r=a.minAutoLevel;for(q=c.level-1;q>r;q--){var s=h[q].realBitrate?Math.max(h[q].realBitrate,h[q].bitrate):h[q].bitrate,t=c.duration*s/(6.4*i);if(t<o)break}p<n&&(db.logger.warn("loading too slow, abort fragment loading and switch to level "+q+":fragLoadedDelay["+q+"]<fragLoadedDelay["+(c.level-1)+"];bufferStarvationDelay:"+p.toFixed(1)+"<"+n.toFixed(1)+":"+o.toFixed(1)),a.nextLoadLevel=q,this._bwEstimator.sample(f,e.loaded),d.abort(),this.clearTimer(),a.trigger(cb.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:c,stats:e}))}}}}},c.onFragLoaded=function(a){var b=a.frag;if("main"===b.type&&Object(bb.isFiniteNumber)(b.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=b.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var c=this.hls.levels[b.level],d=(c.loaded?c.loaded.bytes:0)+a.stats.loaded,e=(c.loaded?c.loaded.duration:0)+a.frag.duration;c.loaded={bytes:d,duration:e},c.realBitrate=Math.round(8*d/e)}if(a.frag.bitrateTest){var f=a.stats;f.tparsed=f.tbuffered=f.tload,this.onFragBuffered(a)}}},c.onFragBuffered=function(a){var b=a.stats,c=a.frag;if(b.aborted!==!0&&"main"===c.type&&Object(bb.isFiniteNumber)(c.sn)&&(!c.bitrateTest||b.tload===b.tbuffered)){var d=b.tparsed-b.trequest;db.logger.log("latency/loading/parsing/append/kbps:"+Math.round(b.tfirst-b.trequest)+"/"+Math.round(b.tload-b.tfirst)+"/"+Math.round(b.tparsed-b.tload)+"/"+Math.round(b.tbuffered-b.tparsed)+"/"+Math.round(8*b.loaded/(b.tbuffered-b.trequest))),this._bwEstimator.sample(d,b.loaded),b.bwEstimate=this._bwEstimator.getEstimate(),c.bitrateTest?this.bitrateTestDelay=d/1e3:this.bitrateTestDelay=0}},c.onError=function(a){switch(a.details){case ab.ErrorDetails.FRAG_LOAD_ERROR:case ab.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},c.clearTimer=function(){clearInterval(this.timer),this.timer=null},c._findBestLevel=function(a,b,c,d,e,f,g,h,i){for(var j=e;j>=d;j--){var k=i[j];if(k){var l=k.details,m=l?l.totalduration/l.fragments.length:b,n=!!l&&l.live,o=void 0;o=j<=a?g*c:h*c;var p=i[j].realBitrate?Math.max(i[j].realBitrate,i[j].bitrate):i[j].bitrate,q=p*m/o;if(db.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+j+"/"+Math.round(o)+"/"+p+"/"+m+"/"+f+"/"+q),o>p&&(!q||n&&!this.bitrateTestDelay||q<f))return j}}return-1},aa(b,[{key:"nextAutoLevel",get:function(){var a=this._nextAutoLevel,b=this._bwEstimator;if(!(a===-1||b&&b.canEstimate()))return a;var c=this._nextABRAutoLevel;return a!==-1&&(c=Math.min(a,c)),c},set:function(a){this._nextAutoLevel=a}},{key:"_nextABRAutoLevel",get:function(){var a=this.hls,b=a.maxAutoLevel,c=a.levels,d=a.config,e=a.minAutoLevel,f=a.media,g=this.lastLoadedFragLevel,h=this.fragCurrent?this.fragCurrent.duration:0,i=f?f.currentTime:0,j=f&&0!==f.playbackRate?Math.abs(f.playbackRate):1,k=this._bwEstimator?this._bwEstimator.getEstimate():d.abrEwmaDefaultEstimate,l=(Lb.bufferInfo(f,i,d.maxBufferHole).end-i)/j,m=this._findBestLevel(g,h,k,e,b,l,d.abrBandWidthFactor,d.abrBandWidthUpFactor,c);if(m>=0)return m;db.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var n=h?Math.min(h,d.maxStarvationDelay):d.maxStarvationDelay,o=d.abrBandWidthFactor,p=d.abrBandWidthUpFactor;if(0===l){var q=this.bitrateTestDelay;if(q){var r=h?Math.min(h,d.maxLoadingDelay):d.maxLoadingDelay;n=r-q,db.logger.trace("bitrate test took "+Math.round(1e3*q)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*n)+" ms"),o=p=1}}return m=this._findBestLevel(g,h,k,e,b,l+n,o,p,c),Math.max(m,0)}}]),b}(gb),rc=qc,sc=r(),tc=function(a){function b(b){var c;return c=a.call(this,b,cb.default.MEDIA_ATTACHING,cb.default.MEDIA_DETACHING,cb.default.MANIFEST_PARSED,cb.default.BUFFER_RESET,cb.default.BUFFER_APPENDING,cb.default.BUFFER_CODECS,cb.default.BUFFER_EOS,cb.default.BUFFER_FLUSHING,cb.default.LEVEL_PTS_UPDATED,cb.default.LEVEL_UPDATED)||this,c._msDuration=null,c._levelDuration=null,c._levelTargetDuration=10,c._live=null,c._objectUrl=null,c._needsFlush=!1,c._needsEos=!1,c.config=void 0,c.audioTimestampOffset=void 0,c.bufferCodecEventsExpected=0,c._bufferCodecEventsTotal=0,c.media=null,c.mediaSource=null,c.segments=[],c.parent=void 0,c.appending=!1,c.appended=0,c.appendError=0,c.flushBufferCounter=0,c.tracks={},c.pendingTracks={},c.sourceBuffer={},c.flushRange=[],c._onMediaSourceOpen=function(){db.logger.log("media source opened"),c.hls.trigger(cb.default.MEDIA_ATTACHED,{media:c.media});var a=c.mediaSource;a&&a.removeEventListener("sourceopen",c._onMediaSourceOpen),c.checkPendingTracks()},c._onMediaSourceClose=function(){db.logger.log("media source closed")},c._onMediaSourceEnded=function(){db.logger.log("media source ended")},c._onSBUpdateEnd=function(){if(c.audioTimestampOffset&&c.sourceBuffer.audio){var a=c.sourceBuffer.audio;db.logger.warn("change mpeg audio timestamp offset from "+a.timestampOffset+" to "+c.audioTimestampOffset),a.timestampOffset=c.audioTimestampOffset,delete c.audioTimestampOffset}c._needsFlush&&c.doFlush(),c._needsEos&&c.checkEos(),c.appending=!1;var b=c.parent,d=c.segments.reduce(function(a,c){return c.parent===b?a+1:a},0),e={},f=c.sourceBuffer;for(var g in f){var h=f[g];if(!h)throw Error("handling source buffer update end error: source buffer for "+g+" uninitilized and unable to update buffered TimeRanges.");e[g]=h.buffered}c.hls.trigger(cb.default.BUFFER_APPENDED,{parent:b,pending:d,timeRanges:e}),c._needsFlush||c.doAppending(),c.updateMediaElementDuration(),0===d&&c.flushLiveBackBuffer()},c._onSBUpdateError=function(a){db.logger.error("sourceBuffer error:",a),c.hls.trigger(cb.default.ERROR,{type:ab.ErrorTypes.MEDIA_ERROR,details:ab.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},c.config=b.config,c}da(b,a);var c=b.prototype;return c.destroy=function(){gb.prototype.destroy.call(this)},c.onLevelPtsUpdated=function(a){var b=a.type,c=this.tracks.audio;if("audio"===b&&c&&"audio/mpeg"===c.container){var d=this.sourceBuffer.audio;if(!d)throw Error("Level PTS Updated and source buffer for audio uninitalized");var e=Math.abs(d.timestampOffset-a.start);if(e>.1){var f=d.updating;try{d.abort()}catch(a){db.logger.warn("can not abort audio buffer: "+a)}f?this.audioTimestampOffset=a.start:(db.logger.warn("change mpeg audio timestamp offset from "+d.timestampOffset+" to "+a.start),
d.timestampOffset=a.start)}}},c.onManifestParsed=function(a){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=a.altAudio?2:1,db.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},c.onMediaAttaching=function(a){var b=this.media=a.media;if(b&&sc){var c=this.mediaSource=new sc;c.addEventListener("sourceopen",this._onMediaSourceOpen),c.addEventListener("sourceended",this._onMediaSourceEnded),c.addEventListener("sourceclose",this._onMediaSourceClose),b.src=window.URL.createObjectURL(c),this._objectUrl=b.src}},c.onMediaDetaching=function(){db.logger.log("media source detaching");var a=this.mediaSource;if(a){if("open"===a.readyState)try{a.endOfStream()}catch(a){db.logger.warn("onMediaDetaching:"+a.message+" while calling endOfStream")}a.removeEventListener("sourceopen",this._onMediaSourceOpen),a.removeEventListener("sourceended",this._onMediaSourceEnded),a.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):db.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(cb.default.MEDIA_DETACHED)},c.checkPendingTracks=function(){var a=this.bufferCodecEventsExpected,b=this.pendingTracks,c=Object.keys(b).length;(c&&!a||2===c)&&(this.createSourceBuffers(b),this.pendingTracks={},this.doAppending())},c.onBufferReset=function(){var a=this.sourceBuffer;for(var b in a){var c=a[b];try{c&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(c),c.removeEventListener("updateend",this._onSBUpdateEnd),c.removeEventListener("error",this._onSBUpdateError))}catch(a){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},c.onBufferCodecs=function(a){var b=this;Object.keys(this.sourceBuffer).length||(Object.keys(a).forEach(function(c){b.pendingTracks[c]=a[c]}),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},c.createSourceBuffers=function(a){var b=this.sourceBuffer,c=this.mediaSource;if(!c)throw Error("createSourceBuffers called when mediaSource was null");for(var d in a)if(!b[d]){var e=a[d];if(!e)throw Error("source buffer exists for track "+d+", however track does not");var f=e.levelCodec||e.codec,g=e.container+";codecs="+f;db.logger.log("creating sourceBuffer("+g+")");try{var h=b[d]=c.addSourceBuffer(g);h.addEventListener("updateend",this._onSBUpdateEnd),h.addEventListener("error",this._onSBUpdateError),this.tracks[d]={buffer:h,codec:f,id:e.id,container:e.container,levelCodec:e.levelCodec}}catch(a){db.logger.error("error while trying to add sourceBuffer:"+a.message),this.hls.trigger(cb.default.ERROR,{type:ab.ErrorTypes.MEDIA_ERROR,details:ab.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:a,mimeType:g})}}this.hls.trigger(cb.default.BUFFER_CREATED,{tracks:this.tracks})},c.onBufferAppending=function(a){this._needsFlush||(this.segments?this.segments.push(a):this.segments=[a],this.doAppending())},c.onBufferEos=function(a){for(var b in this.sourceBuffer)if(!a.type||a.type===b){var c=this.sourceBuffer[b];c&&!c.ended&&(c.ended=!0,db.logger.log(b+" sourceBuffer now EOS"))}this.checkEos()},c.checkEos=function(){var a=this.sourceBuffer,b=this.mediaSource;if(!b||"open"!==b.readyState)return void(this._needsEos=!1);for(var c in a){var d=a[c];if(d){if(!d.ended)return;if(d.updating)return void(this._needsEos=!0)}}db.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{b.endOfStream()}catch(a){db.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1},c.onBufferFlushing=function(a){a.type?this.flushRange.push({start:a.startOffset,end:a.endOffset,type:a.type}):(this.flushRange.push({start:a.startOffset,end:a.endOffset,type:"video"}),this.flushRange.push({start:a.startOffset,end:a.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},c.flushLiveBackBuffer=function(){if(this._live){var a=this.config.liveBackBufferLength;if(isFinite(a)&&!(a<0)){if(!this.media)return void db.logger.error("flushLiveBackBuffer called without attaching media");for(var b=this.media.currentTime,c=this.sourceBuffer,d=Object.keys(c),e=b-Math.max(a,this._levelTargetDuration),f=d.length-1;f>=0;f--){var g=d[f],h=c[g];if(h){var i=h.buffered;i.length>0&&e>i.start(0)&&this.removeBufferRange(g,h,0,e)&&this.hls.trigger(cb.default.LIVE_BACK_BUFFER_REACHED,{bufferEnd:e})}}}}},c.onLevelUpdated=function(a){var b=a.details;b.fragments.length>0&&(this._levelDuration=b.totalduration+b.fragments[0].start,this._levelTargetDuration=b.averagetargetduration||b.targetduration||10,this._live=b.live,this.updateMediaElementDuration())},c.updateMediaElementDuration=function(){var a,b=this.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var c in this.sourceBuffer){var d=this.sourceBuffer[c];if(d&&d.updating===!0)return}a=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),this._live===!0&&b.liveDurationInfinity===!0?(db.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>a||!Object(bb.isFiniteNumber)(a))&&(db.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},c.doFlush=function(){for(;this.flushRange.length;){var a=this.flushRange[0];if(!this.flushBuffer(a.start,a.end,a.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var b=0,c=this.sourceBuffer;try{for(var d in c){var e=c[d];e&&(b+=e.buffered.length)}}catch(a){db.logger.error("error while accessing sourceBuffer.buffered")}this.appended=b,this.hls.trigger(cb.default.BUFFER_FLUSHED)}},c.doAppending=function(){var a=this.config,b=this.hls,c=this.segments,d=this.sourceBuffer;if(Object.keys(d).length){if(!this.media||this.media.error)return this.segments=[],void db.logger.error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var e=c.shift();if(e)try{var f=d[e.type];if(!f)return void this._onSBUpdateEnd();if(f.updating)return void c.unshift(e);f.ended=!1,this.parent=e.parent,f.appendBuffer(e.data),this.appendError=0,this.appended++,this.appending=!0}catch(d){db.logger.error("error while trying to append buffer:"+d.message),c.unshift(e);var g={type:ab.ErrorTypes.MEDIA_ERROR,parent:e.parent,details:"",fatal:!1};22===d.code?(this.segments=[],g.details=ab.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,g.details=ab.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>a.appendErrorMaxRetry&&(db.logger.log("fail "+a.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],g.fatal=!0)),b.trigger(cb.default.ERROR,g)}}}},c.flushBuffer=function(a,b,c){var d=this.sourceBuffer;if(!Object.keys(d).length)return!0;var e="null";if(this.media&&(e=this.media.currentTime.toFixed(3)),db.logger.log("flushBuffer,pos/start/end: "+e+"/"+a+"/"+b),this.flushBufferCounter>=this.appended)return db.logger.warn("abort flushing too many retries"),!0;var f=d[c];if(f){if(f.ended=!1,f.updating)return db.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(c,f,a,b))return this.flushBufferCounter++,!1}return db.logger.log("buffer flushed"),!0},c.removeBufferRange=function(a,b,c,d){try{for(var e=0;e<b.buffered.length;e++){var f=b.buffered.start(e),g=b.buffered.end(e),h=Math.max(f,c),i=Math.min(g,d);if(Math.min(i,g)-h>.5){var j="null";return this.media&&(j=this.media.currentTime.toString()),db.logger.log("sb remove "+a+" ["+h+","+i+"], of ["+f+","+g+"], pos:"+j),b.remove(h,i),!0}}}catch(a){db.logger.warn("removeBufferRange failed",a)}return!1},b}(gb),uc=tc,vc=function(a){function b(b){var c;return c=a.call(this,b,cb.default.FPS_DROP_LEVEL_CAPPING,cb.default.MEDIA_ATTACHING,cb.default.MANIFEST_PARSED,cb.default.LEVELS_UPDATED,cb.default.BUFFER_CODECS,cb.default.MEDIA_DETACHING)||this,c.autoLevelCapping=Number.POSITIVE_INFINITY,c.firstLevel=null,c.levels=[],c.media=null,c.restrictedLevels=[],c.timer=null,c.clientRect=null,c}ga(b,a);var c=b.prototype;return c.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.clientRect=null,this.stopCapping())},c.onFpsDropLevelCapping=function(a){b.isLevelAllowed(a.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(a.droppedLevel)},c.onMediaAttaching=function(a){this.media=a.media instanceof window.HTMLVideoElement?a.media:null},c.onManifestParsed=function(a){var b=this.hls;this.restrictedLevels=[],this.levels=a.levels,this.firstLevel=a.firstLevel,b.config.capLevelToPlayerSize&&a.video&&this.startCapping()},c.onBufferCodecs=function(a){var b=this.hls;b.config.capLevelToPlayerSize&&a.video&&this.startCapping()},c.onLevelsUpdated=function(a){this.levels=a.levels},c.onMediaDetaching=function(){this.stopCapping()},c.detectPlayerSize=function(){if(this.media){var a=this.levels?this.levels.length:0;if(a){var b=this.hls;b.autoLevelCapping=this.getMaxLevel(a-1),b.autoLevelCapping>this.autoLevelCapping&&b.streamController.nextLevelSwitch(),this.autoLevelCapping=b.autoLevelCapping}}},c.getMaxLevel=function(a){var c=this;if(!this.levels)return-1;var d=this.levels.filter(function(d,e){return b.isLevelAllowed(e,c.restrictedLevels)&&e<=a});return this.clientRect=null,b.getMaxLevelByMediaSize(d,this.mediaWidth,this.mediaHeight)},c.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},c.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},c.getDimensions=function(){if(this.clientRect)return this.clientRect;var a=this.media,b={width:0,height:0};if(a){var c=a.getBoundingClientRect();b.width=c.width,b.height=c.height,b.width||b.height||(b.width=c.right-c.left||a.width||0,b.height=c.bottom-c.top||a.height||0)}return this.clientRect=b,b},b.isLevelAllowed=function(a,b){return void 0===b&&(b=[]),b.indexOf(a)===-1},b.getMaxLevelByMediaSize=function(a,b,c){if(!a||a&&!a.length)return-1;for(var d=function(a,b){return!b||(a.width!==b.width||a.height!==b.height)},e=a.length-1,f=0;f<a.length;f+=1){var g=a[f];if((g.width>=b||g.height>=c)&&d(g,a[f+1])){e=f;break}}return e},fa(b,[{key:"mediaWidth",get:function(){return this.getDimensions().width*b.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*b.contentScaleFactor}}],[{key:"contentScaleFactor",get:function(){var a=1;try{a=window.devicePixelRatio}catch(a){}return a}}]),b}(gb),wc=vc,xc=window,yc=xc.performance,zc=function(a){function b(b){return a.call(this,b,cb.default.MEDIA_ATTACHING)||this}ha(b,a);var c=b.prototype;return c.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},c.onMediaAttaching=function(a){var b=this.hls.config;if(b.capLevelOnFPSDrop){var c=this.video=a.media instanceof window.HTMLVideoElement?a.media:null;"function"==typeof c.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),b.fpsDroppedMonitoringPeriod)}},c.checkFPS=function(a,b,c){var d=yc.now();if(b){if(this.lastTime){var e=d-this.lastTime,f=c-this.lastDroppedFrames,g=b-this.lastDecodedFrames,h=1e3*f/e,i=this.hls;if(i.trigger(cb.default.FPS_DROP,{currentDropped:f,currentDecoded:g,totalDroppedFrames:c}),h>0&&f>i.config.fpsDroppedMonitoringThreshold*g){var j=i.currentLevel;db.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+j),j>0&&(i.autoLevelCapping===-1||i.autoLevelCapping>=j)&&(j-=1,i.trigger(cb.default.FPS_DROP_LEVEL_CAPPING,{level:j,droppedLevel:i.currentLevel}),i.autoLevelCapping=j,i.streamController.nextLevelSwitch())}}this.lastTime=d,this.lastDroppedFrames=c,this.lastDecodedFrames=b}},c.checkFPSInterval=function(){var a=this.video;if(a)if(this.isVideoPlaybackQualityAvailable){var b=a.getVideoPlaybackQuality();this.checkFPS(a,b.totalVideoFrames,b.droppedVideoFrames)}else this.checkFPS(a,a.webkitDecodedFrameCount,a.webkitDroppedFrameCount)},b}(gb),Ac=zc,Bc=function(){function a(a){a&&a.xhrSetup&&(this.xhrSetup=a.xhrSetup)}var b=a.prototype;return b.destroy=function(){this.abort(),this.loader=null},b.abort=function(){var a=this.loader;a&&4!==a.readyState&&(this.stats.aborted=!0,a.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},b.load=function(a,b,c){this.context=a,this.config=b,this.callbacks=c,this.stats={trequest:window.performance.now(),retry:0},this.retryDelay=b.retryDelay,this.loadInternal()},b.loadInternal=function(){var a,b=this.context;a=this.loader=new window.XMLHttpRequest;var c=this.stats;c.tfirst=0,c.loaded=0;var d=this.xhrSetup;try{if(d)try{d(a,b.url)}catch(c){a.open("GET",b.url,!0),d(a,b.url)}a.readyState||a.open("GET",b.url,!0)}catch(c){return void this.callbacks.onError({code:a.status,text:c.message},b,a)}b.rangeEnd&&a.setRequestHeader("Range","bytes="+b.rangeStart+"-"+(b.rangeEnd-1)),a.onreadystatechange=this.readystatechange.bind(this),a.onprogress=this.loadprogress.bind(this),a.responseType=b.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),a.send()},b.readystatechange=function(a){var b=a.currentTarget,c=b.readyState,d=this.stats,e=this.context,f=this.config;if(!d.aborted&&c>=2)if(window.clearTimeout(this.requestTimeout),0===d.tfirst&&(d.tfirst=Math.max(window.performance.now(),d.trequest)),4===c){var g=b.status;if(g>=200&&g<300){d.tload=Math.max(d.tfirst,window.performance.now());var h,i;"arraybuffer"===e.responseType?(h=b.response,i=h.byteLength):(h=b.responseText,i=h.length),d.loaded=d.total=i;var j={url:b.responseURL,data:h};this.callbacks.onSuccess(j,d,e,b)}else d.retry>=f.maxRetry||g>=400&&g<499?(db.logger.error(g+" while loading "+e.url),this.callbacks.onError({code:g,text:b.statusText},e,b)):(db.logger.warn(g+" while loading "+e.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,f.maxRetryDelay),d.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),f.timeout)},b.loadtimeout=function(){db.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},b.loadprogress=function(a){var b=a.currentTarget,c=this.stats;c.loaded=a.loaded,a.lengthComputable&&(c.total=a.total);var d=this.callbacks.onProgress;d&&d(c,this.context,null,b)},a}(),Cc=Bc,Dc=function(a){function b(b){var c;return c=a.call(this,b,cb.default.MANIFEST_LOADING,cb.default.MANIFEST_PARSED,cb.default.AUDIO_TRACK_LOADED,cb.default.AUDIO_TRACK_SWITCHED,cb.default.LEVEL_LOADED,cb.default.ERROR)||this,c._trackId=-1,c._selectDefaultTrack=!0,c.tracks=[],c.trackIdBlacklist=Object.create(null),c.audioGroupId=null,c}ka(b,a);var c=b.prototype;return c.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},c.onManifestParsed=function(a){var b=this.tracks=a.audioTracks||[];this.hls.trigger(cb.default.AUDIO_TRACKS_UPDATED,{audioTracks:b}),this._selectAudioGroup(this.hls.nextLoadLevel)},c.onAudioTrackLoaded=function(a){if(a.id>=this.tracks.length)return void db.logger.warn("Invalid audio track id:",a.id);if(db.logger.log("audioTrack "+a.id+" loaded"),this.tracks[a.id].details=a.details,a.details.live&&!this.hasInterval()){var b=1e3*a.details.targetduration;this.setInterval(b)}!a.details.live&&this.hasInterval()&&this.clearInterval()},c.onAudioTrackSwitched=function(a){var b=this.tracks[a.id].groupId;b&&this.audioGroupId!==b&&(this.audioGroupId=b)},c.onLevelLoaded=function(a){this._selectAudioGroup(a.level)},c.onError=function(a){a.type===ab.ErrorTypes.NETWORK_ERROR&&(a.fatal&&this.clearInterval(),a.details===ab.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(db.logger.warn("Network failure on audio-track id:",a.context.id),this._handleLoadError()))},c._setAudioTrack=function(a){if(this._trackId===a&&this.tracks[this._trackId].details)return void db.logger.debug("Same id as current audio-track passed, and track details available -> no-op");if(a<0||a>=this.tracks.length)return void db.logger.warn("Invalid id passed to audio-track controller");var b=this.tracks[a];db.logger.log("Now switching to audio-track index "+a),this.clearInterval(),this._trackId=a;var c=b.url,d=b.type,e=b.id;this.hls.trigger(cb.default.AUDIO_TRACK_SWITCHING,{id:e,type:d,url:c}),this._loadTrackDetailsIfNeeded(b)},c.doTick=function(){this._updateTrack(this._trackId)},c._selectAudioGroup=function(a){var b=this.hls.levels[a];if(b&&b.audioGroupIds){var c=b.audioGroupIds[b.urlId];this.audioGroupId!==c&&(this.audioGroupId=c,this._selectInitialAudioTrack())}},c._selectInitialAudioTrack=function(){var a=this,b=this.tracks;if(b.length){var c=this.tracks[this._trackId],d=null;if(c&&(d=c.name),this._selectDefaultTrack){var e=b.filter(function(a){return a.default});e.length?b=e:db.logger.warn("No default audio tracks defined")}var f=!1,g=function(){b.forEach(function(b){f||a.audioGroupId&&b.groupId!==a.audioGroupId||d&&d!==b.name||(a._setAudioTrack(b.id),f=!0)})};g(),f||(d=null,g()),f||(db.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(cb.default.ERROR,{type:ab.ErrorTypes.MEDIA_ERROR,details:ab.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},c._needsTrackLoading=function(a){var b=a.details,c=a.url;return!(b&&!b.live)&&!!c},c._loadTrackDetailsIfNeeded=function(a){if(this._needsTrackLoading(a)){var b=a.url,c=a.id;db.logger.log("loading audio-track playlist for id: "+c),this.hls.trigger(cb.default.AUDIO_TRACK_LOADING,{url:b,id:c})}},c._updateTrack=function(a){if(!(a<0||a>=this.tracks.length)){this.clearInterval(),this._trackId=a,db.logger.log("trying to update audio-track "+a);var b=this.tracks[a];this._loadTrackDetailsIfNeeded(b)}},c._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var a=this._trackId,b=this.tracks[a],c=b.name,d=b.language,e=b.groupId;db.logger.warn("Loading failed on audio track id: "+a+", group-id: "+e+', name/language: "'+c+'" / "'+d+'"');for(var f=a,g=0;g<this.tracks.length;g++)if(!this.trackIdBlacklist[g]){var h=this.tracks[g];if(h.name===c){f=g;break}}return f===a?void db.logger.warn('No fallback audio-track found for name/language: "'+c+'" / "'+d+'"'):(db.logger.log("Attempting audio-track fallback id:",f,"group-id:",this.tracks[f].groupId),void this._setAudioTrack(f))},ja(b,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(a){this._setAudioTrack(a),this._selectDefaultTrack=!1}}]),b}(ac),Ec=Dc,Fc=window,Gc=Fc.performance,Hc=100,Ic=function(a){function b(b,c){var d;return d=a.call(this,b,cb.default.MEDIA_ATTACHED,cb.default.MEDIA_DETACHING,cb.default.AUDIO_TRACKS_UPDATED,cb.default.AUDIO_TRACK_SWITCHING,cb.default.AUDIO_TRACK_LOADED,cb.default.KEY_LOADED,cb.default.FRAG_LOADED,cb.default.FRAG_PARSING_INIT_SEGMENT,cb.default.FRAG_PARSING_DATA,cb.default.FRAG_PARSED,cb.default.ERROR,cb.default.BUFFER_RESET,cb.default.BUFFER_CREATED,cb.default.BUFFER_APPENDED,cb.default.BUFFER_FLUSHED,cb.default.INIT_PTS_FOUND)||this,d.fragmentTracker=c,d.config=b.config,d.audioCodecSwap=!1,d._state=bc.STOPPED,d.initPTS=[],d.waitingFragment=null,d.videoTrackCC=null,d}na(b,a);var c=b.prototype;return c.onInitPtsFound=function(a){var b=a.id,c=a.frag.cc,d=a.initPTS;"main"===b&&(this.initPTS[c]=d,this.videoTrackCC=c,db.logger.log("InitPTS for cc: "+c+" found from video track: "+d),this.state===bc.WAITING_INIT_PTS&&this.tick())},c.startLoad=function(a){if(this.tracks){var b=this.lastCurrentTime;this.stopLoad(),this.setInterval(Hc),this.fragLoadError=0,b>0&&a===-1?(db.logger.log("audio:override startPosition with lastCurrentTime @"+b.toFixed(3)),this.state=bc.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:a,this.state=bc.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=a,this.state=bc.STOPPED},c.doTick=function(){var a,b,c,d=this.hls,e=d.config;switch(this.state){case bc.ERROR:case bc.PAUSED:case bc.BUFFER_FLUSHING:break;case bc.STARTING:this.state=bc.WAITING_TRACK,this.loadedmetadata=!1;break;case bc.IDLE:var f=this.tracks;if(!f)break;if(!this.media&&(this.startFragRequested||!e.startFragPrefetch))break;if(this.loadedmetadata)a=this.media.currentTime;else if(a=this.nextLoadPosition,void 0===a)break;var g=this.mediaBuffer?this.mediaBuffer:this.media,h=this.videoBuffer?this.videoBuffer:this.media,i=a<e.maxBufferHole?Math.max(Yb,e.maxBufferHole):e.maxBufferHole,j=Lb.bufferInfo(g,a,i),k=Lb.bufferInfo(h,a,i),l=j.len,m=j.end,n=this.fragPrevious,o=Math.min(e.maxBufferLength,e.maxMaxBufferLength),p=Math.max(o,k.len),q=this.audioSwitch,r=this.trackId;if((l<p||q)&&r<f.length){if(c=f[r].details,"undefined"==typeof c){this.state=bc.WAITING_TRACK;break}if(!q&&this._streamEnded(j,c))return this.hls.trigger(cb.default.BUFFER_EOS,{type:"audio"}),void(this.state=bc.ENDED);var s,t=c.fragments,u=t.length,v=t[0].start,w=t[u-1].start+t[u-1].duration;if(q)if(c.live&&!c.PTSKnown)db.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),m=0;else if(m=a,c.PTSKnown&&a<v){if(!(j.end>v||j.nextStart))return;db.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=v+.05}if(c.initSegment&&!c.initSegment.data)s=c.initSegment;else if(m<=v){if(s=t[0],null!==this.videoTrackCC&&s.cc!==this.videoTrackCC&&(s=C(t,this.videoTrackCC)),c.live&&s.loadIdx&&s.loadIdx===this.fragLoadIdx){var x=j.nextStart?j.nextStart:v;return db.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(x+.05)),void(this.media.currentTime=x+.05)}}else{var y,z=e.maxFragLookUpTolerance,A=n?t[n.sn-t[0].sn+1]:void 0,B=function(a){var b=Math.min(z,a.duration);return a.start+a.duration-b<=m?1:a.start-b>m&&a.start?-1:0};m<w?(m>w-z&&(z=0),y=A&&!B(A)?A:Kb.search(t,B)):y=t[u-1],y&&(s=y,v=y.start,n&&s.level===n.level&&s.sn===n.sn&&(s.sn<c.endSN?(s=t[s.sn+1-c.startSN],db.logger.log("SN just loaded, load next one: "+s.sn)):s=null))}s&&(s.encrypted?(db.logger.log("Loading key for "+s.sn+" of ["+c.startSN+" ,"+c.endSN+"],track "+r),this.state=bc.KEY_LOADING,d.trigger(cb.default.KEY_LOADING,{frag:s})):(this.fragCurrent=s,(q||this.fragmentTracker.getState(s)===Hb.NOT_LOADED)&&(db.logger.log("Loading "+s.sn+", cc: "+s.cc+" of ["+c.startSN+" ,"+c.endSN+"],track "+r+", currentTime:"+a+",bufferEnd:"+m.toFixed(3)),"initSegment"!==s.sn&&(this.startFragRequested=!0),Object(bb.isFiniteNumber)(s.sn)&&(this.nextLoadPosition=s.start+s.duration),d.trigger(cb.default.FRAG_LOADING,{frag:s}),this.state=bc.FRAG_LOADING)))}break;case bc.WAITING_TRACK:b=this.tracks[this.trackId],b&&b.details&&(this.state=bc.IDLE);break;case bc.FRAG_LOADING_WAITING_RETRY:var D=Gc.now(),E=this.retryDate;g=this.media;var F=g&&g.seeking;(!E||D>=E||F)&&(db.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=bc.IDLE);break;case bc.WAITING_INIT_PTS:var G=this.videoTrackCC;if(void 0===this.initPTS[G])break;var H=this.waitingFragment;if(H){var I=H.frag.cc;G!==I?(b=this.tracks[this.trackId],b.details&&b.details.live&&(db.logger.warn("Waiting fragment CC ("+I+") does not match video track CC ("+G+")"),this.waitingFragment=null,this.state=bc.IDLE)):(this.state=bc.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=bc.IDLE;break;case bc.STOPPED:case bc.FRAG_LOADING:case bc.PARSING:case bc.PARSED:case bc.ENDED:}},c.onMediaAttached=function(a){var b=this.media=this.mediaBuffer=a.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),b.addEventListener("seeking",this.onvseeking),b.addEventListener("ended",this.onvended);var c=this.config;this.tracks&&c.autoStartLoad&&this.startLoad(c.startPosition)},c.onMediaDetaching=function(){var a=this.media;a&&a.ended&&(db.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),a&&(a.removeEventListener("seeking",this.onvseeking),a.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},c.onAudioTracksUpdated=function(a){db.logger.log("audio tracks updated"),this.tracks=a.audioTracks},c.onAudioTrackSwitching=function(a){var b=!!a.url;this.trackId=a.id,this.fragCurrent=null,this.state=bc.PAUSED,this.waitingFragment=null,b?this.setInterval(Hc):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),b&&(this.audioSwitch=!0,this.state=bc.IDLE),this.tick()},c.onAudioTrackLoaded=function(a){var b=a.details,c=a.id,d=this.tracks[c],e=b.totalduration,f=0;if(db.logger.log("track "+c+" loaded ["+b.startSN+","+b.endSN+"],duration:"+e),b.live){var g=d.details;g&&b.fragments.length>0?(w(g,b),f=b.fragments[0].start,b.PTSKnown?db.logger.log("live audio playlist sliding:"+f.toFixed(3)):db.logger.log("live audio playlist - outdated PTS, unknown sliding")):(b.PTSKnown=!1,db.logger.log("live audio playlist - first load, unknown sliding"))}else b.PTSKnown=!1;if(d.details=b,!this.startFragRequested){if(this.startPosition===-1){var h=b.startTimeOffset;Object(bb.isFiniteNumber)(h)?(db.logger.log("start time offset found in playlist, adjust startPosition to "+h),this.startPosition=h):b.live?(this.startPosition=this.computeLivePosition(f,b),db.logger.log("compute startPosition for audio-track to "+this.startPosition)):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===bc.WAITING_TRACK&&(this.state=bc.IDLE),this.tick()},c.onKeyLoaded=function(){this.state===bc.KEY_LOADING&&(this.state=bc.IDLE,this.tick())},c.onFragLoaded=function(a){var b=this.fragCurrent,c=a.frag;if(this.state===bc.FRAG_LOADING&&b&&"audio"===c.type&&c.level===b.level&&c.sn===b.sn){var d=this.tracks[this.trackId],e=d.details,f=e.totalduration,g=b.level,h=b.sn,i=b.cc,j=this.config.defaultAudioCodec||d.audioCodec||"mp4a.40.2",k=this.stats=a.stats;if("initSegment"===h)this.state=bc.IDLE,k.tparsed=k.tbuffered=Gc.now(),e.initSegment.data=a.payload,this.hls.trigger(cb.default.FRAG_BUFFERED,{stats:k,frag:b,id:"audio"}),this.tick();else{this.state=bc.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new Ub(this.hls,"audio"));var l=this.initPTS[i],m=e.initSegment?e.initSegment.data:[];if(e.initSegment||void 0!==l){this.pendingBuffering=!0,db.logger.log("Demuxing "+h+" of ["+e.startSN+" ,"+e.endSN+"],track "+g);var n=!1;this.demuxer.push(a.payload,m,j,null,b,f,n,l)}else db.logger.log("unknown video PTS for continuity counter "+i+", waiting for video PTS before demuxing audio frag "+h+" of ["+e.startSN+" ,"+e.endSN+"],track "+g),this.waitingFragment=a,this.state=bc.WAITING_INIT_PTS}}this.fragLoadError=0},c.onFragParsingInitSegment=function(a){var b=this.fragCurrent,c=a.frag;if(b&&"audio"===a.id&&c.sn===b.sn&&c.level===b.level&&this.state===bc.PARSING){var d,e=a.tracks;if(e.video&&delete e.video,d=e.audio){d.levelCodec=d.codec,d.id=a.id,this.hls.trigger(cb.default.BUFFER_CODECS,e),db.logger.log("audio track:audio,container:"+d.container+",codecs[level/parsed]=["+d.levelCodec+"/"+d.codec+"]");var f=d.initSegment;if(f){var g={type:"audio",data:f,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[g]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(cb.default.BUFFER_APPENDING,g))}this.tick()}}},c.onFragParsingData=function(a){var b=this,c=this.fragCurrent,d=a.frag;if(c&&"audio"===a.id&&"audio"===a.type&&d.sn===c.sn&&d.level===c.level&&this.state===bc.PARSING){var e=this.trackId,f=this.tracks[e],g=this.hls;Object(bb.isFiniteNumber)(a.endPTS)||(a.endPTS=a.startPTS+c.duration,a.endDTS=a.startDTS+c.duration),c.addElementaryStream(ib.AUDIO),db.logger.log("parsed "+a.type+",PTS:["+a.startPTS.toFixed(3)+","+a.endPTS.toFixed(3)+"],DTS:["+a.startDTS.toFixed(3)+"/"+a.endDTS.toFixed(3)+"],nb:"+a.nb),v(f.details,c,a.startPTS,a.endPTS);var h=this.audioSwitch,i=this.media,j=!1;if(h)if(i&&i.readyState){var k=i.currentTime;db.logger.log("switching audio track : currentTime:"+k),k>=a.startPTS&&(db.logger.log("switching audio track : flushing all audio"),this.state=bc.BUFFER_FLUSHING,g.trigger(cb.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),j=!0,this.audioSwitch=!1,g.trigger(cb.default.AUDIO_TRACK_SWITCHED,{id:e}))}else this.audioSwitch=!1,g.trigger(cb.default.AUDIO_TRACK_SWITCHED,{id:e});var l=this.pendingData;if(!l)return db.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void g.trigger(cb.default.ERROR,{type:ab.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([a.data1,a.data2].forEach(function(b){b&&b.length&&l.push({type:a.type,data:b,parent:"audio",content:"data"})}),!j&&l.length&&(l.forEach(function(a){b.state===bc.PARSING&&(b.pendingBuffering=!0,b.hls.trigger(cb.default.BUFFER_APPENDING,a))}),this.pendingData=[],this.appended=!0)),this.tick()}},c.onFragParsed=function(a){var b=this.fragCurrent,c=a.frag;b&&"audio"===a.id&&c.sn===b.sn&&c.level===b.level&&this.state===bc.PARSING&&(this.stats.tparsed=Gc.now(),this.state=bc.PARSED,this._checkAppendedParsed())},c.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},c.onBufferCreated=function(a){var b=a.tracks.audio;b&&(this.mediaBuffer=b.buffer,this.loadedmetadata=!0),a.tracks.video&&(this.videoBuffer=a.tracks.video.buffer)},c.onBufferAppended=function(a){if("audio"===a.parent){var b=this.state;b!==bc.PARSING&&b!==bc.PARSED||(this.pendingBuffering=a.pending>0,this._checkAppendedParsed())}},c._checkAppendedParsed=function(){if(!(this.state!==bc.PARSED||this.appended&&this.pendingBuffering)){var a=this.fragCurrent,b=this.stats,c=this.hls;if(a){this.fragPrevious=a,b.tbuffered=Gc.now(),c.trigger(cb.default.FRAG_BUFFERED,{stats:b,frag:a,id:"audio"});var d=this.mediaBuffer?this.mediaBuffer:this.media;d&&db.logger.log("audio buffered : "+Wb.toString(d.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,c.trigger(cb.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=bc.IDLE}this.tick()}},c.onError=function(a){var b=a.frag;if(!b||"audio"===b.type)switch(a.details){case ab.ErrorDetails.FRAG_LOAD_ERROR:case ab.ErrorDetails.FRAG_LOAD_TIMEOUT:var c=a.frag;if(c&&"audio"!==c.type)break;if(!a.fatal){var d=this.fragLoadError;d?d++:d=1;var e=this.config;if(d<=e.fragLoadingMaxRetry){this.fragLoadError=d;var f=Math.min(Math.pow(2,d-1)*e.fragLoadingRetryDelay,e.fragLoadingMaxRetryTimeout);db.logger.warn("AudioStreamController: frag loading failed, retry in "+f+" ms"),this.retryDate=Gc.now()+f,this.state=bc.FRAG_LOADING_WAITING_RETRY}else db.logger.error("AudioStreamController: "+a.details+" reaches max retry, redispatch as fatal ..."),a.fatal=!0,this.state=bc.ERROR}break;case ab.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case ab.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case ab.ErrorDetails.KEY_LOAD_ERROR:case ab.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==bc.ERROR&&(this.state=a.fatal?bc.ERROR:bc.IDLE,db.logger.warn("AudioStreamController: "+a.details+" while loading frag, now switching to "+this.state+" state ..."));
break;case ab.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===a.parent&&(this.state===bc.PARSING||this.state===bc.PARSED)){var g=this.mediaBuffer,h=this.media.currentTime,i=g&&Lb.isBuffered(g,h)&&Lb.isBuffered(g,h+.5);if(i){var j=this.config;j.maxMaxBufferLength>=j.maxBufferLength&&(j.maxMaxBufferLength/=2,db.logger.warn("AudioStreamController: reduce max buffer length to "+j.maxMaxBufferLength+"s")),this.state=bc.IDLE}else db.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=bc.BUFFER_FLUSHING,this.hls.trigger(cb.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},c.onBufferFlushed=function(){var a=this,b=this.pendingData;b&&b.length?(db.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),b.forEach(function(b){a.hls.trigger(cb.default.BUFFER_APPENDING,b)}),this.appended=!0,this.pendingData=[],this.state=bc.PARSED):(this.state=bc.IDLE,this.fragPrevious=null,this.tick())},ma(b,[{key:"state",set:function(a){if(this.state!==a){var b=this.state;this._state=a,db.logger.log("audio stream:"+b+"->"+a)}},get:function(){return this._state}}]),b}(cc),Jc=Ic,Kc=function(){function a(a){if("string"!=typeof a)return!1;var b=f[a.toLowerCase()];return!!b&&a.toLowerCase()}function b(a){if("string"!=typeof a)return!1;var b=g[a.toLowerCase()];return!!b&&a.toLowerCase()}function c(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]=c[d]}return a}function d(d,f,g){var h=this,i={};i.enumerable=!0,h.hasBeenReset=!1;var j="",k=!1,l=d,m=f,n=g,o=null,p="",q=!0,r="auto",s="start",t=50,u="middle",v=50,w="middle";Object.defineProperty(h,"id",c({},i,{get:function(){return j},set:function(a){j=""+a}})),Object.defineProperty(h,"pauseOnExit",c({},i,{get:function(){return k},set:function(a){k=!!a}})),Object.defineProperty(h,"startTime",c({},i,{get:function(){return l},set:function(a){if("number"!=typeof a)throw new TypeError("Start time must be set to a number.");l=a,this.hasBeenReset=!0}})),Object.defineProperty(h,"endTime",c({},i,{get:function(){return m},set:function(a){if("number"!=typeof a)throw new TypeError("End time must be set to a number.");m=a,this.hasBeenReset=!0}})),Object.defineProperty(h,"text",c({},i,{get:function(){return n},set:function(a){n=""+a,this.hasBeenReset=!0}})),Object.defineProperty(h,"region",c({},i,{get:function(){return o},set:function(a){o=a,this.hasBeenReset=!0}})),Object.defineProperty(h,"vertical",c({},i,{get:function(){return p},set:function(b){var c=a(b);if(c===!1)throw new SyntaxError("An invalid or illegal string was specified.");p=c,this.hasBeenReset=!0}})),Object.defineProperty(h,"snapToLines",c({},i,{get:function(){return q},set:function(a){q=!!a,this.hasBeenReset=!0}})),Object.defineProperty(h,"line",c({},i,{get:function(){return r},set:function(a){if("number"!=typeof a&&a!==e)throw new SyntaxError("An invalid number or illegal string was specified.");r=a,this.hasBeenReset=!0}})),Object.defineProperty(h,"lineAlign",c({},i,{get:function(){return s},set:function(a){var c=b(a);if(!c)throw new SyntaxError("An invalid or illegal string was specified.");s=c,this.hasBeenReset=!0}})),Object.defineProperty(h,"position",c({},i,{get:function(){return t},set:function(a){if(a<0||a>100)throw new Error("Position must be between 0 and 100.");t=a,this.hasBeenReset=!0}})),Object.defineProperty(h,"positionAlign",c({},i,{get:function(){return u},set:function(a){var c=b(a);if(!c)throw new SyntaxError("An invalid or illegal string was specified.");u=c,this.hasBeenReset=!0}})),Object.defineProperty(h,"size",c({},i,{get:function(){return v},set:function(a){if(a<0||a>100)throw new Error("Size must be between 0 and 100.");v=a,this.hasBeenReset=!0}})),Object.defineProperty(h,"align",c({},i,{get:function(){return w},set:function(a){var c=b(a);if(!c)throw new SyntaxError("An invalid or illegal string was specified.");w=c,this.hasBeenReset=!0}})),h.displayState=void 0}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var e="auto",f={"":!0,lr:!0,rl:!0},g={start:!0,middle:!0,end:!0,left:!0,right:!0};return d.prototype.getCueAsHTML=function(){var a=window.WebVTT;return a.convertCueToDOMTree(window,this.text)},d}(),Lc=function(){return{decode:function(a){if(!a)return"";if("string"!=typeof a)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(a))}}};qa.prototype={set:function(a,b){this.get(a)||""===b||(this.values[a]=b)},get:function(a,b,c){return c?this.has(a)?this.values[a]:b[c]:this.has(a)?this.values[a]:b},has:function(a){return a in this.values},alt:function(a,b,c){for(var d=0;d<c.length;++d)if(b===c[d]){this.set(a,b);break}},integer:function(a,b){/^-?\d+$/.test(b)&&this.set(a,parseInt(b,10))},percent:function(a,b){var c;return!!((c=b.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(b=parseFloat(b),b>=0&&b<=100))&&(this.set(a,b),!0)}};var Mc=new Kc(0,0,0),Nc="middle"===Mc.align?"middle":"center";oa.prototype={parse:function(a){function b(){var a=d.buffer,b=0;for(a=ta(a);b<a.length&&"\r"!==a[b]&&"\n"!==a[b];)++b;var c=a.substr(0,b);return"\r"===a[b]&&++b,"\n"===a[b]&&++b,d.buffer=a.substr(b),c}function c(a){ra(a,function(a,b){switch(a){case"Region":}},/:/)}var d=this;a&&(d.buffer+=d.decoder.decode(a,{stream:!0}));try{var e;if("INITIAL"===d.state){if(!/\r\n|\n/.test(d.buffer))return this;e=b();var f=e.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!f||!f[0])throw new Error("Malformed WebVTT signature.");d.state="HEADER"}for(var g=!1;d.buffer;){if(!/\r\n|\n/.test(d.buffer))return this;switch(g?g=!1:e=b(),d.state){case"HEADER":/:/.test(e)?c(e):e||(d.state="ID");continue;case"NOTE":e||(d.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(e)){d.state="NOTE";break}if(!e)continue;if(d.cue=new Kc(0,0,""),d.state="CUE",e.indexOf("-->")===-1){d.cue.id=e;continue}case"CUE":try{sa(e,d.cue,d.regionList)}catch(a){d.cue=null,d.state="BADCUE";continue}d.state="CUETEXT";continue;case"CUETEXT":var h=e.indexOf("-->")!==-1;if(!e||h&&(g=!0)){d.oncue&&d.oncue(d.cue),d.cue=null,d.state="ID";continue}d.cue.text&&(d.cue.text+="\n"),d.cue.text+=e;continue;case"BADCUE":e||(d.state="ID");continue}}}catch(a){"CUETEXT"===d.state&&d.cue&&d.oncue&&d.oncue(d.cue),d.cue=null,d.state="INITIAL"===d.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var a=this;try{if(a.buffer+=a.decoder.decode(),(a.cue||"HEADER"===a.state)&&(a.buffer+="\n\n",a.parse()),"INITIAL"===a.state)throw new Error("Malformed WebVTT signature.")}catch(a){throw a}return a.onflush&&a.onflush(),this}};var Oc,Pc=oa,Qc={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Rc=function(a){var b=a;return Qc.hasOwnProperty(a)&&(b=Qc[a]),String.fromCharCode(b)},Sc=15,Tc=100,Uc={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Vc={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Wc={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Xc={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Yc=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(a){a[a.ERROR=0]="ERROR",a[a.TEXT=1]="TEXT",a[a.WARNING=2]="WARNING",a[a.INFO=2]="INFO",a[a.DEBUG=3]="DEBUG",a[a.DATA=3]="DATA"}(Oc||(Oc={}));var Zc,$c={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(a){this.time=a},log:function(a,b){var c=this.verboseFilter[a];this.verboseLevel>=c}},_c=function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c].toString(16));return b},ad=function(){function a(a,b,c,d,e){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=a||"white",this.underline=b||!1,this.italics=c||!1,this.background=d||"black",this.flash=e||!1}var b=a.prototype;return b.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},b.setStyles=function(a){for(var b=["foreground","underline","italics","background","flash"],c=0;c<b.length;c++){var d=b[c];a.hasOwnProperty(d)&&(this[d]=a[d])}},b.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},b.equals=function(a){return this.foreground===a.foreground&&this.underline===a.underline&&this.italics===a.italics&&this.background===a.background&&this.flash===a.flash},b.copy=function(a){this.foreground=a.foreground,this.underline=a.underline,this.italics=a.italics,this.background=a.background,this.flash=a.flash},b.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},a}(),bd=function(){function a(a,b,c,d,e,f){this.uchar=void 0,this.penState=void 0,this.uchar=a||" ",this.penState=new ad(b,c,d,e,f)}var b=a.prototype;return b.reset=function(){this.uchar=" ",this.penState.reset()},b.setChar=function(a,b){this.uchar=a,this.penState.copy(b)},b.setPenState=function(a){this.penState.copy(a)},b.equals=function(a){return this.uchar===a.uchar&&this.penState.equals(a.penState)},b.copy=function(a){this.uchar=a.uchar,this.penState.copy(a.penState)},b.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},a}(),cd=function(){function a(){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.chars=[];for(var a=0;a<Tc;a++)this.chars.push(new bd);this.pos=0,this.currPenState=new ad}var b=a.prototype;return b.equals=function(a){for(var b=!0,c=0;c<Tc;c++)if(!this.chars[c].equals(a.chars[c])){b=!1;break}return b},b.copy=function(a){for(var b=0;b<Tc;b++)this.chars[b].copy(a.chars[b])},b.isEmpty=function(){for(var a=!0,b=0;b<Tc;b++)if(!this.chars[b].isEmpty()){a=!1;break}return a},b.setCursor=function(a){this.pos!==a&&(this.pos=a),this.pos<0?($c.log("DEBUG","Negative cursor position "+this.pos),this.pos=0):this.pos>Tc&&($c.log("DEBUG","Too large cursor position "+this.pos),this.pos=Tc)},b.moveCursor=function(a){var b=this.pos+a;if(a>1)for(var c=this.pos+1;c<b+1;c++)this.chars[c].setPenState(this.currPenState);this.setCursor(b)},b.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},b.insertChar=function(a){a>=144&&this.backSpace();var b=Rc(a);return this.pos>=Tc?void $c.log("ERROR","Cannot insert "+a.toString(16)+" ("+b+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(b,this.currPenState),void this.moveCursor(1))},b.clearFromPos=function(a){var b;for(b=a;b<Tc;b++)this.chars[b].reset()},b.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},b.clearToEndOfRow=function(){this.clearFromPos(this.pos)},b.getTextString=function(){for(var a=[],b=!0,c=0;c<Tc;c++){var d=this.chars[c].uchar;" "!==d&&(b=!1),a.push(d)}return b?"":a.join("")},b.setPenStyles=function(a){this.currPenState.setStyles(a);var b=this.chars[this.pos];b.setPenState(this.currPenState)},a}(),dd=function(){function a(){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.rows=[];for(var a=0;a<Sc;a++)this.rows.push(new cd);this.currRow=Sc-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var b=a.prototype;return b.reset=function(){for(var a=0;a<Sc;a++)this.rows[a].clear();this.currRow=Sc-1},b.equals=function(a){for(var b=!0,c=0;c<Sc;c++)if(!this.rows[c].equals(a.rows[c])){b=!1;break}return b},b.copy=function(a){for(var b=0;b<Sc;b++)this.rows[b].copy(a.rows[b])},b.isEmpty=function(){for(var a=!0,b=0;b<Sc;b++)if(!this.rows[b].isEmpty()){a=!1;break}return a},b.backSpace=function(){var a=this.rows[this.currRow];a.backSpace()},b.clearToEndOfRow=function(){var a=this.rows[this.currRow];a.clearToEndOfRow()},b.insertChar=function(a){var b=this.rows[this.currRow];b.insertChar(a)},b.setPen=function(a){var b=this.rows[this.currRow];b.setPenStyles(a)},b.moveCursor=function(a){var b=this.rows[this.currRow];b.moveCursor(a)},b.setCursor=function(a){$c.log("INFO","setCursor: "+a);var b=this.rows[this.currRow];b.setCursor(a)},b.setPAC=function(a){$c.log("INFO","pacData = "+JSON.stringify(a));var b=a.row-1;if(this.nrRollUpRows&&b<this.nrRollUpRows-1&&(b=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==b){for(var c=0;c<Sc;c++)this.rows[c].clear();var d=this.currRow+1-this.nrRollUpRows,e=this.lastOutputScreen;if(e){var f=e.rows[d].cueStartTime;if(f&&$c.time&&f<$c.time)for(var g=0;g<this.nrRollUpRows;g++)this.rows[b-this.nrRollUpRows+g+1].copy(e.rows[d+g])}}this.currRow=b;var h=this.rows[this.currRow];if(null!==a.indent){var i=a.indent,j=Math.max(i-1,0);h.setCursor(a.indent),a.color=h.chars[j].penState.foreground}var k={foreground:a.color,underline:a.underline,italics:a.italics,background:"black",flash:!1};this.setPen(k)},b.setBkgData=function(a){$c.log("INFO","bkgData = "+JSON.stringify(a)),this.backSpace(),this.setPen(a),this.insertChar(32)},b.setRollUpRows=function(a){this.nrRollUpRows=a},b.rollUp=function(){if(null===this.nrRollUpRows)return void $c.log("DEBUG","roll_up but nrRollUpRows not set yet");$c.log("TEXT",this.getDisplayText());var a=this.currRow+1-this.nrRollUpRows,b=this.rows.splice(a,1)[0];b.clear(),this.rows.splice(this.currRow,0,b),$c.log("INFO","Rolling up")},b.getDisplayText=function(a){a=a||!1;for(var b=[],c="",d=-1,e=0;e<Sc;e++){var f=this.rows[e].getTextString();f&&(d=e+1,a?b.push("Row "+d+": '"+f+"'"):b.push(f.trim()))}return b.length>0&&(c=a?"["+b.join(" | ")+"]":b.join("\n")),c},b.getTextAndFormat=function(){return this.rows},a}(),ed=function(){function a(a,b){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.lastCueEndTime=void 0,this.chNr=a,this.outputFilter=b,this.mode=null,this.verbose=0,this.displayedMemory=new dd,this.nonDisplayedMemory=new dd,this.lastOutputScreen=new dd,this.currRollUpRow=this.displayedMemory.rows[Sc-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}var b=a.prototype;return b.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[Sc-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},b.getHandler=function(){return this.outputFilter},b.setHandler=function(a){this.outputFilter=a},b.setPAC=function(a){this.writeScreen.setPAC(a)},b.setBkgData=function(a){this.writeScreen.setBkgData(a)},b.setMode=function(a){a!==this.mode&&(this.mode=a,$c.log("INFO","MODE="+a),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=a)},b.insertChars=function(a){for(var b=0;b<a.length;b++)this.writeScreen.insertChar(a[b]);var c=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";$c.log("INFO",c+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||($c.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},b.ccRCL=function(){$c.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},b.ccBS=function(){$c.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},b.ccAOF=function(){},b.ccAON=function(){},b.ccDER=function(){$c.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},b.ccRU=function(a){$c.log("INFO","RU("+a+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(a)},b.ccFON=function(){$c.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},b.ccRDC=function(){$c.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},b.ccTR=function(){$c.log("INFO","TR"),this.setMode("MODE_TEXT")},b.ccRTD=function(){$c.log("INFO","RTD"),this.setMode("MODE_TEXT")},b.ccEDM=function(){$c.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},b.ccCR=function(){$c.log("INFO","CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},b.ccENM=function(){$c.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},b.ccEOC=function(){if($c.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var a=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=a,this.writeScreen=this.nonDisplayedMemory,$c.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},b.ccTO=function(a){$c.log("INFO","TO("+a+") - Tab Offset"),this.writeScreen.moveCursor(a)},b.ccMIDROW=function(a){var b={flash:!1};if(b.underline=a%2===1,b.italics=a>=46,b.italics)b.foreground="white";else{var c=["white","green","blue","cyan","red","yellow","magenta"];b.foreground=c[Math.floor(a/2)-16]}$c.log("INFO","MIDROW: "+JSON.stringify(b)),this.writeScreen.setPen(b)},b.outputDataUpdate=function(a){void 0===a&&(a=!1);var b=$c.time;null!==b&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,b,this.lastOutputScreen),a===!0&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:b):this.cueStartTime=b,this.lastOutputScreen.copy(this.displayedMemory))},b.cueSplitAtTime=function(a){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,a,this.displayedMemory),this.cueStartTime=a))},a}(),fd=function(){function a(a,b,c,d){this.outputs=void 0,this.channels=void 0,this.currChNr=0,this.cmdHistory=void 0,this.outputs=[a,b],this.channels=[null,new ed(1,a),new ed(2,b),new ed(3,c),new ed(4,d)],this.cmdHistory=za()}var b=a.prototype;return b.getHandler=function(a){return this.channels[a].getHandler()},b.setHandler=function(a,b){this.channels[a].setHandler(b)},b.addData=function(a,b,c){var d,e,f,g=!1;$c.setTime(a);for(var h=0;h<b.length;h+=2)if(e=127&b[h],f=127&b[h+1],0!==e||0!==f){if($c.log("DATA","["+_c([b[h],b[h+1]])+"] -> ("+_c([e,f])+")"),d=this.parseCmd(e,f,c),d||(d=this.parseMidrow(e,f,c)),d||(d=this.parsePAC(e,f,c)),d||(d=this.parseBackgroundAttributes(e,f,c)),!d&&(g=this.parseChars(e,f,c))){var i=this.currChNr;if(i&&i>0)if(3===c&&i>2||1===c&&i<3){var j=this.channels[i];j.insertChars(g)}else $c.log("WARNING","The last seen channel number does not fall within the current field. Deferring character insertion until the field and channel match.");else $c.log("WARNING","No channel found yet. TEXT-MODE?")}d||g||$c.log("WARNING","Couldn't parse cleaned data "+_c([e,f])+" orig: "+_c([b[h],b[h+1]]))}},b.parseCmd=function(a,b,c){var d=this.cmdHistory,e=va(a),f=wa(b,c),g=e&&b>=32&&b<=47,h=f&&b>=33&&b<=35;if(!g&&!h)return!1;if(ya(a,b,d[c]))return xa(null,null,d[c]),$c.log("DEBUG","Repeated command ("+_c([a,b])+") is dropped"),!0;var i;return e?(i=this.channels[e],32===b?i.ccRCL():33===b?i.ccBS():34===b?i.ccAOF():35===b?i.ccAON():36===b?i.ccDER():37===b?i.ccRU(2):38===b?i.ccRU(3):39===b?i.ccRU(4):40===b?i.ccFON():41===b?i.ccRDC():42===b?i.ccTR():43===b?i.ccRTD():44===b?i.ccEDM():45===b?i.ccCR():46===b?i.ccENM():47===b&&i.ccEOC()):(i=this.channels[f],i.ccTO(b-32)),xa(a,b,d[c]),this.currChNr=e,!0},b.parseMidrow=function(a,b,c){var d=0;if((17===a||25===a)&&b>=32&&b<=47){if(d=17===a?c:c+1,d!==this.currChNr)return $c.log("ERROR","Mismatch channel in midrow parsing"),!1;var e=this.channels[d];return!!e&&(e.ccMIDROW(b),$c.log("DEBUG","MIDROW ("+_c([a,b])+")"),!0)}return!1},b.parsePAC=function(a,b,c){var d,e=0,f=this.cmdHistory,g=(a>=17&&a<=23||a>=25&&a<=31)&&b>=64&&b<=127,h=(16===a||24===a)&&b>=64&&b<=95;if(!g&&!h)return!1;if(ya(a,b,f[c]))return xa(null,null,f[c]),!0;var i;a<=23?(i=1,e=c):(i=2,e=c+1),d=b>=64&&b<=95?1===i?Uc[a]:Wc[a]:1===i?Vc[a]:Xc[a];var j=this.channels[e];return!!j&&(j.setPAC(this.interpretPAC(d,b)),xa(a,b,f[c]),this.currChNr=e,!0)},b.interpretPAC=function(a,b){var c=b,d={color:null,italics:!1,indent:null,underline:!1,row:a};return c=b>95?b-96:b-64,d.underline=1===(1&c),c<=13?d.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(c/2)]:c<=15?(d.italics=!0,d.color="white"):d.indent=4*Math.floor((c-16)/2),d},b.parseChars=function(a,b,c){var d=null,e=null,f=null;if(a>=25?(d=2,f=a-8):(d=1,f=a),f>=17&&f<=19){var g=b;g=17===f?b+80:18===f?b+112:b+144,$c.log("INFO","Special char '"+Rc(g)+"' in channel "+d),e=[g]}else a>=32&&a<=127&&(e=0===b?[a]:[a,b]);if(e){var h=_c(e);$c.log("DEBUG","Char codes =  "+h.join(",")),xa(a,b,this.cmdHistory[c])}return e},b.parseBackgroundAttributes=function(a,b,c){var d=(16===a||24===a)&&b>=32&&b<=47,e=(23===a||31===a)&&b>=45&&b<=47;if(!d&&!e)return!1;var f,g={};16===a||24===a?(f=Math.floor((b-32)/2),g.background=Yc[f],b%2===1&&(g.background=g.background+"_semi")):45===b?g.background="transparent":(g.foreground="black",47===b&&(g.underline=!0));var h=a<24?c:c+1,i=this.channels[h];return i.setBkgData(g),xa(a,b,this.cmdHistory[c]),!0},b.reset=function(){for(var a=0;a<Object.keys(this.channels).length;a++){var b=this.channels[a];b&&b.reset()}this.cmdHistory=za()},b.cueSplitAtTime=function(a){for(var b=0;b<this.channels.length;b++){var c=this.channels[b];c&&c.cueSplitAtTime(a)}},a}(),gd=fd,hd=function(){function a(a,b){this.timelineController=void 0,this.trackName=void 0,this.startTime=void 0,this.endTime=void 0,this.screen=void 0,this.timelineController=a,this.trackName=b,this.startTime=null,this.endTime=null,this.screen=null}var b=a.prototype;return b.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},b.newCue=function(a,b,c){(null===this.startTime||this.startTime>a)&&(this.startTime=a),this.endTime=b,this.screen=c,this.timelineController.createCaptionsTrack(this.trackName)},a}(),id=function(a,b,c){return a.substr(c||0,b.length)===b},jd=function(a){var b=parseInt(a.substr(-3)),c=parseInt(a.substr(-6,2)),d=parseInt(a.substr(-9,2)),e=a.length>9?parseInt(a.substr(0,a.indexOf(":"))):0;if(!(Object(bb.isFiniteNumber)(b)&&Object(bb.isFiniteNumber)(c)&&Object(bb.isFiniteNumber)(d)&&Object(bb.isFiniteNumber)(e)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+a);return b+=1e3*c,b+=6e4*d,b+=36e5*e},kd=function a(b){for(var a=5381,c=b.length;c;)a=33*a^b.charCodeAt(--c);return(a>>>0).toString()},ld=function(a,b,c){var d=a[b],e=a[d.prevCC];if(!e||!e.new&&d.new)return a.ccOffset=a.presentationOffset=d.start,void(d.new=!1);for(;e&&e.new;)a.ccOffset+=d.start-e.start,d.new=!1,d=e,e=a[d.prevCC];a.presentationOffset=c},md={parse:function(a,b,c,d,e,f){var g,h=/\r\n|\n\r|\n|\r/g,i=Object(hc.utf8ArrayToStr)(new Uint8Array(a)).trim().replace(h,"\n").split("\n"),j="00:00.000",k=0,l=0,m=0,n=[],o=!0,p=!1,q=new Pc;q.oncue=function(a){var b=c[d],e=c.ccOffset;b&&b.new&&(void 0!==l?e=c.ccOffset=b.start:ld(c,d,m)),m&&(e=m-c.presentationOffset),p&&(a.startTime+=e-l,a.endTime+=e-l),a.id=kd(a.startTime.toString())+kd(a.endTime.toString())+kd(a.text),a.text=decodeURIComponent(encodeURIComponent(a.text)),a.endTime>0&&n.push(a)},q.onparsingerror=function(a){g=a},q.onflush=function(){return g&&f?void f(g):void e(n)},i.forEach(function(a){if(o){if(id(a,"X-TIMESTAMP-MAP=")){o=!1,p=!0,a.substr(16).split(",").forEach(function(a){id(a,"LOCAL:")?j=a.substr(6):id(a,"MPEGTS:")&&(k=parseInt(a.substr(7)))});try{b+(9e4*c[d].start||0)<0&&(b+=8589934592),k-=b,l=jd(j)/1e3,m=k/9e4}catch(a){p=!1,g=a}return}""===a&&(o=!1)}q.parse(a+"\n")}),q.flush()}},nd=md,od=function(a){function b(b){var c;if(c=a.call(this,b,cb.default.MEDIA_ATTACHING,cb.default.MEDIA_DETACHING,cb.default.FRAG_PARSING_USERDATA,cb.default.FRAG_DECRYPTED,cb.default.MANIFEST_LOADING,cb.default.MANIFEST_LOADED,cb.default.FRAG_LOADED,cb.default.INIT_PTS_FOUND)||this,c.media=null,c.config=void 0,c.enabled=!0,c.Cues=void 0,c.textTracks=[],c.tracks=[],c.initPTS=[],c.unparsedVttFrags=[],c.cueRanges=[],c.captionsTracks={},c.nonNativeCaptionsTracks={},c.captionsProperties=void 0,c.cea608Parser=void 0,c.lastSn=-1,c.prevCC=-1,c.vttCCs=Ea(),c.hls=b,c.config=b.config,c.Cues=b.config.cueHandler,c.captionsProperties={textTrack1:{label:c.config.captionsTextTrack1Label,languageCode:c.config.captionsTextTrack1LanguageCode},textTrack2:{label:c.config.captionsTextTrack2Label,languageCode:c.config.captionsTextTrack2LanguageCode},textTrack3:{label:c.config.captionsTextTrack3Label,languageCode:c.config.captionsTextTrack3LanguageCode},textTrack4:{label:c.config.captionsTextTrack4Label,languageCode:c.config.captionsTextTrack4LanguageCode}},c.config.enableCEA708Captions){var d=new hd(Aa(c),"textTrack1"),e=new hd(Aa(c),"textTrack2"),f=new hd(Aa(c),"textTrack3"),g=new hd(Aa(c),"textTrack4");c.cea608Parser=new gd(d,e,f,g)}return c}Ba(b,a);var c=b.prototype;return c.addCues=function(a,b,c,d){for(var e=this.cueRanges,f=!1,g=e.length;g--;){var h=e[g],i=Da(h[0],h[1],b,c);if(i>=0&&(h[0]=Math.min(h[0],b),h[1]=Math.max(h[1],c),f=!0,i/(c-b)>.5))return}if(f||e.push([b,c]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[a],b,c,d);else{var j=this.Cues.newCue(null,b,c,d);this.hls.trigger(cb.default.CUES_PARSED,{type:"captions",cues:j,track:a})}},c.onInitPtsFound=function(a){var b=this,c=a.frag,d=a.id,e=a.initPTS,f=this.unparsedVttFrags;"main"===d&&(this.initPTS[c.cc]=e),f.length&&(this.unparsedVttFrags=[],f.forEach(function(a){b.onFragLoaded(a)}))},c.getExistingTrack=function(a){var b=this.media;if(b)for(var c=0;c<b.textTracks.length;c++){var d=b.textTracks[c];if(d[a])return d}return null},c.createCaptionsTrack=function(a){this.config.renderTextTracksNatively?this.createNativeTrack(a):this.createNonNativeTrack(a)},c.createNativeTrack=function(a){if(!this.captionsTracks[a]){var b=this.captionsProperties,c=this.captionsTracks,d=this.media,e=b[a],f=e.label,g=e.languageCode,h=this.getExistingTrack(a);if(h)c[a]=h,X(c[a]),W(c[a],d);else{var i=this.createTextTrack("captions",f,g);i&&(i[a]=!0,c[a]=i)}}},c.createNonNativeTrack=function(a){if(!this.nonNativeCaptionsTracks[a]){var b=this.captionsProperties[a];if(b){var c=b.label,d={_id:a,label:c,kind:"captions",default:!!b.media&&!!b.media.default,closedCaptions:b.media};this.nonNativeCaptionsTracks[a]=d,this.hls.trigger(cb.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[d]})}}},c.createTextTrack=function(a,b,c){var d=this.media;if(d)return d.addTextTrack(a,b,c)},c.destroy=function(){a.prototype.destroy.call(this)},c.onMediaAttaching=function(a){this.media=a.media,this._cleanTracks()},c.onMediaDetaching=function(){var a=this.captionsTracks;Object.keys(a).forEach(function(b){X(a[b]),delete a[b]}),this.nonNativeCaptionsTracks={}},c.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs=Ea(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={}},c._cleanTracks=function(){var a=this.media;if(a){var b=a.textTracks;if(b)for(var c=0;c<b.length;c++)X(b[c])}},c.onManifestLoaded=function(a){var b=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cueRanges=[],this.config.enableWebVTT){var c=a.subtitles||[],d=this.tracks&&c&&this.tracks.length===c.length;if(this.tracks=a.subtitles||[],this.config.renderTextTracksNatively){var e=this.media?this.media.textTracks:[];this.tracks.forEach(function(a,c){var d;if(c<e.length){for(var f=null,g=0;g<e.length;g++)if(Ca(e[g],a)){f=e[g];break}f&&(d=f)}d||(d=b.createTextTrack("subtitles",a.name,a.lang)),a.default?d.mode=b.hls.subtitleDisplay?"showing":"hidden":d.mode="disabled",b.textTracks.push(d)})}else if(!d&&this.tracks&&this.tracks.length){var f=this.tracks.map(function(a){return{label:a.name,kind:a.type.toLowerCase(),default:a.default,subtitleTrack:a}});this.hls.trigger(cb.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:f})}}this.config.enableCEA708Captions&&a.captions&&a.captions.forEach(function(a){var c=/(?:CC|SERVICE)([1-4])/.exec(a.instreamId);if(c){var d="textTrack"+c[1],e=b.captionsProperties[d];e&&(e.label=a.name,a.lang&&(e.languageCode=a.lang),e.media=a)}})},c.onFragLoaded=function(a){var b=a.frag,c=a.payload,d=this.cea608Parser,e=this.initPTS,f=this.lastSn,g=this.unparsedVttFrags;if("main"===b.type){var h=b.sn;b.sn!==f+1&&d&&d.reset(),this.lastSn=h}else if("subtitle"===b.type)if(c.byteLength){if(!Object(bb.isFiniteNumber)(e[b.cc]))return g.push(a),void(e.length&&this.hls.trigger(cb.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:b}));var i=b.decryptdata;null!=i&&null!=i.key&&"AES-128"===i.method||this._parseVTTs(b,c)}else this.hls.trigger(cb.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:b})},c._parseVTTs=function(a,b){var c=this,d=this.hls,e=this.prevCC,f=this.textTracks,g=this.vttCCs;g[a.cc]||(g[a.cc]={start:a.start,prevCC:e,new:!0},this.prevCC=a.cc),nd.parse(b,this.initPTS[a.cc],g,a.cc,function(b){if(c.config.renderTextTracksNatively){var e=f[a.level];if("disabled"===e.mode)return void d.trigger(cb.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:a});b.forEach(function(a){if(!e.cues.getCueById(a.id))try{if(e.addCue(a),!e.cues.getCueById(a.id))throw new Error("addCue is failed for: "+a)}catch(c){db.logger.debug("Failed occurred on adding cues: "+c);var b=new window.TextTrackCue(a.startTime,a.endTime,a.text);b.id=a.id,e.addCue(b)}})}else{var g=c.tracks[a.level].default?"default":"subtitles"+a.level;d.trigger(cb.default.CUES_PARSED,{type:"subtitles",cues:b,track:g})}d.trigger(cb.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:a})},function(b){db.logger.log("Failed to parse VTT cue: "+b),d.trigger(cb.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:a})})},c.onFragDecrypted=function(a){var b=a.frag,c=a.payload;if("subtitle"===b.type){if(!Object(bb.isFiniteNumber)(this.initPTS[b.cc]))return void this.unparsedVttFrags.push(a);this._parseVTTs(b,c)}},c.onFragParsingUserdata=function(a){if(this.enabled&&this.cea608Parser)for(var b=this.cea608Parser,c=0;c<a.samples.length;c++){var d=a.samples[c].bytes;if(d){var e=this.extractCea608Data(d);b.addData(a.samples[c].pts,e[0],1),b.addData(a.samples[c].pts,e[1],3)}}},c.extractCea608Data=function(a){for(var b=31&a[0],c=2,d=[[],[]],e=0;e<b;e++){var f=a[c++],g=127&a[c++],h=127&a[c++],i=0!==(4&f),j=3&f;0===g&&0===h||i&&(0!==j&&1!==j||(d[j].push(g),d[j].push(h)))}return d},b}(gb),pd=od,qd=function(a){function b(b){var c;return c=a.call(this,b,cb.default.MEDIA_ATTACHED,cb.default.MEDIA_DETACHING,cb.default.MANIFEST_LOADED,cb.default.SUBTITLE_TRACK_LOADED)||this,c.tracks=[],c.trackId=-1,c.media=null,c.stopped=!0,c.subtitleDisplay=!0,c.queuedDefaultTrack=null,c}Ha(b,a);var c=b.prototype;return c.destroy=function(){gb.prototype.destroy.call(this)},c.onMediaAttached=function(a){var b=this;this.media=a.media,this.media&&(Object(bb.isFiniteNumber)(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){b.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener));
},c.onMediaDetaching=function(){if(this.media){this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),Object(bb.isFiniteNumber)(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack);var a=Ia(this.media.textTracks);a.forEach(function(a){X(a)}),this.subtitleTrack=-1,this.media=null}},c.onManifestLoaded=function(a){var b=this,c=a.subtitles||[];this.tracks=c,this.hls.trigger(cb.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:c}),c.forEach(function(a){a.default&&(b.media?b.subtitleTrack=a.id:b.queuedDefaultTrack=a.id)})},c.onSubtitleTrackLoaded=function(a){var b=this,c=a.id,d=a.details,e=this.trackId,f=this.tracks,g=f[e];if(c>=f.length||c!==e||!g||this.stopped)return void this._clearReloadTimer();if(db.logger.log("subtitle track "+c+" loaded"),d.live){var h=A(g.details,d,a.stats.trequest);db.logger.log("Reloading live subtitle playlist in "+h+"ms"),this.timer=setTimeout(function(){b._loadCurrentTrack()},h)}else this._clearReloadTimer()},c.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},c.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},c._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},c._loadCurrentTrack=function(){var a=this.trackId,b=this.tracks,c=this.hls,d=b[a];a<0||!d||d.details&&!d.details.live||(db.logger.log("Loading subtitle track "+a),c.trigger(cb.default.SUBTITLE_TRACK_LOADING,{url:d.url,id:a}))},c._toggleTrackModes=function(a){var b=this.media,c=this.subtitleDisplay,d=this.trackId;if(b){var e=Ia(b.textTracks);if(a===-1)[].slice.call(e).forEach(function(a){a.mode="disabled"});else{var f=e[d];f&&(f.mode="disabled")}var g=e[a];g&&(g.mode=c?"showing":"hidden")}},c._setSubtitleTrackInternal=function(a){var b=this.hls,c=this.tracks;!Object(bb.isFiniteNumber)(a)||a<-1||a>=c.length||(this.trackId=a,db.logger.log("Switching to subtitle track "+a),b.trigger(cb.default.SUBTITLE_TRACK_SWITCH,{id:a}),this._loadCurrentTrack())},c._onTextTracksChanged=function(){if(this.media&&this.hls.config.renderTextTracksNatively){for(var a=-1,b=Ia(this.media.textTracks),c=0;c<b.length;c++)if("hidden"===b[c].mode)a=c;else if("showing"===b[c].mode){a=c;break}this.subtitleTrack=a}},Ga(b,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(a){this.trackId!==a&&(this._toggleTrackModes(a),this._setSubtitleTrackInternal(a))}}]),b}(gb),rd=qd,sd=c("./src/crypt/decrypter.js"),td=window,ud=td.performance,vd=500,wd=function(a){function b(b,c){var d;return d=a.call(this,b,cb.default.MEDIA_ATTACHED,cb.default.MEDIA_DETACHING,cb.default.ERROR,cb.default.KEY_LOADED,cb.default.FRAG_LOADED,cb.default.SUBTITLE_TRACKS_UPDATED,cb.default.SUBTITLE_TRACK_SWITCH,cb.default.SUBTITLE_TRACK_LOADED,cb.default.SUBTITLE_FRAG_PROCESSED,cb.default.LEVEL_UPDATED)||this,d.fragmentTracker=c,d.config=b.config,d.state=bc.STOPPED,d.tracks=[],d.tracksBuffered=[],d.currentTrackId=-1,d.decrypter=new sd.default(b,b.config),d.lastAVStart=0,d._onMediaSeeking=d.onMediaSeeking.bind(Ja(d)),d}Ka(b,a);var c=b.prototype;return c.onSubtitleFragProcessed=function(a){var b=a.frag,c=a.success;if(this.fragPrevious=b,this.state=bc.IDLE,c){var d=this.tracksBuffered[this.currentTrackId];if(d){for(var e,f=b.start,g=0;g<d.length;g++)if(f>=d[g].start&&f<=d[g].end){e=d[g];break}var h=b.start+b.duration;e?e.end=h:(e={start:f,end:h},d.push(e))}}},c.onMediaAttached=function(a){var b=a.media;this.media=b,b.addEventListener("seeking",this._onMediaSeeking),this.state=bc.IDLE},c.onMediaDetaching=function(){var a=this;this.media&&(this.media.removeEventListener("seeking",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach(function(b){a.tracksBuffered[b.id]=[]}),this.media=null,this.state=bc.STOPPED)},c.onError=function(a){var b=a.frag;b&&"subtitle"===b.type&&(this.state=bc.IDLE)},c.onSubtitleTracksUpdated=function(a){var b=this;db.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=a.subtitleTracks,this.tracks.forEach(function(a){b.tracksBuffered[a.id]=[]})},c.onSubtitleTrackSwitch=function(a){if(this.currentTrackId=a.id,!this.tracks||!this.tracks.length||this.currentTrackId===-1)return void this.clearInterval();var b=this.tracks[this.currentTrackId];b&&b.details&&this.setInterval(vd)},c.onSubtitleTrackLoaded=function(a){var b=a.id,c=a.details,d=this.currentTrackId,e=this.tracks,f=e[d];b>=e.length||b!==d||!f||(c.live&&x(f.details,c,this.lastAVStart),f.details=c,this.setInterval(vd))},c.onKeyLoaded=function(){this.state===bc.KEY_LOADING&&(this.state=bc.IDLE)},c.onFragLoaded=function(a){var b=this.fragCurrent,c=a.frag.decryptdata,d=a.frag,e=this.hls;if(this.state===bc.FRAG_LOADING&&b&&"subtitle"===a.frag.type&&b.sn===a.frag.sn&&a.payload.byteLength>0&&c&&c.key&&"AES-128"===c.method){var f=ud.now();this.decrypter.decrypt(a.payload,c.key.buffer,c.iv.buffer,function(a){var b=ud.now();e.trigger(cb.default.FRAG_DECRYPTED,{frag:d,payload:a,stats:{tstart:f,tdecrypt:b}})})}},c.onLevelUpdated=function(a){var b=a.details,c=b.fragments;this.lastAVStart=c.length?c[0].start:0},c.doTick=function(){if(!this.media)return void(this.state=bc.IDLE);switch(this.state){case bc.IDLE:var a=this.config,b=this.currentTrackId,c=this.fragmentTracker,d=this.media,e=this.tracks;if(!e||!e[b]||!e[b].details)break;var f=a.maxBufferHole,g=a.maxFragLookUpTolerance,h=Math.min(a.maxBufferLength,a.maxMaxBufferLength),i=Lb.bufferedInfo(this._getBuffered(),d.currentTime,f),j=i.end,k=i.len,l=e[b].details,m=l.fragments,n=m.length,o=m[n-1].start+m[n-1].duration;if(k>h)return;var p,q=this.fragPrevious;j<o?(q&&l.hasProgramDateTime&&(p=J(m,q.endProgramDateTime,g)),p||(p=K(q,m,j,g))):p=m[n-1],p&&p.encrypted?(db.logger.log("Loading key for "+p.sn),this.state=bc.KEY_LOADING,this.hls.trigger(cb.default.KEY_LOADING,{frag:p})):p&&c.getState(p)===Hb.NOT_LOADED&&(this.fragCurrent=p,this.state=bc.FRAG_LOADING,this.hls.trigger(cb.default.FRAG_LOADING,{frag:p}))}},c.stopLoad=function(){this.lastAVStart=0,a.prototype.stopLoad.call(this)},c._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},c.onMediaSeeking=function(){this.fragPrevious=null},b}(cc);!function(a){a.WIDEVINE="com.widevine.alpha",a.PLAYREADY="com.microsoft.playready"}(Zc||(Zc={}));var xd=function(){return"undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null}(),yd=3,zd=function(a,b,c){var d={audioCapabilities:[],videoCapabilities:[]};return a.forEach(function(a){d.audioCapabilities.push({contentType:'audio/mp4; codecs="'+a+'"',robustness:c.audioRobustness||""})}),b.forEach(function(a){d.videoCapabilities.push({contentType:'video/mp4; codecs="'+a+'"',robustness:c.videoRobustness||""})}),[d]},Ad=function(a,b,c,d){switch(a){case Zc.WIDEVINE:return zd(b,c,d);default:throw new Error("Unknown key-system: "+a)}},Bd=function(a){function b(b){var c;return c=a.call(this,b,cb.default.MEDIA_ATTACHED,cb.default.MEDIA_DETACHED,cb.default.MANIFEST_PARSED)||this,c._widevineLicenseUrl=void 0,c._licenseXhrSetup=void 0,c._emeEnabled=void 0,c._requestMediaKeySystemAccess=void 0,c._drmSystemOptions=void 0,c._config=void 0,c._mediaKeysList=[],c._media=null,c._hasSetMediaKeys=!1,c._requestLicenseFailureCount=0,c.mediaKeysPromise=null,c._onMediaEncrypted=function(a){if(db.logger.log('Media is encrypted using "'+a.initDataType+'" init data type'),!c.mediaKeysPromise)return db.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void c.hls.trigger(cb.default.ERROR,{type:ab.ErrorTypes.KEY_SYSTEM_ERROR,details:ab.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});var b=function(b){c._media&&(c._attemptSetMediaKeys(b),c._generateRequestWithPreferredKeySession(a.initDataType,a.initData))};c.mediaKeysPromise.then(b).catch(b)},c._config=b.config,c._widevineLicenseUrl=c._config.widevineLicenseUrl,c._licenseXhrSetup=c._config.licenseXhrSetup,c._emeEnabled=c._config.emeEnabled,c._requestMediaKeySystemAccess=c._config.requestMediaKeySystemAccessFunc,c._drmSystemOptions=b.config.drmSystemOptions,c}Na(b,a);var c=b.prototype;return c.getLicenseServerUrl=function(a){switch(a){case Zc.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+a+'"')},c._attemptKeySystemAccess=function(a,b,c){var d=this,e=Ad(a,b,c,this._drmSystemOptions);db.logger.log("Requesting encrypted media key-system access");var f=this.requestMediaKeySystemAccess(a,e);this.mediaKeysPromise=f.then(function(b){return d._onMediaKeySystemAccessObtained(a,b)}),f.catch(function(b){db.logger.error('Failed to obtain key-system "'+a+'" access:',b)})},c._onMediaKeySystemAccessObtained=function(a,b){var c=this;db.logger.log('Access for key-system "'+a+'" obtained');var d={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:b,mediaKeySystemDomain:a};this._mediaKeysList.push(d);var e=Promise.resolve().then(function(){return b.createMediaKeys()}).then(function(b){return d.mediaKeys=b,db.logger.log('Media-keys created for key-system "'+a+'"'),c._onMediaKeysCreated(),b});return e.catch(function(a){db.logger.error("Failed to create media-keys:",a)}),e},c._onMediaKeysCreated=function(){var a=this;this._mediaKeysList.forEach(function(b){b.mediaKeysSession||(b.mediaKeysSession=b.mediaKeys.createSession(),a._onNewMediaKeySession(b.mediaKeysSession))})},c._onNewMediaKeySession=function(a){var b=this;db.logger.log("New key-system session "+a.sessionId),a.addEventListener("message",function(c){b._onKeySessionMessage(a,c.message)},!1)},c._onKeySessionMessage=function(a,b){db.logger.log("Got EME message event, creating license request"),this._requestLicense(b,function(b){db.logger.log("Received license data (length: "+(b?b.byteLength:b)+"), updating key-session"),a.update(b)})},c._attemptSetMediaKeys=function(a){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var b=this._mediaKeysList[0];if(!b||!b.mediaKeys)return db.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(cb.default.ERROR,{type:ab.ErrorTypes.KEY_SYSTEM_ERROR,details:ab.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});db.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(b.mediaKeys),this._hasSetMediaKeys=!0}},c._generateRequestWithPreferredKeySession=function(a,b){var c=this,d=this._mediaKeysList[0];if(!d)return db.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(cb.default.ERROR,{type:ab.ErrorTypes.KEY_SYSTEM_ERROR,details:ab.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(d.mediaKeysSessionInitialized)return void db.logger.warn("Key-Session already initialized but requested again");var e=d.mediaKeysSession;return e?b?(db.logger.log('Generating key-session request for "'+a+'" init data type'),d.mediaKeysSessionInitialized=!0,void e.generateRequest(a,b).then(function(){db.logger.debug("Key-session generation succeeded")}).catch(function(a){db.logger.error("Error generating key-session request:",a),c.hls.trigger(cb.default.ERROR,{type:ab.ErrorTypes.KEY_SYSTEM_ERROR,details:ab.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})):(db.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(cb.default.ERROR,{type:ab.ErrorTypes.KEY_SYSTEM_ERROR,details:ab.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0})):(db.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(cb.default.ERROR,{type:ab.ErrorTypes.KEY_SYSTEM_ERROR,details:ab.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0}))},c._createLicenseXhr=function(a,b,c){var d=new XMLHttpRequest,e=this._licenseXhrSetup;try{if(e)try{e(d,a)}catch(b){d.open("POST",a,!0),e(d,a)}d.readyState||d.open("POST",a,!0)}catch(a){throw new Error("issue setting up KeySystem license XHR "+a)}return d.responseType="arraybuffer",d.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,d,a,b,c),d},c._onLicenseRequestReadyStageChange=function(a,b,c,d){switch(a.readyState){case 4:if(200===a.status)this._requestLicenseFailureCount=0,db.logger.log("License request succeeded"),"arraybuffer"!==a.responseType&&db.logger.warn("xhr response type was not set to the expected arraybuffer for license request"),d(a.response);else{if(db.logger.error("License Request XHR failed ("+b+"). Status: "+a.status+" ("+a.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>yd)return void this.hls.trigger(cb.default.ERROR,{type:ab.ErrorTypes.KEY_SYSTEM_ERROR,details:ab.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var e=yd-this._requestLicenseFailureCount+1;db.logger.warn("Retrying license request, "+e+" attempts left"),this._requestLicense(c,d)}}},c._generateLicenseRequestChallenge=function(a,b){switch(a.mediaKeySystemDomain){case Zc.WIDEVINE:return b}throw new Error("unsupported key-system: "+a.mediaKeySystemDomain)},c._requestLicense=function(a,b){db.logger.log("Requesting content license for key-system");var c=this._mediaKeysList[0];if(!c)return db.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(cb.default.ERROR,{type:ab.ErrorTypes.KEY_SYSTEM_ERROR,details:ab.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var d=this.getLicenseServerUrl(c.mediaKeySystemDomain),e=this._createLicenseXhr(d,a,b);db.logger.log("Sending license request to URL: "+d);var f=this._generateLicenseRequestChallenge(c,a);e.send(f)}catch(a){db.logger.error("Failure requesting DRM license: "+a),this.hls.trigger(cb.default.ERROR,{type:ab.ErrorTypes.KEY_SYSTEM_ERROR,details:ab.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},c.onMediaAttached=function(a){if(this._emeEnabled){var b=a.media;this._media=b,b.addEventListener("encrypted",this._onMediaEncrypted)}},c.onMediaDetached=function(){this._media&&(this._media.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null)},c.onManifestParsed=function(a){if(this._emeEnabled){var b=a.levels.map(function(a){return a.audioCodec}),c=a.levels.map(function(a){return a.videoCodec});this._attemptKeySystemAccess(Zc.WIDEVINE,b,c)}},Ma(b,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),b}(gb),Cd=Bd,Dd=Pa(Pa({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Cc,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:rc,bufferController:uc,capLevelController:wc,fpsController:Ac,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:xd,testBandwidth:!0},Ra()),{},{subtitleStreamController:wd,subtitleTrackController:rd,timelineController:pd,audioStreamController:Jc,audioTrackController:Ec,emeController:Cd}),Ed=function(a){function b(c){var d;void 0===c&&(c={}),d=a.call(this)||this,d.config=void 0,d._autoLevelCapping=void 0,d.abrController=void 0,d.capLevelController=void 0,d.levelController=void 0,d.streamController=void 0,d.networkControllers=void 0,d.audioTrackController=void 0,d.subtitleTrackController=void 0,d.emeController=void 0,d.coreComponents=void 0,d.media=null,d.url=null;var e=b.DefaultConfig;if((c.liveSyncDurationCount||c.liveMaxLatencyDurationCount)&&(c.liveSyncDuration||c.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");d.config=Ta(Ta({},e),c);var f=Va(d),g=f.config;if(void 0!==g.liveMaxLatencyDurationCount&&g.liveMaxLatencyDurationCount<=g.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==g.liveMaxLatencyDuration&&(void 0===g.liveSyncDuration||g.liveMaxLatencyDuration<=g.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(db.enableLogs)(g.debug),d._autoLevelCapping=-1;var h=d.abrController=new g.abrController(Va(d)),i=new g.bufferController(Va(d)),j=d.capLevelController=new g.capLevelController(Va(d)),k=new g.fpsController(Va(d)),l=new Cb(Va(d)),m=new Eb(Va(d)),n=new Gb(Va(d)),o=new jc(Va(d)),p=d.levelController=new gc(Va(d)),q=new Ib(Va(d)),r=d.streamController=new fc(Va(d),q),s=[p,r],t=g.audioStreamController;t&&s.push(new t(Va(d),q)),d.networkControllers=s;var u=[l,m,n,h,i,j,k,o,q];if(t=g.audioTrackController){var v=new t(Va(d));d.audioTrackController=v,u.push(v)}if(t=g.subtitleTrackController){var w=new t(Va(d));d.subtitleTrackController=w,s.push(w)}if(t=g.emeController){var x=new t(Va(d));d.emeController=x,u.push(x)}return t=g.subtitleStreamController,t&&s.push(new t(Va(d),q)),t=g.timelineController,t&&u.push(new t(Va(d))),d.coreComponents=u,d}Ya(b,a),b.isSupported=function(){return $()},Xa(b,null,[{key:"version",get:function(){}},{key:"Events",get:function(){return cb.default}},{key:"ErrorTypes",get:function(){return ab.ErrorTypes}},{key:"ErrorDetails",get:function(){return ab.ErrorDetails}},{key:"DefaultConfig",get:function(){return b.defaultConfig?b.defaultConfig:Dd},set:function(a){b.defaultConfig=a}}]);var c=b.prototype;return c.destroy=function(){db.logger.log("destroy"),this.trigger(cb.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(a){a.destroy()}),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},c.attachMedia=function(a){db.logger.log("attachMedia"),this.media=a,this.trigger(cb.default.MEDIA_ATTACHING,{media:a})},c.detachMedia=function(){db.logger.log("detachMedia"),this.trigger(cb.default.MEDIA_DETACHING),this.media=null},c.loadSource=function(a){a=_a.buildAbsoluteURL(window.location.href,a,{alwaysNormalize:!0}),db.logger.log("loadSource:"+a),this.url=a,this.trigger(cb.default.MANIFEST_LOADING,{url:a})},c.startLoad=function(a){void 0===a&&(a=-1),db.logger.log("startLoad("+a+")"),this.networkControllers.forEach(function(b){b.startLoad(a)})},c.stopLoad=function(){db.logger.log("stopLoad"),this.networkControllers.forEach(function(a){a.stopLoad()})},c.swapAudioCodec=function(){db.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},c.recoverMediaError=function(){db.logger.log("recoverMediaError");var a=this.media;this.detachMedia(),a&&this.attachMedia(a)},c.removeLevel=function(a,b){void 0===b&&(b=0),this.levelController.removeLevel(a,b)},Xa(b,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(a){db.logger.log("set currentLevel:"+a),this.loadLevel=a,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(a){db.logger.log("set nextLevel:"+a),this.levelController.manualLevel=a,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(a){db.logger.log("set loadLevel:"+a),this.levelController.manualLevel=a}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(a){this.levelController.nextLoadLevel=a}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(a){db.logger.log("set firstLevel:"+a),this.levelController.firstLevel=a}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(a){db.logger.log("set startLevel:"+a),a!==-1&&(a=Math.max(a,this.minAutoLevel)),this.levelController.startLevel=a}},{key:"capLevelToPlayerSize",set:function(a){var b=!!a;b!==this.config.capLevelToPlayerSize&&(b?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=b)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(a){db.logger.log("set autoLevelCapping:"+a),this._autoLevelCapping=a}},{key:"bandwidthEstimate",get:function(){var a=this.abrController._bwEstimator;return a?a.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var a=this.levels,b=this.config.minAutoBitrate,c=a?a.length:0,d=0;d<c;d++){var e=a[d].realBitrate?Math.max(a[d].realBitrate,a[d].bitrate):a[d].bitrate;if(e>b)return d}return 0}},{key:"maxAutoLevel",get:function(){var a,b=this.levels,c=this.autoLevelCapping;return a=c===-1&&b&&b.length?b.length-1:c}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(a){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,a)}},{key:"audioTracks",get:function(){var a=this.audioTrackController;return a?a.audioTracks:[]}},{key:"audioTrack",get:function(){var a=this.audioTrackController;return a?a.audioTrack:-1},set:function(a){var b=this.audioTrackController;b&&(b.audioTrack=a)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var a=this.subtitleTrackController;return a?a.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var a=this.subtitleTrackController;return a?a.subtitleTrack:-1},set:function(a){var b=this.subtitleTrackController;b&&(b.subtitleTrack=a)}},{key:"subtitleDisplay",get:function(){var a=this.subtitleTrackController;return!!a&&a.subtitleDisplay},set:function(a){var b=this.subtitleTrackController;b&&(b.subtitleDisplay=a)}}]),b}(Qb);Ed.defaultConfig=void 0},"./src/polyfills/number-isFinite.js":function(a,b,c){"use strict";c.r(b),c.d(b,"isFiniteNumber",function(){return d});var d=Number.isFinite||function(a){return"number"==typeof a&&isFinite(a)}},"./src/utils/get-self-scope.js":function(a,b,c){"use strict";function d(){return"undefined"==typeof window?self:window}c.r(b),c.d(b,"getSelfScope",function(){return d})},"./src/utils/logger.js":function(a,b,c){"use strict";function d(){}function e(a,b){return b="["+a+"] > "+b}function f(a){var b=k.console[a];return b?function(){for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];d[0]&&(d[0]=e(a,d[0])),b.apply(k.console,d)}:d}function g(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];c.forEach(function(b){j[b]=a[b]?a[b].bind(a):f(b)})}c.r(b),c.d(b,"enableLogs",function(){return l}),c.d(b,"logger",function(){return m});var h=c("./src/utils/get-self-scope.js"),i={trace:d,debug:d,log:d,warn:d,info:d,error:d},j=i,k=Object(h.getSelfScope)(),l=function(a){if(k.console&&a===!0||"object"==typeof a){g(a,"debug","log","info","warn","error");try{j.log()}catch(a){j=i}}else j=i},m=j}}).default}),!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.flvjs=a()}}(function(){var a;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(b,c,d){(function(e,f){!function(b,e){"object"==typeof d&&void 0!==c?c.exports=e():"function"==typeof a&&a.amd?a(e):b.ES6Promise=e()}(this,function(){"use strict";function a(a){return"function"==typeof a||"object"==typeof a&&null!==a}function c(a){return"function"==typeof a}function d(a){T=a}function g(a){U=a}function h(){return void 0!==S?function(){S(j)}:i()}function i(){var a=setTimeout;return function(){return a(j,1)}}function j(){for(var a=0;a<R;a+=2)(0,$[a])($[a+1]),$[a]=void 0,$[a+1]=void 0;R=0}function k(a,b){var c=arguments,d=this,e=new this.constructor(m);void 0===e[aa]&&F(e);var f=d._state;return f?function(){var a=c[f-1];U(function(){return C(f,e,a,d._result)})}():y(d,e,a,b),e}function l(a){var b=this;if(a&&"object"==typeof a&&a.constructor===b)return a;var c=new b(m);return u(c,a),c}function m(){}function n(){return new TypeError("You cannot resolve a promise with itself")}function o(){return new TypeError("A promises callback cannot return that same promise.")}function p(a){try{return a.then}catch(a){return ea.error=a,ea}}function q(a,b,c,d){try{a.call(b,c,d)}catch(a){return a}}function r(a,b,c){U(function(a){var d=!1,e=q(c,b,function(c){d||(d=!0,b!==c?u(a,c):w(a,c))},function(b){d||(d=!0,x(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,x(a,e))},a)}function s(a,b){b._state===ca?w(a,b._result):b._state===da?x(a,b._result):y(b,void 0,function(b){return u(a,b)},function(b){return x(a,b)})}function t(a,b,d){b.constructor===a.constructor&&d===k&&b.constructor.resolve===l?s(a,b):d===ea?(x(a,ea.error),ea.error=null):void 0===d?w(a,b):c(d)?r(a,b,d):w(a,b)}function u(b,c){b===c?x(b,n()):a(c)?t(b,c,p(c)):w(b,c)}function v(a){a._onerror&&a._onerror(a._result),z(a)}function w(a,b){a._state===ba&&(a._result=b,a._state=ca,0!==a._subscribers.length&&U(z,a))}function x(a,b){a._state===ba&&(a._state=da,a._result=b,U(v,a))}function y(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+ca]=c,e[f+da]=d,0===f&&a._state&&U(z,a)}function z(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d=void 0,e=void 0,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?C(c,d,e,f):e(f);a._subscribers.length=0}}function A(){this.error=null}function B(a,b){try{return a(b)}catch(a){return fa.error=a,fa}}function C(a,b,d,e){var f=c(d),g=void 0,h=void 0,i=void 0,j=void 0;if(f){if(g=B(d,e),g===fa?(j=!0,h=g.error,g.error=null):i=!0,b===g)return void x(b,o())}else g=e,i=!0;b._state!==ba||(f&&i?u(b,g):j?x(b,h):a===ca?w(b,g):a===da&&x(b,g))}function D(a,b){try{b(function(b){u(a,b)},function(b){x(a,b)})}catch(b){x(a,b)}}function E(){return ga++}function F(a){a[aa]=ga++,a._state=void 0,a._result=void 0,a._subscribers=[]}function G(a,b){this._instanceConstructor=a,this.promise=new a(m),this.promise[aa]||F(this.promise),Q(b)?(this._input=b,this.length=b.length,this._remaining=b.length,this._result=new Array(this.length),0===this.length?w(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&w(this.promise,this._result))):x(this.promise,H())}function H(){return new Error("Array Methods must be provided an Array")}function I(a){return new G(this,a).promise}function J(a){var b=this;return new b(Q(a)?function(c,d){for(var e=a.length,f=0;f<e;f++)b.resolve(a[f]).then(c,d)}:function(a,b){return b(new TypeError("You must pass an array to race."))})}function K(a){var b=this,c=new b(m);return x(c,a),c}function L(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function M(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function N(a){this[aa]=E(),this._result=this._state=void 0,this._subscribers=[],m!==a&&("function"!=typeof a&&L(),this instanceof N?D(this,a):M())}function O(){var a=void 0;if(void 0!==f)a=f;else if("undefined"!=typeof self)a=self;else try{a=Function("return this")()}catch(a){throw new Error("polyfill failed because global object is unavailable in this environment")}var b=a.Promise;if(b){var c=null;try{c=Object.prototype.toString.call(b.resolve())}catch(a){}if("[object Promise]"===c&&!b.cast)return}a.Promise=N}var P=void 0;P=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var Q=P,R=0,S=void 0,T=void 0,U=function(a,b){$[R]=a,$[R+1]=b,2===(R+=2)&&(T?T(j):_())},V="undefined"!=typeof window?window:void 0,W=V||{},X=W.MutationObserver||W.WebKitMutationObserver,Y="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),Z="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,$=new Array(1e3),_=void 0;_=Y?function(){return function(){return e.nextTick(j)}}():X?function(){var a=0,b=new X(j),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}():Z?function(){var a=new MessageChannel;return a.port1.onmessage=j,function(){return a.port2.postMessage(0)}}():void 0===V&&"function"==typeof b?function(){try{var a=b,c=a("vertx");return S=c.runOnLoop||c.runOnContext,h()}catch(a){return i()}}():i();var aa=Math.random().toString(36).substring(16),ba=void 0,ca=1,da=2,ea=new A,fa=new A,ga=0;return G.prototype._enumerate=function(){for(var a=this.length,b=this._input,c=0;this._state===ba&&c<a;c++)this._eachEntry(b[c],c)},G.prototype._eachEntry=function(a,b){var c=this._instanceConstructor,d=c.resolve;if(d===l){var e=p(a);if(e===k&&a._state!==ba)this._settledAt(a._state,b,a._result);else if("function"!=typeof e)this._remaining--,this._result[b]=a;else if(c===N){var f=new c(m);t(f,a,e),this._willSettleAt(f,b)}else this._willSettleAt(new c(function(b){return b(a)}),b)}else this._willSettleAt(d(a),b)},G.prototype._settledAt=function(a,b,c){var d=this.promise;d._state===ba&&(this._remaining--,a===da?x(d,c):this._result[b]=c),0===this._remaining&&w(d,this._result)},G.prototype._willSettleAt=function(a,b){var c=this;y(a,void 0,function(a){return c._settledAt(ca,b,a)},function(a){return c._settledAt(da,b,a)})},N.all=I,N.race=J,N.resolve=l,N.reject=K,N._setScheduler=d,N._setAsap=g,N._asap=U,N.prototype={constructor:N,then:k,catch:function(a){return this.then(null,a)}},N.polyfill=O,N.Promise=N,N})}).call(this,b("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:3}],2:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||a<0||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){
var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if((b=arguments[1])instanceof Error)throw b;var k=new Error('Uncaught, unspecified "error" event. ('+b+")");throw k.context=b,k}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:f=Array.prototype.slice.call(arguments,1),c.apply(this,f)}else if(g(c))for(f=Array.prototype.slice.call(arguments,1),j=c.slice(),d=j.length,i=0;i<d;i++)j[i].apply(this,f);return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned&&(c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners)&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,"function"==typeof console.trace&&void 0),this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-- >0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(d<0)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else if(c)for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){return this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.prototype.listenerCount=function(a){if(this._events){var b=this._events[a];if(e(b))return 1;if(b)return b.length}return 0},d.listenerCount=function(a,b){return a.listenerCount(b)}},{}],3:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.prependListener=k,n.prependOnceListener=k,n.listeners=function(a){return[]},n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],4:[function(a,b,c){var d=arguments[3],e=arguments[4],f=arguments[5],g=JSON.stringify;b.exports=function(a,b){function c(a){q[a]=!0;for(var b in e[a][1]){var d=e[a][1][b];q[d]||c(d)}}for(var h,i=Object.keys(f),j=0,k=i.length;j<k;j++){var l=i[j],m=f[l].exports;if(m===a||m&&m.default===a){h=l;break}}if(!h){h=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var n={},j=0,k=i.length;j<k;j++){var l=i[j];n[l]=l}e[h]=[Function(["require","module","exports"],"("+a+")(self)"),n]}var o=Math.floor(Math.pow(16,8)*Math.random()).toString(16),p={};p[h]=h,e[o]=[Function(["require"],"var f = require("+g(h)+");(f.default ? f.default : f)(self);"),p];var q={};c(o);var r="("+d+")({"+Object.keys(q).map(function(a){return g(a)+":["+e[a][0]+","+g(e[a][1])+"]"}).join(",")+"},{},["+g(o)+"])",s=window.URL||window.webkitURL||window.mozURL||window.msURL,t=new Blob([r],{type:"text/javascript"});if(b&&b.bare)return t;var u=s.createObjectURL(t),v=new Worker(u);return v.objectURL=u,v}},{}],5:[function(a,b,c){"use strict";function d(){return Object.assign({},e)}Object.defineProperty(c,"__esModule",{value:!0}),c.createDefaultConfig=d;var e=c.defaultConfig={enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,lazyLoad:!0,lazyLoadMaxDuration:180,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:180,autoCleanupMinBackwardDuration:120,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1}},{}],6:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("../io/io-controller.js"),g=function(a){return a&&a.__esModule?a:{default:a}}(f),h=a("../config.js"),i=function(){function a(){d(this,a)}return e(a,null,[{key:"supportMSEH264Playback",value:function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')}},{key:"supportNetworkStreamIO",value:function(){var a=new g.default({},(0,h.createDefaultConfig)()),b=a.loaderType;return a.destroy(),"fetch-stream-loader"==b||"xhr-moz-chunked-loader"==b}},{key:"getNetworkLoaderTypeName",value:function(){var a=new g.default({},(0,h.createDefaultConfig)()),b=a.loaderType;return a.destroy(),b}},{key:"supportNativeMediaPlayback",value:function(b){void 0==a.videoElement&&(a.videoElement=window.document.createElement("video"));var c=a.videoElement.canPlayType(b);return"probably"===c||"maybe"==c}},{key:"getFeatureList",value:function(){var b={mseFlvPlayback:!1,mseLiveFlvPlayback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return b.mseFlvPlayback=a.supportMSEH264Playback(),b.networkStreamIO=a.supportNetworkStreamIO(),b.networkLoaderName=a.getNetworkLoaderTypeName(),b.mseLiveFlvPlayback=b.mseFlvPlayback&&b.networkStreamIO,b.nativeMP4H264Playback=a.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),b.nativeWebmVP8Playback=a.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),b.nativeWebmVP9Playback=a.supportNativeMediaPlayback('video/webm; codecs="vp9"'),b}}]),a}();c.default=i},{"../config.js":5,"../io/io-controller.js":23}],7:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a),this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}return e(a,[{key:"isComplete",value:function(){var a=!1===this.hasAudio||!0===this.hasAudio&&null!=this.audioCodec&&null!=this.audioSampleRate&&null!=this.audioChannelCount,b=!1===this.hasVideo||!0===this.hasVideo&&null!=this.videoCodec&&null!=this.width&&null!=this.height&&null!=this.fps&&null!=this.profile&&null!=this.level&&null!=this.refFrames&&null!=this.chromaFormat&&null!=this.sarNum&&null!=this.sarDen;return null!=this.mimeType&&null!=this.duration&&null!=this.metadata&&null!=this.hasKeyframesIndex&&a&&b}},{key:"isSeekable",value:function(){return!0===this.hasKeyframesIndex}},{key:"getNearestKeyframe",value:function(a){if(null==this.keyframesIndex)return null;var b=this.keyframesIndex,c=this._search(b.times,a);return{index:c,milliseconds:b.times[c],fileposition:b.filepositions[c]}}},{key:"_search",value:function(a,b){var c=0,d=a.length-1,e=0,f=0,g=d;for(b<a[0]&&(c=0,f=g+1);f<=g;){if((e=f+Math.floor((g-f)/2))===d||b>=a[e]&&b<a[e+1]){c=e;break}a[e]<b?f=e+1:g=e-1}return c}}]),a}();c.default=f},{}],8:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();c.SampleInfo=function a(b,c,e,f,g){d(this,a),this.dts=b,this.pts=c,this.duration=e,this.originalDts=f,this.isSyncPoint=g,this.fileposition=null},c.MediaSegmentInfo=function(){function a(){d(this,a),this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}return e(a,[{key:"appendSyncPoint",value:function(a){a.isSyncPoint=!0,this.syncPoints.push(a)}}]),a}(),c.IDRSampleList=function(){function a(){d(this,a),this._list=[]}return e(a,[{key:"clear",value:function(){this._list=[]}},{key:"appendArray",value:function(a){var b=this._list;0!==a.length&&(b.length>0&&a[0].originalDts<b[b.length-1].originalDts&&this.clear(),Array.prototype.push.apply(b,a))}},{key:"getLastSyncPointBeforeDts",value:function(a){if(0==this._list.length)return null;var b=this._list,c=0,d=b.length-1,e=0,f=0,g=d;for(a<b[0].dts&&(c=0,f=g+1);f<=g;){if((e=f+Math.floor((g-f)/2))===d||a>=b[e].dts&&a<b[e+1].dts){c=e;break}b[e].dts<a?f=e+1:g=e-1}return this._list[c]}}]),a}(),c.MediaSegmentInfoList=function(){function a(b){d(this,a),this._type=b,this._list=[],this._lastAppendLocation=-1}return e(a,[{key:"isEmpty",value:function(){return 0===this._list.length}},{key:"clear",value:function(){this._list=[],this._lastAppendLocation=-1}},{key:"_searchNearestSegmentBefore",value:function(a){var b=this._list;if(0===b.length)return-2;var c=b.length-1,d=0,e=0,f=c,g=0;if(a<b[0].originalBeginDts)return g=-1;for(;e<=f;){if((d=e+Math.floor((f-e)/2))===c||a>b[d].lastSample.originalDts&&a<b[d+1].originalBeginDts){g=d;break}b[d].originalBeginDts<a?e=d+1:f=d-1}return g}},{key:"_searchNearestSegmentAfter",value:function(a){return this._searchNearestSegmentBefore(a)+1}},{key:"append",value:function(a){var b=this._list,c=a,d=this._lastAppendLocation,e=0;-1!==d&&d<b.length&&c.originalBeginDts>=b[d].lastSample.originalDts&&(d===b.length-1||d<b.length-1&&c.originalBeginDts<b[d+1].originalBeginDts)?e=d+1:b.length>0&&(e=this._searchNearestSegmentBefore(c.originalBeginDts)+1),this._lastAppendLocation=e,this._list.splice(e,0,c)}},{key:"getLastSegmentBefore",value:function(a){var b=this._searchNearestSegmentBefore(a);return b>=0?this._list[b]:null}},{key:"getLastSampleBefore",value:function(a){var b=this.getLastSegmentBefore(a);return null!=b?b.lastSample:null}},{key:"getLastSyncPointBefore",value:function(a){for(var b=this._searchNearestSegmentBefore(a),c=this._list[b].syncPoints;0===c.length&&b>0;)b--,c=this._list[b].syncPoints;return c.length>0?c[c.length-1]:null}},{key:"type",get:function(){return this._type}},{key:"length",get:function(){return this._list.length}}]),a}()},{}],9:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("events"),h=d(g),i=a("../utils/logger.js"),j=d(i),k=a("../utils/browser.js"),l=d(k),m=a("./mse-events.js"),n=d(m),o=a("./media-segment-info.js"),p=a("../utils/exception.js"),q=function(){function a(b){e(this,a),this.TAG="MSEController",this._config=b,this._emitter=new h.default,this._config.isLive&&void 0==this._config.autoCleanupSourceBuffer&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElement=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new o.IDRSampleList}return f(a,[{key:"destroy",value:function(){(this._mediaElement||this._mediaSource)&&this.detachMediaElement(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null}},{key:"on",value:function(a,b){this._emitter.addListener(a,b)}},{key:"off",value:function(a,b){this._emitter.removeListener(a,b)}},{key:"attachMediaElement",value:function(a){if(this._mediaSource)throw new p.IllegalStateException("MediaSource has been attached to an HTMLMediaElement!");var b=this._mediaSource=new window.MediaSource;b.addEventListener("sourceopen",this.e.onSourceOpen),b.addEventListener("sourceended",this.e.onSourceEnded),b.addEventListener("sourceclose",this.e.onSourceClose),this._mediaElement=a,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),a.src=this._mediaSourceObjectURL}},{key:"detachMediaElement",value:function(){if(this._mediaSource){var a=this._mediaSource;for(var b in this._sourceBuffers){var c=this._pendingSegments[b];c.splice(0,c.length),this._pendingSegments[b]=null,this._pendingRemoveRanges[b]=null,this._lastInitSegments[b]=null;var d=this._sourceBuffers[b];d&&("closed"!==a.readyState&&(a.removeSourceBuffer(d),d.removeEventListener("error",this.e.onSourceBufferError),d.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)),this._mimeTypes[b]=null,this._sourceBuffers[b]=null)}if("open"===a.readyState)try{a.endOfStream()}catch(a){j.default.e(this.TAG,a.message)}a.removeEventListener("sourceopen",this.e.onSourceOpen),a.removeEventListener("sourceended",this.e.onSourceEnded),a.removeEventListener("sourceclose",this.e.onSourceClose),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)}},{key:"appendInitSegment",value:function(a,b){if(!this._mediaSource||"open"!==this._mediaSource.readyState)return this._pendingSourceBufferInit.push(a),void this._pendingSegments[a.type].push(a);var c=a,d=""+c.container;c.codec&&c.codec.length>0&&(d+=";codecs="+c.codec);var e=!1;if(j.default.v(this.TAG,"Received Initialization Segment, mimeType: "+d),this._lastInitSegments[c.type]=c,d!==this._mimeTypes[c.type]){if(this._mimeTypes[c.type])j.default.v(this.TAG,"Notice: "+c.type+" mimeType changed, origin: "+this._mimeTypes[c.type]+", target: "+d);else{e=!0;try{var f=this._sourceBuffers[c.type]=this._mediaSource.addSourceBuffer(d);f.addEventListener("error",this.e.onSourceBufferError),f.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(a){return j.default.e(this.TAG,a.message),void this._emitter.emit(n.default.ERROR,{code:a.code,msg:a.message})}}this._mimeTypes[c.type]=d}b||this._pendingSegments[c.type].push(c),e||this._sourceBuffers[c.type]&&!this._sourceBuffers[c.type].updating&&this._doAppendSegments(),l.default.safari&&"audio/mpeg"===c.container&&c.mediaDuration>0&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=c.mediaDuration/1e3,this._updateMediaSourceDuration())}},{key:"appendMediaSegment",value:function(a){var b=a;this._pendingSegments[b.type].push(b),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer();var c=this._sourceBuffers[b.type];!c||c.updating||this._hasPendingRemoveRanges()||this._doAppendSegments()}},{key:"seek",value:function(a){for(var b in this._sourceBuffers)if(this._sourceBuffers[b]){var c=this._sourceBuffers[b];if("open"===this._mediaSource.readyState)try{c.abort()}catch(a){j.default.e(this.TAG,a.message)}this._idrList.clear();var d=this._pendingSegments[b];if(d.splice(0,d.length),"closed"!==this._mediaSource.readyState){for(var e=0;e<c.buffered.length;e++){var f=c.buffered.start(e),g=c.buffered.end(e);this._pendingRemoveRanges[b].push({start:f,end:g})}if(c.updating||this._doRemoveRanges(),l.default.safari){var h=this._lastInitSegments[b];h&&(this._pendingSegments[b].push(h),c.updating||this._doAppendSegments())}}}}},{key:"endOfStream",value:function(){var a=this._mediaSource,b=this._sourceBuffers;return a&&"open"===a.readyState?void(b.video&&b.video.updating||b.audio&&b.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,a.endOfStream())):void(a&&"closed"===a.readyState&&this._hasPendingSegments()&&(this._hasPendingEos=!0))}},{key:"getNearestKeyframe",value:function(a){return this._idrList.getLastSyncPointBeforeDts(a)}},{key:"_needCleanupSourceBuffer",value:function(){if(!this._config.autoCleanupSourceBuffer)return!1;var a=this._mediaElement.currentTime;for(var b in this._sourceBuffers){var c=this._sourceBuffers[b];if(c){var d=c.buffered;if(d.length>=1&&a-d.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}return!1}},{key:"_doCleanupSourceBuffer",value:function(){var a=this._mediaElement.currentTime;for(var b in this._sourceBuffers){var c=this._sourceBuffers[b];if(c){for(var d=c.buffered,e=!1,f=0;f<d.length;f++){var g=d.start(f),h=d.end(f);if(g<=a&&a<h+3){if(a-g>=this._config.autoCleanupMaxBackwardDuration){e=!0;var i=a-this._config.autoCleanupMinBackwardDuration;this._pendingRemoveRanges[b].push({start:g,end:i})}}else h<a&&(e=!0,this._pendingRemoveRanges[b].push({start:g,end:h}))}e&&!c.updating&&this._doRemoveRanges()}}}},{key:"_updateMediaSourceDuration",value:function(){var a=this._sourceBuffers;if(0!==this._mediaElement.readyState&&"open"===this._mediaSource.readyState&&!(a.video&&a.video.updating||a.audio&&a.audio.updating)){var b=this._mediaSource.duration,c=this._pendingMediaDuration;c>0&&(isNaN(b)||c>b)&&(j.default.v(this.TAG,"Update MediaSource duration from "+b+" to "+c),this._mediaSource.duration=c),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0}}},{key:"_doRemoveRanges",value:function(){for(var a in this._pendingRemoveRanges)if(this._sourceBuffers[a]&&!this._sourceBuffers[a].updating)for(var b=this._sourceBuffers[a],c=this._pendingRemoveRanges[a];c.length&&!b.updating;){var d=c.shift();b.remove(d.start,d.end)}}},{key:"_doAppendSegments",value:function(){var a=this._pendingSegments;for(var b in a)if(this._sourceBuffers[b]&&!this._sourceBuffers[b].updating&&a[b].length>0){var c=a[b].shift();if(c.timestampOffset){var d=this._sourceBuffers[b].timestampOffset,e=c.timestampOffset/1e3,f=Math.abs(d-e);f>.1&&(j.default.v(this.TAG,"Update MPEG audio timestampOffset from "+d+" to "+e),this._sourceBuffers[b].timestampOffset=e),delete c.timestampOffset}if(!c.data||0===c.data.byteLength)continue;try{this._sourceBuffers[b].appendBuffer(c.data),this._isBufferFull=!1,"video"===b&&c.hasOwnProperty("info")&&this._idrList.appendArray(c.info.syncPoints)}catch(a){this._pendingSegments[b].unshift(c),22===a.code?(this._isBufferFull||this._emitter.emit(n.default.BUFFER_FULL),this._isBufferFull=!0):(j.default.e(this.TAG,a.message),this._emitter.emit(n.default.ERROR,{code:a.code,msg:a.message}))}}}},{key:"_onSourceOpen",value:function(){if(j.default.v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._pendingSourceBufferInit.length>0)for(var a=this._pendingSourceBufferInit;a.length;){var b=a.shift();this.appendInitSegment(b,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(n.default.SOURCE_OPEN)}},{key:"_onSourceEnded",value:function(){j.default.v(this.TAG,"MediaSource onSourceEnded")}},{key:"_onSourceClose",value:function(){j.default.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&null!=this.e&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))}},{key:"_hasPendingSegments",value:function(){var a=this._pendingSegments;return a.video.length>0||a.audio.length>0}},{key:"_hasPendingRemoveRanges",value:function(){var a=this._pendingRemoveRanges;return a.video.length>0||a.audio.length>0}},{key:"_onSourceBufferUpdateEnd",value:function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(n.default.UPDATE_END)}},{key:"_onSourceBufferError",value:function(a){j.default.e(this.TAG,"SourceBuffer Error: "+a)}}]),a}();c.default=q},{"../utils/browser.js":39,"../utils/exception.js":40,"../utils/logger.js":41,"./media-segment-info.js":8,"./mse-events.js":10,events:2}],10:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={ERROR:"error",SOURCE_OPEN:"source_open",UPDATE_END:"update_end",BUFFER_FULL:"buffer_full"};c.default=d},{}],11:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("events"),h=d(g),i=a("../utils/logger.js"),j=d(i),k=a("../utils/logging-control.js"),l=d(k),m=a("./transmuxing-controller.js"),n=d(m),o=a("./transmuxing-events.js"),p=d(o),q=a("./transmuxing-worker.js"),r=d(q),s=a("./media-info.js"),t=d(s),u=function(){function b(c,d){if(e(this,b),this.TAG="Transmuxer",this._emitter=new h.default,d.enableWorker&&"undefined"!=typeof Worker)try{var f=a("webworkify");this._worker=f(r.default),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[c,d]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},l.default.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:l.default.getConfig()})}catch(a){j.default.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new n.default(c,d)}else this._controller=new n.default(c,d);if(this._controller){var g=this._controller;g.on(p.default.IO_ERROR,this._onIOError.bind(this)),g.on(p.default.DEMUX_ERROR,this._onDemuxError.bind(this)),g.on(p.default.INIT_SEGMENT,this._onInitSegment.bind(this)),g.on(p.default.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),g.on(p.default.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),g.on(p.default.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),g.on(p.default.MEDIA_INFO,this._onMediaInfo.bind(this)),g.on(p.default.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),g.on(p.default.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this))}}return f(b,[{key:"destroy",value:function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),l.default.removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null}},{key:"on",value:function(a,b){this._emitter.addListener(a,b)}},{key:"off",value:function(a,b){this._emitter.removeListener(a,b)}},{key:"hasWorker",value:function(){return null!=this._worker}},{key:"open",value:function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()}},{key:"close",value:function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()}},{key:"seek",value:function(a){this._worker?this._worker.postMessage({cmd:"seek",param:a}):this._controller.seek(a)}},{key:"pause",value:function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()}},{key:"resume",value:function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()}},{key:"_onInitSegment",value:function(a,b){var c=this;Promise.resolve().then(function(){c._emitter.emit(p.default.INIT_SEGMENT,a,b)})}},{key:"_onMediaSegment",value:function(a,b){var c=this;Promise.resolve().then(function(){c._emitter.emit(p.default.MEDIA_SEGMENT,a,b)})}},{key:"_onLoadingComplete",value:function(){var a=this;Promise.resolve().then(function(){a._emitter.emit(p.default.LOADING_COMPLETE)})}},{key:"_onRecoveredEarlyEof",value:function(){var a=this;Promise.resolve().then(function(){a._emitter.emit(p.default.RECOVERED_EARLY_EOF)})}},{key:"_onMediaInfo",value:function(a){var b=this;Promise.resolve().then(function(){b._emitter.emit(p.default.MEDIA_INFO,a)})}},{key:"_onStatisticsInfo",value:function(a){var b=this;Promise.resolve().then(function(){b._emitter.emit(p.default.STATISTICS_INFO,a)})}},{key:"_onIOError",value:function(a,b){var c=this;Promise.resolve().then(function(){c._emitter.emit(p.default.IO_ERROR,a,b)})}},{key:"_onDemuxError",value:function(a,b){var c=this;Promise.resolve().then(function(){c._emitter.emit(p.default.DEMUX_ERROR,a,b)})}},{key:"_onRecommendSeekpoint",value:function(a){var b=this;Promise.resolve().then(function(){b._emitter.emit(p.default.RECOMMEND_SEEKPOINT,a)})}},{key:"_onLoggingConfigChanged",value:function(a){this._worker&&this._worker.postMessage({cmd:"logging_config",param:a})}},{key:"_onWorkerMessage",value:function(a){var b=a.data,c=b.data;if("destroyed"===b.msg||this._workerDestroying)return this._workerDestroying=!1,this._worker.terminate(),void(this._worker=null);switch(b.msg){case p.default.INIT_SEGMENT:case p.default.MEDIA_SEGMENT:this._emitter.emit(b.msg,c.type,c.data);break;case p.default.LOADING_COMPLETE:case p.default.RECOVERED_EARLY_EOF:this._emitter.emit(b.msg);break;case p.default.MEDIA_INFO:Object.setPrototypeOf(c,t.default.prototype),this._emitter.emit(b.msg,c);break;case p.default.STATISTICS_INFO:this._emitter.emit(b.msg,c);break;case p.default.IO_ERROR:case p.default.DEMUX_ERROR:this._emitter.emit(b.msg,c.type,c.info);break;case p.default.RECOMMEND_SEEKPOINT:this._emitter.emit(b.msg,c);break;case"logcat_callback":j.default.emitter.emit("log",c.type,c.logcat)}}}]),b}();c.default=u},{"../utils/logger.js":41,"../utils/logging-control.js":42,"./media-info.js":7,"./transmuxing-controller.js":12,"./transmuxing-events.js":13,"./transmuxing-worker.js":14,events:2,webworkify:4}],12:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("events"),h=d(g),i=a("../utils/logger.js"),j=d(i),k=a("../utils/browser.js"),l=d(k),m=a("./media-info.js"),n=d(m),o=a("../demux/flv-demuxer.js"),p=d(o),q=a("../remux/mp4-remuxer.js"),r=d(q),s=a("../demux/demux-errors.js"),t=d(s),u=a("../io/io-controller.js"),v=d(u),w=a("./transmuxing-events.js"),x=d(w),y=(a("../io/loader.js"),function(){function a(b,c){e(this,a),this.TAG="TransmuxingController",this._emitter=new h.default,this._config=c,b.segments||(b.segments=[{duration:b.duration,filesize:b.filesize,url:b.url}]),"boolean"!=typeof b.cors&&(b.cors=!0),"boolean"!=typeof b.withCredentials&&(b.withCredentials=!1),this._mediaDataSource=b,this._currentSegmentIndex=0;var d=0;this._mediaDataSource.segments.forEach(function(a){a.timestampBase=d,d+=a.duration,a.cors=b.cors,a.withCredentials=b.withCredentials,c.referrerPolicy&&(a.referrerPolicy=c.referrerPolicy)}),isNaN(d)||this._mediaDataSource.duration===d||(this._mediaDataSource.duration=d),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}return f(a,[{key:"destroy",value:function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null}},{key:"on",value:function(a,b){this._emitter.addListener(a,b)}},{key:"off",value:function(a,b){this._emitter.removeListener(a,b)}},{key:"start",value:function(){this._loadSegment(0),this._enableStatisticsReporter()}},{key:"_loadSegment",value:function(a,b){this._currentSegmentIndex=a;var c=this._mediaDataSource.segments[a],d=this._ioctl=new v.default(c,this._config,a);d.onError=this._onIOException.bind(this),d.onSeeked=this._onIOSeeked.bind(this),d.onComplete=this._onIOComplete.bind(this),d.onRedirect=this._onIORedirect.bind(this),d.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),b?this._demuxer.bindDataSource(this._ioctl):d.onDataArrival=this._onInitChunkArrival.bind(this),d.open(b)}},{key:"stop",value:function(){this._internalAbort(),this._disableStatisticsReporter()}},{key:"_internalAbort",value:function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)}},{key:"pause",value:function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),
this._disableStatisticsReporter())}},{key:"resume",value:function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())}},{key:"seek",value:function(a){if(null!=this._mediaInfo&&this._mediaInfo.isSeekable()){var b=this._searchSegmentIndexContains(a);if(b===this._currentSegmentIndex){var c=this._mediaInfo.segments[b];if(void 0==c)this._pendingSeekTime=a;else{var d=c.getNearestKeyframe(a);this._remuxer.seek(d.milliseconds),this._ioctl.seek(d.fileposition),this._pendingResolveSeekPoint=d.milliseconds}}else{var e=this._mediaInfo.segments[b];if(void 0==e)this._pendingSeekTime=a,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(b);else{var f=e.getNearestKeyframe(a);this._internalAbort(),this._remuxer.seek(a),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[b].timestampBase,this._loadSegment(b,f.fileposition),this._pendingResolveSeekPoint=f.milliseconds,this._reportSegmentMediaInfo(b)}}this._enableStatisticsReporter()}}},{key:"_searchSegmentIndexContains",value:function(a){for(var b=this._mediaDataSource.segments,c=b.length-1,d=0;d<b.length;d++)if(a<b[d].timestampBase){c=d-1;break}return c}},{key:"_onInitChunkArrival",value:function(a,b){var c=this,d=null,e=0;if(b>0)this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,e=this._demuxer.parseChunks(a,b);else if((d=p.default.probe(a)).match){this._demuxer=new p.default(d,this._config),this._remuxer||(this._remuxer=new r.default(this._config));var f=this._mediaDataSource;void 0==f.duration||isNaN(f.duration)||(this._demuxer.overridedDuration=f.duration),"boolean"==typeof f.hasAudio&&(this._demuxer.overridedHasAudio=f.hasAudio),"boolean"==typeof f.hasVideo&&(this._demuxer.overridedHasVideo=f.hasVideo),this._demuxer.timestampBase=f.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this),e=this._demuxer.parseChunks(a,b)}else d=null,j.default.e(this.TAG,"Non-FLV, Unsupported media type!"),Promise.resolve().then(function(){c._internalAbort()}),this._emitter.emit(x.default.DEMUX_ERROR,t.default.FORMAT_UNSUPPORTED,"Non-FLV, Unsupported media type"),e=0;return e}},{key:"_onMediaInfo",value:function(a){var b=this;null==this._mediaInfo&&(this._mediaInfo=Object.assign({},a),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,n.default.prototype));var c=Object.assign({},a);Object.setPrototypeOf(c,n.default.prototype),this._mediaInfo.segments[this._currentSegmentIndex]=c,this._reportSegmentMediaInfo(this._currentSegmentIndex),null!=this._pendingSeekTime&&Promise.resolve().then(function(){var a=b._pendingSeekTime;b._pendingSeekTime=null,b.seek(a)})}},{key:"_onIOSeeked",value:function(){this._remuxer.insertDiscontinuity()}},{key:"_onIOComplete",value:function(a){var b=a,c=b+1;c<this._mediaDataSource.segments.length?(this._internalAbort(),this._remuxer.flushStashedSamples(),this._loadSegment(c)):(this._remuxer.flushStashedSamples(),this._emitter.emit(x.default.LOADING_COMPLETE),this._disableStatisticsReporter())}},{key:"_onIORedirect",value:function(a){var b=this._ioctl.extraData;this._mediaDataSource.segments[b].redirectedURL=a}},{key:"_onIORecoveredEarlyEof",value:function(){this._emitter.emit(x.default.RECOVERED_EARLY_EOF)}},{key:"_onIOException",value:function(a,b){j.default.e(this.TAG,"IOException: type = "+a+", code = "+b.code+", msg = "+b.msg),this._emitter.emit(x.default.IO_ERROR,a,b),this._disableStatisticsReporter()}},{key:"_onDemuxException",value:function(a,b){j.default.e(this.TAG,"DemuxException: type = "+a+", info = "+b),this._emitter.emit(x.default.DEMUX_ERROR,a,b)}},{key:"_onRemuxerInitSegmentArrival",value:function(a,b){this._emitter.emit(x.default.INIT_SEGMENT,a,b)}},{key:"_onRemuxerMediaSegmentArrival",value:function(a,b){if(null==this._pendingSeekTime&&(this._emitter.emit(x.default.MEDIA_SEGMENT,a,b),null!=this._pendingResolveSeekPoint&&"video"===a)){var c=b.info.syncPoints,d=this._pendingResolveSeekPoint;this._pendingResolveSeekPoint=null,l.default.safari&&c.length>0&&c[0].originalDts===d&&(d=c[0].pts),this._emitter.emit(x.default.RECOMMEND_SEEKPOINT,d)}}},{key:"_enableStatisticsReporter",value:function(){null==this._statisticsReporter&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))}},{key:"_disableStatisticsReporter",value:function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)}},{key:"_reportSegmentMediaInfo",value:function(a){var b=this._mediaInfo.segments[a],c=Object.assign({},b);c.duration=this._mediaInfo.duration,c.segmentCount=this._mediaInfo.segmentCount,delete c.segments,delete c.keyframesIndex,this._emitter.emit(x.default.MEDIA_INFO,c)}},{key:"_reportStatisticsInfo",value:function(){var a={};a.url=this._ioctl.currentURL,a.hasRedirect=this._ioctl.hasRedirect,a.hasRedirect&&(a.redirectedURL=this._ioctl.currentRedirectedURL),a.speed=this._ioctl.currentSpeed,a.loaderType=this._ioctl.loaderType,a.currentSegmentIndex=this._currentSegmentIndex,a.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(x.default.STATISTICS_INFO,a)}}]),a}());c.default=y},{"../demux/demux-errors.js":16,"../demux/flv-demuxer.js":18,"../io/io-controller.js":23,"../io/loader.js":24,"../remux/mp4-remuxer.js":38,"../utils/browser.js":39,"../utils/logger.js":41,"./media-info.js":7,"./transmuxing-events.js":13,events:2}],13:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={IO_ERROR:"io_error",DEMUX_ERROR:"demux_error",INIT_SEGMENT:"init_segment",MEDIA_SEGMENT:"media_segment",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",STATISTICS_INFO:"statistics_info",RECOMMEND_SEEKPOINT:"recommend_seekpoint"};c.default=d},{}],14:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("../utils/logger.js"),f=(d(e),a("../utils/logging-control.js")),g=d(f),h=a("../utils/polyfill.js"),i=d(h),j=a("./transmuxing-controller.js"),k=d(j),l=a("./transmuxing-events.js"),m=d(l),n=function(a){function b(b,c){var d={msg:m.default.INIT_SEGMENT,data:{type:b,data:c}};a.postMessage(d,[c.data])}function c(b,c){var d={msg:m.default.MEDIA_SEGMENT,data:{type:b,data:c}};a.postMessage(d,[c.data])}function d(){var b={msg:m.default.LOADING_COMPLETE};a.postMessage(b)}function e(){var b={msg:m.default.RECOVERED_EARLY_EOF};a.postMessage(b)}function f(b){var c={msg:m.default.MEDIA_INFO,data:b};a.postMessage(c)}function h(b){var c={msg:m.default.STATISTICS_INFO,data:b};a.postMessage(c)}function j(b,c){a.postMessage({msg:m.default.IO_ERROR,data:{type:b,info:c}})}function l(b,c){a.postMessage({msg:m.default.DEMUX_ERROR,data:{type:b,info:c}})}function n(b){a.postMessage({msg:m.default.RECOMMEND_SEEKPOINT,data:b})}function o(b,c){a.postMessage({msg:"logcat_callback",data:{type:b,logcat:c}})}var p=null,q=o.bind(this);i.default.install(),a.addEventListener("message",function(i){switch(i.data.cmd){case"init":p=new k.default(i.data.param[0],i.data.param[1]),p.on(m.default.IO_ERROR,j.bind(this)),p.on(m.default.DEMUX_ERROR,l.bind(this)),p.on(m.default.INIT_SEGMENT,b.bind(this)),p.on(m.default.MEDIA_SEGMENT,c.bind(this)),p.on(m.default.LOADING_COMPLETE,d.bind(this)),p.on(m.default.RECOVERED_EARLY_EOF,e.bind(this)),p.on(m.default.MEDIA_INFO,f.bind(this)),p.on(m.default.STATISTICS_INFO,h.bind(this)),p.on(m.default.RECOMMEND_SEEKPOINT,n.bind(this));break;case"destroy":p&&(p.destroy(),p=null),a.postMessage({msg:"destroyed"});break;case"start":p.start();break;case"stop":p.stop();break;case"seek":p.seek(i.data.param);break;case"pause":p.pause();break;case"resume":p.resume();break;case"logging_config":var o=i.data.param;g.default.applyConfig(o),!0===o.enableCallback?g.default.addLogListener(q):g.default.removeLogListener(q)}})};c.default=n},{"../utils/logger.js":41,"../utils/logging-control.js":42,"../utils/polyfill.js":43,"./transmuxing-controller.js":12,"./transmuxing-events.js":13}],15:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("../utils/logger.js"),h=d(g),i=a("../utils/utf8-conv.js"),j=d(i),k=a("../utils/exception.js"),l=function(){var a=new ArrayBuffer(2);return new DataView(a).setInt16(0,256,!0),256===new Int16Array(a)[0]}(),m=function(){function a(){e(this,a)}return f(a,null,[{key:"parseScriptData",value:function(b,c,d){var e={};try{var f=a.parseValue(b,c,d),g=a.parseValue(b,c+f.size,d-f.size);e[f.data]=g.data}catch(a){h.default.e("AMF",a.toString())}return e}},{key:"parseObject",value:function(b,c,d){if(d<3)throw new k.IllegalStateException("Data not enough when parse ScriptDataObject");var e=a.parseString(b,c,d),f=a.parseValue(b,c+e.size,d-e.size),g=f.objectEnd;return{data:{name:e.data,value:f.data},size:e.size+f.size,objectEnd:g}}},{key:"parseVariable",value:function(b,c,d){return a.parseObject(b,c,d)}},{key:"parseString",value:function(a,b,c){if(c<2)throw new k.IllegalStateException("Data not enough when parse String");var d=new DataView(a,b,c),e=d.getUint16(0,!l),f=void 0;return f=e>0?(0,j.default)(new Uint8Array(a,b+2,e)):"",{data:f,size:2+e}}},{key:"parseLongString",value:function(a,b,c){if(c<4)throw new k.IllegalStateException("Data not enough when parse LongString");var d=new DataView(a,b,c),e=d.getUint32(0,!l),f=void 0;return f=e>0?(0,j.default)(new Uint8Array(a,b+4,e)):"",{data:f,size:4+e}}},{key:"parseDate",value:function(a,b,c){if(c<10)throw new k.IllegalStateException("Data size invalid when parse Date");var d=new DataView(a,b,c),e=d.getFloat64(0,!l);return e+=60*d.getInt16(8,!l)*1e3,{data:new Date(e),size:10}}},{key:"parseValue",value:function(b,c,d){if(d<1)throw new k.IllegalStateException("Data not enough when parse Value");var e=new DataView(b,c,d),f=1,g=e.getUint8(0),i=void 0,j=!1;try{switch(g){case 0:i=e.getFloat64(1,!l),f+=8;break;case 1:i=!!e.getUint8(1),f+=1;break;case 2:var m=a.parseString(b,c+1,d-1);i=m.data,f+=m.size;break;case 3:i={};var n=0;for(9==(16777215&e.getUint32(d-4,!l))&&(n=3);f<d-4;){var o=a.parseObject(b,c+f,d-f-n);if(o.objectEnd)break;i[o.data.name]=o.data.value,f+=o.size}f<=d-3&&9===(16777215&e.getUint32(f-1,!l))&&(f+=3);break;case 8:i={},f+=4;var p=0;for(9==(16777215&e.getUint32(d-4,!l))&&(p=3);f<d-8;){var q=a.parseVariable(b,c+f,d-f-p);if(q.objectEnd)break;i[q.data.name]=q.data.value,f+=q.size}f<=d-3&&9===(16777215&e.getUint32(f-1,!l))&&(f+=3);break;case 9:i=void 0,f=1,j=!0;break;case 10:i=[];var r=e.getUint32(1,!l);f+=4;for(var s=0;s<r;s++){var t=a.parseValue(b,c+f,d-f);i.push(t.data),f+=t.size}break;case 11:var u=a.parseDate(b,c+1,d-1);i=u.data,f+=u.size;break;case 12:var v=a.parseString(b,c+1,d-1);i=v.data,f+=v.size;break;default:f=d,h.default.w("AMF","Unsupported AMF value type "+g)}}catch(a){h.default.e("AMF",a.toString())}return{data:i,size:f,objectEnd:j}}}]),a}();c.default=m},{"../utils/exception.js":40,"../utils/logger.js":41,"../utils/utf8-conv.js":44}],16:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"};c.default=d},{}],17:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("../utils/exception.js"),g=function(){function a(b){d(this,a),this.TAG="ExpGolomb",this._buffer=b,this._buffer_index=0,this._total_bytes=b.byteLength,this._total_bits=8*b.byteLength,this._current_word=0,this._current_word_bits_left=0}return e(a,[{key:"destroy",value:function(){this._buffer=null}},{key:"_fillCurrentWord",value:function(){var a=this._total_bytes-this._buffer_index;if(a<=0)throw new f.IllegalStateException("ExpGolomb: _fillCurrentWord() but no bytes available");var b=Math.min(4,a),c=new Uint8Array(4);c.set(this._buffer.subarray(this._buffer_index,this._buffer_index+b)),this._current_word=new DataView(c.buffer).getUint32(0,!1),this._buffer_index+=b,this._current_word_bits_left=8*b}},{key:"readBits",value:function(a){if(a>32)throw new f.InvalidArgumentException("ExpGolomb: readBits() bits exceeded max 32bits!");if(a<=this._current_word_bits_left){var b=this._current_word>>>32-a;return this._current_word<<=a,this._current_word_bits_left-=a,b}var c=this._current_word_bits_left?this._current_word:0;c>>>=32-this._current_word_bits_left;var d=a-this._current_word_bits_left;this._fillCurrentWord();var e=Math.min(d,this._current_word_bits_left),g=this._current_word>>>32-e;return this._current_word<<=e,this._current_word_bits_left-=e,c=c<<e|g}},{key:"readBool",value:function(){return 1===this.readBits(1)}},{key:"readByte",value:function(){return this.readBits(8)}},{key:"_skipLeadingZero",value:function(){var a=void 0;for(a=0;a<this._current_word_bits_left;a++)if(0!=(this._current_word&2147483648>>>a))return this._current_word<<=a,this._current_word_bits_left-=a,a;return this._fillCurrentWord(),a+this._skipLeadingZero()}},{key:"readUEG",value:function(){var a=this._skipLeadingZero();return this.readBits(a+1)-1}},{key:"readSEG",value:function(){var a=this.readUEG();return 1&a?a+1>>>1:-1*(a>>>1)}}]),a}();c.default=g},{"../utils/exception.js":40}],18:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){return a[b]<<24|a[b+1]<<16|a[b+2]<<8|a[b+3]}Object.defineProperty(c,"__esModule",{value:!0});var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../utils/logger.js"),j=d(i),k=a("./amf-parser.js"),l=d(k),m=a("./sps-parser.js"),n=d(m),o=a("./demux-errors.js"),p=d(o),q=a("../core/media-info.js"),r=d(q),s=a("../utils/exception.js"),t=function(){function a(b,c){e(this,a),this.TAG="FLVDemuxer",this._config=c,this._onError=null,this._onMediaInfo=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=b.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=b.hasAudioTrack,this._hasVideo=b.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new r.default,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=function(){var a=new ArrayBuffer(2);return new DataView(a).setInt16(0,256,!0),256===new Int16Array(a)[0]}()}return h(a,[{key:"destroy",value:function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onTrackMetadata=null,this._onDataAvailable=null}},{key:"bindDataSource",value:function(a){return a.onDataArrival=this.parseChunks.bind(this),this}},{key:"resetMediaInfo",value:function(){this._mediaInfo=new r.default}},{key:"_isInitialMetadataDispatched",value:function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!(this._hasAudio||!this._hasVideo)&&this._videoInitialMetadataDispatched}},{key:"parseChunks",value:function(b,c){if(!(this._onError&&this._onMediaInfo&&this._onTrackMetadata&&this._onDataAvailable))throw new s.IllegalStateException("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var d=0,e=this._littleEndian;if(0===c){if(!(b.byteLength>13))return 0;d=a.probe(b).dataOffset}for(this._firstParse&&(this._firstParse=!1,c+d!==this._dataOffset&&j.default.w(this.TAG,"First time parsing but chunk byteStart invalid!"),0!==new DataView(b,d).getUint32(0,!e)&&j.default.w(this.TAG,"PrevTagSize0 !== 0 !!!"),d+=4);d<b.byteLength;){this._dispatch=!0;var f=new DataView(b,d);if(d+11+4>b.byteLength)break;var g=f.getUint8(0),h=16777215&f.getUint32(0,!e);if(d+11+h+4>b.byteLength)break;if(8===g||9===g||18===g){var i=f.getUint8(4),k=f.getUint8(5),l=f.getUint8(6),m=f.getUint8(7),n=l|k<<8|i<<16|m<<24;0!==(16777215&f.getUint32(7,!e))&&j.default.w(this.TAG,"Meet tag which has StreamID != 0!");var o=d+11;switch(g){case 8:this._parseAudioData(b,o,h,n);break;case 9:this._parseVideoData(b,o,h,n,c+d);break;case 18:this._parseScriptData(b,o,h)}var p=f.getUint32(11+h,!e);p!==11+h&&j.default.w(this.TAG,"Invalid PrevTagSize "+p),d+=11+h+4}else j.default.w(this.TAG,"Unsupported tag type "+g+", skipped"),d+=11+h+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),d}},{key:"_parseScriptData",value:function(a,b,c){var d=l.default.parseScriptData(a,b,c);if(d.hasOwnProperty("onMetaData")){if(null==d.onMetaData||"object"!==g(d.onMetaData))return void j.default.w(this.TAG,"Invalid onMetaData structure!");this._metadata&&j.default.w(this.TAG,"Found another onMetaData tag!"),this._metadata=d;var e=this._metadata.onMetaData;if("boolean"==typeof e.hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=e.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),"boolean"==typeof e.hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=e.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),"number"==typeof e.audiodatarate&&(this._mediaInfo.audioDataRate=e.audiodatarate),"number"==typeof e.videodatarate&&(this._mediaInfo.videoDataRate=e.videodatarate),"number"==typeof e.width&&(this._mediaInfo.width=e.width),"number"==typeof e.height&&(this._mediaInfo.height=e.height),"number"==typeof e.duration){if(!this._durationOverrided){var f=Math.floor(e.duration*this._timescale);this._duration=f,this._mediaInfo.duration=f}}else this._mediaInfo.duration=0;if("number"==typeof e.framerate){var h=Math.floor(1e3*e.framerate);if(h>0){var i=h/1e3;this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=i,this._referenceFrameRate.fps_num=h,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=i}}if("object"===g(e.keyframes)){this._mediaInfo.hasKeyframesIndex=!0;var k=e.keyframes;this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(k),e.keyframes=null}else this._mediaInfo.hasKeyframesIndex=!1;this._dispatch=!1,this._mediaInfo.metadata=e,j.default.v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}}},{key:"_parseKeyframesIndex",value:function(a){for(var b=[],c=[],d=1;d<a.times.length;d++){var e=this._timestampBase+Math.floor(1e3*a.times[d]);b.push(e),c.push(a.filepositions[d])}return{times:b,filepositions:c}}},{key:"_parseAudioData",value:function(a,b,c,d){if(c<=1)return void j.default.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");if(!0!==this._hasAudioFlagOverrided||!1!==this._hasAudio){var e=(this._littleEndian,new DataView(a,b,c)),f=e.getUint8(0),g=f>>>4;if(2!==g&&10!==g)return void this._onError(p.default.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+g);var h=0,i=(12&f)>>>2;if(!(i>=0&&i<=4))return void this._onError(p.default.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+i);h=this._flvSoundRateTable[i];var k=1&f,l=this._audioMetadata,m=this._audioTrack;if(l||(!1===this._hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),l=this._audioMetadata={},l.type="audio",l.id=m.id,l.timescale=this._timescale,l.duration=this._duration,l.audioSampleRate=h,l.channelCount=0===k?1:2),10===g){var n=this._parseAACAudioData(a,b+1,c-1);if(void 0==n)return;if(0===n.packetType){l.config&&j.default.w(this.TAG,"Found another AudioSpecificConfig!");var o=n.data;l.audioSampleRate=o.samplingRate,l.channelCount=o.channelCount,l.codec=o.codec,l.originalCodec=o.originalCodec,l.config=o.config,l.refSampleDuration=1024/l.audioSampleRate*l.timescale,j.default.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",l);var q=this._mediaInfo;q.audioCodec=l.originalCodec,q.audioSampleRate=l.audioSampleRate,q.audioChannelCount=l.channelCount,q.hasVideo?null!=q.videoCodec&&(q.mimeType='video/x-flv; codecs="'+q.videoCodec+","+q.audioCodec+'"'):q.mimeType='video/x-flv; codecs="'+q.audioCodec+'"',q.isComplete()&&this._onMediaInfo(q)}else if(1===n.packetType){var r=this._timestampBase+d,s={unit:n.data,length:n.data.byteLength,dts:r,pts:r};m.samples.push(s),m.length+=n.data.length}else j.default.e(this.TAG,"Flv: Unsupported AAC data type "+n.packetType)}else if(2===g){if(!l.codec){var t=this._parseMP3AudioData(a,b+1,c-1,!0);if(void 0==t)return;l.audioSampleRate=t.samplingRate,l.channelCount=t.channelCount,l.codec=t.codec,l.originalCodec=t.originalCodec,l.refSampleDuration=1152/l.audioSampleRate*l.timescale,j.default.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",l);var u=this._mediaInfo;u.audioCodec=l.codec,u.audioSampleRate=l.audioSampleRate,u.audioChannelCount=l.channelCount,u.audioDataRate=t.bitRate,u.hasVideo?null!=u.videoCodec&&(u.mimeType='video/x-flv; codecs="'+u.videoCodec+","+u.audioCodec+'"'):u.mimeType='video/x-flv; codecs="'+u.audioCodec+'"',u.isComplete()&&this._onMediaInfo(u)}var v=this._parseMP3AudioData(a,b+1,c-1,!1);if(void 0==v)return;var w=this._timestampBase+d,x={unit:v,length:v.byteLength,dts:w,pts:w};m.samples.push(x),m.length+=v.length}}}},{key:"_parseAACAudioData",value:function(a,b,c){if(c<=1)return void j.default.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!");var d={},e=new Uint8Array(a,b,c);return d.packetType=e[0],0===e[0]?d.data=this._parseAACAudioSpecificConfig(a,b+1,c-1):d.data=e.subarray(1),d}},{key:"_parseAACAudioSpecificConfig",value:function(a,b,c){var d=new Uint8Array(a,b,c),e=null,f=0,g=0,h=0,i=null;if(f=g=d[0]>>>3,(h=(7&d[0])<<1|d[1]>>>7)<0||h>=this._mpegSamplingRates.length)return void this._onError(p.default.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");var j=this._mpegSamplingRates[h],k=(120&d[1])>>>3;if(k<0||k>=8)return void this._onError(p.default.FORMAT_ERROR,"Flv: AAC invalid channel configuration");5===f&&(i=(7&d[1])<<1|d[2]>>>7,d[2]);var l=self.navigator.userAgent.toLowerCase();return-1!==l.indexOf("firefox")?h>=6?(f=5,e=new Array(4),i=h-3):(f=2,e=new Array(2),i=h):-1!==l.indexOf("android")?(f=2,e=new Array(2),i=h):(f=5,i=h,e=new Array(4),h>=6?i=h-3:1===k&&(f=2,e=new Array(2),i=h)),e[0]=f<<3,e[0]|=(15&h)>>>1,e[1]=(15&h)<<7,e[1]|=(15&k)<<3,5===f&&(e[1]|=(15&i)>>>1,e[2]=(1&i)<<7,e[2]|=8,e[3]=0),{config:e,samplingRate:j,channelCount:k,codec:"mp4a.40."+f,originalCodec:"mp4a.40."+g}}},{key:"_parseMP3AudioData",value:function(a,b,c,d){if(c<4)return void j.default.w(this.TAG,"Flv: Invalid MP3 packet, header missing!");var e=(this._littleEndian,new Uint8Array(a,b,c)),f=null;if(d){if(255!==e[0])return;var g=e[1]>>>3&3,h=(6&e[1])>>1,i=(240&e[2])>>>4,k=(12&e[2])>>>2,l=e[3]>>>6&3,m=3!==l?2:1,n=0,o=0;switch(g){case 0:n=this._mpegAudioV25SampleRateTable[k];break;case 2:n=this._mpegAudioV20SampleRateTable[k];break;case 3:n=this._mpegAudioV10SampleRateTable[k]}switch(h){case 1:i<this._mpegAudioL3BitRateTable.length&&(o=this._mpegAudioL3BitRateTable[i]);break;case 2:i<this._mpegAudioL2BitRateTable.length&&(o=this._mpegAudioL2BitRateTable[i]);break;case 3:i<this._mpegAudioL1BitRateTable.length&&(o=this._mpegAudioL1BitRateTable[i])}f={bitRate:o,samplingRate:n,channelCount:m,codec:"mp3",originalCodec:"mp3"}}else f=e;return f}},{key:"_parseVideoData",value:function(a,b,c,d,e){if(c<=1)return void j.default.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!");if(!0!==this._hasVideoFlagOverrided||!1!==this._hasVideo){var f=new Uint8Array(a,b,c)[0],g=(240&f)>>>4,h=15&f;if(7!==h)return void this._onError(p.default.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: "+h);this._parseAVCVideoPacket(a,b+1,c-1,d,e,g)}}},{key:"_parseAVCVideoPacket",value:function(a,b,c,d,e,f){if(c<4)return void j.default.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");var g=this._littleEndian,h=new DataView(a,b,c),i=h.getUint8(0),k=16777215&h.getUint32(0,!g),l=k<<8>>8;if(0===i)this._parseAVCDecoderConfigurationRecord(a,b+4,c-4);else if(1===i)this._parseAVCVideoData(a,b+4,c-4,d,e,f,l);else if(2!==i)return void this._onError(p.default.FORMAT_ERROR,"Flv: Invalid video packet type "+i)}},{key:"_parseAVCDecoderConfigurationRecord",value:function(a,b,c){if(c<7)return void j.default.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");var d=this._videoMetadata,e=this._videoTrack,f=this._littleEndian,g=new DataView(a,b,c);d?void 0!==d.avcc&&j.default.w(this.TAG,"Found another AVCDecoderConfigurationRecord!"):(!1===this._hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),d=this._videoMetadata={},d.type="video",d.id=e.id,d.timescale=this._timescale,d.duration=this._duration);var h=g.getUint8(0),i=g.getUint8(1);if(g.getUint8(2),g.getUint8(3),1!==h||0===i)return void this._onError(p.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord");if(this._naluLengthSize=1+(3&g.getUint8(4)),3!==this._naluLengthSize&&4!==this._naluLengthSize)return void this._onError(p.default.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));var k=31&g.getUint8(5);if(0===k)return void this._onError(p.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS");k>1&&j.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = "+k);for(var l=6,m=0;m<k;m++){var o=g.getUint16(l,!f);if(l+=2,0!==o){var q=new Uint8Array(a,b+l,o);l+=o;var r=n.default.parseSPS(q);if(0===m){d.codecWidth=r.codec_size.width,d.codecHeight=r.codec_size.height,d.presentWidth=r.present_size.width,d.presentHeight=r.present_size.height,d.profile=r.profile_string,d.level=r.level_string,d.bitDepth=r.bit_depth,d.chromaFormat=r.chroma_format,d.sarRatio=r.sar_ratio,d.frameRate=r.frame_rate,!1!==r.frame_rate.fixed&&0!==r.frame_rate.fps_num&&0!==r.frame_rate.fps_den||(d.frameRate=this._referenceFrameRate);var s=d.frameRate.fps_den,t=d.frameRate.fps_num;d.refSampleDuration=d.timescale*(s/t);for(var u=q.subarray(1,4),v="avc1.",w=0;w<3;w++){var x=u[w].toString(16);x.length<2&&(x="0"+x),v+=x}d.codec=v;var y=this._mediaInfo;y.width=d.codecWidth,y.height=d.codecHeight,y.fps=d.frameRate.fps,y.profile=d.profile,y.level=d.level,y.refFrames=r.ref_frames,y.chromaFormat=r.chroma_format_string,y.sarNum=d.sarRatio.width,y.sarDen=d.sarRatio.height,y.videoCodec=v,y.hasAudio?null!=y.audioCodec&&(y.mimeType='video/x-flv; codecs="'+y.videoCodec+","+y.audioCodec+'"'):y.mimeType='video/x-flv; codecs="'+y.videoCodec+'"',y.isComplete()&&this._onMediaInfo(y)}}}var z=g.getUint8(l);if(0===z)return void this._onError(p.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS");z>1&&j.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = "+z),l++;for(var A=0;A<z;A++){var B=g.getUint16(l,!f);l+=2,0!==B&&(l+=B)}d.avcc=new Uint8Array(c),d.avcc.set(new Uint8Array(a,b,c),0),j.default.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",d)}},{key:"_parseAVCVideoData",value:function(a,b,c,d,e,f,g){for(var h=this._littleEndian,i=new DataView(a,b,c),k=[],l=0,m=0,n=this._naluLengthSize,o=this._timestampBase+d,p=1===f;m<c;){if(m+4>=c){j.default.w(this.TAG,"Malformed Nalu near timestamp "+o+", offset = "+m+", dataSize = "+c);break}var q=i.getUint32(m,!h);if(3===n&&(q>>>=8),q>c-n)return void j.default.w(this.TAG,"Malformed Nalus near timestamp "+o+", NaluSize > DataSize!");var r=31&i.getUint8(m+n);5===r&&(p=!0);var s=new Uint8Array(a,b+m,n+q),t={type:r,data:s};k.push(t),l+=s.byteLength,m+=n+q}if(k.length){var u=this._videoTrack,v={units:k,length:l,isKeyframe:p,dts:o,cts:g,pts:o+g};p&&(v.fileposition=e),u.samples.push(v),u.length+=l}}},{key:"onTrackMetadata",get:function(){return this._onTrackMetadata},set:function(a){this._onTrackMetadata=a}},{key:"onMediaInfo",get:function(){return this._onMediaInfo},set:function(a){this._onMediaInfo=a}},{key:"onError",get:function(){return this._onError},set:function(a){this._onError=a}},{key:"onDataAvailable",get:function(){return this._onDataAvailable},set:function(a){this._onDataAvailable=a}},{key:"timestampBase",get:function(){return this._timestampBase},set:function(a){this._timestampBase=a}},{key:"overridedDuration",get:function(){return this._duration},set:function(a){this._durationOverrided=!0,this._duration=a,this._mediaInfo.duration=a}},{key:"overridedHasAudio",set:function(a){this._hasAudioFlagOverrided=!0,this._hasAudio=a,this._mediaInfo.hasAudio=a}},{key:"overridedHasVideo",set:function(a){this._hasVideoFlagOverrided=!0,this._hasVideo=a,this._mediaInfo.hasVideo=a}}],[{key:"probe",value:function(a){var b=new Uint8Array(a),c={match:!1};if(70!==b[0]||76!==b[1]||86!==b[2]||1!==b[3])return c;var d=(4&b[4])>>>2!=0,e=0!=(1&b[4]),g=f(b,5);return g<9?c:{match:!0,consumed:g,dataOffset:g,hasAudioTrack:d,hasVideoTrack:e}}}]),a}();c.default=t},{"../core/media-info.js":7,"../utils/exception.js":40,"../utils/logger.js":41,
"./amf-parser.js":15,"./demux-errors.js":16,"./sps-parser.js":19}],19:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("./exp-golomb.js"),g=function(a){return a&&a.__esModule?a:{default:a}}(f),h=function(){function a(){d(this,a)}return e(a,null,[{key:"_ebsp2rbsp",value:function(a){for(var b=a,c=b.byteLength,d=new Uint8Array(c),e=0,f=0;f<c;f++)f>=2&&3===b[f]&&0===b[f-1]&&0===b[f-2]||(d[e]=b[f],e++);return new Uint8Array(d.buffer,0,e)}},{key:"parseSPS",value:function(b){var c=a._ebsp2rbsp(b),d=new g.default(c);d.readByte();var e=d.readByte();d.readByte();var f=d.readByte();d.readUEG();var h=a.getProfileString(e),i=a.getLevelString(f),j=1,k=420,l=[0,420,422,444],m=8;if((100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e||138===e||144===e)&&(j=d.readUEG(),3===j&&d.readBits(1),j<=3&&(k=l[j]),m=d.readUEG()+8,d.readUEG(),d.readBits(1),d.readBool()))for(var n=3!==j?8:12,o=0;o<n;o++)d.readBool()&&(o<6?a._skipScalingList(d,16):a._skipScalingList(d,64));d.readUEG();var p=d.readUEG();if(0===p)d.readUEG();else if(1===p){d.readBits(1),d.readSEG(),d.readSEG();for(var q=d.readUEG(),r=0;r<q;r++)d.readSEG()}var s=d.readUEG();d.readBits(1);var t=d.readUEG(),u=d.readUEG(),v=d.readBits(1);0===v&&d.readBits(1),d.readBits(1);var w=0,x=0,y=0,z=0;d.readBool()&&(w=d.readUEG(),x=d.readUEG(),y=d.readUEG(),z=d.readUEG());var A=1,B=1,C=0,D=!0,E=0,F=0;if(d.readBool()){if(d.readBool()){var G=d.readByte(),H=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],I=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];G>0&&G<16?(A=H[G-1],B=I[G-1]):255===G&&(A=d.readByte()<<8|d.readByte(),B=d.readByte()<<8|d.readByte())}if(d.readBool()&&d.readBool(),d.readBool()&&(d.readBits(4),d.readBool()&&d.readBits(24)),d.readBool()&&(d.readUEG(),d.readUEG()),d.readBool()){var J=d.readBits(32),K=d.readBits(32);D=d.readBool(),E=K,F=2*J,C=E/F}}var L=1;1===A&&1===B||(L=A/B);var M=0,N=0;if(0===j)M=1,N=2-v;else{var O=3===j?1:2,P=1===j?2:1;M=O,N=P*(2-v)}var Q=16*(t+1),R=16*(u+1)*(2-v);Q-=(w+x)*M,R-=(y+z)*N;var S=Math.ceil(Q*L);return d.destroy(),d=null,{profile_string:h,level_string:i,bit_depth:m,ref_frames:s,chroma_format:k,chroma_format_string:a.getChromaFormatString(k),frame_rate:{fixed:D,fps:C,fps_den:F,fps_num:E},sar_ratio:{width:A,height:B},codec_size:{width:Q,height:R},present_size:{width:S,height:R}}}},{key:"_skipScalingList",value:function(a,b){for(var c=8,d=8,e=0,f=0;f<b;f++)0!==d&&(e=a.readSEG(),d=(c+e+256)%256),c=0===d?c:d}},{key:"getProfileString",value:function(a){switch(a){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}}},{key:"getLevelString",value:function(a){return(a/10).toFixed(1)}},{key:"getChromaFormatString",value:function(a){switch(a){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}}}]),a}();c.default=h},{"./exp-golomb.js":17}],20:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){var c=a;if(null==c||"object"!==(void 0===c?"undefined":h(c)))throw new v.InvalidArgumentException("MediaDataSource must be an javascript object!");if(!c.hasOwnProperty("type"))throw new v.InvalidArgumentException("MediaDataSource must has type field to indicate video file type!");switch(c.type){case"flv":return new n.default(c,b);default:return new p.default(c,b)}}function f(){return l.default.supportMSEH264Playback()}function g(){return l.default.getFeatureList()}Object.defineProperty(c,"__esModule",{value:!0});var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},i=a("./utils/polyfill.js"),j=d(i),k=a("./core/features.js"),l=d(k),m=a("./player/flv-player.js"),n=d(m),o=a("./player/native-player.js"),p=d(o),q=a("./player/player-events.js"),r=d(q),s=a("./player/player-errors.js"),t=a("./utils/logging-control.js"),u=d(t),v=a("./utils/exception.js");j.default.install();var w={};w.createPlayer=e,w.isSupported=f,w.getFeatureList=g,w.Events=r.default,w.ErrorTypes=s.ErrorTypes,w.ErrorDetails=s.ErrorDetails,w.FlvPlayer=n.default,w.NativePlayer=p.default,w.LoggingControl=u.default,Object.defineProperty(w,"version",{enumerable:!0,get:function(){return"1.4.2"}}),c.default=w},{"./core/features.js":6,"./player/flv-player.js":32,"./player/native-player.js":33,"./player/player-errors.js":34,"./player/player-events.js":35,"./utils/exception.js":40,"./utils/logging-control.js":42,"./utils/polyfill.js":43}],21:[function(a,b,c){"use strict";b.exports=a("./flv.js").default},{"./flv.js":20}],22:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0},j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=a("../utils/logger.js"),l=(d(k),a("../utils/browser.js")),m=d(l),n=a("./loader.js"),o=a("../utils/exception.js"),p=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,"fetch-stream-loader"));return d.TAG="FetchStreamLoader",d._seekHandler=a,d._config=c,d._needStash=!0,d._requestAbort=!1,d._contentLength=null,d._receivedLength=0,d}return g(b,a),j(b,null,[{key:"isSupported",value:function(){try{var a=m.default.msedge&&m.default.version.minor>=15048,b=!m.default.msedge||a;return self.fetch&&self.ReadableStream&&b}catch(a){return!1}}}]),j(b,[{key:"destroy",value:function(){this.isWorking()&&this.abort(),i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this)}},{key:"open",value:function(a,b){var c=this;this._dataSource=a,this._range=b;var d=a.url;this._config.reuseRedirectedURL&&void 0!=a.redirectedURL&&(d=a.redirectedURL);var e=this._seekHandler.getConfig(d,b),f=new self.Headers;if("object"===h(e.headers)){var g=e.headers;for(var i in g)g.hasOwnProperty(i)&&f.append(i,g[i])}var j={method:"GET",headers:f,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};!1===a.cors&&(j.mode="same-origin"),a.withCredentials&&(j.credentials="include"),a.referrerPolicy&&(j.referrerPolicy=a.referrerPolicy),this._status=n.LoaderStatus.kConnecting,self.fetch(e.url,j).then(function(a){if(c._requestAbort)return c._requestAbort=!1,void(c._status=n.LoaderStatus.kIdle);if(a.ok&&a.status>=200&&a.status<=299){if(a.url!==e.url&&c._onURLRedirect){var b=c._seekHandler.removeURLParameters(a.url);c._onURLRedirect(b)}var d=a.headers.get("Content-Length");return null!=d&&(c._contentLength=parseInt(d),0!==c._contentLength&&c._onContentLengthKnown&&c._onContentLengthKnown(c._contentLength)),c._pump.call(c,a.body.getReader())}if(c._status=n.LoaderStatus.kError,!c._onError)throw new o.RuntimeException("FetchStreamLoader: Http code invalid, "+a.status+" "+a.statusText);c._onError(n.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:a.status,msg:a.statusText})}).catch(function(a){if(c._status=n.LoaderStatus.kError,!c._onError)throw a;c._onError(n.LoaderErrors.EXCEPTION,{code:-1,msg:a.message})})}},{key:"abort",value:function(){this._requestAbort=!0}},{key:"_pump",value:function(a){var b=this;return a.read().then(function(c){if(c.done)if(null!==b._contentLength&&b._receivedLength<b._contentLength){b._status=n.LoaderStatus.kError;var d=n.LoaderErrors.EARLY_EOF,e={code:-1,msg:"Fetch stream meet Early-EOF"};if(!b._onError)throw new o.RuntimeException(e.msg);b._onError(d,e)}else b._status=n.LoaderStatus.kComplete,b._onComplete&&b._onComplete(b._range.from,b._range.from+b._receivedLength-1);else{if(!0===b._requestAbort)return b._requestAbort=!1,b._status=n.LoaderStatus.kComplete,a.cancel();b._status=n.LoaderStatus.kBuffering;var f=c.value.buffer,g=b._range.from+b._receivedLength;b._receivedLength+=f.byteLength,b._onDataArrival&&b._onDataArrival(f,g,b._receivedLength),b._pump(a)}}).catch(function(a){if(11!==a.code||!m.default.msedge){b._status=n.LoaderStatus.kError;var c=0,d=null;if(19!==a.code&&"network error"!==a.message||!(null===b._contentLength||null!==b._contentLength&&b._receivedLength<b._contentLength)?(c=n.LoaderErrors.EXCEPTION,d={code:a.code,msg:a.message}):(c=n.LoaderErrors.EARLY_EOF,d={code:a.code,msg:"Fetch stream meet Early-EOF"}),!b._onError)throw new o.RuntimeException(d.msg);b._onError(c,d)}})}}]),b}(n.BaseLoader);c.default=p},{"../utils/browser.js":39,"../utils/exception.js":40,"../utils/logger.js":41,"./loader.js":24}],23:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("../utils/logger.js"),h=d(g),i=a("./speed-sampler.js"),j=d(i),k=a("./loader.js"),l=a("./fetch-stream-loader.js"),m=d(l),n=a("./xhr-moz-chunked-loader.js"),o=d(n),p=a("./xhr-msstream-loader.js"),q=(d(p),a("./xhr-range-loader.js")),r=d(q),s=a("./websocket-loader.js"),t=d(s),u=a("./range-seek-handler.js"),v=d(u),w=a("./param-seek-handler.js"),x=d(w),y=a("../utils/exception.js"),z=function(){function a(b,c,d){e(this,a),this.TAG="IOController",this._config=c,this._extraData=d,this._stashInitialSize=393216,void 0!=c.stashInitialSize&&c.stashInitialSize>0&&(this._stashInitialSize=c.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=3145728,this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,this._enableStash=!0,!1===c.enableStashBuffer&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=b,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(b.url),this._refTotalLength=b.filesize?b.filesize:null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new j.default,this._speedNormalizeList=[64,128,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}return f(a,[{key:"destroy",value:function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null}},{key:"isWorking",value:function(){return this._loader&&this._loader.isWorking()&&!this._paused}},{key:"isPaused",value:function(){return this._paused}},{key:"_selectSeekHandler",value:function(){var a=this._config;if("range"===a.seekType)this._seekHandler=new v.default(this._config.rangeLoadZeroStart);else if("param"===a.seekType){var b=a.seekParamStart||"bstart",c=a.seekParamEnd||"bend";this._seekHandler=new x.default(b,c)}else{if("custom"!==a.seekType)throw new y.InvalidArgumentException("Invalid seekType in config: "+a.seekType);if("function"!=typeof a.customSeekHandler)throw new y.InvalidArgumentException("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new a.customSeekHandler}}},{key:"_selectLoader",value:function(){if(this._isWebSocketURL)this._loaderClass=t.default;else if(m.default.isSupported())this._loaderClass=m.default;else if(o.default.isSupported())this._loaderClass=o.default;else{if(!r.default.isSupported())throw new y.RuntimeException("Your browser doesn't support xhr with arraybuffer responseType!");this._loaderClass=r.default}}},{key:"_createLoader",value:function(){this._loader=new this._loaderClass(this._seekHandler,this._config),!1===this._loader.needStashBuffer&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)}},{key:"open",value:function(a){this._currentRange={from:0,to:-1},a&&(this._currentRange.from=a),this._speedSampler.reset(),a||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,Object.assign({},this._currentRange))}},{key:"abort",value:function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)}},{key:"pause",value:function(){this.isWorking()&&(this._loader.abort(),0!==this._stashUsed?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)}},{key:"resume",value:function(){if(this._paused){this._paused=!1;var a=this._resumeFrom;this._resumeFrom=0,this._internalSeek(a,!0)}}},{key:"seek",value:function(a){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(a,!0)}},{key:"_internalSeek",value:function(a,b){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(b),this._loader.destroy(),this._loader=null;var c={from:a,to:-1};this._currentRange={from:c.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,c),this._onSeeked&&this._onSeeked()}},{key:"updateUrl",value:function(a){if(!a||"string"!=typeof a||0===a.length)throw new y.InvalidArgumentException("Url must be a non-empty string!");this._dataSource.url=a}},{key:"_expandBuffer",value:function(a){for(var b=this._stashSize;b+1048576<a;)b*=2;if((b+=1048576)!==this._bufferSize){var c=new ArrayBuffer(b);if(this._stashUsed>0){var d=new Uint8Array(this._stashBuffer,0,this._stashUsed);new Uint8Array(c,0,b).set(d,0)}this._stashBuffer=c,this._bufferSize=b}}},{key:"_normalizeSpeed",value:function(a){var b=this._speedNormalizeList,c=b.length-1,d=0,e=0,f=c;if(a<b[0])return b[0];for(;e<=f;){if((d=e+Math.floor((f-e)/2))===c||a>=b[d]&&a<b[d+1])return b[d];b[d]<a?e=d+1:f=d-1}}},{key:"_adjustStashSize",value:function(a){var b=0;(b=this._config.isLive?a:a<512?a:a>=512&&a<=1024?Math.floor(1.5*a):2*a)>8192&&(b=8192);var c=1024*b+1048576;this._bufferSize<c&&this._expandBuffer(c),this._stashSize=1024*b}},{key:"_dispatchChunks",value:function(a,b){return this._currentRange.to=b+a.byteLength-1,this._onDataArrival(a,b)}},{key:"_onURLRedirect",value:function(a){this._redirectedURL=a,this._onRedirect&&this._onRedirect(a)}},{key:"_onContentLengthKnown",value:function(a){a&&this._fullRequestFlag&&(this._totalLength=a,this._fullRequestFlag=!1)}},{key:"_onLoaderChunkArrival",value:function(a,b,c){if(!this._onDataArrival)throw new y.IllegalStateException("IOController: No existing consumer (onDataArrival) callback!");if(!this._paused){this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof&&this._onRecoveredEarlyEof()),this._speedSampler.addBytes(a.byteLength);var d=this._speedSampler.lastSecondKBps;if(0!==d){var e=this._normalizeSpeed(d);this._speedNormalized!==e&&(this._speedNormalized=e,this._adjustStashSize(e))}if(this._enableStash)if(0===this._stashUsed&&0===this._stashByteStart&&(this._stashByteStart=b),this._stashUsed+a.byteLength<=this._stashSize){var f=new Uint8Array(this._stashBuffer,0,this._stashSize);f.set(new Uint8Array(a),this._stashUsed),this._stashUsed+=a.byteLength}else{var g=new Uint8Array(this._stashBuffer,0,this._bufferSize);if(this._stashUsed>0){var h=this._stashBuffer.slice(0,this._stashUsed),i=this._dispatchChunks(h,this._stashByteStart);if(i<h.byteLength){if(i>0){var j=new Uint8Array(h,i);g.set(j,0),this._stashUsed=j.byteLength,this._stashByteStart+=i}}else this._stashUsed=0,this._stashByteStart+=i;this._stashUsed+a.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+a.byteLength),g=new Uint8Array(this._stashBuffer,0,this._bufferSize)),g.set(new Uint8Array(a),this._stashUsed),this._stashUsed+=a.byteLength}else{var k=this._dispatchChunks(a,b);if(k<a.byteLength){var l=a.byteLength-k;l>this._bufferSize&&(this._expandBuffer(l),g=new Uint8Array(this._stashBuffer,0,this._bufferSize)),g.set(new Uint8Array(a,k),0),this._stashUsed+=l,this._stashByteStart=b+k}}}else if(0===this._stashUsed){var m=this._dispatchChunks(a,b);if(m<a.byteLength){var n=a.byteLength-m;n>this._bufferSize&&this._expandBuffer(n);var o=new Uint8Array(this._stashBuffer,0,this._bufferSize);o.set(new Uint8Array(a,m),0),this._stashUsed+=n,this._stashByteStart=b+m}}else{this._stashUsed+a.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+a.byteLength);var p=new Uint8Array(this._stashBuffer,0,this._bufferSize);p.set(new Uint8Array(a),this._stashUsed),this._stashUsed+=a.byteLength;var q=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart);if(q<this._stashUsed&&q>0){var r=new Uint8Array(this._stashBuffer,q);p.set(r,0)}this._stashUsed-=q,this._stashByteStart+=q}}}},{key:"_flushStashBuffer",value:function(a){if(this._stashUsed>0){var b=this._stashBuffer.slice(0,this._stashUsed),c=this._dispatchChunks(b,this._stashByteStart),d=b.byteLength-c;if(c<b.byteLength){if(!a){if(c>0){var e=new Uint8Array(this._stashBuffer,0,this._bufferSize),f=new Uint8Array(b,c);e.set(f,0),this._stashUsed=f.byteLength,this._stashByteStart+=c}return 0}h.default.w(this.TAG,d+" bytes unconsumed data remain when flush buffer, dropped")}return this._stashUsed=0,this._stashByteStart=0,d}return 0}},{key:"_onLoaderComplete",value:function(a,b){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)}},{key:"_onLoaderError",value:function(a,b){switch(h.default.e(this.TAG,"Loader error, code = "+b.code+", msg = "+b.msg),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,a=k.LoaderErrors.UNRECOVERABLE_EARLY_EOF),a){case k.LoaderErrors.EARLY_EOF:if(!this._config.isLive&&this._totalLength){var c=this._currentRange.to+1;return void(c<this._totalLength&&(h.default.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(c,!1)))}a=k.LoaderErrors.UNRECOVERABLE_EARLY_EOF;break;case k.LoaderErrors.UNRECOVERABLE_EARLY_EOF:case k.LoaderErrors.CONNECTING_TIMEOUT:case k.LoaderErrors.HTTP_STATUS_CODE_INVALID:case k.LoaderErrors.EXCEPTION:}if(!this._onError)throw new y.RuntimeException("IOException: "+b.msg);this._onError(a,b)}},{key:"status",get:function(){return this._loader.status}},{key:"extraData",get:function(){return this._extraData},set:function(a){this._extraData=a}},{key:"onDataArrival",get:function(){return this._onDataArrival},set:function(a){this._onDataArrival=a}},{key:"onSeeked",get:function(){return this._onSeeked},set:function(a){this._onSeeked=a}},{key:"onError",get:function(){return this._onError},set:function(a){this._onError=a}},{key:"onComplete",get:function(){return this._onComplete},set:function(a){this._onComplete=a}},{key:"onRedirect",get:function(){return this._onRedirect},set:function(a){this._onRedirect=a}},{key:"onRecoveredEarlyEof",get:function(){return this._onRecoveredEarlyEof},set:function(a){this._onRecoveredEarlyEof=a}},{key:"currentURL",get:function(){return this._dataSource.url}},{key:"hasRedirect",get:function(){return null!=this._redirectedURL||void 0!=this._dataSource.redirectedURL}},{key:"currentRedirectedURL",get:function(){return this._redirectedURL||this._dataSource.redirectedURL}},{key:"currentSpeed",get:function(){return this._loaderClass===r.default?this._loader.currentSpeed:this._speedSampler.lastSecondKBps}},{key:"loaderType",get:function(){return this._loader.type}}]),a}();c.default=z},{"../utils/exception.js":40,"../utils/logger.js":41,"./fetch-stream-loader.js":22,"./loader.js":24,"./param-seek-handler.js":25,"./range-seek-handler.js":26,"./speed-sampler.js":27,"./websocket-loader.js":28,"./xhr-moz-chunked-loader.js":29,"./xhr-msstream-loader.js":30,"./xhr-range-loader.js":31}],24:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0}),c.BaseLoader=c.LoaderErrors=c.LoaderStatus=void 0;var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("../utils/exception.js"),g=c.LoaderStatus={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4};c.LoaderErrors={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},c.BaseLoader=function(){function a(b){d(this,a),this._type=b||"undefined",this._status=g.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}return e(a,[{key:"destroy",value:function(){this._status=g.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}},{key:"isWorking",value:function(){return this._status===g.kConnecting||this._status===g.kBuffering}},{key:"open",value:function(a,b){throw new f.NotImplementedException("Unimplemented abstract function!")}},{key:"abort",value:function(){throw new f.NotImplementedException("Unimplemented abstract function!")}},{key:"type",get:function(){return this._type}},{key:"status",get:function(){return this._status}},{key:"needStashBuffer",get:function(){return this._needStash}},{key:"onContentLengthKnown",get:function(){return this._onContentLengthKnown},set:function(a){this._onContentLengthKnown=a}},{key:"onURLRedirect",get:function(){return this._onURLRedirect},set:function(a){this._onURLRedirect=a}},{key:"onDataArrival",get:function(){return this._onDataArrival},set:function(a){this._onDataArrival=a}},{key:"onError",get:function(){return this._onError},set:function(a){this._onError=a}},{key:"onComplete",get:function(){return this._onComplete},set:function(a){this._onComplete=a}}]),a}()},{"../utils/exception.js":40}],25:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b,c){d(this,a),this._startName=b,this._endName=c}return e(a,[{key:"getConfig",value:function(a,b){var c=a;if(0!==b.from||-1!==b.to){var d=!0;-1===c.indexOf("?")&&(c+="?",d=!1),d&&(c+="&"),c+=this._startName+"="+b.from.toString(),-1!==b.to&&(c+="&"+this._endName+"="+b.to.toString())}return{url:c,headers:{}}}},{key:"removeURLParameters",value:function(a){var b=a.split("?")[0],c=void 0,d=a.indexOf("?");-1!==d&&(c=a.substring(d+1));var e="";if(void 0!=c&&c.length>0)for(var f=c.split("&"),g=0;g<f.length;g++){var h=f[g].split("="),i=g>0;h[0]!==this._startName&&h[0]!==this._endName&&(i&&(e+="&"),e+=f[g])}return 0===e.length?b:b+"?"+e}}]),a}();c.default=f},{}],26:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b){d(this,a),this._zeroStart=b||!1}return e(a,[{key:"getConfig",value:function(a,b){var c={};if(0!==b.from||-1!==b.to){var d=void 0;d=-1!==b.to?"bytes="+b.from.toString()+"-"+b.to.toString():"bytes="+b.from.toString()+"-",c.Range=d}else this._zeroStart&&(c.Range="bytes=0-");return{url:a,headers:c}}},{key:"removeURLParameters",value:function(a){return a}}]),a}();c.default=f},{}],27:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a),this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}return e(a,[{key:"reset",value:function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0}},{key:"addBytes",value:function(a){0===this._firstCheckpoint?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=a,this._totalBytes+=a):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=a,this._totalBytes+=a):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=a,this._totalBytes+=a,this._lastCheckpoint=this._now())}},{key:"currentKBps",get:function(){this.addBytes(0);var a=(this._now()-this._lastCheckpoint)/1e3;return 0==a&&(a=1),this._intervalBytes/a/1024}},{key:"lastSecondKBps",get:function(){return this.addBytes(0),0!==this._lastSecondBytes?this._lastSecondBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0}},{key:"averageKBps",get:function(){var a=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/a/1024}}]),a}();c.default=f},{}],28:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0},h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../utils/logger.js"),j=(function(a){a&&a.__esModule}(i),a("./loader.js")),k=a("../utils/exception.js"),l=function(a){function b(){d(this,b);var a=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,"websocket-loader"));return a.TAG="WebSocketLoader",a._needStash=!0,a._ws=null,a._requestAbort=!1,a._receivedLength=0,a}return f(b,a),h(b,null,[{key:"isSupported",value:function(){try{return void 0!==self.WebSocket}catch(a){return!1}}}]),h(b,[{key:"destroy",value:function(){this._ws&&this.abort(),g(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this)}},{key:"open",value:function(a){try{var b=this._ws=new self.WebSocket(a.url);b.binaryType="arraybuffer",b.onopen=this._onWebSocketOpen.bind(this),b.onclose=this._onWebSocketClose.bind(this),b.onmessage=this._onWebSocketMessage.bind(this),b.onerror=this._onWebSocketError.bind(this),this._status=j.LoaderStatus.kConnecting}catch(a){this._status=j.LoaderStatus.kError;var c={code:a.code,msg:a.message};if(!this._onError)throw new k.RuntimeException(c.msg);this._onError(j.LoaderErrors.EXCEPTION,c)}}},{key:"abort",value:function(){var a=this._ws;!a||0!==a.readyState&&1!==a.readyState||(this._requestAbort=!0,a.close()),this._ws=null,this._status=j.LoaderStatus.kComplete}},{key:"_onWebSocketOpen",value:function(a){this._status=j.LoaderStatus.kBuffering}},{key:"_onWebSocketClose",value:function(a){return!0===this._requestAbort?void(this._requestAbort=!1):(this._status=j.LoaderStatus.kComplete,void(this._onComplete&&this._onComplete(0,this._receivedLength-1)))}},{key:"_onWebSocketMessage",value:function(a){var b=this;if(a.data instanceof ArrayBuffer)this._dispatchArrayBuffer(a.data);else if(a.data instanceof Blob){var c=new FileReader;c.onload=function(){b._dispatchArrayBuffer(c.result)},c.readAsArrayBuffer(a.data)}else{this._status=j.LoaderStatus.kError;var d={code:-1,msg:"Unsupported WebSocket message type: "+a.data.constructor.name};if(!this._onError)throw new k.RuntimeException(d.msg);this._onError(j.LoaderErrors.EXCEPTION,d)}}},{key:"_dispatchArrayBuffer",value:function(a){var b=a,c=this._receivedLength;this._receivedLength+=b.byteLength,this._onDataArrival&&this._onDataArrival(b,c,this._receivedLength)}},{key:"_onWebSocketError",value:function(a){this._status=j.LoaderStatus.kError;var b={code:a.code,msg:a.message};if(!this._onError)throw new k.RuntimeException(b.msg);this._onError(j.LoaderErrors.EXCEPTION,b)}}]),b}(j.BaseLoader);c.default=l},{"../utils/exception.js":40,"../utils/logger.js":41,"./loader.js":24}],29:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b);
}Object.defineProperty(c,"__esModule",{value:!0});var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},h=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("../utils/logger.js"),k=function(a){return a&&a.__esModule?a:{default:a}}(j),l=a("./loader.js"),m=a("../utils/exception.js"),n=function(a){function b(a,c){d(this,b);var f=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,"xhr-moz-chunked-loader"));return f.TAG="MozChunkedLoader",f._seekHandler=a,f._config=c,f._needStash=!0,f._xhr=null,f._requestAbort=!1,f._contentLength=null,f._receivedLength=0,f}return f(b,a),i(b,null,[{key:"isSupported",value:function(){try{var a=new XMLHttpRequest;return a.open("GET","https://example.com",!0),a.responseType="moz-chunked-arraybuffer","moz-chunked-arraybuffer"===a.responseType}catch(a){return k.default.w("MozChunkedLoader",a.message),!1}}}]),i(b,[{key:"destroy",value:function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),h(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this)}},{key:"open",value:function(a,b){this._dataSource=a,this._range=b;var c=a.url;this._config.reuseRedirectedURL&&void 0!=a.redirectedURL&&(c=a.redirectedURL);var d=this._seekHandler.getConfig(c,b);this._requestURL=d.url;var e=this._xhr=new XMLHttpRequest;if(e.open("GET",d.url,!0),e.responseType="moz-chunked-arraybuffer",e.onreadystatechange=this._onReadyStateChange.bind(this),e.onprogress=this._onProgress.bind(this),e.onloadend=this._onLoadEnd.bind(this),e.onerror=this._onXhrError.bind(this),a.withCredentials&&(e.withCredentials=!0),"object"===g(d.headers)){var f=d.headers;for(var h in f)f.hasOwnProperty(h)&&e.setRequestHeader(h,f[h])}this._status=l.LoaderStatus.kConnecting,e.send()}},{key:"abort",value:function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=l.LoaderStatus.kComplete}},{key:"_onReadyStateChange",value:function(a){var b=a.target;if(2===b.readyState){if(void 0!=b.responseURL&&b.responseURL!==this._requestURL&&this._onURLRedirect){var c=this._seekHandler.removeURLParameters(b.responseURL);this._onURLRedirect(c)}if(0!==b.status&&(b.status<200||b.status>299)){if(this._status=l.LoaderStatus.kError,!this._onError)throw new m.RuntimeException("MozChunkedLoader: Http code invalid, "+b.status+" "+b.statusText);this._onError(l.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:b.status,msg:b.statusText})}else this._status=l.LoaderStatus.kBuffering}}},{key:"_onProgress",value:function(a){if(this._status!==l.LoaderStatus.kError){null===this._contentLength&&null!==a.total&&0!==a.total&&(this._contentLength=a.total,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength));var b=a.target.response,c=this._range.from+this._receivedLength;this._receivedLength+=b.byteLength,this._onDataArrival&&this._onDataArrival(b,c,this._receivedLength)}}},{key:"_onLoadEnd",value:function(a){return!0===this._requestAbort?void(this._requestAbort=!1):void(this._status!==l.LoaderStatus.kError&&(this._status=l.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)))}},{key:"_onXhrError",value:function(a){this._status=l.LoaderStatus.kError;var b=0,c=null;if(this._contentLength&&a.loaded<this._contentLength?(b=l.LoaderErrors.EARLY_EOF,c={code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(b=l.LoaderErrors.EXCEPTION,c={code:-1,msg:a.constructor.name+" "+a.type}),!this._onError)throw new m.RuntimeException(c.msg);this._onError(b,c)}}]),b}(l.BaseLoader);c.default=n},{"../utils/exception.js":40,"../utils/logger.js":41,"./loader.js":24}],30:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},h=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("../utils/logger.js"),k=function(a){return a&&a.__esModule?a:{default:a}}(j),l=a("./loader.js"),m=a("../utils/exception.js"),n=function(a){function b(a,c){d(this,b);var f=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,"xhr-msstream-loader"));return f.TAG="MSStreamLoader",f._seekHandler=a,f._config=c,f._needStash=!0,f._xhr=null,f._reader=null,f._totalRange=null,f._currentRange=null,f._currentRequestURL=null,f._currentRedirectedURL=null,f._contentLength=null,f._receivedLength=0,f._bufferLimit=16777216,f._lastTimeBufferSize=0,f._isReconnecting=!1,f}return f(b,a),i(b,null,[{key:"isSupported",value:function(){try{if(void 0===self.MSStream||void 0===self.MSStreamReader)return!1;var a=new XMLHttpRequest;return a.open("GET","https://example.com",!0),a.responseType="ms-stream","ms-stream"===a.responseType}catch(a){return k.default.w("MSStreamLoader",a.message),!1}}}]),i(b,[{key:"destroy",value:function(){this.isWorking()&&this.abort(),this._reader&&(this._reader.onprogress=null,this._reader.onload=null,this._reader.onerror=null,this._reader=null),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr=null),h(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this)}},{key:"open",value:function(a,b){this._internalOpen(a,b,!1)}},{key:"_internalOpen",value:function(a,b,c){this._dataSource=a,c?this._currentRange=b:this._totalRange=b;var d=a.url;this._config.reuseRedirectedURL&&(void 0!=this._currentRedirectedURL?d=this._currentRedirectedURL:void 0!=a.redirectedURL&&(d=a.redirectedURL));var e=this._seekHandler.getConfig(d,b);this._currentRequestURL=e.url;var f=this._reader=new self.MSStreamReader;f.onprogress=this._msrOnProgress.bind(this),f.onload=this._msrOnLoad.bind(this),f.onerror=this._msrOnError.bind(this);var h=this._xhr=new XMLHttpRequest;if(h.open("GET",e.url,!0),h.responseType="ms-stream",h.onreadystatechange=this._xhrOnReadyStateChange.bind(this),h.onerror=this._xhrOnError.bind(this),a.withCredentials&&(h.withCredentials=!0),"object"===g(e.headers)){var i=e.headers;for(var j in i)i.hasOwnProperty(j)&&h.setRequestHeader(j,i[j])}this._isReconnecting?this._isReconnecting=!1:this._status=l.LoaderStatus.kConnecting,h.send()}},{key:"abort",value:function(){this._internalAbort(),this._status=l.LoaderStatus.kComplete}},{key:"_internalAbort",value:function(){this._reader&&(1===this._reader.readyState&&this._reader.abort(),this._reader.onprogress=null,this._reader.onload=null,this._reader.onerror=null,this._reader=null),this._xhr&&(this._xhr.abort(),this._xhr.onreadystatechange=null,this._xhr=null)}},{key:"_xhrOnReadyStateChange",value:function(a){var b=a.target;if(2===b.readyState)if(b.status>=200&&b.status<=299){if(this._status=l.LoaderStatus.kBuffering,void 0!=b.responseURL){var c=this._seekHandler.removeURLParameters(b.responseURL);b.responseURL!==this._currentRequestURL&&c!==this._currentRedirectedURL&&(this._currentRedirectedURL=c,this._onURLRedirect&&this._onURLRedirect(c))}var d=b.getResponseHeader("Content-Length");if(null!=d&&null==this._contentLength){var e=parseInt(d);e>0&&(this._contentLength=e,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength))}}else{if(this._status=l.LoaderStatus.kError,!this._onError)throw new m.RuntimeException("MSStreamLoader: Http code invalid, "+b.status+" "+b.statusText);this._onError(l.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:b.status,msg:b.statusText})}else if(3===b.readyState&&b.status>=200&&b.status<=299){this._status=l.LoaderStatus.kBuffering;var f=b.response;this._reader.readAsArrayBuffer(f)}}},{key:"_xhrOnError",value:function(a){this._status=l.LoaderStatus.kError;var b=l.LoaderErrors.EXCEPTION,c={code:-1,msg:a.constructor.name+" "+a.type};if(!this._onError)throw new m.RuntimeException(c.msg);this._onError(b,c)}},{key:"_msrOnProgress",value:function(a){var b=a.target,c=b.result;if(null==c)return void this._doReconnectIfNeeded();var d=c.slice(this._lastTimeBufferSize);this._lastTimeBufferSize=c.byteLength;var e=this._totalRange.from+this._receivedLength;this._receivedLength+=d.byteLength,this._onDataArrival&&this._onDataArrival(d,e,this._receivedLength),c.byteLength>=this._bufferLimit&&(k.default.v(this.TAG,"MSStream buffer exceeded max size near "+(e+d.byteLength)+", reconnecting..."),this._doReconnectIfNeeded())}},{key:"_doReconnectIfNeeded",value:function(){if(null==this._contentLength||this._receivedLength<this._contentLength){this._isReconnecting=!0,this._lastTimeBufferSize=0,this._internalAbort();var a={from:this._totalRange.from+this._receivedLength,to:-1};this._internalOpen(this._dataSource,a,!0)}}},{key:"_msrOnLoad",value:function(a){this._status=l.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._totalRange.from,this._totalRange.from+this._receivedLength-1)}},{key:"_msrOnError",value:function(a){this._status=l.LoaderStatus.kError;var b=0,c=null;if(this._contentLength&&this._receivedLength<this._contentLength?(b=l.LoaderErrors.EARLY_EOF,c={code:-1,msg:"MSStream meet Early-Eof"}):(b=l.LoaderErrors.EARLY_EOF,c={code:-1,msg:a.constructor.name+" "+a.type}),!this._onError)throw new m.RuntimeException(c.msg);this._onError(b,c)}}]),b}(l.BaseLoader);c.default=n},{"../utils/exception.js":40,"../utils/logger.js":41,"./loader.js":24}],31:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0},j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=a("../utils/logger.js"),l=d(k),m=a("./speed-sampler.js"),n=d(m),o=a("./loader.js"),p=a("../utils/exception.js"),q=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,"xhr-range-loader"));return d.TAG="RangeLoader",d._seekHandler=a,d._config=c,d._needStash=!1,d._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],d._currentChunkSizeKB=384,d._currentSpeedNormalized=0,d._zeroSpeedChunkCount=0,d._xhr=null,d._speedSampler=new n.default,d._requestAbort=!1,d._waitForTotalLength=!1,d._totalLengthReceived=!1,d._currentRequestURL=null,d._currentRedirectedURL=null,d._currentRequestRange=null,d._totalLength=null,d._contentLength=null,d._receivedLength=0,d._lastTimeLoaded=0,d}return g(b,a),j(b,null,[{key:"isSupported",value:function(){try{var a=new XMLHttpRequest;return a.open("GET","https://example.com",!0),a.responseType="arraybuffer","arraybuffer"===a.responseType}catch(a){return l.default.w("RangeLoader",a.message),!1}}}]),j(b,[{key:"destroy",value:function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"destroy",this).call(this)}},{key:"open",value:function(a,b){this._dataSource=a,this._range=b,this._status=o.LoaderStatus.kConnecting;var c=!1;void 0!=this._dataSource.filesize&&0!==this._dataSource.filesize&&(c=!0,this._totalLength=this._dataSource.filesize),this._totalLengthReceived||c?this._openSubRange():(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1}))}},{key:"_openSubRange",value:function(){var a=1024*this._currentChunkSizeKB,b=this._range.from+this._receivedLength,c=b+a;null!=this._contentLength&&c-this._range.from>=this._contentLength&&(c=this._range.from+this._contentLength-1),this._currentRequestRange={from:b,to:c},this._internalOpen(this._dataSource,this._currentRequestRange)}},{key:"_internalOpen",value:function(a,b){this._lastTimeLoaded=0;var c=a.url;this._config.reuseRedirectedURL&&(void 0!=this._currentRedirectedURL?c=this._currentRedirectedURL:void 0!=a.redirectedURL&&(c=a.redirectedURL));var d=this._seekHandler.getConfig(c,b);this._currentRequestURL=d.url;var e=this._xhr=new XMLHttpRequest;if(e.open("GET",d.url,!0),e.responseType="arraybuffer",e.onreadystatechange=this._onReadyStateChange.bind(this),e.onprogress=this._onProgress.bind(this),e.onload=this._onLoad.bind(this),e.onerror=this._onXhrError.bind(this),a.withCredentials&&(e.withCredentials=!0),"object"===h(d.headers)){var f=d.headers;for(var g in f)f.hasOwnProperty(g)&&e.setRequestHeader(g,f[g])}e.send()}},{key:"abort",value:function(){this._requestAbort=!0,this._internalAbort(),this._status=o.LoaderStatus.kComplete}},{key:"_internalAbort",value:function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)}},{key:"_onReadyStateChange",value:function(a){var b=a.target;if(2===b.readyState){if(void 0!=b.responseURL){var c=this._seekHandler.removeURLParameters(b.responseURL);b.responseURL!==this._currentRequestURL&&c!==this._currentRedirectedURL&&(this._currentRedirectedURL=c,this._onURLRedirect&&this._onURLRedirect(c))}if(b.status>=200&&b.status<=299){if(this._waitForTotalLength)return;this._status=o.LoaderStatus.kBuffering}else{if(this._status=o.LoaderStatus.kError,!this._onError)throw new p.RuntimeException("RangeLoader: Http code invalid, "+b.status+" "+b.statusText);this._onError(o.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:b.status,msg:b.statusText})}}}},{key:"_onProgress",value:function(a){if(this._status!==o.LoaderStatus.kError){if(null===this._contentLength){var b=!1;if(this._waitForTotalLength){this._waitForTotalLength=!1,this._totalLengthReceived=!0,b=!0;var c=a.total;this._internalAbort(),null!=c&0!==c&&(this._totalLength=c)}if(-1===this._range.to?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,b)return void this._openSubRange();this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}var d=a.loaded-this._lastTimeLoaded;this._lastTimeLoaded=a.loaded,this._speedSampler.addBytes(d)}}},{key:"_normalizeSpeed",value:function(a){var b=this._chunkSizeKBList,c=b.length-1,d=0,e=0,f=c;if(a<b[0])return b[0];for(;e<=f;){if((d=e+Math.floor((f-e)/2))===c||a>=b[d]&&a<b[d+1])return b[d];b[d]<a?e=d+1:f=d-1}}},{key:"_onLoad",value:function(a){if(this._status!==o.LoaderStatus.kError){if(this._waitForTotalLength)return void(this._waitForTotalLength=!1);this._lastTimeLoaded=0;var b=this._speedSampler.lastSecondKBps;if(0===b&&++this._zeroSpeedChunkCount>=3&&(b=this._speedSampler.currentKBps),0!==b){var c=this._normalizeSpeed(b);this._currentSpeedNormalized!==c&&(this._currentSpeedNormalized=c,this._currentChunkSizeKB=c)}var d=a.target.response,e=this._range.from+this._receivedLength;this._receivedLength+=d.byteLength;var f=!1;null!=this._contentLength&&this._receivedLength<this._contentLength?this._openSubRange():f=!0,this._onDataArrival&&this._onDataArrival(d,e,this._receivedLength),f&&(this._status=o.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))}}},{key:"_onXhrError",value:function(a){this._status=o.LoaderStatus.kError;var b=0,c=null;if(this._contentLength&&this._receivedLength>0&&this._receivedLength<this._contentLength?(b=o.LoaderErrors.EARLY_EOF,c={code:-1,msg:"RangeLoader meet Early-Eof"}):(b=o.LoaderErrors.EXCEPTION,c={code:-1,msg:a.constructor.name+" "+a.type}),!this._onError)throw new p.RuntimeException(c.msg);this._onError(b,c)}},{key:"currentSpeed",get:function(){return this._speedSampler.lastSecondKBps}}]),b}(o.BaseLoader);c.default=q},{"../utils/exception.js":40,"../utils/logger.js":41,"./loader.js":24,"./speed-sampler.js":27}],32:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("events"),i=d(h),j=a("../utils/logger.js"),k=d(j),l=a("../utils/browser.js"),m=d(l),n=a("./player-events.js"),o=d(n),p=a("../core/transmuxer.js"),q=d(p),r=a("../core/transmuxing-events.js"),s=d(r),t=a("../core/mse-controller.js"),u=d(t),v=a("../core/mse-events.js"),w=d(v),x=a("./player-errors.js"),y=a("../config.js"),z=a("../utils/exception.js"),A=function(){function a(b,c){if(e(this,a),this.TAG="FlvPlayer",this._type="FlvPlayer",this._emitter=new i.default,this._config=(0,y.createDefaultConfig)(),"object"===(void 0===c?"undefined":f(c))&&Object.assign(this._config,c),"flv"!==b.type.toLowerCase())throw new z.InvalidArgumentException("FlvPlayer requires an flv MediaDataSource input!");!0===b.isLive&&(this._config.isLive=!0),this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressChecker=null,this._mediaDataSource=b,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null;var d=m.default.chrome&&(m.default.version.major<50||50===m.default.version.major&&m.default.version.build<2661);this._alwaysSeekKeyframe=!!(d||m.default.msedge||m.default.msie),this._alwaysSeekKeyframe&&(this._config.accurateSeek=!1)}return g(a,[{key:"destroy",value:function(){null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null}},{key:"on",value:function(a,b){var c=this;a===o.default.MEDIA_INFO?null!=this._mediaInfo&&Promise.resolve().then(function(){c._emitter.emit(o.default.MEDIA_INFO,c.mediaInfo)}):a===o.default.STATISTICS_INFO&&null!=this._statisticsInfo&&Promise.resolve().then(function(){c._emitter.emit(o.default.STATISTICS_INFO,c.statisticsInfo)}),this._emitter.addListener(a,b)}},{key:"off",value:function(a,b){this._emitter.removeListener(a,b)}},{key:"attachMediaElement",value:function(a){var b=this;if(this._mediaElement=a,a.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),a.addEventListener("seeking",this.e.onvSeeking),a.addEventListener("canplay",this.e.onvCanPlay),a.addEventListener("stalled",this.e.onvStalled),a.addEventListener("progress",this.e.onvProgress),this._msectl=new u.default(this._config),this._msectl.on(w.default.UPDATE_END,this._onmseUpdateEnd.bind(this)),this._msectl.on(w.default.BUFFER_FULL,this._onmseBufferFull.bind(this)),this._msectl.on(w.default.SOURCE_OPEN,function(){b._mseSourceOpened=!0,b._hasPendingLoad&&(b._hasPendingLoad=!1,b.load())}),this._msectl.on(w.default.ERROR,function(a){b._emitter.emit(o.default.ERROR,x.ErrorTypes.MEDIA_ERROR,x.ErrorDetails.MEDIA_MSE_ERROR,a)}),this._msectl.attachMediaElement(a),null!=this._pendingSeekTime)try{a.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(a){}}},{key:"detachMediaElement",value:function(){this._mediaElement&&(this._msectl.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null)}},{key:"load",value:function(){var a=this;if(!this._mediaElement)throw new z.IllegalStateException("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new z.IllegalStateException("FlvPlayer.load() has been called, please call unload() first!");if(!this._hasPendingLoad){if(this._config.deferLoadAfterSourceOpen&&!1===this._mseSourceOpened)return void(this._hasPendingLoad=!0);this._mediaElement.readyState>0&&(this._requestSetTime=!0,this._mediaElement.currentTime=0),this._transmuxer=new q.default(this._mediaDataSource,this._config),this._transmuxer.on(s.default.INIT_SEGMENT,function(b,c){a._msectl.appendInitSegment(c)}),this._transmuxer.on(s.default.MEDIA_SEGMENT,function(b,c){if(a._msectl.appendMediaSegment(c),a._config.lazyLoad&&!a._config.isLive){var d=a._mediaElement.currentTime;c.info.endDts>=1e3*(d+a._config.lazyLoadMaxDuration)&&null==a._progressChecker&&(k.default.v(a.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),a._suspendTransmuxer())}}),this._transmuxer.on(s.default.LOADING_COMPLETE,function(){a._msectl.endOfStream(),a._emitter.emit(o.default.LOADING_COMPLETE)}),this._transmuxer.on(s.default.RECOVERED_EARLY_EOF,function(){a._emitter.emit(o.default.RECOVERED_EARLY_EOF)}),this._transmuxer.on(s.default.IO_ERROR,function(b,c){a._emitter.emit(o.default.ERROR,x.ErrorTypes.NETWORK_ERROR,b,c)}),this._transmuxer.on(s.default.DEMUX_ERROR,function(b,c){a._emitter.emit(o.default.ERROR,x.ErrorTypes.MEDIA_ERROR,b,{code:-1,msg:c})}),this._transmuxer.on(s.default.MEDIA_INFO,function(b){a._mediaInfo=b,a._emitter.emit(o.default.MEDIA_INFO,Object.assign({},b))}),this._transmuxer.on(s.default.STATISTICS_INFO,function(b){a._statisticsInfo=a._fillStatisticsInfo(b),a._emitter.emit(o.default.STATISTICS_INFO,Object.assign({},a._statisticsInfo))}),this._transmuxer.on(s.default.RECOMMEND_SEEKPOINT,function(b){a._mediaElement&&!a._config.accurateSeek&&(a._requestSetTime=!0,a._mediaElement.currentTime=b/1e3)}),this._transmuxer.open()}}},{key:"unload",value:function(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(0),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null)}},{key:"play",value:function(){return this._mediaElement.play()}},{key:"pause",value:function(){this._mediaElement.pause()}},{key:"_fillStatisticsInfo",value:function(a){if(a.playerType=this._type,!(this._mediaElement instanceof HTMLVideoElement))return a;var b=!0,c=0,d=0;if(this._mediaElement.getVideoPlaybackQuality){var e=this._mediaElement.getVideoPlaybackQuality();c=e.totalVideoFrames,d=e.droppedVideoFrames}else void 0!=this._mediaElement.webkitDecodedFrameCount?(c=this._mediaElement.webkitDecodedFrameCount,d=this._mediaElement.webkitDroppedFrameCount):b=!1;return b&&(a.decodedFrames=c,a.droppedFrames=d),a}},{key:"_onmseUpdateEnd",value:function(){if(this._config.lazyLoad&&!this._config.isLive){for(var a=this._mediaElement.buffered,b=this._mediaElement.currentTime,c=0,d=0;d<a.length;d++){var e=a.start(d),f=a.end(d);if(e<=b&&b<f){c=f;break}}c>=b+this._config.lazyLoadMaxDuration&&null==this._progressChecker&&(k.default.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}}},{key:"_onmseBufferFull",value:function(){k.default.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),null==this._progressChecker&&this._suspendTransmuxer()}},{key:"_suspendTransmuxer",value:function(){this._transmuxer&&(this._transmuxer.pause(),null==this._progressChecker&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3)))}},{key:"_checkProgressAndResume",value:function(){for(var a=this._mediaElement.currentTime,b=this._mediaElement.buffered,c=!1,d=0;d<b.length;d++){var e=b.start(d),f=b.end(d);if(a>=e&&a<f){a>=f-this._config.lazyLoadRecoverDuration&&(c=!0);break}}c&&(window.clearInterval(this._progressChecker),this._progressChecker=null,c&&(k.default.v(this.TAG,"Continue loading from paused position"),this._transmuxer.resume()))}},{key:"_isTimepointBuffered",value:function(a){for(var b=this._mediaElement.buffered,c=0;c<b.length;c++){var d=b.start(c),e=b.end(c);if(a>=d&&a<e)return!0}return!1}},{key:"_internalSeek",value:function(a){var b=this._isTimepointBuffered(a),c=!1,d=0;if(a<1&&this._mediaElement.buffered.length>0){var e=this._mediaElement.buffered.start(0);(e<1&&a<e||m.default.safari)&&(c=!0,d=m.default.safari?.1:e)}if(c)this._requestSetTime=!0,this._mediaElement.currentTime=d;else if(b){if(this._alwaysSeekKeyframe){var f=this._msectl.getNearestKeyframe(Math.floor(1e3*a));this._requestSetTime=!0,this._mediaElement.currentTime=null!=f?f.dts/1e3:a}else this._requestSetTime=!0,this._mediaElement.currentTime=a;null!=this._progressChecker&&this._checkProgressAndResume()}else null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._msectl.seek(a),this._transmuxer.seek(Math.floor(1e3*a)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=a)}},{key:"_checkAndApplyUnbufferedSeekpoint",value:function(){if(this._seekpointRecord)if(this._seekpointRecord.recordTime<=this._now()-100){var a=this._mediaElement.currentTime;this._seekpointRecord=null,this._isTimepointBuffered(a)||(null!=this._progressChecker&&(window.clearTimeout(this._progressChecker),this._progressChecker=null),this._msectl.seek(a),this._transmuxer.seek(Math.floor(1e3*a)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=a))}else window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)}},{key:"_checkAndResumeStuckPlayback",value:function(a){var b=this._mediaElement;if(a||!this._receivedCanPlay||b.readyState<2){var c=b.buffered;c.length>0&&b.currentTime<c.start(0)&&(k.default.w(this.TAG,"Playback seems stuck at "+b.currentTime+", seek to "+c.start(0)),this._requestSetTime=!0,this._mediaElement.currentTime=c.start(0),this._mediaElement.removeEventListener("progress",this.e.onvProgress))}else this._mediaElement.removeEventListener("progress",this.e.onvProgress)}},{key:"_onvLoadedMetadata",value:function(a){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null)}},{key:"_onvSeeking",value:function(a){var b=this._mediaElement.currentTime,c=this._mediaElement.buffered;if(this._requestSetTime)return void(this._requestSetTime=!1);if(b<1&&c.length>0){var d=c.start(0);if(d<1&&b<d||m.default.safari)return this._requestSetTime=!0,void(this._mediaElement.currentTime=m.default.safari?.1:d)}if(this._isTimepointBuffered(b)){if(this._alwaysSeekKeyframe){var e=this._msectl.getNearestKeyframe(Math.floor(1e3*b));null!=e&&(this._requestSetTime=!0,this._mediaElement.currentTime=e.dts/1e3)}return void(null!=this._progressChecker&&this._checkProgressAndResume())}this._seekpointRecord={seekPoint:b,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)}},{key:"_onvCanPlay",value:function(a){this._receivedCanPlay=!0,this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay)}},{key:"_onvStalled",value:function(a){this._checkAndResumeStuckPlayback(!0)}},{key:"_onvProgress",value:function(a){this._checkAndResumeStuckPlayback()}},{key:"type",get:function(){return this._type}},{key:"buffered",get:function(){return this._mediaElement.buffered}},{key:"duration",get:function(){return this._mediaElement.duration}},{key:"volume",get:function(){return this._mediaElement.volume},set:function(a){this._mediaElement.volume=a}},{key:"muted",get:function(){return this._mediaElement.muted},set:function(a){this._mediaElement.muted=a}},{key:"currentTime",get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(a){this._mediaElement?this._internalSeek(a):this._pendingSeekTime=a}},{key:"mediaInfo",get:function(){return Object.assign({},this._mediaInfo)}},{key:"statisticsInfo",get:function(){return null==this._statisticsInfo&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),Object.assign({},this._statisticsInfo)}}]),a}();c.default=A},{"../config.js":5,"../core/mse-controller.js":9,"../core/mse-events.js":10,"../core/transmuxer.js":11,"../core/transmuxing-events.js":13,"../utils/browser.js":39,"../utils/exception.js":40,"../utils/logger.js":41,"./player-errors.js":34,"./player-events.js":35,events:2}],33:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("events"),i=d(h),j=a("./player-events.js"),k=d(j),l=a("../config.js"),m=a("../utils/exception.js"),n=function(){function a(b,c){if(e(this,a),this.TAG="NativePlayer",this._type="NativePlayer",
this._emitter=new i.default,this._config=(0,l.createDefaultConfig)(),"object"===(void 0===c?"undefined":f(c))&&Object.assign(this._config,c),"flv"===b.type.toLowerCase())throw new m.InvalidArgumentException("NativePlayer does't support flv MediaDataSource input!");if(b.hasOwnProperty("segments"))throw new m.InvalidArgumentException("NativePlayer("+b.type+") doesn't support multipart playback!");this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=b,this._mediaElement=null}return g(a,[{key:"destroy",value:function(){this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null}},{key:"on",value:function(a,b){var c=this;a===k.default.MEDIA_INFO?null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then(function(){c._emitter.emit(k.default.MEDIA_INFO,c.mediaInfo)}):a===k.default.STATISTICS_INFO&&null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then(function(){c._emitter.emit(k.default.STATISTICS_INFO,c.statisticsInfo)}),this._emitter.addListener(a,b)}},{key:"off",value:function(a,b){this._emitter.removeListener(a,b)}},{key:"attachMediaElement",value:function(a){if(this._mediaElement=a,a.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),null!=this._pendingSeekTime)try{a.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(a){}}},{key:"detachMediaElement",value:function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)}},{key:"load",value:function(){if(!this._mediaElement)throw new m.IllegalStateException("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,this._mediaElement.readyState>0&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)}},{key:"unload",value:function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)}},{key:"play",value:function(){return this._mediaElement.play()}},{key:"pause",value:function(){this._mediaElement.pause()}},{key:"_onvLoadedMetadata",value:function(a){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(k.default.MEDIA_INFO,this.mediaInfo)}},{key:"_reportStatisticsInfo",value:function(){this._emitter.emit(k.default.STATISTICS_INFO,this.statisticsInfo)}},{key:"type",get:function(){return this._type}},{key:"buffered",get:function(){return this._mediaElement.buffered}},{key:"duration",get:function(){return this._mediaElement.duration}},{key:"volume",get:function(){return this._mediaElement.volume},set:function(a){this._mediaElement.volume=a}},{key:"muted",get:function(){return this._mediaElement.muted},set:function(a){this._mediaElement.muted=a}},{key:"currentTime",get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(a){this._mediaElement?this._mediaElement.currentTime=a:this._pendingSeekTime=a}},{key:"mediaInfo",get:function(){var a=this._mediaElement instanceof HTMLAudioElement?"audio/":"video/",b={mimeType:a+this._mediaDataSource.type};return this._mediaElement&&(b.duration=Math.floor(1e3*this._mediaElement.duration),this._mediaElement instanceof HTMLVideoElement&&(b.width=this._mediaElement.videoWidth,b.height=this._mediaElement.videoHeight)),b}},{key:"statisticsInfo",get:function(){var a={playerType:this._type,url:this._mediaDataSource.url};if(!(this._mediaElement instanceof HTMLVideoElement))return a;var b=!0,c=0,d=0;if(this._mediaElement.getVideoPlaybackQuality){var e=this._mediaElement.getVideoPlaybackQuality();c=e.totalVideoFrames,d=e.droppedVideoFrames}else void 0!=this._mediaElement.webkitDecodedFrameCount?(c=this._mediaElement.webkitDecodedFrameCount,d=this._mediaElement.webkitDroppedFrameCount):b=!1;return b&&(a.decodedFrames=c,a.droppedFrames=d),a}}]),a}();c.default=n},{"../config.js":5,"../utils/exception.js":40,"./player-events.js":35,events:2}],34:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.ErrorDetails=c.ErrorTypes=void 0;var d=a("../io/loader.js"),e=a("../demux/demux-errors.js"),f=function(a){return a&&a.__esModule?a:{default:a}}(e);c.ErrorTypes={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"},c.ErrorDetails={NETWORK_EXCEPTION:d.LoaderErrors.EXCEPTION,NETWORK_STATUS_CODE_INVALID:d.LoaderErrors.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:d.LoaderErrors.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:d.LoaderErrors.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:f.default.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:f.default.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:f.default.CODEC_UNSUPPORTED}},{"../demux/demux-errors.js":16,"../io/loader.js":24}],35:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",STATISTICS_INFO:"statistics_info"};c.default=d},{}],36:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,null,[{key:"getSilentFrame",value:function(a,b){if("mp4a.40.2"===a){if(1===b)return new Uint8Array([0,200,0,128,35,128]);if(2===b)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===b)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===b)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===b)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===b)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===b)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===b)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===b)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}}]),a}();c.default=f},{}],37:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,null,[{key:"init",value:function(){a.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[]};for(var b in a.types)a.types.hasOwnProperty(b)&&(a.types[b]=[b.charCodeAt(0),b.charCodeAt(1),b.charCodeAt(2),b.charCodeAt(3)]);var c=a.constants={};c.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),c.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),c.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),c.STSC=c.STCO=c.STTS,c.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),c.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),c.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),c.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),c.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),c.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}},{key:"box",value:function(a){for(var b=8,c=null,d=Array.prototype.slice.call(arguments,1),e=d.length,f=0;f<e;f++)b+=d[f].byteLength;c=new Uint8Array(b),c[0]=b>>>24&255,c[1]=b>>>16&255,c[2]=b>>>8&255,c[3]=255&b,c.set(a,4);for(var g=8,h=0;h<e;h++)c.set(d[h],g),g+=d[h].byteLength;return c}},{key:"generateInitSegment",value:function(b){var c=a.box(a.types.ftyp,a.constants.FTYP),d=a.moov(b),e=new Uint8Array(c.byteLength+d.byteLength);return e.set(c,0),e.set(d,c.byteLength),e}},{key:"moov",value:function(b){var c=a.mvhd(b.timescale,b.duration),d=a.trak(b),e=a.mvex(b);return a.box(a.types.moov,c,d,e)}},{key:"mvhd",value:function(b,c){return a.box(a.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,b>>>24&255,b>>>16&255,b>>>8&255,255&b,c>>>24&255,c>>>16&255,c>>>8&255,255&c,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))}},{key:"trak",value:function(b){return a.box(a.types.trak,a.tkhd(b),a.mdia(b))}},{key:"tkhd",value:function(b){var c=b.id,d=b.duration,e=b.presentWidth,f=b.presentHeight;return a.box(a.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,c>>>24&255,c>>>16&255,c>>>8&255,255&c,0,0,0,0,d>>>24&255,d>>>16&255,d>>>8&255,255&d,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,e>>>8&255,255&e,0,0,f>>>8&255,255&f,0,0]))}},{key:"mdia",value:function(b){return a.box(a.types.mdia,a.mdhd(b),a.hdlr(b),a.minf(b))}},{key:"mdhd",value:function(b){var c=b.timescale,d=b.duration;return a.box(a.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,c>>>24&255,c>>>16&255,c>>>8&255,255&c,d>>>24&255,d>>>16&255,d>>>8&255,255&d,85,196,0,0]))}},{key:"hdlr",value:function(b){var c=null;return c="audio"===b.type?a.constants.HDLR_AUDIO:a.constants.HDLR_VIDEO,a.box(a.types.hdlr,c)}},{key:"minf",value:function(b){var c=null;return c="audio"===b.type?a.box(a.types.smhd,a.constants.SMHD):a.box(a.types.vmhd,a.constants.VMHD),a.box(a.types.minf,c,a.dinf(),a.stbl(b))}},{key:"dinf",value:function(){return a.box(a.types.dinf,a.box(a.types.dref,a.constants.DREF))}},{key:"stbl",value:function(b){return a.box(a.types.stbl,a.stsd(b),a.box(a.types.stts,a.constants.STTS),a.box(a.types.stsc,a.constants.STSC),a.box(a.types.stsz,a.constants.STSZ),a.box(a.types.stco,a.constants.STCO))}},{key:"stsd",value:function(b){return"audio"===b.type?"mp3"===b.codec?a.box(a.types.stsd,a.constants.STSD_PREFIX,a.mp3(b)):a.box(a.types.stsd,a.constants.STSD_PREFIX,a.mp4a(b)):a.box(a.types.stsd,a.constants.STSD_PREFIX,a.avc1(b))}},{key:"mp3",value:function(b){var c=b.channelCount,d=b.audioSampleRate,e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,c,0,16,0,0,0,0,d>>>8&255,255&d,0,0]);return a.box(a.types[".mp3"],e)}},{key:"mp4a",value:function(b){var c=b.channelCount,d=b.audioSampleRate,e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,c,0,16,0,0,0,0,d>>>8&255,255&d,0,0]);return a.box(a.types.mp4a,e,a.esds(b))}},{key:"esds",value:function(b){var c=b.config||[],d=c.length,e=new Uint8Array([0,0,0,0,3,23+d,0,1,0,4,15+d,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([d]).concat(c).concat([6,1,2]));return a.box(a.types.esds,e)}},{key:"avc1",value:function(b){var c=b.avcc,d=b.codecWidth,e=b.codecHeight,f=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,d>>>8&255,255&d,e>>>8&255,255&e,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return a.box(a.types.avc1,f,a.box(a.types.avcC,c))}},{key:"mvex",value:function(b){return a.box(a.types.mvex,a.trex(b))}},{key:"trex",value:function(b){var c=b.id,d=new Uint8Array([0,0,0,0,c>>>24&255,c>>>16&255,c>>>8&255,255&c,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return a.box(a.types.trex,d)}},{key:"moof",value:function(b,c){return a.box(a.types.moof,a.mfhd(b.sequenceNumber),a.traf(b,c))}},{key:"mfhd",value:function(b){var c=new Uint8Array([0,0,0,0,b>>>24&255,b>>>16&255,b>>>8&255,255&b]);return a.box(a.types.mfhd,c)}},{key:"traf",value:function(b,c){var d=b.id,e=a.box(a.types.tfhd,new Uint8Array([0,0,0,0,d>>>24&255,d>>>16&255,d>>>8&255,255&d])),f=a.box(a.types.tfdt,new Uint8Array([0,0,0,0,c>>>24&255,c>>>16&255,c>>>8&255,255&c])),g=a.sdtp(b),h=a.trun(b,g.byteLength+16+16+8+16+8+8);return a.box(a.types.traf,e,f,h,g)}},{key:"sdtp",value:function(b){for(var c=b.samples||[],d=c.length,e=new Uint8Array(4+d),f=0;f<d;f++){var g=c[f].flags;e[f+4]=g.isLeading<<6|g.dependsOn<<4|g.isDependedOn<<2|g.hasRedundancy}return a.box(a.types.sdtp,e)}},{key:"trun",value:function(b,c){var d=b.samples||[],e=d.length,f=12+16*e,g=new Uint8Array(f);c+=8+f,g.set([0,0,15,1,e>>>24&255,e>>>16&255,e>>>8&255,255&e,c>>>24&255,c>>>16&255,c>>>8&255,255&c],0);for(var h=0;h<e;h++){var i=d[h].duration,j=d[h].size,k=d[h].flags,l=d[h].cts;g.set([i>>>24&255,i>>>16&255,i>>>8&255,255&i,j>>>24&255,j>>>16&255,j>>>8&255,255&j,k.isLeading<<2|k.dependsOn,k.isDependedOn<<6|k.hasRedundancy<<4|k.isNonSync,0,0,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*h)}return a.box(a.types.trun,g)}},{key:"mdat",value:function(b){return a.box(a.types.mdat,b)}}]),a}();f.init(),c.default=f},{}],38:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("../utils/logger.js"),h=d(g),i=a("./mp4-generator.js"),j=d(i),k=a("./aac-silent.js"),l=d(k),m=a("../utils/browser.js"),n=d(m),o=a("../core/media-segment-info.js"),p=a("../utils/exception.js"),q=function(){function a(b){e(this,a),this.TAG="MP4Remuxer",this._config=b,this._isLive=!0===b.isLive,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new o.MediaSegmentInfoList("audio"),this._videoSegmentInfoList=new o.MediaSegmentInfoList("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!(!n.default.chrome||!(n.default.version.major<50||50===n.default.version.major&&n.default.version.build<2661)),this._fillSilentAfterSeek=n.default.msedge||n.default.msie,this._mp3UseMpegAudio=!n.default.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}return f(a,[{key:"destroy",value:function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null}},{key:"bindDataSource",value:function(a){return a.onDataAvailable=this.remux.bind(this),a.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this}},{key:"insertDiscontinuity",value:function(){this._audioNextDts=this._videoNextDts=void 0}},{key:"seek",value:function(a){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()}},{key:"remux",value:function(a,b){if(!this._onMediaSegment)throw new p.IllegalStateException("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(a,b),this._remuxVideo(b),this._remuxAudio(a)}},{key:"_onTrackMetadataReceived",value:function(a,b){var c=null,d="mp4",e=b.codec;if("audio"===a)this._audioMeta=b,"mp3"===b.codec&&this._mp3UseMpegAudio?(d="mpeg",e="",c=new Uint8Array):c=j.default.generateInitSegment(b);else{if("video"!==a)return;this._videoMeta=b,c=j.default.generateInitSegment(b)}if(!this._onInitSegment)throw new p.IllegalStateException("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(a,{type:a,data:c.buffer,codec:e,container:a+"/"+d,mediaDuration:b.duration})}},{key:"_calculateDtsBase",value:function(a,b){this._dtsBaseInited||(a.samples&&a.samples.length&&(this._audioDtsBase=a.samples[0].dts),b.samples&&b.samples.length&&(this._videoDtsBase=b.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)}},{key:"flushStashedSamples",value:function(){var a=this._videoStashedLastSample,b=this._audioStashedLastSample,c={type:"video",id:1,sequenceNumber:0,samples:[],length:0};null!=a&&(c.samples.push(a),c.length=a.length);var d={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};null!=b&&(d.samples.push(b),d.length=b.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(c,!0),this._remuxAudio(d,!0)}},{key:"_remuxAudio",value:function(a,b){if(null!=this._audioMeta){var c=a,d=c.samples,e=void 0,f=-1,g=-1,i=this._audioMeta.refSampleDuration,k="mp3"===this._audioMeta.codec&&this._mp3UseMpegAudio,m=this._dtsBaseInited&&void 0===this._audioNextDts,p=!1;if(d&&0!==d.length&&(1!==d.length||b)){var q=0,r=null,s=0;k?(q=0,s=c.length):(q=8,s=8+c.length);var t=null;if(d.length>1&&(t=d.pop(),s-=t.length),null!=this._audioStashedLastSample){var u=this._audioStashedLastSample;this._audioStashedLastSample=null,d.unshift(u),s+=u.length}null!=t&&(this._audioStashedLastSample=t);var v=d[0].dts-this._dtsBase;if(this._audioNextDts)e=v-this._audioNextDts;else if(this._audioSegmentInfoList.isEmpty())e=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&"mp3"!==this._audioMeta.originalCodec&&(p=!0);else{var w=this._audioSegmentInfoList.getLastSampleBefore(v);if(null!=w){var x=v-(w.originalDts+w.duration);x<=3&&(x=0);var y=w.dts+w.duration+x;e=v-y}else e=0}if(p){var z=v-e,A=this._videoSegmentInfoList.getLastSegmentBefore(v);if(null!=A&&A.beginDts<z){var B=l.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);if(B){var C=A.beginDts,D=z-A.beginDts;h.default.v(this.TAG,"InsertPrefixSilentAudio: dts: "+C+", duration: "+D),d.unshift({unit:B,dts:C,pts:C}),s+=B.byteLength}}else p=!1}for(var E=[],F=0;F<d.length;F++){var G=d[F],H=G.unit,I=G.dts-this._dtsBase,J=I-e;-1===f&&(f=J);var K=0;if(F!==d.length-1)K=d[F+1].dts-this._dtsBase-e-J;else if(null!=t){var L=t.dts-this._dtsBase-e;K=L-J}else K=E.length>=1?E[E.length-1].duration:Math.floor(i);var M=!1,N=null;if(K>1.5*i&&"mp3"!==this._audioMeta.codec&&this._fillAudioTimestampGap&&!n.default.safari){M=!0;var O=Math.abs(K-i),P=Math.ceil(O/i),Q=J+i;h.default.w(this.TAG,"Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.\ndts: "+(J+K)+" ms, expected: "+(J+Math.round(i))+" ms, delta: "+Math.round(O)+" ms, generate: "+P+" frames");var R=l.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);null==R&&(h.default.w(this.TAG,"Unable to generate silent frame for "+this._audioMeta.originalCodec+" with "+this._audioMeta.channelCount+" channels, repeat last frame"),R=H),N=[];for(var S=0;S<P;S++){var T=Math.round(Q);if(N.length>0){var U=N[N.length-1];U.duration=T-U.dts}var V={dts:T,pts:T,cts:0,unit:R,size:R.byteLength,duration:0,originalDts:I,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};N.push(V),s+=H.byteLength,Q+=i}var W=N[N.length-1];W.duration=J+K-W.dts,K=Math.round(i)}E.push({dts:J,pts:J,cts:0,unit:G.unit,size:G.unit.byteLength,duration:K,originalDts:I,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),M&&E.push.apply(E,N)}k?r=new Uint8Array(s):(r=new Uint8Array(s),r[0]=s>>>24&255,r[1]=s>>>16&255,r[2]=s>>>8&255,r[3]=255&s,r.set(j.default.types.mdat,4));for(var X=0;X<E.length;X++){var Y=E[X].unit;r.set(Y,q),q+=Y.byteLength}var Z=E[E.length-1];g=Z.dts+Z.duration,this._audioNextDts=g;var $=new o.MediaSegmentInfo;$.beginDts=f,$.endDts=g,$.beginPts=f,$.endPts=g,$.originalBeginDts=E[0].originalDts,$.originalEndDts=Z.originalDts+Z.duration,$.firstSample=new o.SampleInfo(E[0].dts,E[0].pts,E[0].duration,E[0].originalDts,!1),$.lastSample=new o.SampleInfo(Z.dts,Z.pts,Z.duration,Z.originalDts,!1),this._isLive||this._audioSegmentInfoList.append($),c.samples=E,c.sequenceNumber++;var _=null;_=k?new Uint8Array:j.default.moof(c,f),c.samples=[],c.length=0;var aa={type:"audio",data:this._mergeBoxes(_,r).buffer,sampleCount:E.length,info:$};k&&m&&(aa.timestampOffset=f),this._onMediaSegment("audio",aa)}}}},{key:"_remuxVideo",value:function(a,b){if(null!=this._videoMeta){var c=a,d=c.samples,e=void 0,f=-1,g=-1,h=-1,i=-1;if(d&&0!==d.length&&(1!==d.length||b)){var k=8,l=null,m=8+a.length,n=null;if(d.length>1&&(n=d.pop(),m-=n.length),null!=this._videoStashedLastSample){var p=this._videoStashedLastSample;this._videoStashedLastSample=null,d.unshift(p),m+=p.length}null!=n&&(this._videoStashedLastSample=n);var q=d[0].dts-this._dtsBase;if(this._videoNextDts)e=q-this._videoNextDts;else if(this._videoSegmentInfoList.isEmpty())e=0;else{var r=this._videoSegmentInfoList.getLastSampleBefore(q);if(null!=r){var s=q-(r.originalDts+r.duration);s<=3&&(s=0);var t=r.dts+r.duration+s;e=q-t}else e=0}for(var u=new o.MediaSegmentInfo,v=[],w=0;w<d.length;w++){var x=d[w],y=x.dts-this._dtsBase,z=x.isKeyframe,A=y-e,B=x.cts,C=A+B;-1===f&&(f=A,h=C);var D=0;if(w!==d.length-1)D=d[w+1].dts-this._dtsBase-e-A;else if(null!=n){var E=n.dts-this._dtsBase-e;D=E-A}else D=v.length>=1?v[v.length-1].duration:Math.floor(this._videoMeta.refSampleDuration);if(z){var F=new o.SampleInfo(A,C,D,x.dts,!0);F.fileposition=x.fileposition,u.appendSyncPoint(F)}v.push({dts:A,pts:C,cts:B,units:x.units,size:x.length,isKeyframe:z,duration:D,originalDts:y,flags:{isLeading:0,dependsOn:z?2:1,isDependedOn:z?1:0,hasRedundancy:0,isNonSync:z?0:1}})}l=new Uint8Array(m),l[0]=m>>>24&255,l[1]=m>>>16&255,l[2]=m>>>8&255,l[3]=255&m,l.set(j.default.types.mdat,4);for(var G=0;G<v.length;G++)for(var H=v[G].units;H.length;){var I=H.shift(),J=I.data;l.set(J,k),k+=J.byteLength}var K=v[v.length-1];if(g=K.dts+K.duration,i=K.pts+K.duration,this._videoNextDts=g,u.beginDts=f,u.endDts=g,u.beginPts=h,u.endPts=i,u.originalBeginDts=v[0].originalDts,u.originalEndDts=K.originalDts+K.duration,u.firstSample=new o.SampleInfo(v[0].dts,v[0].pts,v[0].duration,v[0].originalDts,v[0].isKeyframe),u.lastSample=new o.SampleInfo(K.dts,K.pts,K.duration,K.originalDts,K.isKeyframe),this._isLive||this._videoSegmentInfoList.append(u),c.samples=v,c.sequenceNumber++,this._forceFirstIDR){var L=v[0].flags;L.dependsOn=2,L.isNonSync=0}var M=j.default.moof(c,f);c.samples=[],c.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(M,l).buffer,sampleCount:v.length,info:u})}}}},{key:"_mergeBoxes",value:function(a,b){var c=new Uint8Array(a.byteLength+b.byteLength);return c.set(a,0),c.set(b,a.byteLength),c}},{key:"onInitSegment",get:function(){return this._onInitSegment},set:function(a){this._onInitSegment=a}},{key:"onMediaSegment",get:function(){return this._onMediaSegment},set:function(a){this._onMediaSegment=a}}]),a}();c.default=q},{"../core/media-segment-info.js":8,"../utils/browser.js":39,"../utils/exception.js":40,"../utils/logger.js":41,"./aac-silent.js":36,"./mp4-generator.js":37}],39:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={};!function(){var a=self.navigator.userAgent.toLowerCase(),b=/(edge)\/([\w.]+)/.exec(a)||/(opr)[\/]([\w.]+)/.exec(a)||/(chrome)[ \/]([\w.]+)/.exec(a)||/(iemobile)[\/]([\w.]+)/.exec(a)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(a)||[],c=/(ipad)/.exec(a)||/(ipod)/.exec(a)||/(windows phone)/.exec(a)||/(iphone)/.exec(a)||/(kindle)/.exec(a)||/(android)/.exec(a)||/(windows)/.exec(a)||/(mac)/.exec(a)||/(linux)/.exec(a)||/(cros)/.exec(a)||[],e={browser:b[5]||b[3]||b[1]||"",version:b[2]||b[4]||"0",majorVersion:b[4]||b[2]||"0",platform:c[0]||""},f={};if(e.browser){f[e.browser]=!0;var g=e.majorVersion.split(".");f.version={major:parseInt(e.majorVersion,10),string:e.version},g.length>1&&(f.version.minor=parseInt(g[1],10)),g.length>2&&(f.version.build=parseInt(g[2],10))}e.platform&&(f[e.platform]=!0),(f.chrome||f.opr||f.safari)&&(f.webkit=!0),(f.rv||f.iemobile)&&(f.rv&&delete f.rv,e.browser="msie",f.msie=!0),f.edge&&(delete f.edge,e.browser="msedge",f.msedge=!0),f.opr&&(e.browser="opera",f.opera=!0),f.safari&&f.android&&(e.browser="android",f.android=!0),f.name=e.browser,f.platform=e.platform;for(var h in d)d.hasOwnProperty(h)&&delete d[h];Object.assign(d,f)}(),c.default=d},{}],40:[function(a,b,c){"use strict";function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c.RuntimeException=function(){function a(b){f(this,a),this._message=b}return g(a,[{key:"toString",value:function(){return this.name+": "+this.message}},{key:"name",get:function(){return"RuntimeException"}},{key:"message",get:function(){return this._message}}]),a}();c.IllegalStateException=function(a){function b(a){return f(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a))}return e(b,a),g(b,[{key:"name",get:function(){return"IllegalStateException"}}]),b}(h),c.InvalidArgumentException=function(a){function b(a){return f(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a))}return e(b,a),g(b,[{key:"name",get:function(){return"InvalidArgumentException"}}]),b}(h),c.NotImplementedException=function(a){function b(a){return f(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a))}return e(b,a),g(b,[{key:"name",get:function(){return"NotImplementedException"}}]),b}(h)},{}],41:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("events"),g=function(a){return a&&a.__esModule?a:{default:a}}(f),h=function(){function a(){d(this,a)}return e(a,null,[{key:"e",value:function(b,c){b&&!a.FORCE_GLOBAL_TAG||(b=a.GLOBAL_TAG);var d="["+b+"] > "+c;a.ENABLE_CALLBACK&&a.emitter.emit("log","error",d),a.ENABLE_ERROR&&(console.error?void 0:(console.warn,void 0))}},{key:"i",value:function(b,c){b&&!a.FORCE_GLOBAL_TAG||(b=a.GLOBAL_TAG);var d="["+b+"] > "+c;a.ENABLE_CALLBACK&&a.emitter.emit("log","info",d),a.ENABLE_INFO&&(console.info,void 0)}},{key:"w",value:function(b,c){b&&!a.FORCE_GLOBAL_TAG||(b=a.GLOBAL_TAG);var d="["+b+"] > "+c;a.ENABLE_CALLBACK&&a.emitter.emit("log","warn",d),a.ENABLE_WARN&&(console.warn,void 0)}},{key:"d",value:function(b,c){b&&!a.FORCE_GLOBAL_TAG||(b=a.GLOBAL_TAG);var d="["+b+"] > "+c;a.ENABLE_CALLBACK&&a.emitter.emit("log","debug",d),a.ENABLE_DEBUG&&(console.debug,void 0)}},{key:"v",value:function(b,c){b&&!a.FORCE_GLOBAL_TAG||(b=a.GLOBAL_TAG);var d="["+b+"] > "+c;a.ENABLE_CALLBACK&&a.emitter.emit("log","verbose",d),a.ENABLE_VERBOSE&&void 0}}]),a}();h.GLOBAL_TAG="flv.js",h.FORCE_GLOBAL_TAG=!1,h.ENABLE_ERROR=!0,h.ENABLE_INFO=!0,h.ENABLE_WARN=!0,h.ENABLE_DEBUG=!0,h.ENABLE_VERBOSE=!0,h.ENABLE_CALLBACK=!1,h.emitter=new g.default,c.default=h},{events:2}],42:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("events"),h=d(g),i=a("./logger.js"),j=d(i),k=function(){function a(){e(this,a)}return f(a,null,[{key:"getConfig",value:function(){return{globalTag:j.default.GLOBAL_TAG,forceGlobalTag:j.default.FORCE_GLOBAL_TAG,enableVerbose:j.default.ENABLE_VERBOSE,enableDebug:j.default.ENABLE_DEBUG,enableInfo:j.default.ENABLE_INFO,enableWarn:j.default.ENABLE_WARN,enableError:j.default.ENABLE_ERROR,enableCallback:j.default.ENABLE_CALLBACK}}},{key:"applyConfig",value:function(a){j.default.GLOBAL_TAG=a.globalTag,j.default.FORCE_GLOBAL_TAG=a.forceGlobalTag,j.default.ENABLE_VERBOSE=a.enableVerbose,j.default.ENABLE_DEBUG=a.enableDebug,j.default.ENABLE_INFO=a.enableInfo,j.default.ENABLE_WARN=a.enableWarn,j.default.ENABLE_ERROR=a.enableError,j.default.ENABLE_CALLBACK=a.enableCallback}},{key:"_notifyChange",value:function(){var b=a.emitter;if(b.listenerCount("change")>0){var c=a.getConfig();b.emit("change",c)}}},{key:"registerListener",value:function(b){a.emitter.addListener("change",b)}},{key:"removeListener",value:function(b){a.emitter.removeListener("change",b)}},{key:"addLogListener",value:function(b){j.default.emitter.addListener("log",b),j.default.emitter.listenerCount("log")>0&&(j.default.ENABLE_CALLBACK=!0,a._notifyChange())}},{key:"removeLogListener",value:function(b){j.default.emitter.removeListener("log",b),0===j.default.emitter.listenerCount("log")&&(j.default.ENABLE_CALLBACK=!1,a._notifyChange())}},{key:"forceGlobalTag",get:function(){return j.default.FORCE_GLOBAL_TAG},set:function(b){j.default.FORCE_GLOBAL_TAG=b,a._notifyChange()}},{key:"globalTag",get:function(){return j.default.GLOBAL_TAG},set:function(b){j.default.GLOBAL_TAG=b,a._notifyChange()}},{key:"enableAll",get:function(){return j.default.ENABLE_VERBOSE&&j.default.ENABLE_DEBUG&&j.default.ENABLE_INFO&&j.default.ENABLE_WARN&&j.default.ENABLE_ERROR},set:function(b){j.default.ENABLE_VERBOSE=b,j.default.ENABLE_DEBUG=b,j.default.ENABLE_INFO=b,j.default.ENABLE_WARN=b,j.default.ENABLE_ERROR=b,a._notifyChange()}},{key:"enableDebug",get:function(){return j.default.ENABLE_DEBUG},set:function(b){j.default.ENABLE_DEBUG=b,a._notifyChange()}},{key:"enableVerbose",get:function(){return j.default.ENABLE_VERBOSE},set:function(b){j.default.ENABLE_VERBOSE=b,a._notifyChange()}},{key:"enableInfo",get:function(){
return j.default.ENABLE_INFO},set:function(b){j.default.ENABLE_INFO=b,a._notifyChange()}},{key:"enableWarn",get:function(){return j.default.ENABLE_WARN},set:function(b){j.default.ENABLE_WARN=b,a._notifyChange()}},{key:"enableError",get:function(){return j.default.ENABLE_ERROR},set:function(b){j.default.ENABLE_ERROR=b,a._notifyChange()}}]),a}();k.emitter=new h.default,c.default=k},{"./logger.js":41,events:2}],43:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function b(){d(this,b)}return e(b,null,[{key:"install",value:function(){Object.setPrototypeOf=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},Object.assign=Object.assign||function(a){if(void 0===a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var d=arguments[c];if(void 0!==d&&null!==d)for(var e in d)d.hasOwnProperty(e)&&(b[e]=d[e])}return b},"function"!=typeof self.Promise&&a("es6-promise").polyfill()}}]),b}();f.install(),c.default=f},{"es6-promise":1}],44:[function(a,b,c){"use strict";function d(a,b,c){var d=a;if(b+c<d.length){for(;c--;)if(128!=(192&d[++b]))return!1;return!0}return!1}function e(a){for(var b=[],c=a,e=0,f=a.length;e<f;)if(c[e]<128)b.push(String.fromCharCode(c[e])),++e;else{if(c[e]<192);else if(c[e]<224){if(d(c,e,1)){var g=(31&c[e])<<6|63&c[e+1];if(g>=128){b.push(String.fromCharCode(65535&g)),e+=2;continue}}}else if(c[e]<240){if(d(c,e,2)){var h=(15&c[e])<<12|(63&c[e+1])<<6|63&c[e+2];if(h>=2048&&55296!=(63488&h)){b.push(String.fromCharCode(65535&h)),e+=3;continue}}}else if(c[e]<248&&d(c,e,3)){var i=(7&c[e])<<18|(63&c[e+1])<<12|(63&c[e+2])<<6|63&c[e+3];if(i>65536&&i<1114112){i-=65536,b.push(String.fromCharCode(i>>>10|55296)),b.push(String.fromCharCode(1023&i|56320)),e+=4;continue}}b.push(String.fromCharCode(65533)),++e}return b.join("")}Object.defineProperty(c,"__esModule",{value:!0}),c.default=e},{}]},{},[21])(21)}),function(){var define=void 0;!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b(require("videojs"),require("react"),require("react-dom"),require("Hls"),require("SecureKey"),require("flvjs")):"function"==typeof define&&define.amd?define(["videojs","react","react-dom","Hls","SecureKey","flvjs"],b):a.ThanhNienPlayer=b(a.videojs,a.React,a.ReactDOM,a.Hls,a["aes-wasm"],a.flvjs)}(this,function(videojs,React,ReactDOM,Hls,SecureKey,flvjs){"use strict";function unwrapExports(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function createCommonjsModule(a,b){return b={exports:{}},a(b,b.exports),b.exports}function make_assign(){return Object.assign?Object.assign:function(a,b,c,d){for(var e=1;e<arguments.length;e++)each$1(Object(arguments[e]),function(b,c){a[c]=b});return a}}function make_create(){function a(){}return Object.create?function(a,b,c,d){var e=slice$1(arguments,1);return assign.apply(this,[Object.create(a)].concat(e))}:function(b,c,d,e){var f=slice$1(arguments,1);return a.prototype=b,assign.apply(this,[new a].concat(f))}}function make_trim(){return String.prototype.trim?function(a){return String.prototype.trim.call(a)}:function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}function bind$1(a,b){return function(){return b.apply(a,Array.prototype.slice.call(arguments,0))}}function slice$1(a,b){return Array.prototype.slice.call(a,b||0)}function each$1(a,b){pluck$1(a,function(a,c){return b(a,c),!1})}function map(a,b){var c=isList$1(a)?[]:{};return pluck$1(a,function(a,d){return c[d]=b(a,d),!1}),c}function pluck$1(a,b){if(isList$1(a)){for(var c=0;c<a.length;c++)if(b(a[c],c))return a[c]}else for(var d in a)if(a.hasOwnProperty(d)&&b(a[d],d))return a[d]}function isList$1(a){return null!=a&&"function"!=typeof a&&"number"==typeof a.length}function isFunction$1(a){return a&&"[object Function]"==={}.toString.call(a)}function isObject$1(a){return a&&"[object Object]"==={}.toString.call(a)}function _warn(){var a="undefined"==typeof console?null:console;if(a){var b=a.warn?a.warn:a.log;b.apply(a,arguments)}}function createStore(a,b,c){c||(c=""),a&&!isList(a)&&(a=[a]),b&&!isList(b)&&(b=[b]);var d=c?"__storejs_"+c+"_":"",e=c?new RegExp("^"+d):null,f=/^[a-zA-Z0-9_\-]*$/;if(!f.test(c))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var g={_namespacePrefix:d,_namespaceRegexp:e,_testStorage:function(a){try{var b="__storejs__test__";a.write(b,b);var c=a.read(b)===b;return a.remove(b),c}catch(a){return!1}},_assignPluginFnProp:function(a,b){var c=this[b];this[b]=function(){function b(){if(c)return each(arguments,function(a,b){d[b]=a}),c.apply(e,d)}var d=slice(arguments,0),e=this,f=[b].concat(d);return a.apply(e,f)}},_serialize:function(a){return JSON.stringify(a)},_deserialize:function(a,b){if(!a)return b;var c="";try{c=JSON.parse(a)}catch(b){c=a}return void 0!==c?c:b},_addStorage:function(a){this.enabled||this._testStorage(a)&&(this.storage=a,this.enabled=!0)},_addPlugin:function(a){var b=this;if(isList(a))return void each(a,function(a){b._addPlugin(a)});var c=pluck(this.plugins,function(b){return a===b});if(!c){if(this.plugins.push(a),!isFunction(a))throw new Error("Plugins must be function values that return objects");var d=a.call(this);if(!isObject(d))throw new Error("Plugins must return an object of function properties");each(d,function(c,d){if(!isFunction(c))throw new Error("Bad plugin property: "+d+" from plugin "+a.name+". Plugins should only return functions.");b._assignPluginFnProp(c,d)})}},addStorage:function(a){_warn("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(a)}},h=create(g,storeAPI,{plugins:[]});return h.raw={},each(h,function(a,b){isFunction(a)&&(h.raw[b]=bind(h,a))}),each(a,function(a){h._addStorage(a)}),each(b,function(a){h._addPlugin(a)}),h}function localStorage(){return Global$1.localStorage}function read(a){return localStorage().getItem(a)}function write(a,b){return localStorage().setItem(a,b)}function each$2(a){for(var b=localStorage().length-1;b>=0;b--){var c=localStorage().key(b);a(read(c),c)}}function remove(a){return localStorage().removeItem(a)}function clearAll(){return localStorage().clear()}function read$1(a){return globalStorage[a]}function write$1(a,b){globalStorage[a]=b}function each$3(a){for(var b=globalStorage.length-1;b>=0;b--){var c=globalStorage.key(b);a(globalStorage[c],c)}}function remove$1(a){return globalStorage.removeItem(a)}function clearAll$1(){each$3(function(a,b){delete globalStorage[a]})}function write$2(a,b){if(!disable){var c=fixKey(a);_withStorageEl(function(a){a.setAttribute(c,b),a.save(storageName)})}}function read$2(a){if(!disable){var b=fixKey(a),c=null;return _withStorageEl(function(a){c=a.getAttribute(b)}),c}}function each$4(a){_withStorageEl(function(b){for(var c=b.XMLDocument.documentElement.attributes,d=c.length-1;d>=0;d--){var e=c[d];a(b.getAttribute(e.name),e.name)}})}function remove$2(a){var b=fixKey(a);_withStorageEl(function(a){a.removeAttribute(b),a.save(storageName)})}function clearAll$2(){_withStorageEl(function(a){var b=a.XMLDocument.documentElement.attributes;a.load(storageName);for(var c=b.length-1;c>=0;c--)a.removeAttribute(b[c].name);a.save(storageName)})}function fixKey(a){return a.replace(/^\d/,"___$&").replace(forbiddenCharsRegex,"___")}function _makeIEStorageElFunction(){if(!doc||!doc.documentElement||!doc.documentElement.addBehavior)return null;var a,b,c,d="script";try{b=new ActiveXObject("htmlfile"),b.open(),b.write("<"+d+">document.w=window</"+d+'><iframe src="/favicon.ico"></iframe>'),b.close(),a=b.w.frames[0].document,c=a.createElement("div")}catch(b){c=doc.createElement("div"),a=doc.body}return function(b){var d=[].slice.call(arguments,0);d.unshift(c),a.appendChild(c),c.addBehavior("#default#userData"),c.load(storageName),b.apply(this,d),a.removeChild(c)}}function read$3(a){if(!a||!_has(a))return null;var b="(?:^|.*;\\s*)"+escape(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(doc$1.cookie.replace(new RegExp(b),"$1"))}function each$5(a){for(var b=doc$1.cookie.split(/; ?/g),c=b.length-1;c>=0;c--)if(trim$1(b[c])){var d=b[c].split("="),e=unescape(d[0]),f=unescape(d[1]);a(f,e)}}function write$3(a,b){a&&(doc$1.cookie=escape(a)+"="+escape(b)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/")}function remove$3(a){a&&_has(a)&&(doc$1.cookie=escape(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function clearAll$3(){each$5(function(a,b){remove$3(b)})}function _has(a){return new RegExp("(?:^|;\\s*)"+escape(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(doc$1.cookie)}function sessionStorage(){return Global$5.sessionStorage}function read$4(a){return sessionStorage().getItem(a)}function write$4(a,b){return sessionStorage().setItem(a,b)}function each$6(a){for(var b=sessionStorage().length-1;b>=0;b--){var c=sessionStorage().key(b);a(read$4(c),c)}}function remove$4(a){return sessionStorage().removeItem(a)}function clearAll$4(){return sessionStorage().clear()}function read$5(a){return memoryStorage[a]}function write$5(a,b){memoryStorage[a]=b}function each$7(a){for(var b in memoryStorage)memoryStorage.hasOwnProperty(b)&&a(memoryStorage[b],b)}function remove$5(a){delete memoryStorage[a]}function clearAll$5(a){memoryStorage={}}function json2Plugin(){return{}}function toHex(a){return a<16?"0"+a.toString(16):a.toString(16)}function stringToArrayBuffer(a,b){return/^data:/i.test(a)?decode(a):"utf8"===b?str2ab(a):(isBase64(a)&&(a=atobBrowser(a)),str2ab(a))}function str2ab(a){for(var b=new Uint8Array(a.length),c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return b.buffer}function decode(a){a=a.replace(/\r?\n/g,"");var b=a.indexOf(",");if(-1===b||b<=4)throw new TypeError("malformed data-URI");for(var c=a.substring(5,b).split(";"),d=!1,e="US-ASCII",f=0;f<c.length;f++)"base64"==c[f]?d=!0:0==c[f].indexOf("charset=")&&(e=c[f].substring(8));var g=unescape(a.substring(b+1));d&&(g=atobBrowser(g));var h=str2ab(g);return h.type=c[0]||"text/plain",h.charset=e,h}function haveQuery(a){var b=/[?&]([^=#]+)=([^&#]*)/g,c=b.exec(a);return!!c}function detectiveAgents(){var a=/Chrome/i.test(navigator.userAgent),b=/MSIE/i.test(navigator.userAgent),c=/Edge/i.test(navigator.userAgent),d=/Firefox/i.test(navigator.userAgent),e=/Safari/i.test(navigator.userAgent),f=/op/i.test(navigator.userAgent);return a&&e&&(e=!1),a&&f&&(a=!1),{isMobile:mobileAndTabletcheck(),isIEMobile:/IEMobile/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isiPad:/iPad/i.test(navigator.userAgent)||/Macintosh/i.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>1,isIOS:/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||/Macintosh/i.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>1,isIE:b,isFireFox:d,isChrome:a,isSafari:e,isSony:/(Xperia| (C|D|E)\d{4}|CMD|SO|SGP|Z3)(.*?)Build/i.test(navigator.userAgent),isWebKit:/AppleWebKit/i.test(navigator.userAgent),isEdge:c,isLinux:/Linux/i.test(navigator.userAgent),version:version()}}function version(){var a,b=navigator.userAgent,c=b.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(c[1])?(a=/\brv[ :]+(\d+)/g.exec(b)||[],"IE "+(a[1]||"")):"Chrome"===c[1]&&(a=b.match(/\b(OPR|Edge)\/(\d+)/),null!=a)?a.slice(1).join(" ").replace("OPR","Opera"):(c=c[2]?[c[1],c[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(a=b.match(/version\/(\d+)/i))&&c.splice(1,1,a[1]),c[1])}function mobileAndTabletcheck(){var a=!1;return function(b){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(a=!0)}(navigator.userAgent||navigator.vendor||window.opera),a}function unPadding(a){var b=[];for(var c in a)a[c]>32&&a[c]<128&&b.push(a[c]);return new Uint8Array(b)}function isEncoded(a){return decodeURIComponent(a)!==a}function parserQuerry(){for(var a=/[?&]([^=#]+)=([^&#]*)/g,b=location.href,c=a.exec(b);c;){var d=c[2];if("string"==typeof d&&isEncoded(d)&&(d=decodeURIComponent(d)),"false"===d)d=!1;else if("true"===d)d=!0;else if("undefined"===d)continue;query$1[c[1]]=d,info[c[1]]=c[2],c=a.exec(b)}query$1.mp4=query$1.mp4||query$1.file;try{var e=document.location.href||document.referrer,f=query$1.urlParent||e.replace(/(http(s?)):\/\//,"");query$1.domain=(f.match(/(.*?)(\/.*)/)||[])[1]||"",query$1.pathname=(f.match(/(.*?)(\/.*)/)||[])[2]||"",info.domain=query$1.domain,info.pathname=query$1.pathname}catch(a){}}function isSupportShadowDom(){return!(!document.head.createShadowRoot&&!document.head.attachShadow)}function initShadowDom(a,b,c){var d=document.querySelector("#"+b),e=d.shadowRoot;if(document.getElementsByClassName(a+"ShadowDomCss")&&!e.getElementById(a+"ShadowDomCss"))for(var f=0;f<document.getElementsByClassName(a+"ShadowDomCss").length;f++){var g=document.createElement("link");g.href=document.getElementsByClassName(a+"ShadowDomCss")[f].href,g.type="text/css",g.rel="stylesheet",g.id=a+"ShadowDomCss",e.appendChild(g)}window.playerShadowRoot[""+c]=e}function retargetEvents(a){var b=[];return reactEvents.forEach(function(c){function d(b){for(var d=b.path||b.composedPath&&b.composedPath()||composedPath(b.target),e=0;e<d.length;e++){var f=d[e],g=findReactComponent(f),h=findReactProps(g);if(g&&h&&dispatchEvent(b,c,h),g&&h&&mimickedReactEvents[c]&&dispatchEvent(b,mimickedReactEvents[c],h),b.cancelBubble)break;if(f===a)break}}var e=getNativeEventName(c);a.addEventListener(e,d,!1),b.push(function(){a.removeEventListener(e,d,!1)})}),function(){b.forEach(function(a){a()})}}function findReactComponent(a){for(var b in a)if(a.hasOwnProperty(b)&&b.indexOf("_reactInternal")!==-1)return a[b]}function findReactProps(a){if(a)return a.memoizedProps?a.memoizedProps:a._currentElement&&a._currentElement.props?a._currentElement.props:void 0}function dispatchEvent(a,b,c){a.persist=function(){a.isPersistent=function(){return!0}},c[b]&&c[b](a)}function getNativeEventName(a){return divergentNativeEvents[a]?divergentNativeEvents[a]:a.replace(/^on/,"").toLowerCase()}function composedPath(a){for(var b=[];a;){if(b.push(a),"HTML"===a.tagName)return b.push(document),b.push(window),b;a=a.parentElement}}function handleClick(){document.removeEventListener("click",handleClick),userActive=!0}function checkReferrer(){if(document.referrer&&window.top===window){var a=document.referrer.split("/")[2];a.indexOf(document.location.hostname)===-1&&document.location.hostname.indexOf(a)===-1||(isReferrer=!0)}}function makeEmptyFunction(a){return function(){return a}}function invariant(a,b,c,d,e,f,g,h){if(!a){var i;if(void 0===b)i=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var j=[c,d,e,f,g,h],k=0;i=new Error(b.replace(/%s/g,function(){return j[k++]})),i.name="Invariant Violation"}throw i.framesToPop=1,i}}function _applyDecoratedDescriptor(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function _applyDecoratedDescriptor$1(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function noop(){}function jsonp(a,b,c){function d(){f.parentNode&&f.parentNode.removeChild(f),window[i]=noop,g&&clearTimeout(g)}function e(){window[i]&&d()}"function"==typeof b&&(c=b,b={}),b||(b={});var f,g,h=b.prefix||"__jp",i=b.name||h+count++,j=b.param||"callback",k=null!=b.timeout?b.timeout:6e4,l=encodeURIComponent,m=document.getElementsByTagName("script")[0]||document.head;return k&&(g=setTimeout(function(){d(),c&&c(new Error("Timeout"))},k)),window[i]=function(a){d(),c&&c(null,a)},a+=(~a.indexOf("?")?"&":"?")+j+"="+l(i),a=a.replace("?&","?"),f=document.createElement("script"),f.src=a,m.parentNode.insertBefore(f,m),e}function encryptKey(){return Promise.reject()}function stripQueryStringAndHashFromPath(a){return a.split("?")[0].split("#")[0]}function hexToBase64(a){return btoa(a.match(/\w{2}/g).map(function(a){return String.fromCharCode(parseInt(a,16))}).join(""))}function getSecureExpire(a){return new Promise(function(b){a=stripQueryStringAndHashFromPath(a);var c=7200,d=Math.floor(Date.now()/1e3)+c,e=void 0,f=a.match(/(http[s]?:\/\/)?([^\/\s]+)(\/.*)/);f&&f.length&&a&&(e=f[3]);var g=d.toString()+"|"+e;encryptKey(g).then(function(a){var c=hexToBase64(a);c=c.replace(/\+/g,"-").replace(/\//g,"_"),b("e="+d+"&s="+c)}).catch(function(){b("")})})}function _applyDecoratedDescriptor$2(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function reverse(a){for(var b="",c=a.length-1;c>=0;c--)b+=a[c];return b}function isObject$2(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function isFunction$2(a){return isObject_1(a)&&objToString.call(a)==funcTag}function isObjectLike(a){return!!a&&"object"==typeof a}function isNative(a){return null!=a&&(isFunction_1(a)?reIsNative.test(fnToString.call(a)):isObjectLike_1(a)&&(isHostObject_1(a)?reIsNative:reIsHostCtor).test(a))}function getNative(a,b){var c=null==a?void 0:a[b];return isNative_1(c)?c:void 0}function debounce(a,b,c){function d(){n&&clearTimeout(n),j&&clearTimeout(j),p=0,j=n=o=void 0}function e(b,c){c&&clearTimeout(c),j=n=o=void 0,b&&(p=now_1(),k=a.apply(m,i),n||j||(i=m=void 0))}function f(){var a=b-(now_1()-l);a<=0||a>b?e(o,j):n=setTimeout(f,a)}function g(){e(r,n)}function h(){if(i=arguments,l=now_1(),m=this,o=r&&(n||!s),q===!1)var c=s&&!n;else{j||s||(p=l);var d=q-(l-p),e=d<=0||d>q;e?(j&&(j=clearTimeout(j)),p=l,k=a.apply(m,i)):j||(j=setTimeout(g,d))}return e&&n?n=clearTimeout(n):n||b===q||(n=setTimeout(f,b)),c&&(e=!0,k=a.apply(m,i)),!e||n||j||(i=m=void 0),k}var i,j,k,l,m,n,o,p=0,q=!1,r=!0;if("function"!=typeof a)throw new TypeError(FUNC_ERROR_TEXT$1);if(b=b<0?0:+b||0,c===!0){var s=!0;r=!1}else isObject_1(c)&&(s=!!c.leading,q="maxWait"in c&&nativeMax(+c.maxWait||0,b),r="trailing"in c?!!c.trailing:r);return h.cancel=d,h}function throttle(a,b,c){var d=!0,e=!0;if("function"!=typeof a)throw new TypeError(FUNC_ERROR_TEXT);return c===!1?d=!1:isObject_1(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e),debounce_1(a,b,{leading:d,maxWait:+b,trailing:e})}function toTitleCase(a){return a.charAt(0).toUpperCase()+a.slice(1)}function is(a,b){return a===b?0!==a||0!==b||1/a===1/b:a!==a&&b!==b}function shallowEqual(a,b){if(is(a,b))return!0;if("object"!=typeof a||null===a||"object"!=typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(var e=0;e<c.length;e++)if(!hasOwnProperty$1.call(b,c[e])||!is(a[c[e]],b[c[e]]))return!1;return!0}function shouldComponentUpdate(a,b){return!shallowEqual_1(this.props,a)||!shallowEqual_1(this.state,b)}function pureRenderDecorator(a){return a.prototype.shouldComponentUpdate=shouldComponentUpdate,a}function _applyDecoratedDescriptor$4(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function _applyDecoratedDescriptor$6(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function formatTime(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;a=a<0?0:a;var c=Math.floor(a%60),d=Math.floor(a/60%60),e=Math.floor(a/3600),f=Math.floor(b/60%60),g=Math.floor(b/3600);return(isNaN(a)||a===1/0)&&(e=d=c="-"),e=e>0||g>0?e+":":"",d=((e||f>=10)&&d<10?"0"+d:d)+":",c=c<10?"0"+c:c,e+d+c}function _applyDecoratedDescriptor$7(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function _applyDecoratedDescriptor$8(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function _applyDecoratedDescriptor$9(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function _applyDecoratedDescriptor$11(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function getPointerPosition(a,b){var c={},d=findElPosition(a),e=a.offsetWidth,f=a.offsetHeight,g=d.top,h=d.left,i=b.pageY,j=b.pageX;return b.changedTouches&&(j=b.changedTouches[0].pageX,i=b.changedTouches[0].pageY),c.y=Math.max(0,Math.min(1,(g-i+f)/f)),c.x=Math.max(0,Math.min(1,(j-h)/e)),c}function findElPosition(a){var b=void 0;if(a.getBoundingClientRect&&a.parentNode&&(b=a.getBoundingClientRect()),!b)return{left:0,top:0};var c=document.documentElement,d=document.body,e=c.clientLeft||d.clientLeft||0,f=window.pageXOffset||d.scrollLeft,g=b.left+f-e,h=c.clientTop||d.clientTop||0,i=window.pageYOffset||d.scrollTop,j=b.top+i-h;return{left:Math.round(g),top:Math.round(j)}}function _applyDecoratedDescriptor$12(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function _applyDecoratedDescriptor$10(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function _applyDecoratedDescriptor$14(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function _applyDecoratedDescriptor$15(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function _applyDecoratedDescriptor$13(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function _applyDecoratedDescriptor$16(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function _applyDecoratedDescriptor$17(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function _applyDecoratedDescriptor$18(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function _applyDecoratedDescriptor$20(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function _applyDecoratedDescriptor$21(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function _applyDecoratedDescriptor$19(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function _applyDecoratedDescriptor$5(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function _applyDecoratedDescriptor$22(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function _applyDecoratedDescriptor$23(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function _applyDecoratedDescriptor$24(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,
f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function _applyDecoratedDescriptor$26(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function _applyDecoratedDescriptor$25(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function _applyDecoratedDescriptor$27(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function _applyDecoratedDescriptor$3(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function _applyDecoratedDescriptor$28(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function withAd(a){var b;return b=function(b){function c(a){classCallCheck(this,c);var b=possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,a));return b.state={adSystem:null,ad:!1},b}return inherits(c,b),createClass(c,[{key:"componentDidMount",value:function(){var a=this.props.player;a.on(event$1.AD_START,this._handleAdStart),a.on(event$1.AD_END,this._handleAdEnd),a.on(event$1.VAST_AD_START,this._handleVastStart),a.on(event$1.VPAID_AD_START,this._handleVpaidStart),a.on(event$1.IMA_AD_START,this._handleImaStart)}},{key:"_handleAdStart",value:function(){this.setState({ad:!0})}},{key:"_handleAdEnd",value:function(){var a=this.props.player;a.adSystem=null,this.setState({adSystem:null,ad:!1})}},{key:"_handleVastStart",value:function(){var a=this.props.player;a.adSystem="vast",this.setState({adSystem:"vast"})}},{key:"_handleVpaidStart",value:function(){var a=this.props.player;a.adSystem="vpaid",this.setState({adSystem:"vpaid"})}},{key:"_handleImaStart",value:function(){var a=this.props.player;a.adSystem="ima",this.setState({adSystem:"ima"})}},{key:"componentWillUnmount",value:function(){var a=this.props.player;a.off(event$1.AD_START,this._handleAdStart),a.off(event$1.AD_END,this._handleAdEnd),a.on(event$1.VAST_AD_START,this._handleVastStart),a.off(event$1.VPAID_AD_START,this._handleVpaidStart)}},{key:"className",value:function(){var a=this.state,b=a.ad,c=a.adSystem,d=[];return b&&d.push("ad"),c&&d.push("ad-"+c),d.join(" ")}},{key:"render",value:function(){var b=this.state.adSystem,c=this.className();return React__default.createElement(a,_extends({},this.props,{adSystem:b,className:c}))}}]),c}(React.Component),_applyDecoratedDescriptor$28(b.prototype,"_handleAdStart",[autobind],Object.getOwnPropertyDescriptor(b.prototype,"_handleAdStart"),b.prototype),_applyDecoratedDescriptor$28(b.prototype,"_handleAdEnd",[autobind],Object.getOwnPropertyDescriptor(b.prototype,"_handleAdEnd"),b.prototype),_applyDecoratedDescriptor$28(b.prototype,"_handleVastStart",[autobind],Object.getOwnPropertyDescriptor(b.prototype,"_handleVastStart"),b.prototype),_applyDecoratedDescriptor$28(b.prototype,"_handleVpaidStart",[autobind],Object.getOwnPropertyDescriptor(b.prototype,"_handleVpaidStart"),b.prototype),_applyDecoratedDescriptor$28(b.prototype,"_handleImaStart",[autobind],Object.getOwnPropertyDescriptor(b.prototype,"_handleImaStart"),b.prototype),b}function vcplayer(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},d="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)}),e=b.params||{};for(var f in e)"true"===e[f]&&(e[f]=!0),"false"===e[f]&&(e[f]=!1);!query$1.autoplay&&!e.autoplay||isUserActive()||(e.muted=!0),b=videojs.mergeOptions(options_default,b,{params:_extends({},query$1,e,{pid:d})});var g=agent.isMobile,h=agent.isFireFox;g&&(b.autoplay=!1,b.params.autoplay=!1),h&&(b.params.muted=!0,b.params.mute=!0),b.params.idShadowDom&&isSupportShadowDom()&&initShadowDom(playername,b.params.idShadowDom,a);var i=videojs(a,b,c);return g?i.addClass(playername+"-mobile"):i.addClass(playername+"-pc"),b.params.nonFullWidth||(i.addClass(playername+"-full-width"),"VinFastPlayer"===playername&&setTimeout(function(){var a=i.width_,b=i.height_;b=i.el_.clientWidth/a*b,i.height(b)},0),"AudioPlayer"===playername&&i.height("30px")),(b.params["embed-iframe"]||b.params.embedIframe)&&i.addClass("embed-iframe"),i.addClass(playername),i.addClass("default-skin"),e.audio&&i.addClass(playername+"-audio"),i.removeClass("hidden"),i.trigger(event$1.PLAYER_READY),b.params.idShadowDom&&isSupportShadowDom()&&retargetEvents(i.el_),i}videojs=videojs&&videojs.hasOwnProperty("default")?videojs.default:videojs;var React__default="default"in React?React.default:React;ReactDOM=ReactDOM&&ReactDOM.hasOwnProperty("default")?ReactDOM.default:ReactDOM,Hls=Hls&&Hls.hasOwnProperty("default")?Hls.default:Hls,SecureKey=SecureKey&&SecureKey.hasOwnProperty("default")?SecureKey.default:SecureKey,flvjs=flvjs&&flvjs.hasOwnProperty("default")?flvjs.default:flvjs;var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},assign=make_assign(),create$1=make_create(),trim=make_trim(),Global="undefined"!=typeof window?window:commonjsGlobal,util={assign:assign,create:create$1,trim:trim,bind:bind$1,slice:slice$1,each:each$1,map:map,pluck:pluck$1,isList:isList$1,isFunction:isFunction$1,isObject:isObject$1,Global:Global},slice=util.slice,pluck=util.pluck,each=util.each,bind=util.bind,create=util.create,isList=util.isList,isFunction=util.isFunction,isObject=util.isObject,storeEngine={createStore:createStore},storeAPI={version:"2.0.12",enabled:!1,get:function(a,b){var c=this.storage.read(this._namespacePrefix+a);return this._deserialize(c,b)},set:function(a,b){return void 0===b?this.remove(a):(this.storage.write(this._namespacePrefix+a,this._serialize(b)),b)},remove:function(a){this.storage.remove(this._namespacePrefix+a)},each:function(a){var b=this;this.storage.each(function(c,d){a.call(b,b._deserialize(c),(d||"").replace(b._namespaceRegexp,""))})},clearAll:function(){this.storage.clearAll()},hasNamespace:function(a){return this._namespacePrefix=="__storejs_"+a+"_"},createStore:function(){return createStore.apply(this,arguments)},addPlugin:function(a){this._addPlugin(a)},namespace:function(a){return createStore(this.storage,this.plugins,a)}},Global$1=util.Global,localStorage_1={name:"localStorage",read:read,write:write,each:each$2,remove:remove,clearAll:clearAll},Global$2=util.Global,oldFFGlobalStorage={name:"oldFF-globalStorage",read:read$1,write:write$1,each:each$3,remove:remove$1,clearAll:clearAll$1},globalStorage=Global$2.globalStorage,Global$3=util.Global,oldIEUserDataStorage={name:"oldIE-userDataStorage",write:write$2,read:read$2,each:each$4,remove:remove$2,clearAll:clearAll$2},storageName="storejs",doc=Global$3.document,_withStorageEl=_makeIEStorageElFunction(),disable=(Global$3.navigator?Global$3.navigator.userAgent:"").match(/ (MSIE 8|MSIE 9|MSIE 10)\./),forbiddenCharsRegex=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),Global$4=util.Global,trim$1=util.trim,cookieStorage={name:"cookieStorage",read:read$3,write:write$3,each:each$5,remove:remove$3,clearAll:clearAll$3},doc$1=Global$4.document,Global$5=util.Global,sessionStorage_1={name:"sessionStorage",read:read$4,write:write$4,each:each$6,remove:remove$4,clearAll:clearAll$4},memoryStorage_1={name:"memoryStorage",read:read$5,write:write$5,each:each$7,remove:remove$5,clearAll:clearAll$5},memoryStorage={},all=[localStorage_1,oldFFGlobalStorage,oldIEUserDataStorage,cookieStorage,sessionStorage_1,memoryStorage_1];"object"!=typeof JSON&&(JSON={}),function(){function f(a){return a<10?"0"+a:a}function this_value(){return this.valueOf()}function quote(a){return rx_escapable.lastIndex=0,rx_escapable.test(a)?'"'+a.replace(rx_escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;c<f;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;c<f;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;d<c;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var json2=json2Plugin,plugins=[json2],store_legacy=storeEngine.createStore(all,plugins),event={UPDATE_MEDIA_INFO:"updatemediainfo",UPDATE_VIDEO_SOURCE:"updatevideosource",FILL_PLAY_FILLING:"filling",FILL_PLAY_COMPLETE:"fillcomplete"},event$1={USER_SEEK:"user:seek",USER_CHANGE_VOLUME:"user:changevolume",USER_CHANGE_MUTE:"user:changemute",USER_REPLAY_CONTENT:"user:replaycontent",USER_SCRUBBING_PROGRESS:"user:scrubningprogress",USER_PAN_PROGRESS:"user:panprogress",USER_PAN_VOLUME:"user:panvolume",USER_CHANGE_QUALITY:"user:changequality",USER_PAUSE:"user:pause",USER_RESUME:"user:resume",USER_SKIP_AD:"user:skipad",TRACKING_VOLUME:"tracking:volume",PLAYER_ENDED_CONTEND:"player:endedcontent",PLAYER_REPLAY_CONTEND:"player:replaycontent",PLAYER_ERROR:"player:error",PLAYER_READY:"player:ready",PLAYER_NOTI:"player:noti",PLAYER_WARNING:"player:warning",PLAYER_REQUEST_QUALITY_INFO:"player:requestQualityInfo",AD_ORDER_START_MIDROLL:"adOrder:startMidroll",AD_ORDER_START_POSTROLL:"adOrder:startPostroll",AD_START:"ad:start",AD_PLAY:"ad:play",AD_END:"ad:end",AD_PAUSE_AD:"ad:pauseAd",AD_RESUME_AD:"ad:resumeAd",AD_CANCEL:"ad:cancel",AD_SKIP:"ad:skip",AD_ENDED_POSTROLL:"ad:endedPostroll",AD_RESTORED_PLAYBACK:"ad:restoredplayback",AD_MIDROLL_VASTRESPONSE:"ad:midroll:vastresponse",AD_VASTRESPONSE:"ad:vastresponse",VAST_AD_VIDEO_START:"vast:AdVideoStart",VAST_AD_START:"vast:ad_start",VAST_AD_CLICK_THRU:"vast:AdClickThru",VAST_AD_VIDEO_SHOW:"vast:AdVideoShow",VAST_AD_PAUSE:"vast:AdPause",VAST_AD_RESUME:"vast:AdResume",VAST_AD_TIMEUPDATE:"vast:AdTimeupdate",VAST_AD_VOLUMECHANGE:"vast:AdVolumeChange",VAST_AD_DURATIONCHANGE:"vast:AdDurationChange",VAST_AD_VIDEO_COMPLETE:"vast:AdVideoComplete",VPAID_AD_START:"vpaid:ad_start",VPAID_PAUSE_AD:"vpaid:pauseAd",VPAID_RESUME_AD:"vpaid:resumeAd",VPAID_AD_SKIPPED:"vpaid:AdSkipped",VPAID_AD_STARTED:"vpaid:AdStarted",VPAID_AD_STOPPED:"vpaid:AdStopped",VPAID_AD_IMPRESSION:"vpaid:AdImpression",VPAID_AD_PLAYING:"vpaid:AdPlaying",VPAID_AD_PAUSED:"vpaid:AdPaused",VPAID_AD_VIDEO_START:"vpaid:AdVideoStart",VPAID_AD_VIDEO_FIRST_QUARTILE:"vpaid:AdVideoFirstQuartile",VPAID_AD_VIDEO_MID_POINT:"vpaid:AdVideoMidpoint",VPAID_AD_VIDEO_THIRD_QUARTILE:"vpaid:AdVideoThirdQuartile",VPAID_AD_VIDEO_COMPLETE:"vpaid:AdVideoComplete",VPAID_AD_VOLUME_CHANGE:"vpaid:AdVolumeChange",VPAID_AD_CLICK_THRU:"vpaid:AdClickThru",VPAID_AD_USER_ACCEPT_INVITATION:"vpaid:AdUserAcceptInvitation",VPAID_AD_USER_CLOSE:"vpaid:AdUserClose",VPAID_AD_USER_MINIMIZE:"vpaid:AdUserMinimize",VPAID_AD_ERROR:"vpaid:AdError",IMA_AD_START:"ima:AdStart",IMA_AD_SKIPPED:"ima:AdSkipped",IMA_AD_STARTED:"ima:AdStarted",IMA_AD_STOPPED:"ima:AdStopped",IMA_AD_IMPRESSION:"ima:AdImpression",IMA_AD_PLAYING:"ima:AdPlaying",IMA_AD_PAUSED:"ima:AdPaused",PLAYER_FILLING_VOLUME:"player-filling-volume",LIVE_SHOW_SSID:"live:show-ssid",LIVE_VIEW_CCU:"live:view-ccu",LIVE_LIMIT_MAX_QUALITY:"live:limit-max-quality",MOUSE_TIME_UPDATE:"mouse:timeUpdate",MOUSE_DOWN_TIME_UPDATE:"mousedown:timeUpdate",HLS_FRAG_BUFFERED:"hlsFragBuffered",HLS_BUFFER_APPENDED:"hlsBufferAppended",HLS_BUFFER_APPENDING:"hlsBufferAppending",DASH_UPDATE_QUALITY:"dash:updateQuality",DASH_SET_QUALITY:"dash:setQuality",NOTIFY_BUFFER_EMTY:"stast:notifyBufferEmty"},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},asyncGenerator=function(){function a(a){this.value=a}function b(b){function c(a,b){return new Promise(function(c,e){var h={key:a,arg:b,resolve:c,reject:e,next:null};g?g=g.next=h:(f=g=h,d(a,b))})}function d(c,f){try{var g=b[c](f),h=g.value;h instanceof a?Promise.resolve(h.value).then(function(a){d("next",a)},function(a){d("throw",a)}):e(g.done?"return":"normal",g.value)}catch(a){e("throw",a)}}function e(a,b){switch(a){case"return":f.resolve({value:b,done:!0});break;case"throw":f.reject(b);break;default:f.resolve({value:b,done:!1})}f=f.next,f?d(f.key,f.arg):g=null}var f,g;this._invoke=c,"function"!=typeof b.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(b.prototype[Symbol.asyncIterator]=function(){return this}),b.prototype.next=function(a){return this._invoke("next",a)},b.prototype.throw=function(a){return this._invoke("throw",a)},b.prototype.return=function(a){return this._invoke("return",a)},{wrap:function(a){return function(){return new b(a.apply(this,arguments))}},await:function(b){return new a(b)}}}(),classCallCheck=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_extends=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},get=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},inherits=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},possibleConstructorReturn=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b},toConsumableArray=function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)},Error$1=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",d=arguments[2];classCallCheck(this,a),this.code=b,this.msg=c,d&&(this.data=d)}return createClass(a,[{key:"extendsWithData",value:function(b){var c=this.code,d=this.msg;return new a(c,d,b)}}]),a}(),generateError=function(a,b){return new Error$1(a,b)},error={ERROR_100:generateError(100,"Video hiện chưa sẵn sàng"),ERROR_101:generateError(101,"Video không tồn tại"),ERROR_102:generateError(102,"Video đã được mã hóa"),ERROR_103:generateError(103,"Tải video bị lỗi"),ERROR_104:generateError(104,"Tải video key bị lỗi"),ERROR_105:generateError(105,"Video bị lỗi"),ERROR_106:generateError(106,"Trình duyệt không được hỗ trợ, \nbạn vui lòng cập nhật trình duyệt hoặc dùng trình duyệt khác"),ERROR_107:generateError(107,"Fatal media error encountered, try to recover"),ERROR_108:generateError(108,"Fatal network error encountered, try to recover"),ERROR_109:generateError(109,"You aborted the video playback"),ERROR_110:generateError(110,"The video playback was aborted due to a corruption problem or because the video used features your browser did not support"),ERROR_111:generateError(111,"A network error caused the video download to fail part-way"),ERROR_112:generateError(112,"The video could not be loaded, either because the server or network failed or because the format is not supported"),ERROR_113:generateError(113,"Window error")},Noti=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",d=arguments[2];classCallCheck(this,a),this.code=b,this.msg=c,d&&(this.data=d)}return createClass(a,[{key:"extendsWithData",value:function(b){var c=this.code,d=this.msg;return new a(c,d,b)}}]),a}(),generateNoti=function(a,b){return new Noti(a,b)},noti={NOTI_200:generateNoti(200,"Chương trình phát sóng đã kết thúc"),NOTI_201:generateNoti(201,"Phiên đã hết hạn. \nVui lòng tải lại trang.")},index=Object.freeze({EVENT:event$1,ERROR:error,NOTI:noti}),playerconfig=Object.freeze({EVENT:event,DEFAULT:index}),browser=function(a,b){null==b&&(b="utf8");var c=new Uint8Array(a);if("hex"===b){for(var d="",e=0,f=c.byteLength;e<f;++e)d+=toHex(c[e]);return d}if("base64"===b)return h=String.fromCharCode.apply(null,c),btoa(h);if("binary"===b||"latin1"===b||!commonjsGlobal.TextDecoder)return h=String.fromCharCode.apply(null,c);"utf16le"===b&&(b="utf-16le");var g=new TextDecoder(b),h=g.decode(c);return h},atobBrowser=function(a){return atob(a)},isBase64=createCommonjsModule(function(a,b){!function(c){function d(a,b){b instanceof Object||(b={});var c=/^(data:\w+\/[a-zA-Z\+\-\.]+;base64,)?(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/gi;return b.paddingRequired===!1&&(c=/^(data:\w+\/[a-zA-Z\+\-\.]+;base64,)?(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/gi),c.test(a)}a.exports&&(b=a.exports=d),b.isBase64=d}(commonjsGlobal)}),agent=detectiveAgents(),promiseXhr=function a(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise(function(e,f){videojs.xhr(b,function(g,h,i){200===h.statusCode?e(i):c&&d<c?(++d,a(b,c,d).then(function(a){e(a)}).catch(function(a){f(a)})):f(g)})})},Html5=videojs.getTech("Html5"),playername$1="ThanhNienPlayer",drmkey="Tx5SLjR21NRLlqeV",hash="U2FsdGVkX19swuBeqtqEpu6jB0SjEEW9SYQME99Avh//XP9GkhhNoVfIzou2xKnB";Html5.prototype.isLive=function(){return this.duration()===1/0};var decryptkeys={},retryLive=0,reloadPlayer=!1,attachPlayerProvider=function(a,b,c){function d(d,e){function f(){var b=e.options_.hlsjsConfig||{player:s,drmDecryptor:!0,enableWorker:!0,maxBufferLength:6,startLevel:3,maxBufferSize:0,fragLoadingMaxRetry:3,fragLoadingRetryDelay:200,debug:!1,liveSyncDurationCount:6,enableSoftwareAES:!1,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:3};a.HLSPeerLoader&&(b.fLoader=a.HLSPeerLoader),a.HLSOvpLoader&&(b.pLoader=a.HLSOvpLoader),n=new c(b),n.autoLevelCapping=-1,n.on(c.Events.ERROR,function(a,b){i(a,b,e,q)}),n.on(c.Events.MANIFEST_PARSED,j),n.on(c.Events.FRAG_BUFFERED,k),n.on(c.Events.BUFFER_APPENDED,l),n.on(c.Events.BUFFER_APPENDING,m),n.on(c.Events.LEVEL_LOADED,function(a,b){r!==1/0||b.details.live||(s.trigger(event$1.PLAYER_NOTI,noti.NOTI_200),s.tech_.dispose()),b.networkDetails.getAllResponseHeaders().indexOf("x-time-ssid")>=0&&s.trigger(event$1.LIVE_SHOW_SSID,b.networkDetails.getResponseHeader("X-Time-SSID")),b.networkDetails.getAllResponseHeaders().indexOf("x-vid-ccu")>=0?s.trigger(event$1.LIVE_VIEW_CCU,b.networkDetails.getResponseHeader("X-VID-CCU")):s.trigger(event$1.LIVE_VIEW_CCU),b.networkDetails.getAllResponseHeaders().indexOf("x-max-quality")>=0?s.trigger(event$1.LIVE_LIMIT_MAX_QUALITY,b.networkDetails.getResponseHeader("X-MAX-QUALITY")):s.trigger(event$1.LIVE_LIMIT_MAX_QUALITY),b.networkDetails.getAllResponseHeaders().indexOf("x-domain-source")>=0&&(n.trigger("ChangeDomainSource",b.networkDetails.getResponseHeader("X-Domain-Source")),s.cache_.src=s.cache_.src.replace(s.cache_.src.match(/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:\/\n?=]+)/im)[1],b.networkDetails.getResponseHeader("X-Domain-Source"))),r=b.details.live?1/0:b.details.totalduration});var f=void 0;if("false"!==drmkey){try{SecureKey.aes128().then(function(a){n.coreComponents[2].loadsuccess=function(b,c,d){var e=d.frag,g=browser(new Uint8Array(b.data),"base64"),h=g.substr(0,16);h=stringToArrayBuffer(h,"utf8"),g=g.substr(16),g=stringToArrayBuffer(g),a.init(new Uint8Array(h));var i=a.decrypt(new Uint8Array(g));i=unPadding(i);var j=void 0;try{j=browser(new Uint8Array(i))}catch(a){}j||(j=g);var k=void 0;try{k=b.url.match(/.*?\.key/)[0]}catch(a){}f=decryptkeys[k]=this.decryptkey=e.decryptdata.key=new Uint8Array(stringToArrayBuffer(j)),e.loader=void 0,this.loaders[e.type]=void 0,this.hls.trigger("hlsKeyLoaded",{frag:e})}})}catch(a){}var g=n.coreComponents[2].onKeyLoading;n.coreComponents[2].onKeyLoading=function(a){var b=a.frag._decryptdata._uri,c=void 0;try{c=a.frag._decryptdata._uri.match(/.*?\.key/)[0]}catch(a){}if(f||c&&decryptkeys[c])this.decryptkey=f||decryptkeys[c],this.decrypturl=a.frag._decryptdata._uri;else if(/kms\.sohatv\.vn|localhost|10\.5/.test(b)&&!/(&|\?)h=/.test(b)){var d=haveQuery(b)?"&":"?";b=b+d+("h="+encodeURIComponent(hash)+"&alg=1");var e=u.drmtoken||u.drmToken;e&&(b+="&dt="+e),a.frag._decryptdata._uri=b}g.call(this,a)}}e.on("play",function(){n.config.maxBufferLength=30}),e.on("pause",function(){n.config.maxBufferLength=5}),n.attachMedia(p),n.loadSource(d.src),s.trigger("hlsTechInit",n)}function g(a){n.nextLevel=a}function h(a){var b=s.paused();if(1===q[c.ErrorTypes.MEDIA_ERROR]){if(7===o)return void s.trigger(event$1.PLAYER_ERROR,error.ERROR_105);o++,n.recoverMediaError()}else if(2===q[c.ErrorTypes.MEDIA_ERROR])n.swapAudioCodec(),n.recoverMediaError(),q[c.ErrorTypes.MEDIA_ERROR]=0;else if(q[c.ErrorTypes.MEDIA_ERROR]>2){if(!a)return;var d=a.frag;if(!d){var e=s.currentSrc(),f=s.currentTime();return agent.isMobile||s.reset(),s.src(""),s.src(e),s.currentTime(f),s.trigger("waiting"),void(agent.isMobile||s.load())}var g=d.level;if(n.levels[g].ignore){var h=s.currentSrc(),i=s.currentTime();agent.isMobile||s.reset(),s.src(""),s.src(h),s.currentTime(i),s.trigger("waiting"),agent.isMobile||s.load()}else{n.levels[g].bitrate=12e16,n.levels[g].ignore=!0;for(var j=n.levels.length,k=0;k<j;k++)if(!n.levels[k].ignore){g=k;break}n.nextAutoLevel=g,n.swapAudioCodec(),n.recoverMediaError()}}b||s.play()}function i(a,b){var d={message:"VCPlayer error: "+b.type+" - fatal: "+b.fatal+" - "+b.details,data:b};switch(b.details){case"manifestLoadError":case"manifestLoadTimeOut":var f=b.context,g=f.url,i=s.options(),j=i.params;if(!j.retryLive)return void s.trigger(event$1.PLAYER_ERROR,error.ERROR_103);if("manifest"===f.type&&/sohatv\.vn/.test(g)){var k=g.match(/\/\/(.*?sohatv\.vn)/),l=k[1],m=j.v;return v.push(l),v.length>3?void s.trigger(event$1.PLAYER_ERROR,error.ERROR_103):void promiseXhr({uri:"//play.sohatv.vn/retry-source?vid="+m+"&ignores="+v.join(","),method:"GET"},0).then(function(a){var b=!s.paused();g=g.replace(l,JSON.parse(a).data);var c=s.currentTime();agent.isMobile||s.reset(),s.src(""),s.src(g),s.currentTime(c),s.trigger("waiting"),agent.isMobile||s.load(),b&&s.play()}).catch(function(){s.trigger(event$1.PLAYER_ERROR,error.ERROR_103)})}return void s.trigger(event$1.PLAYER_ERROR,error.ERROR_103);case"fragDecryptError":return void("drmDecryptor not support"===b.reason&&s.trigger(event$1.PLAYER_ERROR,error.ERROR_106))}if(q[b.type]?q[b.type]+=1:q[b.type]=1,b.fatal)switch(b.type){case c.ErrorTypes.NETWORK_ERROR:if("manifestLoadError"===b.details&&403===b.response.code)return s.trigger(event$1.PLAYER_NOTI,noti.NOTI_201),void e.dispose();s.trigger("player:hlserror",error.ERROR_108);var o=b.details,p=b.response,r=b.context;if(p&&403===p.code)return e.dispose(),void s.trigger(event$1.PLAYER_ERROR,error.ERROR_103);if("keyLoadError"===o){if(e.dispose(),p&&p.code>=400&&p.code<500)return void s.trigger(event$1.PLAYER_ERROR,error.ERROR_102);s.trigger(event$1.PLAYER_ERROR,error.ERROR_104)}else s.setTimeout(function(){n.streamController.state="IDLE"},3e3);if("levelLoadError"===o&&(s.trigger("lotusPlayer:hlserror",error.ERROR_114),0===r.level&&/sohatv\.vn/.test(r.url))){if(retryLive>=8)return e.dispose(),void s.trigger(event$1.PLAYER_ERROR,error.ERROR_103);if(reloadPlayer)return;return reloadPlayer=!0,void s.setTimeout(function(){var a=!s.paused(),b=s.currentSrc(),c=s.currentTime();agent.isMobile||s.reset(),s.src(""),s.src(b),s.currentTime(c),s.trigger("waiting"),agent.isMobile||s.load(),a&&s.play(),reloadPlayer=!1,retryLive++},2e3*retryLive)}break;case c.ErrorTypes.MEDIA_ERROR:if(s.vastAd)return;s.trigger("player:hlserror",error.ERROR_107),h(b);break;default:n.destroy(),e.error=function(){return d},e.trigger("error")}}function j(a,b){function c(a){return a.height?a.height+"p":a.width?Math.round(9*a.width/16)+"p":a.bitrate?a.bitrate/1e3+"kbps":0}var d=[],f=s.options_.params;if(f.live||(n.autoLevelCapping=b.levels.length>=4?3:-1),b.levels.length>1){var h={id:-1,label:"auto",selected:-1===n.manualLevel};d.push(h)}b.levels.forEach(function(a,b){var e={};e.id=b,e.selected=b===n.manualLevel,e.label=c(a),d.push(e)});var i={qualityData:{video:d},qualitySwitchCallback:g};e.trigger("loadLevelsData",b.levels),e.trigger("loadedqualitydata",i),e.on("requestqualitydata",function(){e.trigger("loadedqualitydata",i),e.trigger("loadLevelsData",b.levels)})}function k(a,b){var c=s.options_.params;b.frag.sn>=2&&!c.live&&(n.autoLevelCapping=-1),c.live&&0===b.frag.sn&&!w&&(n.recoverMediaError(),w||(s.setTimeout(function(){s.play(),w=!1},3e3),w=!0)),e.trigger(event$1.HLS_FRAG_BUFFERED,{event:a,data:b})}function l(a,b){e.trigger(event$1.HLS_BUFFER_APPENDED,{event:a,data:b})}function m(a,b){e.trigger(event$1.HLS_BUFFER_APPENDING,{event:a,data:b})}e.name_=playername$1+"HLS";var n,o=0,p=e.el(),q={},r=null,s=b.players[e.options_.playerId],t=s.options(),u=t.params;e.isLive=function(){return e.duration()===1/0},p.addEventListener("error",function(a){var b,c=a.currentTarget.error;switch(c.code){case c.MEDIA_ERR_ABORTED:b="You aborted the video playback",s.trigger("player:hlserror",error.ERROR_109);break;case c.MEDIA_ERR_DECODE:b="The video playback was aborted due to a corruption problem or because the video used features your browser did not support",s.trigger("player:hlserror",error.ERROR_110),h();break;case c.MEDIA_ERR_NETWORK:s.trigger("player:hlserror",error.ERROR_111),b="A network error caused the video download to fail part-way";break;case c.MEDIA_ERR_SRC_NOT_SUPPORTED:s.trigger("player:hlserror",error.ERROR_112),b="The video could not be loaded, either because the server or network failed or because the format is not supported"}}),this.duration=function(){return r||p.duration||0},this.dispose=function(){n.destroy()},this.recoverMediaError=function(){n.recoverMediaError()},s.__ignoreCDN__=s.__ignoreCDN__||[];var v=s.__ignoreCDN__,w=!1;f()}c.isSupported()&&b.getTech("Html5").registerSourceHandler({canHandleSource:function(a){var b,c=/^application\/x-mpegURL$/i,d=/\.m3u8/i;return b=c.test(a.type)?"probably":d.test(a.src)?"maybe":""},handleSource:function(a,b){return b.hlsProvider&&b.hlsProvider.dispose(),b.hlsProvider=new d(a,b),b.hlsProvider}},0),b[playername$1+"ProviderHLS"]=d};attachPlayerProvider(window,videojs,Hls);var Html5$1=videojs.getTech("Html5"),mergeOptions=videojs.mergeOptions||videojs.util.mergeOptions,defaults$1={mediaDataSource:{},config:{}},Flvjs=function(a){function b(a,c){classCallCheck(this,b),a=mergeOptions(defaults$1,a);var d=possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));return d.retrySource=0,d.countHighLatency=0,d.isAppendBuffer=!1,d}return inherits(b,a),createClass(b,[{key:"setSrc",value:function(a){var b=this;this._src=a,this.flvPlayer&&(this.player_.off("timeupdate",this._handleOnTimeupdate.bind(this)),this.flvPlayer.detachMediaElement(),this.flvPlayer.destroy());var c=this.options_.mediaDataSource;c.type=void 0===c.type?"flv":c.type,c.url=a,this.flvPlayer=flvjs.createPlayer(c,{enableWorker:!0,enableStashBuffer:!1,stashInitialSize:128,lazyLoad:!1,autoCleanupSourceBuffer:!0,isLive:!0}),this.flvPlayer.attachMediaElement(this.el_),this.flvPlayer.load(),this.player_.on("timeupdate",this._handleOnTimeupdate.bind(this)),this.flvPlayer.on("metadata_arrived",function(){b.flvPlayer.play()}),this.flvPlayer.on("error",this._handleError.bind(this))}},{key:"_handleOnTimeupdate",value:function(){var a=this;a.isAppendBuffer||(this.player_.buffered().end(0)-this.player_.currentTime()>1.5&&(a.isAppendBuffer=!0,
window.setTimeout(function(){a.isAppendBuffer=!1,a.player_.currentTime(this.player_.buffered().end(0)-.1)},1e3),a.countHighLatency++),a.countHighLatency>10&&(a.setSrc(a._src),window.setTimeout(function(){a.flvPlayer.play()},100),a.countHighLatency=0))}},{key:"_handleError",value:function(a,b,c){this.retrySource>3||("NetworkError"===a&&c.code===-1&&(this.setSrc(this._src),this.retrySource++),"Fetch stream meet Early-EOF"===c.msg&&(this.setSrc(this._src),this.retrySource++))}},{key:"dispose",value:function(){this.flvPlayer&&(this.flvPlayer.detachMediaElement(),this.flvPlayer.destroy()),get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"dispose",this).call(this)}}]),b}(Html5$1);Flvjs.isSupported=function(){return flvjs&&flvjs.isSupported()},Flvjs.formats={"video/flv":"FLV","video/x-flv":"FLV"},Flvjs.canPlayType=function(a){return Flvjs.isSupported()&&a in Flvjs.formats?"maybe":""},Flvjs.canPlaySource=function(a){var b=a.src,c=a.type;return".flv"===b.slice(-4)&&(a.type||(c="video/flv")),Flvjs.canPlayType(c)},Flvjs.VERSION="__VERSION__",videojs.options.techOrder.push("flvjs"),videojs.registerTech("Flvjs",Flvjs);var query$1={},info={};parserQuerry();var reactEvents=["onAbort","onAnimationCancel","onAnimationEnd","onAnimationIteration","onAuxClick","onBlur","onChange","onClick","onClose","onContextMenu","onDoubleClick","onError","onFocus","onGotPointerCapture","onInput","onKeyDown","onKeyPress","onKeyUp","onLoad","onLoadEnd","onLoadStart","onLostPointerCapture","onMouseEnter","onMouseLeave","onMouseDown","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onPointerCancel","onPointerDown","onPointerEnter","onPointerLeave","onPointerMove","onPointerOut","onPointerOver","onPointerUp","onReset","onResize","onScroll","onSelect","onSelectionChange","onSelectStart","onSubmit","onTouchCancel","onTouchMove","onTouchStart","onTransitionCancel","onTransitionEnd","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onFocusOut"],divergentNativeEvents={onDoubleClick:"dblclick"},mimickedReactEvents={onInput:"onChange",onFocusOut:"onBlur",onSelectionChange:"onSelect"};window.playerShadowRoot={};var userActive=!1,isReferrer=!1;document.addEventListener("click",handleClick),window.performance?(checkReferrer(),0==performance.navigation.type&&isReferrer&&(userActive=!0)):isReferrer&&(userActive=!0);var isUserActive=function(){return userActive},util$3=Object.freeze({isUserActive:isUserActive}),isProduction=!0,stateInfo=function(a){a.label,a.prevState,a.nextState},config={levels:{error:0,warn:1,info:2,trace:3,debug:4},colors:{error:"red",warn:"yellow",info:"cyan",trace:"magenta",debug:"blue"}},log_level=4,logs={};isProduction&&(log_level=1);for(var name in config.levels){var logFn=function(a){if(!(config.levels[a]>log_level)){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];if(/error|warn/.test(a)){var e;(e=console)[a].apply(e,c)}else{var f;(f=console).log.apply(f,c)}}};logs[name]=logFn.bind(null,name)}window.setPlayerLogLevel=function(a){log_level=a};var log=_extends({stateInfo:stateInfo},logs),lib=createCommonjsModule(function(a,b){function c(){return 1===arguments.length?d.apply(void 0,arguments):e.apply(void 0,arguments)}function d(a){var b=void 0;return"undefined"!=typeof Reflect&&"function"==typeof Reflect.ownKeys?b=Reflect.ownKeys(a.prototype):(b=Object.getOwnPropertyNames(a.prototype),"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(a.prototype)))),b.forEach(function(b){if("constructor"!==b){var c=Object.getOwnPropertyDescriptor(a.prototype,b);"function"==typeof c.value&&Object.defineProperty(a.prototype,b,e(a,b,c))}}),a}function e(a,b,c){var d=c.value;if("function"!=typeof d)throw new Error("@autobind decorator can only be applied to methods not: "+("undefined"==typeof d?"undefined":f(d)));var e=!1;return{configurable:!0,get:function(){if(e||this===a.prototype||this.hasOwnProperty(b)||"function"!=typeof d)return d;var c=d.bind(this);return e=!0,Object.defineProperty(this,b,{configurable:!0,get:function(){return c},set:function(a){d=a,delete this[b]}}),e=!1,c},set:function(a){d=a}}}Object.defineProperty(b,"__esModule",{value:!0});var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};b.default=c}),autobind=unwrapExports(lib),emptyFunction=function(){};emptyFunction.thatReturns=makeEmptyFunction,emptyFunction.thatReturnsFalse=makeEmptyFunction(!1),emptyFunction.thatReturnsTrue=makeEmptyFunction(!0),emptyFunction.thatReturnsNull=makeEmptyFunction(null),emptyFunction.thatReturnsThis=function(){return this},emptyFunction.thatReturnsArgument=function(a){return a};var emptyFunction_1=emptyFunction,invariant_1=invariant,ReactPropTypesSecret="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret,factoryWithThrowingShims=function(){function a(a,b,c,d,e,f){f!==ReactPropTypesSecret_1&&invariant_1(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function b(){return a}a.isRequired=a;var c={array:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:b,element:a,instanceOf:b,node:a,objectOf:b,oneOf:b,oneOfType:b,shape:b};return c.checkPropTypes=emptyFunction_1,c.PropTypes=c,c},propTypes=createCommonjsModule(function(a){a.exports=factoryWithThrowingShims()}),_class$2,_temp$1,VCPlayerObject$1=(_temp$1=_class$2=function(){function a(b){classCallCheck(this,a),this.state={},this._validProps(b),this._initProps(b)}return createClass(a,[{key:"getDefaultProps",value:function(){return this.constructor.defaultProps}},{key:"setState",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=this.state||{};this.state=_extends({},b,a),log.stateInfo({label:this.constructor.name,prevState:b,nextState:a})}},{key:"updateProps",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=this.props||{};this.props=_extends({},b,a)}},{key:"_initProps",value:function(a){var b=this.getDefaultProps(a);this.props=_extends({},b,a)}},{key:"_validProps",value:function(a){var b=this.constructor.propTypes;propTypes.checkPropTypes(b,a,"prop",this.constructor.name)}}]),a}(),_class$2.propTypes={},_class$2.defaultProps={},_temp$1),_class$1,_temp,Plugin=(_temp=_class$1=function(a){function b(a){classCallCheck(this,b);var c=possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a)),d=c.props.player;return c._onReadyPlayer=c._onReadyPlayer.bind(c),d.one("ready",c._onReadyPlayer),c}return inherits(b,a),createClass(b,[{key:"_onReadyPlayer",value:function(){}}]),b}(VCPlayerObject$1),_class$1.propTypes={player:propTypes.object.isRequired},_class$1.defaultProps={},_temp),_class,EndedPlugin=(_class=function(a){function b(a){classCallCheck(this,b);var c=possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a)),d=c.props.player;return d.on("ended",c._onEnded),d.on(event$1.AD_START,c._onAdStart),d.on(event$1.AD_END,c._onAdEnded),c}return inherits(b,a),createClass(b,[{key:"_onAdStart",value:function(){log.info("EndedPlugin > handle when ad start");var a=this.props.player;a.off("ended",this._onEnded)}},{key:"_onAdEnded",value:function(){log.info("EndedPlugin > handle when ad ended");var a=this.props.player;a.on("ended",this._onEnded)}},{key:"_onEnded",value:function(){log.info("EndedPlugin > trigger event "+event$1.PLAYER_ENDED_CONTEND);var a=this.props.player;a.trigger(event$1.PLAYER_ENDED_CONTEND)}}]),b}(Plugin),_applyDecoratedDescriptor(_class.prototype,"_onAdStart",[autobind],Object.getOwnPropertyDescriptor(_class.prototype,"_onAdStart"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"_onAdEnded",[autobind],Object.getOwnPropertyDescriptor(_class.prototype,"_onAdEnded"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"_onEnded",[autobind],Object.getOwnPropertyDescriptor(_class.prototype,"_onEnded"),_class.prototype),_class),_class$3,_temp$2,StatsPlugin=(_temp$2=_class$3=function(a){function b(a){classCallCheck(this,b);var c=possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.state={enablePlayerStats:!1,enableAdStats:!1},window.enablePlayerStats=c._enablePlayerStats.bind(c,!0),window.disablePlayerStats=c._enablePlayerStats.bind(c,!1),window.enableAdStats=c._enableAdStats.bind(c,!0),window.disableAdStats=c._enableAdStats.bind(c,!1),c}return inherits(b,a),createClass(b,[{key:"_enablePlayerStats",value:function(a){var b=this.state.enablePlayerStats;b!==a&&(this.setState({enablePlayerStats:a}),this._updatePlayerStats())}},{key:"_enableAdStats",value:function(a){var b=this.state.enableAdStats;b!==a&&(this.setState({enableAdStats:a}),this._updateAdStats())}},{key:"_updatePlayerStats",value:function(){var a=this.state.enablePlayerStats,b=this.props,c=b.player,d=b.player_events,e=this;a?d.map(function(a){c.on(a,e._handlePlayerStats)}):d.map(function(a){c.off(a,e._handlePlayerStats)})}},{key:"_updateAdStats",value:function(){var a=this.state.enableAdStats,b=this.props,c=b.player,d=b.ad_events,e=this;a?d.map(function(a){c.on(a,e._handleAdStats)}):d.map(function(a){c.off(a,e._handleAdStats)})}},{key:"_handlePlayerStats",value:function(a){}},{key:"_handleAdStats",value:function(a){}}]),b}(Plugin),_class$3.defaultProps={player_events:["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],ad_events:["vast.firstPlay","vast.adStart","vast.adSkip","vast.adError","vast.adsCancel","vast.contentStart","vast.contentEnd","vast.reset","html5-ad","flash-ad","restorePlayer"]},_temp$2),HookPlugin=function(a){function b(a){classCallCheck(this,b);var c=possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a)),d=c.props.player,e=d.play,f=d.pause,g=!1,h=!1;return d.one("loadedmetadata",function(){h=!0}),d.play=function(){var a=void 0;try{throw new Error}catch(b){a=b.stack}var b=/executeDispatch|dispatchEvent|handleClick/.test(a);try{g||!agent.isIOS||b?g||isUserActive()||(d.muted(!0),d.trigger(event$1.USER_CHANGE_MUTE,!0)):(d.muted(!0),d.trigger(event$1.USER_CHANGE_MUTE,!0)),"Flvjs"===d.techName_&&"number"==typeof d.bufferedEnd()&&d.currentTime(d.bufferedEnd()-.1);var c=e.call(d);c&&"function"==typeof c.catch&&c.catch(function(a){d.trigger(event$1.PLAYER_WARNING,a),log.warn("HookPlugin",a)})}catch(a){d.trigger(event$1.PLAYER_WARNING,a),log.trace(a)}b&&g&&d.trigger(event$1.USER_RESUME),g||(b?d.trigger("player:firstPlay",{isClick:!0}):d.trigger("player:firstPlay",{isClick:!1})),g=!!h},d.pause=function(){try{var a=f.call(d);a&&"function"==typeof a.catch&&a.catch(function(a){log.warn("HookPlugin",a)})}catch(a){log.trace(a)}var b=void 0;try{throw new Error}catch(a){b=a.stack}var c=/executeDispatch|dispatchEvent|handleClick/.test(b);c&&d.trigger(event$1.USER_PAUSE)},c}return inherits(b,a),b}(Plugin),_class$4,VolumePlugin=(_class$4=function(a){function b(a){classCallCheck(this,b);var c=possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));c.state={initedVolume:!1,firstFillVolume:!1,mute:!1};var d=c.props.player,e=c;return c.haveInitedVolume=!1,c._initPlayerVolume(!1),d.on("loadedmetadata",function(){d.paused()?d.one("play",function(){e._initPlayerVolume(!0)}):e._initPlayerVolume(!0)}),d.on(event$1.USER_CHANGE_VOLUME,c._onUserChangeVolume),d.on(event$1.USER_CHANGE_MUTE,c._onUserChangeMute),c}return inherits(b,a),createClass(b,[{key:"getDefaultProps",value:function(a){var b=a.player,c=b.options(),d=c.params,e=d._site,f=d.volume,g=d.muted,h=d.mute;return this.muted=g||h,{site:e||"volume",volume:f,mute:g||h}}}]),createClass(b,[{key:"_fillVolume",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.3,b=arguments[1],c=this.state.initedVolume,d=this.props.player;if(c)return void d.removeClass("player-filling-volume");if(d.volume(a.toFixed(2)),a>=b)return d.removeClass("player-filling-volume"),d.trigger("player-filling-volume",!1),void this.setState({initedVolume:!0,volume:b});var e=this;d.setTimeout(function(){a+=.01,e._fillVolume(a,b)},100)}},{key:"_initPlayerVolume",value:function(a){(this.gmuted||this.muted)&&this.setState({initedVolume:!0});var b=this.state,c=b.firstFillVolume,d=b.initedVolume,e=b.mute,f=b.volume,g=this.props.player;return this.haveInitedVolume&&!e&&f?void g.volume(f):d?(this.haveInitedVolume=!0,e=this.gmuted||this.state.mute||this.muted,g.muted(e),g.removeClass("player-filling-volume"),void g.trigger("player-filling-volume",!1)):(f=.6,g.muted(!1),e?void g.muted(!0):void(a&&(c||(this.setState({firstFillVolume:!0}),g.addClass("player-filling-volume"),g.trigger("player-filling-volume",!0),this._fillVolume(.3,f)))))}},{key:"_onUserChangeVolume",value:function(a,b){var c=this.props.player;b=parseFloat(b),log.trace("VolumePlugin > _onChangeVolume:",b),c.removeClass("player-filling-volume"),c.trigger("player-filling-volume",!1),this.setState({volume:b,mute:!1,initedVolume:!0})}},{key:"_onUserChangeMute",value:function(a,b){var c=this.props.player;b||c.volume()&&this.setState({volume:c.volume()}),c.removeClass("player-filling-volume"),c.trigger("player-filling-volume",!1),this.setState({mute:b,initedVolume:!0}),this.gmuted=b}}]),b}(Plugin),_applyDecoratedDescriptor$1(_class$4.prototype,"_initPlayerVolume",[autobind],Object.getOwnPropertyDescriptor(_class$4.prototype,"_initPlayerVolume"),_class$4.prototype),_applyDecoratedDescriptor$1(_class$4.prototype,"_onUserChangeVolume",[autobind],Object.getOwnPropertyDescriptor(_class$4.prototype,"_onUserChangeVolume"),_class$4.prototype),_applyDecoratedDescriptor$1(_class$4.prototype,"_onUserChangeMute",[autobind],Object.getOwnPropertyDescriptor(_class$4.prototype,"_onUserChangeMute"),_class$4.prototype),_class$4),HandleErrorPlugin=function(a){function b(){return classCallCheck(this,b),possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return inherits(b,a),b}(Plugin),OverridePlugin=function(a){function b(a){classCallCheck(this,b);var c=possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a)),d=c.props.player;return d.resetControlBarUI_=function(){},c}return inherits(b,a),b}(Plugin),attachDefaultPlugin=function(a){new HookPlugin({player:a}),new VolumePlugin({player:a}),new EndedPlugin({player:a}),new OverridePlugin({player:a}),a.setTimeout(function(){new StatsPlugin({player:a}),new HandleErrorPlugin({player:a})},1e3)},blankClass=function a(){classCallCheck(this,a)},blankComponents=function(a){function b(){var a,c,d,e;classCallCheck(this,b);for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];return c=d=possibleConstructorReturn(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(g))),d.state={renderAds:!1},e=c,possibleConstructorReturn(d,e)}return inherits(b,a),createClass(b,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var a=this.state.renderAds;return a?React__default.createElement("div",null):null}}]),b}(React.Component),Vast=void 0,AdsPlugin=void 0;Vast=AdsPlugin=blankClass;var Ad=blankComponents,count=0,_class$5,_temp$3,protocol="http:"===location.protocol?"http:":"https:",MediaInfoPlugin=(_temp$3=_class$5=function(a){function b(a){classCallCheck(this,b);var c=possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a)),d=c.props.player,e=d.options(),f=e.params,g=e.info;return d.mediaInfo={},d.mediaInfo=videojs.mergeOptions(d.mediaInfo,agent,f),d.mediaInfo=videojs.mergeOptions(d.mediaInfo,g),c._getMediaInfo(),c}return inherits(b,a),createClass(b,[{key:"getDefaultProps",value:function(a){var b=this.constructor.defaultProps,c=a.player,d=c.options(),e=d.params,f=e._info,g=e.new_info_domain,h=e.site,i=b.info_domain;"tuoitre"===h?i="https://p1micro.tuoitre.vn/v1/video-api/info/":g||/autopro/.test(document.baseURI)?i=protocol+"//p1.cnnd.vn/v1/video-api/info/":/channelvn/.test(document.baseURI)&&(i="https://mic3.channelvn.net/v1/video-api/info/");var j=f?i+f:null;return _extends({},b,{info_url:j})}}]),createClass(b,[{key:"_getMediaInfo",value:function(){var a=this,b=this.props.player,c=b.options().info||{};this.getNewInfo().catch(function(){return null}).then(function(b){return b?b:a.getOldInfo()}).then(function(a){a&&(b.mediaInfo=videojs.mergeOptions(b.mediaInfo,a),b.mediaInfo=videojs.mergeOptions(b.mediaInfo,c),b.trigger("updateMediaInfo"))}).catch(function(){})}},{key:"getOldInfo",value:function(){var a=this.props.info_url;return new Promise(function(b,c){return a?void jsonp(a,{},function(a,d){d?b(d):c(a)}):void b(null)})}},{key:"getNewInfo",value:function(){var a=this.props.player,b=a.options().params.vid;return new Promise(function(a,c){if(!b)return void a(null);var d=b.replace(/^\w*\//,""),e=b.replace(/\/.*/,""),f=protocol+"//api.kinghub.vn/video/api/v1/detailVideoByGet?FileName="+d+"&np="+e;videojs.xhr.get(f,function(b,d,e){if(200===d.statusCode&&"string"==typeof e)try{if(e=JSON.parse(e),"object"===("undefined"==typeof e?"undefined":_typeof(e)))return a(e);c(e)}catch(a){c(a)}else c(b)})})}}]),b}(Plugin),_class$5.defaultProps={info_domain:"//vscc-hosting.mediacdn.vn/json/"},_temp$3),_class$6,_temp$4,protocol$1="http:"===location.protocol?"http:":"https:",VideoSourcePlugin=(_temp$4=_class$6=function(a){function b(a){classCallCheck(this,b);var c=possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));c._parserVideoSource=c._parserVideoSource.bind(c);var d=a.player,e=d.options(),f=e.params,g=f.live,h=f.m3u8,i=f.vid,j=f.dash,k=f.file,l=f.mp4,m=f.sources;return m?(c._getVideoSourceWithSourceConfig(),possibleConstructorReturn(c)):k||l?(c._getVideoSourceWithFile(),possibleConstructorReturn(c)):g||h?(c._getVideoSourceWithLive(),possibleConstructorReturn(c)):j?(c._getVideoSourceWithDash(),possibleConstructorReturn(c)):i?(c._getVideoSourceWithVid(i),possibleConstructorReturn(c)):(d.one("ready",function(){d.trigger(event$1.PLAYER_ERROR,error.ERROR_101)}),c)}return inherits(b,a),createClass(b,[{key:"_parserVideoSource",value:function(a){var b=this.state.rq_time_start,c=this.props,d=c.bandwidths,e=c.player,f=new Date,g=f.getTime(),h=[],i=[],j=[],k=[],l=[],m=[],n=[],o=36*a.length*1024/(g-b);if(a=JSON.parse(a),a.hls&&a.hls.indexOf(".m3u8")!==-1&&h.push({src:a.hls,type:"application/x-mpegURL"}),a.mpd&&a.mpd.indexOf(".mpd")!==-1&&n.push({src:a.mpd,type:"application/dash+xml"}),a.mhls&&a.hls.indexOf(".m3u8")!==-1&&i.push({src:a.mhls,type:"application/x-mpegURL"}),a.mp4&&/\.mp4/i.test(a.mp4)&&l.push({src:a.mp4,type:"video/mp4"}),a.html5&&0!==a.html5.length){a.html5.sort(function(a,b){try{var c=parseInt(a.match(/_(\d*)p\.(mp4)$/i)[1]),d=parseInt(b.match(/_(\d*)p\.(mp4)$/i)[1]);return"undefined"==typeof c?-1:c-d}catch(a){return-1}});for(var p=0;p<a.html5.length;p++)try{var q=parseInt(a.html5[p].match(/_(\d*)p\.(mp4)$/i)[1]),r={src:a.html5[p],type:"video/mp4","data-res":q};m.push(q),q<=360?(j.unshift(r),k.unshift(r)):d[q]<o?j.unshift(r):j.push(r)}catch(a){}}var s=h.concat(j);"function"==typeof(window.MediaSource||window.WebKitMediaSource)&&n.length&&window.dashjs&&(s=n.concat(j));var t=e.options(),u=t.agent;u.isSafari&&(s=h.concat(j));var v={full:s,hls:h,mhls:i,html5:j,mhtml5:k,mfull:i.concat(k),mp4:l,thumb_url:a.thumb_url,BANDWIDTH:o,qualities:m};if(0===v.full.length&&!v.mp4)throw new Error("video chưa convert");e.sources_=v,e.trigger(event.UPDATE_VIDEO_SOURCE,v)}},{key:"_getVideoSourceWithVid",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,d=this.props,e=d.video_source_domain,f=d.get_source_timeout,g=d.player,h=new Date,i=h.getTime();/^tuoitre/.test(a)&&(e="hls.tuoitre.vn");var j=protocol$1+"//"+e+"/"+a+".json?r="+i;this.setState({rq_time_start:i}),promiseXhr({uri:j,method:"GET",get_source_timeout:f},b,c).then(this._parserVideoSource).catch(function(){g.trigger(event$1.PLAYER_ERROR,error.ERROR_100)})}},{key:"_getVideoSourceWithSourceConfig",value:function(){var a=this.props.player,b=a.options(),c=b.params,d=c.sources;d=d.sort(function(a,b){return a.type.length-b.type.length});var e={full:d,hls:[],mhls:[],html5:[],mhtml5:[],mfull:d};a.sources_=e,a.trigger(event.UPDATE_VIDEO_SOURCE,e)}},{key:"_getVideoSourceWithFile",value:function(){var a=this.props.player,b=[],c=a.options(),d=c.params,e=d.file,f=d.mp4,g=f||e,h=g.indexOf("?")!==-1?"&":"?";getSecureExpire(g).then(function(c){g+=""+h+c,b.push({src:decodeURIComponent(g)});var d={full:b,hls:[],mhls:[],html5:b,mhtml5:b,mfull:b};a.sources_=d,a.trigger(event.UPDATE_VIDEO_SOURCE,d)})}},{key:"_getVideoSourceWithLive",value:function(){var a=this.props.player,b=[],c=a.options(),d=c.params,e=d.m3u8,f=d.live,g=e;!g&&f||b.push({src:decodeURIComponent(g),type:"application/x-mpegURL"});var h={full:b,hls:b,mhls:b,html5:[],mhtml5:[],mfull:b};a.sources_=h,a.trigger(event.UPDATE_VIDEO_SOURCE,h)}},{key:"_getVideoSourceWithDash",value:function(){var a=this.props.player,b=a.options(),c=b.params,d=c.dash,e=[];e.push({src:decodeURIComponent(d),type:"application/dash+xml"});var f={full:e,hls:[],mhls:[],html5:[],mhtml5:[],mfull:e};a.sources_=f,a.trigger(event.UPDATE_VIDEO_SOURCE,f)}}]),b}(Plugin),_class$6.defaultProps={video_source_domain:"hls.mediacdn.vn",get_source_timeout:5e3,bandwidths:{144:16e4,240:213333,360:506666,480:1e6,720:1693333}},_temp$4),_class$7,_temp$5,protocol$2="http:"===location.protocol?"http:":"https:",MPSVideoSourcePlugin=(_temp$5=_class$7=function(a){function b(a){classCallCheck(this,b);var c=possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a)),d=c.props.player,e=d.options(),f=e.params,g=e.info;return c._getMediaInfo=c._getMediaInfo.bind(c),d.mediaInfo={},d.mediaInfo=videojs.mergeOptions(d.mediaInfo,agent,f),d.mediaInfo=videojs.mergeOptions(d.mediaInfo,g),d.one("updateNamespace",c._getMediaInfo),c}return inherits(b,a),createClass(b,[{key:"getDefaultProps",value:function(a){var b=this.constructor.defaultProps,c=a.player,d=c.options(),e=d.params,f=e._info,g=e.new_info_domain,h=e.site,i=b.info_domain;"tuoitre"===h?i="https://p1micro.tuoitre.vn/v1/video-api/info/":g||/autopro/.test(document.baseURI)?i=protocol$2+"//p1.cnnd.vn/v1/video-api/info/":/channelvn/.test(document.baseURI)&&(i="https://mic3.channelvn.net/v1/video-api/info/");var j=f?i+f:null;return _extends({},b,{info_url:j})}}]),createClass(b,[{key:"_getMediaInfo",value:function(a,b){var c=this,d=this.props.player,e=d.options().info||{};this.getNewInfo(b).catch(function(){return null}).then(function(a){return a?a:c.getOldInfo()}).then(function(a){a&&(d.mediaInfo=videojs.mergeOptions(d.mediaInfo,a),d.mediaInfo=videojs.mergeOptions(d.mediaInfo,e),d.trigger("updateMediaInfo"))}).catch(function(){})}},{key:"getOldInfo",value:function(){var a=this.props.info_url;return new Promise(function(b,c){return a?void jsonp(a,{},function(a,d){d?b(d):c(a)}):void b(null)})}},{key:"getNewInfo",value:function(a){var b=this.props.player,c=b.options().params.vid;return new Promise(function(b,d){if(!c)return void b(null);var e=c.substring(c.indexOf("/")+1),f=protocol$2+"//api.kinghub.vn/video/api/v1/detailVideoByGet?FileName="+e+"&np="+a;videojs.xhr.get(f,function(a,c,e){if(200===c.statusCode&&"string"==typeof e)try{if(e=JSON.parse(e),"object"===("undefined"==typeof e?"undefined":_typeof(e)))return b(e);d(e)}catch(a){d(a)}else d(a)})})}}]),b}(Plugin),_class$7.defaultProps={info_domain:"//vscc-hosting.mediacdn.vn/json/"},_temp$5),_class$8,_temp$6,protocol$3="http:"===location.protocol?"http:":"https:",MPSVideoSourcePlugin$1=(_temp$6=_class$8=function(a){function b(a){classCallCheck(this,b);var c=possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));c.retrySourceWithVid=0,c._parserVideoSource=c._parserVideoSource.bind(c);var d=a.player,e=d.options(),f=e.params,g=f.live,h=f.m3u8,i=f.vid,j=f.dash,k=f.file,l=f.mp4,m=f.sources;return m?(c._getVideoSourceWithSourceConfig(),possibleConstructorReturn(c)):k||l?(c._getVideoSourceWithFile(),possibleConstructorReturn(c)):g||h?(c._getVideoSourceWithLive(),possibleConstructorReturn(c)):j?(c._getVideoSourceWithDash(),possibleConstructorReturn(c)):i?(c._getVideoSourceWithVid(i),possibleConstructorReturn(c)):(d.one("ready",function(){d.trigger(event$1.PLAYER_ERROR,error.ERROR_101)}),c)}return inherits(b,a),createClass(b,[{key:"_parserVideoSource",value:function(a){var b=this.state.rq_time_start,c=this.props,d=c.bandwidths,e=c.player,f=new Date,g=f.getTime(),h=[],i=[],j=[],k=[],l=[],m=[],n=[],o=36*a.length*1024/(g-b);if(a=JSON.parse(a),e.trigger("updateNamespace",a.namespace),a.mpd&&a.mpd.indexOf(".mpd")!==-1&&n.push({src:a.mpd,type:"application/dash+xml"}),a.hls&&a.hls.indexOf(".m3u8")!==-1&&h.push({src:a.hls,type:"application/x-mpegURL"}),a.mhls&&a.hls.indexOf(".m3u8")!==-1&&i.push({src:a.mhls,type:"application/x-mpegURL"}),a.video&&/\.mp4/i.test(a.video)&&l.push({src:a.video,type:"video/mp4"}),a.html5&&0!==a.html5.length){a.html5.sort(function(a,b){try{var c=parseInt(a.match(/_(\d*)p\.(mp4)$/i)[1]),d=parseInt(b.match(/_(\d*)p\.(mp4)$/i)[1]);return"undefined"==typeof c?-1:c-d}catch(a){return-1}});for(var p=0;p<a.html5.length;p++)try{var q=parseInt(a.html5[p].match(/_(\d*)p\.(mp4)$/i)[1]),r={src:a.html5[p],type:"video/mp4","data-res":q};m.push(q),q<=360?(j.unshift(r),k.unshift(r)):d[q]<o?j.unshift(r):j.push(r)}catch(a){}}var s=h.concat(j);"function"==typeof(window.MediaSource||window.WebKitMediaSource)&&n.length&&window.dashjs&&(s=n.concat(j));var t=e.options(),u=t.agent;u.isSafari&&(s=h.concat(j));var v={full:s,hls:h,mhls:i,html5:j,mhtml5:k,mfull:i.concat(k),mp4:l,thumb_url:a.thumb_url,BANDWIDTH:o,qualities:m};if(0===v.full.length&&!v.mp4)throw new Error("video chưa convert");e.sources_=v,e.trigger(event.UPDATE_VIDEO_SOURCE,v)}},{key:"_getVideoSourceWithVid",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,d=this,e=this.props,f=e.get_source_timeout,g=e.player,h="",i=new Date,j=i.getTime(),k=protocol$3+"//"+h+a+".json?r="+j;return this.setState({rq_time_start:j}),3===d.retrySourceWithVid?void g.trigger(event$1.PLAYER_ERROR,error.ERROR_100):void promiseXhr({uri:k,method:"GET",get_source_timeout:f},b,c).then(this._parserVideoSource).catch(function(){++d.retrySourceWithVid,window.setTimeout(function(){d._getVideoSourceWithVid(a)},2e3)})}},{key:"_getVideoSourceWithSourceConfig",value:function(){var a=this.props.player,b=a.options(),c=b.params,d=c.sources,e={full:d,hls:[],mhls:[],html5:[],mhtml5:[],mfull:d};a.sources_=e,a.trigger(event.UPDATE_VIDEO_SOURCE,e)}},{key:"_getVideoSourceWithFile",value:function(){var a=this.props.player,b=[],c=a.options(),d=c.params,e=d.file,f=d.mp4,g=f||e;b.push({src:decodeURIComponent(g)});var h={full:b,hls:[],mhls:[],html5:b,mhtml5:b,mfull:b};a.sources_=h,a.trigger(event.UPDATE_VIDEO_SOURCE,h)}},{key:"_getVideoSourceWithLive",value:function(){var a=this.props.player,b=[],c=a.options(),d=c.params,e=d.m3u8,f=d.live,g=e;!g&&f||b.push({src:decodeURIComponent(g),type:"application/x-mpegURL"});var h={full:b,hls:b,mhls:b,html5:[],mhtml5:[],mfull:b};a.sources_=h,a.trigger(event.UPDATE_VIDEO_SOURCE,h)}},{key:"_getVideoSourceWithDash",value:function(){var a=this.props.player,b=a.options(),c=b.params,d=c.dash,e=[];e.push({src:decodeURIComponent(d),type:"application/dash+xml"});var f={full:e,hls:[],mhls:[],html5:[],mhtml5:[],mfull:e};a.sources_=f,a.trigger(event.UPDATE_VIDEO_SOURCE,f)}}]),b}(Plugin),_class$8.defaultProps={video_source_domain:"hls.mediacdn.vn",get_source_timeout:5e3,bandwidths:{144:16e4,240:213333,360:506666,480:1e6,720:1693333}},_temp$6),_class$9,InitSourcePlugin=(_class$9=function(a){function b(a){classCallCheck(this,b);var c=possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));c.state={inited:!1,fillstate:"FILL_COMPLETED"};var d=c.props.player;return d.one(event.UPDATE_VIDEO_SOURCE,c._handleUpdateVideoSource),d.one(event.FILL_PLAY_FILLING,c._handleFillPlayFilling),d.one(event.FILL_PLAY_COMPLETE,c._handleFillPlayComplete),c}return inherits(b,a),createClass(b,[{key:"_handleUpdateVideoSource",value:function(a,b){this.setState({sources:b}),this._initSource()}},{key:"_handleFillPlayFilling",value:function(){this.setState({fillstate:"FILLING"}),this._initSource()}},{key:"_handleFillPlayComplete",value:function(){this.setState({fillstate:"FILL_COMPLETED"}),this._initSource()}},{key:"_initSourceMobile",value:function(){var a=this.props.player,b=this.state.sources;if(!agent.isMobile)return!1;var c,d=b.mfull,e=b.mhtml5,f=a.options(),g=f.params;return c=d,g.hlsjs===!1&&(c=e),!(!c||0===c.length)&&(a.src(c),!0)}},{key:"_initSourcePC",value:function(){var a=this.props.player,b=this.state.sources;if(agent.isMobile)return!1;var c,d=b.full,e=b.html5,f=a.options(),g=f.params;return c=d,g.hlsjs===!1&&(c=e),!(!c||0===c.length)&&(a.src(c),!0)}},{key:"_initSourceMp4",value:function(){var a=this.props.player,b=this.state.sources,c=b.mp4;return!(!c||0===c.length)&&(a.src(c),!0)}},{key:"_initSource",value:function(){var a=this.state,b=a.sources,c=a.inited;c||b&&(c=this._initSourceMobile()||this._initSourcePC()||this._initSourceMp4(),this.setState({inited:c}))}}]),b}(Plugin),_applyDecoratedDescriptor$2(_class$9.prototype,"_handleUpdateVideoSource",[autobind],Object.getOwnPropertyDescriptor(_class$9.prototype,"_handleUpdateVideoSource"),_class$9.prototype),_applyDecoratedDescriptor$2(_class$9.prototype,"_handleFillPlayFilling",[autobind],Object.getOwnPropertyDescriptor(_class$9.prototype,"_handleFillPlayFilling"),_class$9.prototype),_applyDecoratedDescriptor$2(_class$9.prototype,"_handleFillPlayComplete",[autobind],Object.getOwnPropertyDescriptor(_class$9.prototype,"_handleFillPlayComplete"),_class$9.prototype),_class$9),playername$2="ThanhNienPlayer",e1=new Uint8Array([104,108,115,84,101,99,104,73,110,105,116]),e1d=browser(e1),e2=new Uint8Array([104,108,115,75,101,121,76,111,97,100,101,100]);e2=new Uint8Array(e2);var e2d=browser(e2),frag=new Uint8Array([102,114,97,103]),fragd=browser(frag),decryptdata=new Uint8Array([100,101,99,114,121,112,116,100,97,116,97]),decryptdatad=browser(decryptdata),key=new Uint8Array([107,101,121]),keyd=browser(key),_uri=new Uint8Array([95,117,114,105]),_urid=browser(_uri),dm=new Uint8Array([107,109,115,46,115,111,104,97,116,118,46,118,110,124,108,111,99,97,108,104,111,115,116,124,49,48,46,53]),dmd=browser(dm),re=new RegExp(dmd),ccc=26,attachPlugin=function(){var a=this,b=!1;attachDefaultPlugin(a),a.initVideo=function(c){a.options_.params=videojs.mergeOptions(a.options_.params,c),a.mediaInfo={};var d=a.options().params.vid;if(["BetaThanhnienPlayer","ThanhNienPlayer"].indexOf(playername$2)>=0&Boolean(d)&&(d=decodeURIComponent(d),a.options().params.vid=d=d.replace("thanhnien/","thanhnien.mediacdn.vn/")),d){d=decodeURIComponent(d);var e=d.replace(/\/.*/,"");b=e.indexOf(".")>=0}new AdsPlugin({player:a}),a.options().params.mps||b?(a.options().params.vidMps=!0,new MPSVideoSourcePlugin({player:a}),new InitSourcePlugin({player:a}),new MPSVideoSourcePlugin$1({player:a})):(new MediaInfoPlugin({player:a}),new InitSourcePlugin({player:a}),new VideoSourcePlugin({player:a}))},a.initVideo(),a.on(e1d,function(a,b){b.on(e2d,function(a,b){var c=b[fragd];if(re.test(c[decryptdatad][_urid])){var d=browser(new Uint8Array(c[decryptdatad][keyd])),e=reverse(d);e=e.substring(ccc),c[decryptdatad][keyd]=new Uint8Array(stringToArrayBuffer(e))}})})};videojs.registerPlugin("attachPlugin",attachPlugin);var isObject_1=isObject$2,funcTag="[object Function]",objectProto$1=Object.prototype,objToString=objectProto$1.toString,isFunction_1=isFunction$2,isHostObject=function(){try{}catch(a){return function(){return!1};
}return function(a){return"function"!=typeof a.toString&&"string"==typeof(a+"")}}(),isHostObject_1=isHostObject,isObjectLike_1=isObjectLike,reIsHostCtor=/^\[object .+?Constructor\]$/,objectProto=Object.prototype,fnToString=Function.prototype.toString,hasOwnProperty=objectProto.hasOwnProperty,reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),isNative_1=isNative,getNative_1=getNative,nativeNow=getNative_1(Date,"now"),now=nativeNow||function(){return(new Date).getTime()},now_1=now,FUNC_ERROR_TEXT$1="Expected a function",nativeMax=Math.max,debounce_1=debounce,FUNC_ERROR_TEXT="Expected a function",throttle_1=throttle,lib$1=createCommonjsModule(function(a,b){function c(a){var b={};for(var c in a)a.hasOwnProperty(c)&&d[c]&&(b[c]=a[c]);return b}Object.defineProperty(b,"__esModule",{value:!0}),b.default=c;var d={abbr:"abbr",accept:"accept",acceptCharset:"accept-charset",accessKey:"accesskey",action:"action",allowFullScreen:"allowfullscreen",allowTransparency:"allowtransparency",alt:"alt",async:"async",autoComplete:"autocomplete",autoFocus:"autofocus",autoPlay:"autoplay",cellPadding:"cellpadding",cellSpacing:"cellspacing",challenge:"challenge",charset:"charset",checked:"checked",cite:"cite",class:"class",className:"class",cols:"cols",colSpan:"colspan",command:"command",content:"content",contentEditable:"contenteditable",contextMenu:"contextmenu",controls:"controls",coords:"coords",crossOrigin:"crossorigin",data:"data",dateTime:"datetime",default:"default",defer:"defer",dir:"dir",disabled:"disabled",download:"download",draggable:"draggable",dropzone:"dropzone",encType:"enctype",for:"for",form:"form",formAction:"formaction",formEncType:"formenctype",formMethod:"formmethod",formNoValidate:"formnovalidate",formTarget:"formtarget",frameBorder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hrefLang:"hreflang",htmlFor:"for",httpEquiv:"http-equiv",icon:"icon",id:"id",inputMode:"inputmode",isMap:"ismap",itemId:"itemid",itemProp:"itemprop",itemRef:"itemref",itemScope:"itemscope",itemType:"itemtype",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",manifest:"manifest",max:"max",maxLength:"maxlength",media:"media",mediaGroup:"mediagroup",method:"method",min:"min",minLength:"minlength",multiple:"multiple",muted:"muted",name:"name",noValidate:"novalidate",open:"open",optimum:"optimum",pattern:"pattern",ping:"ping",placeholder:"placeholder",poster:"poster",preload:"preload",radioGroup:"radiogroup",readOnly:"readonly",rel:"rel",required:"required",role:"role",rows:"rows",rowSpan:"rowspan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",sortable:"sortable",span:"span",spellCheck:"spellcheck",src:"src",srcDoc:"srcdoc",srcSet:"srcset",start:"start",step:"step",style:"style",tabIndex:"tabindex",target:"target",title:"title",translate:"translate",type:"type",typeMustMatch:"typemustmatch",useMap:"usemap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",onCopy:"onCopy",onCut:"onCut",onPaste:"onPaste",onLoad:"onLoad",onError:"onError",onWheel:"onWheel",onScroll:"onScroll",onCompositionEnd:"onCompositionEnd",onCompositionStart:"onCompositionStart",onCompositionUpdate:"onCompositionUpdate",onKeyDown:"onKeyDown",onKeyPress:"onKeyPress",onKeyUp:"onKeyUp",onFocus:"onFocus",onBlur:"onBlur",onChange:"onChange",onInput:"onInput",onSubmit:"onSubmit",onClick:"onClick",onContextMenu:"onContextMenu",onDoubleClick:"onDoubleClick",onDrag:"onDrag",onDragEnd:"onDragEnd",onDragEnter:"onDragEnter",onDragExit:"onDragExit",onDragLeave:"onDragLeave",onDragOver:"onDragOver",onDragStart:"onDragStart",onDrop:"onDrop",onMouseDown:"onMouseDown",onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onMouseMove:"onMouseMove",onMouseOut:"onMouseOut",onMouseOver:"onMouseOver",onMouseUp:"onMouseUp",onSelect:"onSelect",onTouchCancel:"onTouchCancel",onTouchEnd:"onTouchEnd",onTouchMove:"onTouchMove",onTouchStart:"onTouchStart",onAnimationStart:"onAnimationStart",onAnimationEnd:"onAnimationEnd",onAnimationIteration:"onAnimationIteration",onTransitionEnd:"onTransitionEnd"}}),filterReactDomProps=unwrapExports(lib$1),_class$12,_temp2$1,PlayerComponent=(_temp2$1=_class$12=function(a){function b(){var a,c,d,e;classCallCheck(this,b);for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];return c=d=possibleConstructorReturn(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(g))),d.state={children:d.props.children||[]},e=c,possibleConstructorReturn(d,e)}return inherits(b,a),createClass(b,[{key:"addChild",value:function(a,b){var c=this.state.children||[];b=b||this.state.children.length,b==-1?c.unshift(a):c.splice(b,0,a),this.setState({children:[].concat(toConsumableArray(c))})}},{key:"renderEl",value:function(){var a=this.props.tag;return React__default.createElement(a,null)}},{key:"render",value:function(){var a=this.renderEl();if(!a)return null;var b=this.state.children,c={};return a.ref&&(c={ref:a.ref.bind(this)}),React__default.createElement(a.type,_extends({},filterReactDomProps(this.props),a.props,c),a.props.children,b)}}],[{key:"registerSkinComponent",value:function(a,b){return React.Component.components_||(React.Component.components_={}),a=toTitleCase(a),React.Component.components_[a]=b,b}},{key:"getSkinComponent",value:function(a){if(a)return a=toTitleCase(a),React.Component.components_&&React.Component.components_[a]?React.Component.components_[a]:void 0}}]),b}(React.Component),_class$12.defaultProps={tag:"div"},_temp2$1);PlayerComponent.registerSkinComponent("component",PlayerComponent);var hasOwnProperty$1=Object.prototype.hasOwnProperty,shallowEqual_1=shallowEqual,pureRenderDecorator_1=pureRenderDecorator,_class$13,_class2$1,_class3,_temp$8,playername$4="ThanhNienPlayer",tapMovementThreshold=50,swipeTimeThreshold=300,Overlay=pureRenderDecorator_1((_temp$8=_class3=function(a){function b(a){classCallCheck(this,b);var c=possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));c.state={playing:null},c.touchState={firstTouchActive:!1,firstTouch:null,touchStart:0,couldBeTap:!1,xdiff:0,ydiff:0,touchDistance:0,moveType:null,firstMoveType:null},c.scrubbingProgress={},c.scrubbingVolume={};var d=a.player,e=d.options(),f=e.agent;return c.isMobile=f.isMobile,c.activePlayer=throttle_1(d.userActive.bind(d),300),c}return inherits(b,a),createClass(b,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"handleTap",value:function(){}},{key:"handleClick",value:function(){var a=this.props.player,b=this;clearTimeout(b.clearTimeout),this.setState({playing:null}),a.paused()?(a.play(),this.timeoutPlay=setTimeout(function(){b.setState({playing:!0}),b.clearTimeout=setTimeout(function(){b.setState({playing:null})},350)},10)):(a.pause(),this.timeoutPause=setTimeout(function(){b.setState({playing:!1}),b.clearTimeout=setTimeout(function(){b.setState({playing:null})},350)},10)),this.hasClick&&this.handleDbClick(),clearTimeout(this.hasClickTimeout),this.hasClick=!0,this.hasClickTimeout=setTimeout(function(){b.hasClick=!1},400)}},{key:"handleDbClick",value:function(){var a=this.props.player;clearTimeout(this.timeoutPlay),clearTimeout(this.timeoutPause),a.isFullscreen()?a.exitFullscreen():a.requestFullscreen()}},{key:"handleKeyDown",value:function(){this.handleClick()}},{key:"className",value:function a(){var a=this.props.className,b=this.state.playing,c=[a,playername$4+"-overlay"];return b===!1?c.push("playing"):b===!0?c.push("paused"):c.push("clear"),c.join(" ")}},{key:"handleTouchStart",value:function(a){var b=this.props.player;this.touchState.firstTouchActive=!!b.isFullscreen()||b.userActive(),this.touchState.touchDistance=0,1===a.touches.length&&(this.touchState.firstTouch={pageX:a.touches[0].pageX,pageY:a.touches[0].pageY},this.touchState.touchStart=(new Date).getTime(),this.touchState.couldBeTap=!0)}},{key:"handleTouchMove",value:function(a){if(this.touchState.firstTouchActive)if(this.activePlayer(!0),a.preventDefault(),a.touches.length>1)this.touchState.couldBeTap=!1;else if(this.touchState.firstTouch){var b=this.touchState.xdiff=a.touches[0].pageX-this.touchState.firstTouch.pageX,c=this.touchState.ydiff=a.touches[0].pageY-this.touchState.firstTouch.pageY;this.touchState.touchDistance=Math.sqrt(b*b+c*c);var d=this.touchState.swipeDiff=Math.abs(b/c),e=void 0;e=d>1?"horizotial":"vertical",this.touchState.firstMoveType||(this.touchState.firstMoveType=e),this.touchState.moveType=e;var f=(new Date).getTime()-this.touchState.touchStart;f>swipeTimeThreshold&&(this.touchState.panstart?this.handlePan("pan",{moveType:this.touchState.firstMoveType,xdiff:b,ydiff:c}):(this.touchState.panstart=!0,this.handlePan("panstart",{moveType:this.touchState.firstMoveType,xdiff:b,ydiff:c})))}}},{key:"resetTouchState",value:function(){this.touchState={firstTouchActive:!1,firstTouch:null,touchStart:0,couldBeTap:!1,panstart:!1}}},{key:"handleTouchEnd",value:function(a){if(this.touchState.firstTouchActive){var b=(new Date).getTime()-this.touchState.touchStart;if(b>swipeTimeThreshold)return this.handlePan("panstop",{moveType:this.touchState.firstMoveType,xdiff:this.touchState.xdiff,ydiff:this.touchState.ydiff}),this.resetTouchState();if(this.touchState.touchDistance<tapMovementThreshold&&this.touchState.couldBeTap)return this.handleClick();a.preventDefault(),this.handleSwipe()}}},{key:"handldeScrubbingProgress",value:function(a,b){var c=b.xdiff,d=this.props.player,e=d.el().clientWidth,f=void 0,g=d.duration();switch(a){case"panstart":this.scrubbingProgress.isPlaying=!d.paused(),d.pause(),this.scrubbingProgress.currentTime=d.currentTime();break;case"pan":f=(this.scrubbingProgress.currentTime+c/e*g).toFixed(2),f=f>g?g:f,d.trigger(event$1.USER_PAN_PROGRESS,{time:f,percent:(f/g).toFixed(2)});break;case"panstop":f=(this.scrubbingProgress.currentTime+c/e*g).toFixed(2),f=f>g?g:f,d.currentTime(f),this.scrubbingProgress.isPlaying&&d.play()}}},{key:"handldeScrubbingVolume",value:function(a,b){var c=b.ydiff,d=this.props.player,e=d.el().clientHeight/2;switch(a){case"panstart":this.scrubbingVolume.volume=d.volume();break;case"pan":var f=this.scrubbingVolume.volume-c/e;d.volume(f)}}},{key:"handlePan",value:function(a,b){log.trace("handlePan",a,b),"horizotial"===b.moveType?this.handldeScrubbingProgress(a,b):this.handldeScrubbingVolume(a,b)}},{key:"handleSwipe",value:function(){log.trace("handleSwipe");var a=this.props.player,b=this.touchState,c=b.xdiff,d=b.ydiff,e=b.swipeDiff,f=a.currentTime(),g=a.volume();e>1?c>0?a.currentTime(f+30):a.currentTime(f-30):d>0?a.volume(g-.1):a.volume(g+.1)}},{key:"render",value:function(){var a=this.className(),b=void 0;return b=this.isMobile?{onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd}:{onClick:this.handleClick},React__default.createElement("div",_extends({className:a},b),React__default.createElement("button",{className:"overlay-pause"}),React__default.createElement("button",{className:"overlay-play"}),React__default.createElement("div",{className:"overlay-shadow"}))}}]),b}(React.Component),_class3.defaultProps={className:""},_class2$1=_temp$8,_applyDecoratedDescriptor$4(_class2$1.prototype,"handleClick",[autobind],Object.getOwnPropertyDescriptor(_class2$1.prototype,"handleClick"),_class2$1.prototype),_applyDecoratedDescriptor$4(_class2$1.prototype,"handleTouchStart",[autobind],Object.getOwnPropertyDescriptor(_class2$1.prototype,"handleTouchStart"),_class2$1.prototype),_applyDecoratedDescriptor$4(_class2$1.prototype,"handleTouchMove",[autobind],Object.getOwnPropertyDescriptor(_class2$1.prototype,"handleTouchMove"),_class2$1.prototype),_applyDecoratedDescriptor$4(_class2$1.prototype,"handleTouchEnd",[autobind],Object.getOwnPropertyDescriptor(_class2$1.prototype,"handleTouchEnd"),_class2$1.prototype),_class$13=_class2$1))||_class$13,_class$15,_class2$3,_class3$2,_temp2$3,playername$5="ThanhNienPlayer",PlayToggle=pureRenderDecorator_1((_temp2$3=_class3$2=function(a){function b(){var a,c,d,e;classCallCheck(this,b);for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];return c=d=possibleConstructorReturn(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(g))),d.state={is_playing:!1},e=c,possibleConstructorReturn(d,e)}return inherits(b,a),createClass(b,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){var a=this.props.player;a.on("pause",this.handlePause),a.on("play",this.handlePlay),a.one("timeupdate",this.handlePlay),a.on("ended",this.handleEnded)}},{key:"componentWillUnmount",value:function(){var a=this.props.player;a.off("pause",this.handlePause),a.off("play",this.handlePlay),a.off("ended",this.handleEnded)}},{key:"handlePause",value:function(){this.setState({is_playing:!1})}},{key:"handlePlay",value:function(){this.setState({is_playing:!0})}},{key:"handleEnded",value:function(){this.setState({is_playing:!1})}},{key:"handleClick",value:function(a){a.preventDefault();var b=this.props.player;b.paused()?b.play():b.pause()}},{key:"className",value:function a(){var a=this.props.className,b=[playername$5+"-control "+a+" "+playername$5+"-button play-control"],c=this.state.is_playing;return c&&b.push("playing"),b.join(" ")}},{key:"render",value:function(){var a=this.className(),b=this.props.id;return React__default.createElement("button",{id:b,className:a,onClick:this.handleClick})}}]),b}(React.Component),_class3$2.defaultProps={className:""},_class2$3=_temp2$3,_applyDecoratedDescriptor$6(_class2$3.prototype,"handlePause",[autobind],Object.getOwnPropertyDescriptor(_class2$3.prototype,"handlePause"),_class2$3.prototype),_applyDecoratedDescriptor$6(_class2$3.prototype,"handlePlay",[autobind],Object.getOwnPropertyDescriptor(_class2$3.prototype,"handlePlay"),_class2$3.prototype),_applyDecoratedDescriptor$6(_class2$3.prototype,"handleEnded",[autobind],Object.getOwnPropertyDescriptor(_class2$3.prototype,"handleEnded"),_class2$3.prototype),_applyDecoratedDescriptor$6(_class2$3.prototype,"handleClick",[autobind],Object.getOwnPropertyDescriptor(_class2$3.prototype,"handleClick"),_class2$3.prototype),_class$15=_class2$3))||_class$15,_class$16,_class2$4,_temp2$4,playername$6="ThanhNienPlayer",CurrentTime=(_temp2$4=_class2$4=function(a){function b(){var a,c,d,e;classCallCheck(this,b);for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];return c=d=possibleConstructorReturn(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(g))),d.state={current_time:"0:00"},e=c,possibleConstructorReturn(d,e)}return inherits(b,a),createClass(b,[{key:"componentDidMount",value:function(){var a=this.props.player;a.on("timeupdate",this.updateContent),a.on(event$1.USER_PAN_PROGRESS,this.handlePanProgress)}},{key:"componentWillUnmount",value:function(){var a=this.props.player;a.off("timeupdate",this.updateContent),a.off(event$1.USER_PAN_PROGRESS,this.handlePanProgress)}},{key:"updateContent",value:function(){var a=this.props.player;if(!a.adSystem&&a.duration()){var b=formatTime(a.currentTime());this.setState({current_time:b})}}},{key:"handlePanProgress",value:function(a,b){var c=b.time,d=formatTime(c);this.setState({current_time:d})}},{key:"renderEl",value:function(){var a=this.state.current_time,b=this.props,c=b.player,d=b.className,e=!!c.options().params.live||c.tech_.isLive();return e?null:React__default.createElement("div",{className:playername$6+"-control time-control current-time "+d},React__default.createElement("div",{className:"current-time-display"},React__default.createElement("span",{className:"control-text"},"Current Time"),""+a))}}]),b}(PlayerComponent),_class2$4.defaultProps={className:""},_class$16=_temp2$4,_applyDecoratedDescriptor$7(_class$16.prototype,"updateContent",[autobind],Object.getOwnPropertyDescriptor(_class$16.prototype,"updateContent"),_class$16.prototype),_applyDecoratedDescriptor$7(_class$16.prototype,"handlePanProgress",[autobind],Object.getOwnPropertyDescriptor(_class$16.prototype,"handlePanProgress"),_class$16.prototype),_class$16),_class$17,playername$7="ThanhNienPlayer",TimeDivider=(_class$17=function(a){function b(){var a,c,d,e;classCallCheck(this,b);for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];return c=d=possibleConstructorReturn(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(g))),d.state={isLive:!1},e=c,possibleConstructorReturn(d,e)}return inherits(b,a),createClass(b,[{key:"componentDidMount",value:function(){var a=this.props.player;a.on("durationchange",this.handleDurationChange)}},{key:"componentWillUnmount",value:function(){var a=this.props.player;a.off("durationchange",this.handleDurationChange)}},{key:"handleDurationChange",value:function(){var a=this.props.player,b=a.tech_.isLive();this.setState({isLive:b})}},{key:"renderEl",value:function(){var a=this.props.player,b=this.state.isLive;return b=!!a.options().params.live||b,b?null:React__default.createElement("div",{className:playername$7+"-control time-control time-divider"},React__default.createElement("div",null,"/"))}}]),b}(PlayerComponent),_applyDecoratedDescriptor$8(_class$17.prototype,"handleDurationChange",[autobind],Object.getOwnPropertyDescriptor(_class$17.prototype,"handleDurationChange"),_class$17.prototype),_class$17),_class$18,playername$8="ThanhNienPlayer",Duration=(_class$18=function(a){function b(){var a,c,d,e;classCallCheck(this,b);for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];return c=d=possibleConstructorReturn(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(g))),d.state={duration:"0:00"},e=c,possibleConstructorReturn(d,e)}return inherits(b,a),createClass(b,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){var a=this.props.player;a.on("timeupdate",this.updateContent),a.on("loadedmetadata",this.updateContent),a.on("updatedurationdvr",this.updateContent)}},{key:"componentWillUnmount",value:function(){var a=this.props.player;a.off("timeupdate",this.updateContent),a.off("loadedmetadata",this.updateContent),a.off("updatedurationdvr",this.updateContent)}},{key:"updateContent",value:function(){var a=this.props.player;if(!a.adSystem){var b=a.duration();if(b&&this.duration_!==b){this.duration_=b;var c=formatTime(b);this.setState({duration:c})}}}},{key:"render",value:function(){var a=this.props.player,b=!!a.options().params.live||a.tech_.isLive();if(b)return null;var c=this.state.duration;return React__default.createElement("div",{className:playername$8+"-control time-control "+playername$8+"-duration"},React__default.createElement("div",{className:"duration-display"},React__default.createElement("span",{className:"control-text"},"Duration"),""+c))}}]),b}(PlayerComponent),_applyDecoratedDescriptor$9(_class$18.prototype,"updateContent",[autobind],Object.getOwnPropertyDescriptor(_class$18.prototype,"updateContent"),_class$18.prototype),_class$18),_class$20,playername$10="ThanhNienPlayer",VolumeToggle=(_class$20=function(a){function b(){return classCallCheck(this,b),possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return inherits(b,a),createClass(b,[{key:"className",value:function(){var a=[playername$10+"-control "+playername$10+"-button volume-toggle"];return a.join(" ")}},{key:"handleClick",value:function(a){a.preventDefault();var b=this.props.player,c=b.muted(),d=b.volume();return 0===d?(b.volume(.8),b.muted(!1),b.trigger(event$1.USER_CHANGE_VOLUME,.8),void b.trigger(event$1.TRACKING_VOLUME,80)):(b.muted(!c),void b.trigger(event$1.USER_CHANGE_MUTE,!c))}},{key:"render",value:function(){var a=this.className();return React__default.createElement("button",{className:a,onClick:this.handleClick})}}]),b}(React.Component),_applyDecoratedDescriptor$11(_class$20.prototype,"handleClick",[autobind],Object.getOwnPropertyDescriptor(_class$20.prototype,"handleClick"),_class$20.prototype),_class$20),_class$21,playername$11="ThanhNienPlayer",VolumeSlider=(_class$21=function(a){function b(a){classCallCheck(this,b);var c=possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));c.state={percent:0,is_mouse_down:!1},c.handleMouseMove=throttle_1(c.handleMouseMove.bind(c),50);var d=a.player,e=d.options(),f=e.agent;return c.isMobile=f.isMobile,c}return inherits(b,a),createClass(b,[{key:"componentDidMount",value:function(){var a=this.props.player;a.on("volumechange",this.update),a.on("loadedmetadata",this.update),this.update()}},{key:"componentWillUnmount",value:function(){var a=this.props.player;this.clearListener(),a.off("volumechange",this.update),a.off("loadedmetadata",this.update)}},{key:"className",value:function(){var a=[playername$11+"-control volume-slider"];return a.join(" ")}},{key:"update",value:function(){var a=this.props.player,b=Math.ceil(100*a.volume()),c=a.muted();c&&(b=0),this.setState({percent:b})}},{key:"handleMouseDown",value:function(a){this.clearListener();var b=this.props.player;b.off("volumechange",this.update),b.trigger("scrubbing-volume-state-change",!0);var c=this.calculateDistance(a);this.setState({percent:100*c}),b.volume(c),b.trigger(event$1.USER_CHANGE_VOLUME,c);var d="GovPlayer"===playername$11?"pointerup":"mouseup";window.addEventListener("mousemove",this.handleMouseMove,!1),window.addEventListener(d,this.handleMouseUp,!1),window.addEventListener("touchmove",this.handleMouseMove,!1),window.addEventListener("touchend",this.handleMouseUp,!1)}},{key:"clearListener",value:function(){window.removeEventListener("mousemove",this.handleMouseMove,!1),window.removeEventListener("mouseup",this.handleMouseUp,!1),window.removeEventListener("pointerup",this.handleMouseUp,!1),window.removeEventListener("touchmove",this.handleMouseMove,!1),window.removeEventListener("touchend",this.handleMouseUp,!1)}},{key:"handleMouseMove",value:function(a){var b=this.props.player,c=this.calculateDistance(a);this.setState({percent:100*c}),b.volume(c),b.muted(!1),b.trigger(event$1.USER_CHANGE_VOLUME,c),a.preventDefault(),a.stopPropagation()}},{key:"handleMouseUp",value:function(a){this.clearListener();var b=this.props.player,c=this.calculateDistance(a);this.setState({percent:100*c});var d=Math.ceil(100*c);b.volume(c),b.muted(!1),b.on("volumechange",this.update),b.trigger("scrubbing-volume-state-change",!1),b.trigger(event$1.TRACKING_VOLUME,d),b.trigger(event$1.USER_CHANGE_VOLUME,c)}},{key:"calculateDistance",value:function(a){var b=getPointerPosition(this.targetDiv,a);return b.x.toFixed(2)}},{key:"render",value:function(){var a=this,b=void 0;b=this.isMobile?{onTouchStart:this.handleMouseDown}:"GovPlayer"===playername$11?{onPointerDown:this.handleMouseDown}:{onMouseDown:this.handleMouseDown};var c=this.className(),d=this.state.percent;return React__default.createElement("div",_extends({className:c},b,{ref:function(b){a.targetDiv=b}}),React__default.createElement("div",{className:"volume-slider-level"},React__default.createElement("div",{className:"volume-level",style:{width:d+"%"}})))}}]),b}(React.Component),_applyDecoratedDescriptor$12(_class$21.prototype,"update",[autobind],Object.getOwnPropertyDescriptor(_class$21.prototype,"update"),_class$21.prototype),_applyDecoratedDescriptor$12(_class$21.prototype,"handleMouseDown",[autobind],Object.getOwnPropertyDescriptor(_class$21.prototype,"handleMouseDown"),_class$21.prototype),_applyDecoratedDescriptor$12(_class$21.prototype,"handleMouseUp",[autobind],Object.getOwnPropertyDescriptor(_class$21.prototype,"handleMouseUp"),_class$21.prototype),_class$21),_class$19,_class2$5,_class3$3,_temp2$5,playername$9="ThanhNienPlayer",VolumeControl=pureRenderDecorator_1((_temp2$5=_class3$3=function(a){function b(){var a,c,d,e;classCallCheck(this,b);for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];return c=d=possibleConstructorReturn(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(g))),d.state={volume_level:0,is_mute:!1},e=c,possibleConstructorReturn(d,e)}return inherits(b,a),createClass(b,[{key:"componentDidMount",value:function(){var a=this.props.player;a.on("volumechange",this.update),a.on("ready",this.update)}},{key:"componentWillUnmount",value:function(){var a=this.props.player;a.off("volumechange",this.update),a.off("ready",this.update)}},{key:"update",value:function(){var a=this.props.player,b=a.volume(),c=a.muted(),d=Math.ceil(10*b/3);this.setState({is_mute:!!c,volume_level:d})}},{key:"className",value:function a(){var a=this.props.className,b=[playername$9+"-control "+playername$9+"-volume-control "+a],c=this.state,d=c.is_mute,e=c.volume_level;if(d)b.push("volume-mute");else switch(e){case 0:b.push("volume-mute");break;case 1:b.push("volume-level-1");break;case 2:b.push("volume-level-2");break;case 3:b.push("volume-level-3")}return b.join(" ")}},{key:"render",value:function(){var a=this.props.player,b=this.className(),c=a.options(),d=c.agent,e=d.isMobile;if(e)return null;var f=a.el_.clientWidth;return f<=170?null:React__default.createElement("div",{className:b},React__default.createElement(VolumeToggle,{player:a}),React__default.createElement(VolumeSlider,{player:a}),this.props.children)}}]),b}(React.Component),_class3$3.defaultProps={className:""},_class2$5=_temp2$5,_applyDecoratedDescriptor$10(_class2$5.prototype,"update",[autobind],Object.getOwnPropertyDescriptor(_class2$5.prototype,"update"),_class2$5.prototype),_class$19=_class2$5))||_class$19,_class$23,_temp$10,playername$14="ThanhNienPlayer",PlayProgress=(_temp$10=_class$23=function(a){function b(a){classCallCheck(this,b);var c=possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a)),d=a.player,e=d.options(),f=e.params,g=!!f.live||d.tech_.isLive();return c.state={isLive:g,play_progress:g?100:0},c.handleTimeUpdate=c.handleTimeUpdate.bind(c),c.handleAdEnd=c.handleAdEnd.bind(c),c.handleAdStart=c.handleAdStart.bind(c),c.handleDurationChange=c.handleDurationChange.bind(c),c}return inherits(b,a),createClass(b,[{key:"componentDidMount",value:function(){var a=this.props.player;a.on("durationchange",this.handleDurationChange),a.on(event$1.AD_START,this.handleAdStart)}},{key:"handleAdEnd",value:function(){var a=this.props.player;a.on("durationchange",this.handleDurationChange),this.handleDurationChange()}},{key:"handleAdStart",value:function(){var a=this.props.player;a.one(event$1.AD_END,this.handleAdEnd),a.off("durationchange",this.handleDurationChange),a.off("timeupdate",this.handleTimeUpdate),a.off("updatedurationdvr",this.handleTimeUpdate)}},{key:"componentWillUnmount",value:function(){var a=this.props.player;a.off(event$1.AD_END,this.handleAdEnd),a.off(event$1.AD_START,this.handleAdStart),a.off("durationchange",this.handleDurationChange),a.off("timeupdate",this.handleTimeUpdate),a.off("updatedurationdvr",this.handleTimeUpdate)}},{key:"handleDurationChange",value:function(){var a=this.props.player,b=this.state.play_progress,c=a.tech_.isLive();a.off("timeupdate",this.handleTimeUpdate),c||(a.on("timeupdate",this.handleTimeUpdate),a.on("updatedurationdvr",this.handleTimeUpdate)),this.setState({isLive:c,play_progress:c?100:b})}},{key:"handleTimeUpdate",value:function(){var a=this.props.player,b=100*a.currentTime()/a.duration();this.setState({play_progress:b.toFixed(6)})}},{key:"update",value:function(a){this.setState({play_progress:a})}},{key:"renderEl",value:function(){var a=this.props,b=a.skin_color,c=a.player,d=this.state.play_progress,e=c.options(),f=e.params,g=f.audio?"#0085b7":b;return React__default.createElement("div",{className:playername$14+"-play-progress",style:{width:d+"%",backgroundColor:g}})}}]),b}(PlayerComponent),_class$23.defaultProps={skin_color:"white"},_temp$10),_class$24,MouseTimeDisplay=(_class$24=function(a){function b(a){classCallCheck(this,b);var c=possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a)),d=a.player,e=d.options(),f=e.params,g=!!f.live||d.tech_.isLive();return c.state={isLive:g,mouse_position:0,mouse_time:0,is_show:!1},c}return inherits(b,a),createClass(b,[{key:"componentDidMount",value:function(){var a=this.props.player;a.on("durationchange",this.handleDurationChange)}},{key:"componentWillUnmount",value:function(){var a=this.props.player;a.off("durationchange",this.handleDurationChange)}},{key:"handleDurationChange",value:function(){var a=this.props.player,b=a.tech_.isLive();this.setState({isLive:b})}},{key:"show",value:function(){var a=this.state.is_show;a||this.setState({is_show:!0})}},{key:"hide",value:function(){var a=this.state.is_show;a&&this.setState({is_show:!1})}},{key:"update",value:function(a,b){this.setState({mouse_time:a,mouse_position:b,is_show:!0})}},{key:"renderEl",value:function(){var a=this.props.player,b=this.state,c=b.isLive,d=b.is_show;if(c||!d)return null;var e=this.state,f=e.mouse_position,g=e.mouse_time,h=a.currentDimension("width");return React__default.createElement("div",{className:"mouse-display","data-current-time":g,style:{width:f+"%",minWidth:8,maxWidth:h-19}})}}]),b}(PlayerComponent),_applyDecoratedDescriptor$14(_class$24.prototype,"handleDurationChange",[autobind],Object.getOwnPropertyDescriptor(_class$24.prototype,"handleDurationChange"),_class$24.prototype),_class$24),_class$25,playername$15="ThanhNienPlayer",LoadProgress=(_class$25=function(a){function b(a){classCallCheck(this,b);var c=possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a)),d=c.props.player,e=d.options(),f=e.params,g=!!f.live||d.tech_.isLive();return c.state={isLive:g,play_progress:g?100:0},c}return inherits(b,a),createClass(b,[{key:"componentDidMount",value:function(){var a=this.props.player;a.on("durationchange",this.handleDurationChange)}},{key:"componentWillUnmount",value:function(){var a=this.props.player;a.off("progress",this.handleProgress),a.off("durationchange",this.handleDurationChange),a.off("updatedurationdvr",this.handleProgress)}},{key:"handleDurationChange",value:function(){var a=this.props.player,b=a.tech_.isLive();a.off("progress",this.handleProgress),b||(a.on("progress",this.handleProgress),a.on("updatedurationdvr",this.handleProgress)),this.setState({isLive:b})}},{key:"percentify",value:function(a,b){var c=a/b||0;return 100*(c>=1?1:c)+"%"}},{key:"handleProgress",value:function(){for(var a=this.props.player,b=a.buffered(),c=a.duration(),d=a.bufferedEnd(),e=this.percentify(d,c),f=[],g=0;g<b.length;g++){var h=b.start(g),i=b.end(g),j={};j.left=this.percentify(h,d),j.width=this.percentify(i-h,d),f.push(j)}var k=f.map(function(a){var b=a.left,c=a.width;return React__default.createElement("div",{key:b,className:playername$15+"-buffer-progress",style:{width:c,left:b}})});this.setState({children:k,load_progress:e})}},{key:"renderEl",value:function(){var a=this.state.load_progress;return React__default.createElement("div",{className:playername$15+"-load-progress",style:{width:a}})}}]),b}(PlayerComponent),_applyDecoratedDescriptor$15(_class$25.prototype,"handleDurationChange",[autobind],Object.getOwnPropertyDescriptor(_class$25.prototype,"handleDurationChange"),_class$25.prototype),_applyDecoratedDescriptor$15(_class$25.prototype,"handleProgress",[autobind],Object.getOwnPropertyDescriptor(_class$25.prototype,"handleProgress"),_class$25.prototype),_class$25);PlayerComponent.registerSkinComponent("loadProgress",LoadProgress);var playername$13="ThanhNienPlayer",ProgressSilder=function(a){function b(){var a,c,d,e;classCallCheck(this,b);for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];return c=d=possibleConstructorReturn(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(g))),d.state={children:[React__default.createElement(LoadProgress,{key:"0",player:d.props.player,ref:function(a){d.loadProgress=a}}),React__default.createElement(MouseTimeDisplay,{key:"1",player:d.props.player,ref:function(a){d.mouseTimeDisplay=a}}),React__default.createElement(PlayProgress,{key:"2",player:d.props.player,ref:function(a){
d.playProgress=a}})]},e=c,possibleConstructorReturn(d,e)}return inherits(b,a),createClass(b,[{key:"renderEl",value:function(){return React__default.createElement("div",{className:playername$13+"-progress-slider"})}}]),b}(PlayerComponent),_class$22,_class2$6,_temp$9,playername$12="ThanhNienPlayer",ProgressControl=(_temp$9=_class2$6=function(a){function b(a){classCallCheck(this,b);var c=possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));c.state={is_paused:!1,children:[React__default.createElement(ProgressSilder,{key:"0",player:c.props.player,ref:function(a){c.progressSlider=a}})]},c.handleMouseMoveTimeDisplay=throttle_1(c.handleMouseMoveTimeDisplay.bind(c),50),c.handleMouseMove=throttle_1(c.handleMouseMove.bind(c),50);var d=a.player,e=d.options(),f=e.agent;return c.isMobile=f.isMobile,c}return inherits(b,a),createClass(b,[{key:"componentDidMount",value:function(){var a=this.props.player;a.on("durationchange",this._handleDurationChange)}},{key:"componentWillUnmount",value:function(){var a=this.props.player;a.off("durationchange",this._handleDurationChange)}},{key:"_handleDurationChange",value:function(){this.handleDurationChange()}},{key:"handleDurationChange",value:function(){var a=this.props.player,b=a.tech_.isLive();a.off(event$1.USER_PAN_PROGRESS,this.handlePanProgress),b||a.on(event$1.USER_PAN_PROGRESS,this.handlePanProgress),this.setState({isLive:b})}},{key:"handleMouseDown",value:function(a){this.clearListener();var b=this.props.player,c=this.state.isLive;if(!b.adSystem&&!c){var d=b.paused();this.setState({is_paused:d}),d||b.pause(),b.trigger("scrubbing-progress-state-change",!0);var e=this.calculateDistance(a),f={isMouseDown:!0};b.trigger(event$1.MOUSE_DOWN_TIME_UPDATE,f),this.progressSlider.playProgress.update(100*e);var g="GovPlayer"===playername$12?"pointerup":"mouseup";window.addEventListener("mousemove",this.handleMouseMove,!1),window.addEventListener(g,this.handleMouseUp,!1),window.addEventListener("touchmove",this.handleMouseMove,!1),window.addEventListener("touchend",this.handleMouseUp,!1)}}},{key:"clearListener",value:function(){window.removeEventListener("mousemove",this.handleMouseMove,!1),window.removeEventListener("mouseup",this.handleMouseUp,!1),window.removeEventListener("pointerup",this.handleMouseUp,!1),window.removeEventListener("touchmove",this.handleMouseMove,!1),window.removeEventListener("touchend",this.handleMouseUp,!1)}},{key:"handleMouseMove",value:function(a){var b=this.props.player,c=this.calculateDistance(a),d=b.duration();this.progressSlider.playProgress.update(100*c);var e={time:c*d,percent:c,duration:d,isMouseDown:!0};b.trigger(event$1.MOUSE_DOWN_TIME_UPDATE,e),b.currentTime(c*d),a.preventDefault(),a.stopPropagation()}},{key:"handlePanProgress",value:function(a,b){var c=b.percent,d=this.props.player,e=d.duration();this.progressSlider.playProgress.update(100*c),d.currentTime(c*e)}},{key:"handleMouseUp",value:function(a){this.clearListener();var b=this.props.player,c=this.state.is_paused,d=this.calculateDistance(a),e=b.duration();this.progressSlider.playProgress.update(100*d),b.trigger("scrubbing-progress-state-change",!1);var f={isMouseDown:!1};b.trigger(event$1.MOUSE_DOWN_TIME_UPDATE,f),b.currentTime(d*e),!c&&d<1&&b.play()}},{key:"handleMouseMoveThrood",value:function(a){var b=this.state.isLive;b||(a.persist(),this.handleMouseMoveTimeDisplay(a))}},{key:"handleTouchEnd",value:function(){this.progressSlider.mouseTimeDisplay.hide()}},{key:"handleMouseMoveTimeDisplay",value:function(a){var b=this.props.player,c=this.calculateDistance(a),d=b.duration(),e={time:c*d,percent:c,duration:d};b.trigger(event$1.MOUSE_TIME_UPDATE,e);var f=formatTime(c*d,d);this.progressSlider.mouseTimeDisplay.update(f,100*c)}},{key:"calculateDistance",value:function(a){var b=getPointerPosition(this.targetDiv,a);return b.x.toFixed(6)}},{key:"renderEl",value:function(){var a=this,b=void 0,c=this.props.className;return b=this.isMobile?{onTouchStart:this.handleMouseDown,onTouchMove:this.handleMouseMoveThrood,onTouchEnd:this.handleTouchEnd}:"GovPlayer"===playername$12?{onPointerDown:this.handleMouseDown,onMouseMove:this.handleMouseMoveThrood}:{onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMoveThrood},React__default.createElement("div",_extends({className:playername$12+"-control "+playername$12+"-progress-control "+c,ref:function(b){a.targetDiv=b}},b))}}]),b}(PlayerComponent),_class2$6.defaultProps={className:""},_class$22=_temp$9,_applyDecoratedDescriptor$13(_class$22.prototype,"_handleDurationChange",[autobind],Object.getOwnPropertyDescriptor(_class$22.prototype,"_handleDurationChange"),_class$22.prototype),_applyDecoratedDescriptor$13(_class$22.prototype,"handleMouseDown",[autobind],Object.getOwnPropertyDescriptor(_class$22.prototype,"handleMouseDown"),_class$22.prototype),_applyDecoratedDescriptor$13(_class$22.prototype,"handlePanProgress",[autobind],Object.getOwnPropertyDescriptor(_class$22.prototype,"handlePanProgress"),_class$22.prototype),_applyDecoratedDescriptor$13(_class$22.prototype,"handleMouseUp",[autobind],Object.getOwnPropertyDescriptor(_class$22.prototype,"handleMouseUp"),_class$22.prototype),_applyDecoratedDescriptor$13(_class$22.prototype,"handleMouseMoveThrood",[autobind],Object.getOwnPropertyDescriptor(_class$22.prototype,"handleMouseMoveThrood"),_class$22.prototype),_applyDecoratedDescriptor$13(_class$22.prototype,"handleTouchEnd",[autobind],Object.getOwnPropertyDescriptor(_class$22.prototype,"handleTouchEnd"),_class$22.prototype),_class$22);PlayerComponent.registerSkinComponent("progressControl",ProgressControl);var _class$26,PlayToggle$2=pureRenderDecorator_1(_class$26=function(a){function b(){return classCallCheck(this,b),possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return inherits(b,a),createClass(b,[{key:"className",value:function(){var a=["spacer"];return a.join(" ")}},{key:"render",value:function(){var a=this.className();return React__default.createElement("div",{className:a})}}]),b}(React.Component))||_class$26,_class$28,ResolutionSelector=pureRenderDecorator_1(_class$28=function(a){function b(){var a,c,d,e;classCallCheck(this,b);for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];return c=d=possibleConstructorReturn(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(g))),d.state={items:[]},e=c,possibleConstructorReturn(d,e)}return inherits(b,a),createClass(b,[{key:"componentDidMount",value:function(){var a=this.props,b=a.type,c=a.items,d=a.current_level;this.setState({type:b,items:c,current_level:d})}},{key:"componentWillReceiveProps",value:function(a){var b=a.type,c=a.items,d=a.current_level;this.setState({type:b,items:c,current_level:d})}},{key:"className",value:function(){var a=["resolution-selector"];return a.join(" ")}},{key:"renderItem",value:function(){var a=this.state,b=a.items,c=a.current_level,d=[],e=!0,f=!1,g=void 0;try{for(var h,i=b[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value,k="res-label";c===j.level&&(k+=" selected");var l=React__default.createElement("li",{key:j.level,onClick:this.props.changeRes.bind(null,j)},React__default.createElement("span",{className:k},j.label));d.push(l)}}catch(a){f=!0,g=a}finally{try{!e&&i.return&&i.return()}finally{if(f)throw g}}return d}},{key:"render",value:function(){var a=this.state.type,b=void 0;return"Mp4"!==a&&"M3u8"!==a||(b=this.renderItem()),React__default.createElement("div",{className:"resolution-wapper"},React__default.createElement("div",{className:"resolution-selector"},React__default.createElement("ul",null,b)))}}]),b}(React.Component))||_class$28,_class$27,_class2$7,playername$16="ThanhNienPlayer",Setting=pureRenderDecorator_1((_class2$7=function(a){function b(){var a,c,d,e;classCallCheck(this,b);for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];return c=d=possibleConstructorReturn(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(g))),d.state={type:null,items:[],current_level:null,video_source:{mhtml5:[],html5:[]}},e=c,possibleConstructorReturn(d,e)}return inherits(b,a),createClass(b,[{key:"componentDidMount",value:function(){var a=this.props.player;a.on("loadedmetadata",this.handleLoadedMetadata),a.on("playlist-hls",this.handlePlaylistHls)}},{key:"componentWillUnmount",value:function(){var a=this.props.player;a.off("loadedmetadata",this.handleLoadedMetadata),a.off("playlist-hls",this.handlePlaylistHls)}},{key:"handleLoadedMetadata",value:function(){var a=this.props.player,b=this.state.video_source,c=b.mhtml5,d=b.html5,e=a.options().agent,f=a.currentSrc(),g=f.match(/.(mp4|m3u8)$/i)||[],h=(g[1]||"").toLowerCase();switch(h=toTitleCase(h)){case"Mp4":var i=void 0;this.clearInterValCheckVideoHeight();try{i=parseInt(f.match(/_(.*)p\.(mp4)$/i)[1])}catch(b){return void a.trigger("html5UrlIncorrect")}var j=void 0,k=[],l=e.isMobile?c:d;for(var m in l){var n=l[m],o=n["data-res"];o===i&&(j=m),k.push({src:n.src,type:n.type,label:o+"p",resolution:o,level:m})}this.setState({type:"Mp4",items:k,current_level:j});break;case"M3u8":}}},{key:"handlePlaylistHls",value:function(a,b){var c=this.state.type;if("M3u8"!==c){var d=b||[],e=[];d.length>1&&e.push({src:d.uri,type:"application/x-mpegURL",label:"Auto",resolution:0,level:-1});for(var f=0;f<d.length;f++){var g=d[f],h=void 0;try{h=g.attributes.RESOLUTION.height}catch(a){continue}e.push({src:g.uri,type:"application/x-mpegURL",label:h+"p",resolution:h,level:f})}this.setInterValCheckVideoHeight(),this.setState({type:"M3u8",items:e,current_level:-1})}}},{key:"sortItems",value:function(a){return a.sort(function(a,b){return"undefined"==typeof a.resolution?-1:parseInt(b.resolution)-parseInt(a.resolution)})}},{key:"className",value:function(){var a=[playername$16+"-control "+playername$16+"-button setting"],b=this.state,c=b.current_item,d=b.resolution_hd;return(d||c&&c.resolution>=720)&&a.push("resolution-hd"),a.join(" ")}},{key:"changeRes",value:function(a){var b=this.state.current_level;if(b!==a.level){this.setState({current_level:a.level,current_item:a,hover:!1});var c=this.props.player,d=this.state.type;switch(d){case"Mp4":var e=c.currentTime(),f=c.paused();c.src(a).one("loadedmetadata",function(){c.currentTime(e),f?c.pause():c.play()});break;case"M3u8":c.trigger("vcplayerchangequality",a.level),this.setInterValCheckVideoHeight()}}}},{key:"setInterValCheckVideoHeight",value:function(){this.clearInterValCheckVideoHeight(),this.intervalCheckId=setInterval(this.checkVideoHeight,1e3)}},{key:"clearInterValCheckVideoHeight",value:function(){clearInterval(this.intervalCheckId)}},{key:"checkVideoHeight",value:function(){var a=this.props.player,b=this.state,c=b.hover,d=b.current_level,e=a.videoHeight();c||d===-1&&(e>=720?this.setState({resolution_hd:!0}):this.setState({resolution_hd:!1}))}},{key:"handleMouseEnter",value:function(){this.setState({hover:!0})}},{key:"handleMouseLeave",value:function(){this.setState({hover:!1})}},{key:"render",value:function(){var a=this.className(),b=this.props.player,c=this.state,d=c.type,e=c.items,f=c.current_level;return!d||"number"!=typeof f||e.length<2?null:(e=this.sortItems(e),React__default.createElement("div",{className:a,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},React__default.createElement(ResolutionSelector,{player:b,type:d,items:e,current_level:f,changeRes:this.changeRes}),React__default.createElement("button",{className:"setting-gear "+playername$16+"-button"}),React__default.createElement("span",{className:"hd-quality"},"HD")))}}]),b}(React.Component),_applyDecoratedDescriptor$16(_class2$7.prototype,"handleLoadedMetadata",[autobind],Object.getOwnPropertyDescriptor(_class2$7.prototype,"handleLoadedMetadata"),_class2$7.prototype),_applyDecoratedDescriptor$16(_class2$7.prototype,"handlePlaylistHls",[autobind],Object.getOwnPropertyDescriptor(_class2$7.prototype,"handlePlaylistHls"),_class2$7.prototype),_applyDecoratedDescriptor$16(_class2$7.prototype,"changeRes",[autobind],Object.getOwnPropertyDescriptor(_class2$7.prototype,"changeRes"),_class2$7.prototype),_applyDecoratedDescriptor$16(_class2$7.prototype,"checkVideoHeight",[autobind],Object.getOwnPropertyDescriptor(_class2$7.prototype,"checkVideoHeight"),_class2$7.prototype),_applyDecoratedDescriptor$16(_class2$7.prototype,"handleMouseEnter",[autobind],Object.getOwnPropertyDescriptor(_class2$7.prototype,"handleMouseEnter"),_class2$7.prototype),_applyDecoratedDescriptor$16(_class2$7.prototype,"handleMouseLeave",[autobind],Object.getOwnPropertyDescriptor(_class2$7.prototype,"handleMouseLeave"),_class2$7.prototype),_class$27=_class2$7))||_class$27,_class$29,_class2$8,_temp$11,playername$17="ThanhNienPlayer",FullScreenToggle=pureRenderDecorator_1((_temp$11=_class2$8=function(a){function b(){return classCallCheck(this,b),possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return inherits(b,a),createClass(b,[{key:"handleClick",value:function(a){var b=this;a.preventDefault();var c=this.props.player;c.isFullscreen()?c.exitFullscreen():c.requestFullscreen(),c.setTimeout(function(){b.r_button.blur(),c.el_.focus()},0)}},{key:"className",value:function a(){var a=this.props.className,b=[playername$17+"-control "+a+" "+playername$17+"-button full-screen-toggle"];return b.join(" ")}},{key:"render",value:function(){var a=this,b=this.props.player,c=this.className(),d=b.options(),e=d.params;return e.audio?null:React__default.createElement("button",{ref:function(b){a.r_button=b},className:c,onClick:function(b){return a.handleClick(b)}})}}]),b}(React.Component),_class2$8.defaultProps={className:""},_class$29=_temp$11))||_class$29,_class$30,_class2$9,playername$18="ThanhNienPlayer",inOtherIframe=!1;try{window.top!==window.self&&(inOtherIframe=!0)}catch(a){inOtherIframe=!0}var BtnMute=pureRenderDecorator_1((_class2$9=function(a){function b(){var a,c,d,e;classCallCheck(this,b);for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];return c=d=possibleConstructorReturn(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(g))),d.state={mute:!0},e=c,possibleConstructorReturn(d,e)}return inherits(b,a),createClass(b,[{key:"componentDidMount",value:function(){var a=this.props.player;a.on("volumechange",this.update),a.on("ready",this.update),a.on(event$1.PLAYER_READY,this.playerReady)}},{key:"componentWillUnmount",value:function(){var a=this.props.player;a.off("volumechange",this.update),a.off("ready",this.update),a.off(event$1.PLAYER_READY,this.playerReady)}},{key:"playerReady",value:function(){this.setState({isReady:!0})}},{key:"update",value:function(){var a=this.props.player,b=a.volume(),c=a.muted();0===b||c?this.setState({mute:!0}):this.setState({mute:!1})}},{key:"handleClick",value:function(){var a=this.props.player,b=a.muted(),c=a.volume();a.trigger(event$1.USER_CHANGE_MUTE,!b),c?a.muted(!b):(a.volume(.5),a.muted(!1),a.trigger(event$1.USER_CHANGE_VOLUME,.5)),a.trigger("player-filling-volume",!1)}},{key:"render",value:function(){var a=this.props.player,b=this.state.mute,c=a.el_.clientWidth;return c<=170&&!inOtherIframe?null:React__default.createElement("div",{className:playername$18+"-btn-mute",onClick:this.handleClick},React__default.createElement("button",null,React__default.createElement("span",{className:playername$18+"-qmtwbs-base"}),React__default.createElement("span",{className:playername$18+"-qmtwbs-level"})),b?React__default.createElement("span",{className:playername$18+"-line-mute"}):null)}}]),b}(React.Component),_applyDecoratedDescriptor$17(_class2$9.prototype,"playerReady",[autobind],Object.getOwnPropertyDescriptor(_class2$9.prototype,"playerReady"),_class2$9.prototype),_applyDecoratedDescriptor$17(_class2$9.prototype,"update",[autobind],Object.getOwnPropertyDescriptor(_class2$9.prototype,"update"),_class2$9.prototype),_applyDecoratedDescriptor$17(_class2$9.prototype,"handleClick",[autobind],Object.getOwnPropertyDescriptor(_class2$9.prototype,"handleClick"),_class2$9.prototype),_class$30=_class2$9))||_class$30,_class$31,playername$19="ThanhNienPlayer",LiveDisplay=(_class$31=function(a){function b(){var a,c,d,e;classCallCheck(this,b);for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];return c=d=possibleConstructorReturn(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(g))),d.state={isLive:!1},e=c,possibleConstructorReturn(d,e)}return inherits(b,a),createClass(b,[{key:"componentDidMount",value:function(){var a=this.props.player;a.on("durationchange",this.handleDurationChange)}},{key:"componentWillUnmount",value:function(){var a=this.props.player;a.off("durationchange",this.handleDurationChange)}},{key:"handleDurationChange",value:function(){var a=this.props.player,b=a.tech_.isLive();this.setState({isLive:b})}},{key:"renderEl",value:function(){var a=this.props.player,b=this.state.isLive;return b=!!a.options().params.live||b,b?React__default.createElement("div",{className:playername$19+"-control time-control live-display"},React__default.createElement("div",{className:"live-display",style:{color:"red",fontWeight:800}},React__default.createElement("span",{className:"control-text"},"Duration"),"LIVE")):null}}]),b}(PlayerComponent),_applyDecoratedDescriptor$18(_class$31.prototype,"handleDurationChange",[autobind],Object.getOwnPropertyDescriptor(_class$31.prototype,"handleDurationChange"),_class$31.prototype),_class$31),_class$33,_class2$11,playername$21="ThanhNienPlayer",QualitySelectMp4=pureRenderDecorator_1((_class2$11=function(a){function b(){var a,c,d,e;classCallCheck(this,b);for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];return c=d=possibleConstructorReturn(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(g))),d.state={class:"",currentQuality:144},e=c,possibleConstructorReturn(d,e)}return inherits(b,a),createClass(b,[{key:"activeQuality",value:function(a,b){var c=this.props.player;this.currentTime=c.currentTime();var d=c.options().params.shadowDom?window.playerShadowRoot[""+c.id_].getElementById(c.id_+"-qlt-select"):document.getElementById(c.id_+"-qlt-select");this.isPaused=c.paused(),this.setState({class:"quality-active",currentQuality:a}),c.src(b),c.one("loadedmetadata",this._restoreCurrentTime),d.style.display="none"}},{key:"_restoreCurrentTime",value:function(){var a=this.props,b=a.player,c=a.onChange,d=this.state.currentQuality,e=this.isPaused,f=this.currentTime;b.currentRes=d,c(d),b.currentTime(f),e||b.play()}},{key:"_renderQualityMp4",value:function(){var a=this,b=this.props.media,c=this.state.currentQuality;return b.sort(function(a,b){return parseFloat(b["data-res"])-parseFloat(a["data-res"])}),b.map(function(b,d){return React__default.createElement("li",{"data-res":b["data-res"],className:playername$21+"-li-fix "+(c===b["data-res"]?"quality-active":""),key:d,onClick:a.activeQuality.bind(a,b["data-res"],b.src)},b["data-res"],"p")})}},{key:"render",value:function(){var a=this.props.player;return React__default.createElement("div",{id:a.id_+"-qlt-select",className:playername$21+"-quality-select"},this._renderQualityMp4())}}]),b}(React.Component),_applyDecoratedDescriptor$20(_class2$11.prototype,"activeQuality",[autobind],Object.getOwnPropertyDescriptor(_class2$11.prototype,"activeQuality"),_class2$11.prototype),_applyDecoratedDescriptor$20(_class2$11.prototype,"_restoreCurrentTime",[autobind],Object.getOwnPropertyDescriptor(_class2$11.prototype,"_restoreCurrentTime"),_class2$11.prototype),_class$33=_class2$11))||_class$33,_class$34,_class2$12,playername$22="ThanhNienPlayer",QualityHlsSelect=pureRenderDecorator_1((_class2$12=function(a){function b(){var a,c,d,e;classCallCheck(this,b);for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];return c=d=possibleConstructorReturn(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(g))),d.state={class:"",currentQuality:"auto"},e=c,possibleConstructorReturn(d,e)}return inherits(b,a),createClass(b,[{key:"activeQuality",value:function(a,b){var c=this.props.player,d=this.props.onChange,e=c.options().params.shadowDom?window.playerShadowRoot[""+c.id_].getElementById(c.id_+"-qlt-select"):document.getElementById(c.id_+"-qlt-select");this.setState({class:"quality-active",currentQuality:a}),d(a,b),e.style.display="none"}},{key:"_renderQualityHls",value:function(){var a=this,b=this.props,c=b.media,d=b.levels,e=this.state.currentQuality;return c.sort(function(a,b){return parseFloat(b.id)-parseFloat(a.id)}),c.map(function(b,c){var f=[];e===b.label&&f.push("quality-active"),d[0]+"p"===b.label&&f.push("current");var g=f.join(" ");return React__default.createElement("li",{data:b.label,className:playername$22+"-li-fix "+g,key:c,onClick:a.activeQuality.bind(a,b.label,b.id)},b.label)})}},{key:"render",value:function(){var a=this.props.player;return React__default.createElement("div",{id:a.id_+"-qlt-select",className:playername$22+"-quality-select"},this._renderQualityHls())}}]),b}(React.Component),_applyDecoratedDescriptor$21(_class2$12.prototype,"activeQuality",[autobind],Object.getOwnPropertyDescriptor(_class2$12.prototype,"activeQuality"),_class2$12.prototype),_class$34=_class2$12))||_class$34,_class$35,playername$23="ThanhNienPlayer",QualitySelectMpd=pureRenderDecorator_1(_class$35=function(a){function b(){var a,c,d,e;classCallCheck(this,b);for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];return c=d=possibleConstructorReturn(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(g))),d.state={class:"",currentQuality:"Auto"},e=c,possibleConstructorReturn(d,e)}return inherits(b,a),createClass(b,[{key:"activeQuality",value:function(a){var b=this.props.player,c=a.height,d=this.props.onChange,e=b.options().params.shadowDom?window.playerShadowRoot[""+b.id_].getElementById(b.id_+"-qlt-select"):document.getElementById(b.id_+"-qlt-select");this.setState({class:"quality-active",currentQuality:c}),d(a),e.style.display="none"}},{key:"_renderQualityMpd",value:function(){var a=this,b=this.props.media,c=function(a,b){return a.reduce(function(a,c){return(a[c[b]]=a[c[b]]||[]).push(c),a},[])},d=c(b,"height"),e=[];d.map(function(a){var b=a.sort(function(a,b){return a.active||b.active?parseFloat(a.audioBandwidth)-parseFloat(b.audioBandwidth):parseFloat(b.audioBandwidth)-parseFloat(a.audioBandwidth)});return e.push(b[0]),e});var f=this.state.currentQuality;return e.sort(function(a,b){return parseFloat(b.height)-parseFloat(a.height)}),e.push({height:"Auto"}),e.map(function(b,c){return React__default.createElement("li",{"data-res":b.height,className:playername$23+"-li-fix "+(f===b.height?"quality-active":""),key:c,onClick:a.activeQuality.bind(a,b)},"Auto"===b.height?b.height:b.height+"p")})}},{key:"render",value:function(){var a=this.props.player;return React__default.createElement("div",{id:a.id_+"-qlt-select",className:playername$23+"-quality-select"},this._renderQualityMpd())}}]),b}(React.Component))||_class$35,_class$36,playername$24="ThanhNienPlayer",ActiveMp4Control=pureRenderDecorator_1(_class$36=function(a){function b(){return classCallCheck(this,b),possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return inherits(b,a),createClass(b,[{key:"_rederActiveMp4",value:function(){var a=this.props.quality,b="sd";return a>=720&&(b="hd"),React__default.createElement("div",{data:a,"data-res-def":b,className:playername$24+"-control selected-quality selected-mp4"},a,"p")}},{key:"className",value:function(){var a=this.props.quality,b=[];return a>=720&&b.push("hd-active"),b.join(" ")}},{key:"_renderHDactice",value:function(){var a=this.className();return React__default.createElement("div",{className:a})}},{key:"render",value:function(){var a=this.props.player,b=a.options(),c=b.agent;return React__default.createElement("div",{className:playername$24+"-quality-setting"},React__default.createElement("div",{className:playername$24+"-control "+playername$24+"-button "+playername$24+"-icon-setting"},this._renderHDactice()),c.isMobile?null:this._rederActiveMp4())}}]),b}(React.Component))||_class$36,_class$37,playername$25="ThanhNienPlayer",ActiveHlsControl=pureRenderDecorator_1(_class$37=function(a){function b(){return classCallCheck(this,b),possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return inherits(b,a),createClass(b,[{key:"_rederActiveHls",value:function(){var a=this.props.quality,b="sd";return"720p"!==a&&"1080p"!==a&&"1280p"!==a||(b="hd"),React__default.createElement("div",{data:a,"data-res-def":b,className:playername$25+"-control selected-quality slected-hls"},a)}},{key:"className",value:function(){var a=this.props.levels,b=[];return a>=720&&b.push("hd-active"),b.join(" ")}},{key:"_renderHDactice",value:function(){var a=this.className();return React__default.createElement("div",{className:a})}},{key:"render",value:function(){var a=this.props.player,b=a.options(),c=b.agent;return React__default.createElement("div",{className:playername$25+"-quality-setting"},React__default.createElement("div",{className:playername$25+"-control "+playername$25+"-button "+playername$25+"-icon-setting"},this._renderHDactice()),c.isMobile?null:this._rederActiveHls())}}]),b}(React.Component))||_class$37,_class$38,playername$26="ThanhNienPlayer",ActiveMpdControl=pureRenderDecorator_1(_class$38=function(a){function b(){return classCallCheck(this,b),possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return inherits(b,a),createClass(b,[{key:"_rederActiveMpd",value:function(){var a=this.props.quality,b="sd";return a.height>=720&&(b="hd"),React__default.createElement("div",{data:a.height,"data-res-def":b,className:playername$26+"-control selected-quality selected-mp4"},a?a.height:"Auto")}},{key:"className",value:function(){var a=this.props.quality,b=[];return a.height>=720&&b.push("hd-active"),b.join(" ")}},{key:"_renderHDactice",value:function(){var a=this.className();return React__default.createElement("div",{className:a})}},{key:"render",value:function(){var a=this.props.player,b=a.options(),c=b.agent;return React__default.createElement("div",{className:playername$26+"-quality-setting"},React__default.createElement("div",{className:playername$26+"-control "+playername$26+"-button "+playername$26+"-icon-setting"},this._renderHDactice()),c.isMobile?null:this._rederActiveMpd())}}]),b}(React.Component))||_class$38,_class$32,_class2$10,playername$20="ThanhNienPlayer",QualityControl=pureRenderDecorator_1((_class2$10=function(a){function b(){var a,c,d,e;classCallCheck(this,b);for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];return c=d=possibleConstructorReturn(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(g))),d.state={mediaMp4:[],mediaHls:[],mediaMpd:[],typeQuality:"",activeMp4:144,activeHls:"auto",activeMpd:"",currentNetwork:0,levelsArr:[]},e=c,possibleConstructorReturn(d,e)}return inherits(b,a),createClass(b,[{key:"componentDidMount",value:function(){var a=this.props.player;a.on(event.UPDATE_VIDEO_SOURCE,this.mediaInfoMp4),a.on("loadedmetadata",this.getMetadataPlaying);var b=a.src();if(b){var c=a.sources_,d=this._checkTypeSource();this.setState({typeQuality:d,mediaMp4:c.html5})}}},{key:"componentWillUnmount",value:function(){var a=this.props.player,b=a.tech_;b.off("loadedqualitydata",this.mediaInfoHls),a.off("loadedmetadata",this.getMetadataPlaying),b.off(event$1.HLS_FRAG_BUFFERED,this._onFragBuffered),clearTimeout(this.timeOutHover)}},{key:"_checkTypeSource",value:function(){var a=this.props.player;return a.src().indexOf(".m3u8")>0?"3u8":a.src().indexOf(".mpd")>0?"mpd":a.src().indexOf(".mp4")>0?"mp4":void 0}},{key:"getMetadataPlaying",value:function(){var a=this.props.player,b=this._checkTypeSource(),c=a.tech_;c.one("loadedqualitydata",this.mediaInfoHls),c.on("loadLevelsData",this.loadLevelsData),c.on("loadBitrateDash",this.mediaInfoDash),c.on(event$1.HLS_FRAG_BUFFERED,this._onFragBuffered),c.trigger("requestBitrateDash"),c.trigger("requestqualitydata"),this.setState({typeQuality:b}),a.on(event.UPDATE_VIDEO_SOURCE,this.mediaInfoMp4)}},{key:"loadLevelsData",value:function(a,b){this.setState({levelsArr:b})}},{key:"_onFragBuffered",value:function(a,b){var c=b.data,d=c.frag.level;this.setState({currentNetwork:d})}},{key:"mediaInfoHls",value:function(a,b){var c=b.qualityData,d=b.qualitySwitchCallback;this.qualitySwitchCallback=d,this.setState({mediaHls:c.video})}},{key:"mediaInfoMp4",value:function(a,b){this.setState({mediaMp4:b.html5})}},{key:"mediaInfoDash",value:function(a,b){var c=b.bitrateVideo,d=b.callBack;this.setState({mediaMpd:c,levelsArr:c}),this.callBack=d}},{key:"onChangeQualityMp4",value:function(a){this.setState({activeMp4:a})}},{key:"onChangeQualityMpd",value:function(a){this.callBack(a),this.setState({activeMpd:a})}},{key:"onChangeQualityHls",value:function(a,b){var c=this.props.player;c.trigger(event$1.USER_CHANGE_QUALITY,{data:a,id:b}),this.setState({activeHls:a}),this.qualitySwitchCallback(b)}},{key:"_renderQualityActive",value:function(){var a=this.props.player,b=this.state,c=b.typeQuality,d=b.activeMp4,e=b.activeMpd,f=b.mediaMpd,g=b.activeHls,h=b.levelsArr,i=b.currentNetwork,j=[];if(!h.length)return null;if("3u8"===c){var k=i<h.length?i:h.length-1,l=h[k].height;j.push(l)}return"mpd"===c?React__default.createElement(ActiveMpdControl,{player:a,quality:e,media:f}):"mp4"===c?React__default.createElement(ActiveMp4Control,{player:a,quality:d}):React__default.createElement(ActiveHlsControl,{player:a,quality:g,levels:j})}},{key:"_renderQualitySelect",value:function(){var a=this,b=this.state,c=b.mediaMp4,d=b.mediaHls,e=b.mediaMpd,f=b.typeQuality,g=b.currentNetwork,h=b.levelsArr,i=[];if(!h.length)return null;if("3u8"===f){var j=g<h.length?g:h.length-1,k=h[j].height;i.push(k)}var l=this.props.player;return c||d?"mpd"===f?React__default.createElement(QualitySelectMpd,{player:l,media:e,onChange:this.onChangeQualityMpd}):"mp4"===f?React__default.createElement(QualitySelectMp4,{player:l,media:c,onChange:this.onChangeQualityMp4}):React__default.createElement(QualityHlsSelect,{player:l,media:d,onChange:this.onChangeQualityHls,levels:i,ref:function(b){return a.qualitySelectHls=b}}):null}},{key:"onMouseEnterHandler",value:function(){var a=this.props.player,b=a.options().params.shadowDom?window.playerShadowRoot[""+a.id_].getElementById(a.id_+"-qlt-select"):document.getElementById(a.id_+"-qlt-select");b.style.display="block",this.timeOutHover=setTimeout(function(){b.style.display="none"},8e3)}},{key:"onMouseLeaveHandler",value:function(){var a=this.props.player,b=a.options().params.shadowDom?window.playerShadowRoot[""+a.id_].getElementById(a.id_+"-qlt-select"):document.getElementById(a.id_+"-qlt-select");b.style.display="none",clearTimeout(this.timeOutHover)}},{key:"onTouchStartHandler",value:function(){var a=this.props.player,b=a.options().params.shadowDom?window.playerShadowRoot[""+a.id_].getElementById(a.id_+"-qlt-select"):document.getElementById(a.id_+"-qlt-select");b.style.display="block"}},{key:"render",value:function(){var a=this.props.player,b=a.options(),c=b.agent;if(c.isMobile)return null;var d=this.state,e=d.typeQuality,f=d.mediaHls,g=d.mediaMp4;if("mp4"===e&&g.length<=1)return null;if("3u8"===e&&f.length<=1)return null;if(!e||a.adSystem)return null;var h=a.el_.clientWidth;if(h<=170)return null;var i={onMouseEnter:this.onMouseEnterHandler,onMouseLeave:this.onMouseLeaveHandler,onTouchStart:this.onTouchStartHandler};return React__default.createElement("div",_extends({},i,{className:playername$20+"-quality-wrapper"}),this._renderQualityActive(),this._renderQualitySelect())}}]),b}(React.Component),_applyDecoratedDescriptor$19(_class2$10.prototype,"getMetadataPlaying",[autobind],Object.getOwnPropertyDescriptor(_class2$10.prototype,"getMetadataPlaying"),_class2$10.prototype),_applyDecoratedDescriptor$19(_class2$10.prototype,"loadLevelsData",[autobind],Object.getOwnPropertyDescriptor(_class2$10.prototype,"loadLevelsData"),_class2$10.prototype),_applyDecoratedDescriptor$19(_class2$10.prototype,"_onFragBuffered",[autobind],Object.getOwnPropertyDescriptor(_class2$10.prototype,"_onFragBuffered"),_class2$10.prototype),
_applyDecoratedDescriptor$19(_class2$10.prototype,"mediaInfoHls",[autobind],Object.getOwnPropertyDescriptor(_class2$10.prototype,"mediaInfoHls"),_class2$10.prototype),_applyDecoratedDescriptor$19(_class2$10.prototype,"mediaInfoMp4",[autobind],Object.getOwnPropertyDescriptor(_class2$10.prototype,"mediaInfoMp4"),_class2$10.prototype),_applyDecoratedDescriptor$19(_class2$10.prototype,"mediaInfoDash",[autobind],Object.getOwnPropertyDescriptor(_class2$10.prototype,"mediaInfoDash"),_class2$10.prototype),_applyDecoratedDescriptor$19(_class2$10.prototype,"onChangeQualityMp4",[autobind],Object.getOwnPropertyDescriptor(_class2$10.prototype,"onChangeQualityMp4"),_class2$10.prototype),_applyDecoratedDescriptor$19(_class2$10.prototype,"onChangeQualityMpd",[autobind],Object.getOwnPropertyDescriptor(_class2$10.prototype,"onChangeQualityMpd"),_class2$10.prototype),_applyDecoratedDescriptor$19(_class2$10.prototype,"onChangeQualityHls",[autobind],Object.getOwnPropertyDescriptor(_class2$10.prototype,"onChangeQualityHls"),_class2$10.prototype),_applyDecoratedDescriptor$19(_class2$10.prototype,"onMouseEnterHandler",[autobind],Object.getOwnPropertyDescriptor(_class2$10.prototype,"onMouseEnterHandler"),_class2$10.prototype),_applyDecoratedDescriptor$19(_class2$10.prototype,"onMouseLeaveHandler",[autobind],Object.getOwnPropertyDescriptor(_class2$10.prototype,"onMouseLeaveHandler"),_class2$10.prototype),_applyDecoratedDescriptor$19(_class2$10.prototype,"onTouchStartHandler",[autobind],Object.getOwnPropertyDescriptor(_class2$10.prototype,"onTouchStartHandler"),_class2$10.prototype),_class$32=_class2$10))||_class$32,_class$14,_class2$2,_class3$1,_temp2$2,ControlBar=pureRenderDecorator_1((_temp2$2=_class3$1=function(a){function b(){var a,c,d,e;classCallCheck(this,b);for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];return c=d=possibleConstructorReturn(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(g))),d.state={children:[React__default.createElement(PlayToggle,{key:"0",player:d.props.player}),React__default.createElement(CurrentTime,{key:"2",player:d.props.player}),React__default.createElement(TimeDivider,{key:"3",player:d.props.player}),React__default.createElement(Duration,{key:"4",player:d.props.player}),React__default.createElement(LiveDisplay,{key:"5",player:d.props.player}),React__default.createElement(PlayToggle$2,{key:"6",player:d.props.player}),React__default.createElement(ProgressControl,{key:"7",player:d.props.player,ref:function(a){return d.progressControl=a}}),React__default.createElement(Setting,{key:"8",player:d.props.player}),React__default.createElement(QualityControl,{key:"9",player:d.props.player,ref:function(a){return d.qualityControl=a}}),React__default.createElement(VolumeControl,{key:"10",player:d.props.player}),React__default.createElement(FullScreenToggle,{key:"12",player:d.props.player,ref:function(a){return d.fullScreenToggle=a}}),React__default.createElement(BtnMute,{key:"13",player:d.props.player})]},e=c,possibleConstructorReturn(d,e)}return inherits(b,a),createClass(b,[{key:"userActive",value:function(){this.props.controlBarActiveChange(!0)}},{key:"userInActive",value:function(){this.props.controlBarActiveChange(!1)}},{key:"className",value:function a(){var a=this.props.className,b=[a+" control-bar"];return b.join(" ")}},{key:"renderEl",value:function(){var a=this.className();return React__default.createElement("div",{className:a,onMouseEnter:this.userActive,onMouseLeave:this.userInActive})}}]),b}(PlayerComponent),_class3$1.defaultProps={className:""},_class2$2=_temp2$2,_applyDecoratedDescriptor$5(_class2$2.prototype,"userActive",[autobind],Object.getOwnPropertyDescriptor(_class2$2.prototype,"userActive"),_class2$2.prototype),_applyDecoratedDescriptor$5(_class2$2.prototype,"userInActive",[autobind],Object.getOwnPropertyDescriptor(_class2$2.prototype,"userInActive"),_class2$2.prototype),_class$14=_class2$2))||_class$14,_class$39,_class2$13,playername$27="ThanhNienPlayer",InfoWaitPlay=pureRenderDecorator_1((_class2$13=function(a){function b(){var a,c,d,e;classCallCheck(this,b);for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];return c=d=possibleConstructorReturn(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(g))),d.state={title:"",duration:"0:00",is_show:!0},e=c,possibleConstructorReturn(d,e)}return inherits(b,a),createClass(b,[{key:"componentDidMount",value:function(){var a=this.props.player,b=a.mediaInfo.title;a.mediaInfo.title&&this.setState({title:b}),a.on("updateMediaInfo",this.update),a.on("play",this.handeInfoOnPlay),a.one("timeupdate",this.handeInfoOnPlay)}},{key:"componentWillUnmount",value:function(){var a=this.props.player;a.off("updateMediaInfo",this.update),a.off("play",this.handeInfoOnPlay)}},{key:"update",value:function(){var a=this.props.player,b=a.mediaInfo,c=b.title,d=b.duration;/(.*)\./.test(d)&&(d=d.match(/(.*)\./)[1]),this.setState({title:c,duration:d})}},{key:"handeInfoOnPlay",value:function(){this.setState({is_show:!1})}},{key:"_renderTitle",value:function(){var a=this.state.title;return React__default.createElement("div",{className:playername$27+"-title-video"},React__default.createElement("div",{className:playername$27+"-title-vd"},a),React__default.createElement("p",{className:playername$27+"-line"}))}},{key:"render",value:function(){var a=this.state,b=a.is_show,c=a.duration,d=this.props,e=d.player,f=d.className,g=e.options(),h=g.params;return!b||h.filler===!1||h.audio?null:React__default.createElement("div",{className:playername$27+"-info-waiting "+f},this._renderTitle(),React__default.createElement("div",{className:playername$27+"-time-video"},React__default.createElement("span",{className:playername$27+"-icon-time-video"}),React__default.createElement("span",{className:playername$27+"-total-time-video"},c)),React__default.createElement("div",{className:playername$27+"-setting-video"},React__default.createElement(VolumeControl,{player:e}),React__default.createElement(FullScreenToggle,{player:e})))}}]),b}(React.Component),_applyDecoratedDescriptor$22(_class2$13.prototype,"update",[autobind],Object.getOwnPropertyDescriptor(_class2$13.prototype,"update"),_class2$13.prototype),_applyDecoratedDescriptor$22(_class2$13.prototype,"handeInfoOnPlay",[autobind],Object.getOwnPropertyDescriptor(_class2$13.prototype,"handeInfoOnPlay"),_class2$13.prototype),_class$39=_class2$13))||_class$39,_class$40,_class2$14,playername$28="ThanhNienPlayer",AnimationPlay=pureRenderDecorator_1((_class2$14=function(a){function b(){var a,c,d,e;classCallCheck(this,b);for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];return c=d=possibleConstructorReturn(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(g))),d.state={is_show:!0,is_hover:!1,counter:3,is_haveData:!1,firstRender:!1},e=c,possibleConstructorReturn(d,e)}return inherits(b,a),createClass(b,[{key:"componentWillMount",value:function(){var a=this.props.player,b=a.options(),c=b.agent,d=a.options(),e=d.params,f=this;a.on("loadedmetadata",this.handleLoadMetaData),a.one("play",this.handleFirstPlay),window.addEventListener("resize",this.handleResize),a.setTimeout(function(){if(f.handleResize(),e.autoplay&&!c.isMobile){var b=3;a.setTimeout(function(){f.onHoverBackground()},0);var d=a.setInterval(function(){return 0===b?void a.clearInterval(d):(b--,void f.setState({counter:b}))},800)}},0)}},{key:"handleLoadMetaData",value:function(){this.setState({is_haveData:!0})}},{key:"handleFirstPlay",value:function(){this.setState({is_show:!1}),window.removeEventListener("resize",this.handleResize)}},{key:"handleResize",value:function(){this.setState({resizeTime:Date.now()})}},{key:"handlePlay",value:function(){var a=this.props.player;a.play(),clearTimeout(this.timeoutID)}},{key:"onHoverBackground",value:function(){var a=this.props.player;clearTimeout(this.timeoutID),this.setState({is_hover:!0}),this.timeoutID=window.setTimeout(function(){a.play()},2e3)}},{key:"componentWillUnmount",value:function(){var a=this.props.player;clearTimeout(this.timeoutID),a.off("play",this.handleFirstPlay),a.off("loadedmetadata",this.handleLoadMetaData),window.removeEventListener("resize",this.handleResize)}},{key:"onLeaveBackground",value:function(){this.setState({is_hover:!1}),clearTimeout(this.timeoutID)}},{key:"calculatePosition",value:function(){var a=this.props.player,b=a.el_.clientHeight,c=a.el_.clientWidth,d=160*b/400;return d=d<100?100:d>180?180:d,{top:b/2-d/2-30,left:c/2-d/2,boxHeight:d}}},{key:"className",value:function a(){var a=this.props.className,b=["play-box",""+a],c=this.props.player,d=c.options(),e=d.params;return e.autoplay&&b.push("box-autoplay"),b.join(" ")}},{key:"styleName",value:function(){var a=this.props.player,b=[playername$28+"-countdown-time"],c=a.options(),d=c.agent;return d.isMobile&&b.push("display-counttime"),b.join(" ")}},{key:"render",value:function(){var a=this.state,b=a.is_show,c=a.is_hover,d=a.resizeTime,e=a.counter,f=a.is_haveData,g=a.firstRender,h=this.props.player,i=h.options(),j=i.params;if(!b||!d||j.filler===!1||!f)return null;var k=void 0;try{k=this.calculatePosition()}catch(a){return null}var l=k,m=l.top,n=l.boxHeight,o=l.left,p=c?n:0,q={};g||(p=0,this.setState({firstRender:!0})),j.autoplay||(q={onMouseLeave:this.onLeaveBackground,onMouseEnter:this.onHoverBackground});var r=this.className(),s=this.styleName(),t={width:n,height:n,backgroundSize:n+"px",lineHeight:n+"px"};return React__default.createElement("div",_extends({className:r},q,{onClick:this.handlePlay}),React__default.createElement("div",{className:playername$28+"-animation-box",style:{top:m,left:o}},React__default.createElement("div",{className:playername$28+"-border-animation",style:t}),React__default.createElement("div",{className:playername$28+"-background-animation",style:{width:n,height:p,backgroundSize:n}}),j.autoplay?React__default.createElement("span",{style:{top:n,left:0,width:n},className:s},"Video play in ",e,"s"):null))}}]),b}(React.Component),_applyDecoratedDescriptor$23(_class2$14.prototype,"handleLoadMetaData",[autobind],Object.getOwnPropertyDescriptor(_class2$14.prototype,"handleLoadMetaData"),_class2$14.prototype),_applyDecoratedDescriptor$23(_class2$14.prototype,"handleFirstPlay",[autobind],Object.getOwnPropertyDescriptor(_class2$14.prototype,"handleFirstPlay"),_class2$14.prototype),_applyDecoratedDescriptor$23(_class2$14.prototype,"handleResize",[autobind],Object.getOwnPropertyDescriptor(_class2$14.prototype,"handleResize"),_class2$14.prototype),_applyDecoratedDescriptor$23(_class2$14.prototype,"handlePlay",[autobind],Object.getOwnPropertyDescriptor(_class2$14.prototype,"handlePlay"),_class2$14.prototype),_applyDecoratedDescriptor$23(_class2$14.prototype,"onHoverBackground",[autobind],Object.getOwnPropertyDescriptor(_class2$14.prototype,"onHoverBackground"),_class2$14.prototype),_applyDecoratedDescriptor$23(_class2$14.prototype,"onLeaveBackground",[autobind],Object.getOwnPropertyDescriptor(_class2$14.prototype,"onLeaveBackground"),_class2$14.prototype),_class$40=_class2$14))||_class$40,_class$41,_class2$15,ImagesThumb=pureRenderDecorator_1((_class2$15=function(a){function b(){var a,c,d,e;classCallCheck(this,b);for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];return c=d=possibleConstructorReturn(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(g))),d.state={is_show:!0,isFullscreen:!1,thumb_json:"",thumb_info:"",thumb_query:d.props.player.options().params.poster,liveUrl:""},e=c,possibleConstructorReturn(d,e)}return inherits(b,a),createClass(b,[{key:"handleOnPlay",value:function(){var a=this.props.player;a.paused()||this.setState({is_show:!1})}},{key:"thumbImageInfo",value:function(a,b){this.setState({thumb_info:b.thumb_url})}},{key:"setThumb",value:function(a){this.setState({thumb_info:a})}},{key:"thumbImageJson",value:function(){var a=this.props.player,b=a.mediaInfo.img;this.setState({thumb_json:b})}},{key:"reRenderThumb",value:function(){this.setState({is_show:!0})}},{key:"handleClick",value:function(){var a=this.props.player;a.play()}},{key:"componentDidMount",value:function(){var a=this,b=this.props.player;b.on("updateMediaInfo",this.thumbImageJson),b.on("fullscreenchange",this.handleFullscreenChange),b.on("posterchange",this.handlePosterChange),b.on("play",this.handleOnPlay),b.one("timeupdate",this.handleOnPlay),b.on(event.UPDATE_VIDEO_SOURCE,this.thumbImageInfo),b.poster=function(b){b&&a.setState({liveUrl:b})}}},{key:"componentWillUnmount",value:function(){var a=this.props.player;a.off("updateMediaInfo",this.thumbImageJson),a.off("fullscreenchange",this.handleFullscreenChange),a.off("play",this.handleOnPlay),a.off(event.UPDATE_VIDEO_SOURCE,this.thumbImageInfo)}},{key:"handleFullscreenChange",value:function(){var a=this.props.player,b=a.isFullscreen();this.setState({isFullscreen:b})}},{key:"handlePosterChange",value:function(a,b){this.setThumb(b)}},{key:"render",value:function(){var a=this.props.player,b=a.options(),c=b.agent,d=b.params,e=this.state,f=e.thumb_json,g=e.thumb_info,h=e.thumb_query,i=e.is_show,j=e.isFullscreen,k=e.liveUrl;if(!i&&!d.audio)return null;var l=h||f||g,m=600;c.isMobile&&(m=480),l=decodeURIComponent(l),l=l.replace(/([^:])(\/\/)/g,"$1/"),/thumb_w|zoom/.test(l)||(/video-thumbs.mediacdn.vn/.test(l)?l=l.replace(/mediacdn.vn\//,"mediacdn.vn/thumb_w/"+m+"/"):/video-thumbs.vcmedia.vn/.test(l)&&(l=l.replace(/vcmedia.vn\//,"vcmedia.vn/thumb_w/"+m+"/"))),j&&/thumb_w|zoom/.test(l)&&(l=l.replace(/(thumb_w|zoom)\/.*?\//,"")),l="undefined"===l?"":l;var n=k?k:l,o={};return!n&&c.isIOS?o.background="white":o.backgroundImage="url('"+n+"')",React__default.createElement("div",{style:o,className:"thumbnail",onClick:this.handleClick})}}]),b}(React.Component),_applyDecoratedDescriptor$24(_class2$15.prototype,"handleOnPlay",[autobind],Object.getOwnPropertyDescriptor(_class2$15.prototype,"handleOnPlay"),_class2$15.prototype),_applyDecoratedDescriptor$24(_class2$15.prototype,"thumbImageInfo",[autobind],Object.getOwnPropertyDescriptor(_class2$15.prototype,"thumbImageInfo"),_class2$15.prototype),_applyDecoratedDescriptor$24(_class2$15.prototype,"thumbImageJson",[autobind],Object.getOwnPropertyDescriptor(_class2$15.prototype,"thumbImageJson"),_class2$15.prototype),_applyDecoratedDescriptor$24(_class2$15.prototype,"reRenderThumb",[autobind],Object.getOwnPropertyDescriptor(_class2$15.prototype,"reRenderThumb"),_class2$15.prototype),_applyDecoratedDescriptor$24(_class2$15.prototype,"handleClick",[autobind],Object.getOwnPropertyDescriptor(_class2$15.prototype,"handleClick"),_class2$15.prototype),_applyDecoratedDescriptor$24(_class2$15.prototype,"handleFullscreenChange",[autobind],Object.getOwnPropertyDescriptor(_class2$15.prototype,"handleFullscreenChange"),_class2$15.prototype),_applyDecoratedDescriptor$24(_class2$15.prototype,"handlePosterChange",[autobind],Object.getOwnPropertyDescriptor(_class2$15.prototype,"handlePosterChange"),_class2$15.prototype),_class$41=_class2$15))||_class$41,_class$43,playername$30="ThanhNienPlayer",RemainingTime=(_class$43=function(a){function b(){var a,c,d,e;classCallCheck(this,b);for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];return c=d=possibleConstructorReturn(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(g))),d.state={remaining_time:"0:00"},e=c,possibleConstructorReturn(d,e)}return inherits(b,a),createClass(b,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){var a=this.props.player;a.on("timeupdate",this.updateContent)}},{key:"componentWillUnmount",value:function(){var a=this.props.player;a.off("timeupdate",this.updateContent)}},{key:"updateContent",value:function(){var a=this.props.player;if(a.duration()){var b=formatTime(a.remainingTime());this.setState({remaining_time:b})}}},{key:"className",value:function(){var a=[playername$30+"-control time-control remaining-time"];return a.join(" ")}},{key:"render",value:function(){var a=this.className(),b=this.state.remaining_time;return React__default.createElement("div",{className:a},React__default.createElement("div",{className:"color-textt"},React__default.createElement("span",{className:"control-text"},"Remaining Time"),"-"+b))}}]),b}(PlayerComponent),_applyDecoratedDescriptor$26(_class$43.prototype,"updateContent",[autobind],Object.getOwnPropertyDescriptor(_class$43.prototype,"updateContent"),_class$43.prototype),_class$43);PlayerComponent.registerSkinComponent("remainingTime",RemainingTime);var _class$42,_class2$16,playername$29="ThanhNienPlayer",VolumeAd=pureRenderDecorator_1((_class2$16=function(a){function b(){var a,c,d,e;classCallCheck(this,b);for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];return c=d=possibleConstructorReturn(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(g))),d.state={is_play:!1,mute:!0,on_show:!0,waiting_hide:!1,percent:0},e=c,possibleConstructorReturn(d,e)}return inherits(b,a),createClass(b,[{key:"componentDidMount",value:function(){var a=this.props.player;a.on("play",this.handlePlay),a.on("volumechange",this.update),a.on("player-filling-volume",this.hideShowOnAuto)}},{key:"componentWillUnmount",value:function(){var a=this.props.player;a.off("play",this.handlePlay),a.off("volumechange",this.update),a.off("player-filling-volume",this.hideShowOnAuto)}},{key:"hideShowOnAuto",value:function(a,b){if(!b){var c=this;this.timeoutHide_=setTimeout(function(){c.setState({on_show:!1})},1e3),this.setState({waiting_hide:!0})}}},{key:"handlePlay",value:function(){this.setState({is_play:!0})}},{key:"update",value:function(){var a=this.props.player,b=Math.ceil(100*a.volume()),c=a.muted();c&&(b=0),this.setState({percent:b})}},{key:"handleClick",value:function(){var a=this.props.player;a.trigger(event$1.USER_CHANGE_MUTE);var b=a.muted();this.setState({mute:b}),a.muted(!b)}},{key:"className",value:function(){var a=[playername$29+"-volume-ctn"],b=this.state.waiting_hide;return b&&a.push("waiting_hide"),a.join(" ")}},{key:"render",value:function(){var a=this.props.player,b=a.muted(),c=a.options(),d=c.agent,e=this.state,f=e.percent,g=e.on_show,h=e.is_play;if(!g||!h||f<31||b||d.isMobile)return null;var i=this.className();return React__default.createElement("div",{className:i},React__default.createElement("div",{onClick:this.handleClick,className:playername$29+"-volume-ad"},React__default.createElement("div",{className:playername$29+"-top-volumead"},React__default.createElement("span",{className:playername$29+"-text-volume"},"Âm lượng: ",f,"%")),React__default.createElement("div",{className:playername$29+"-bottom-volumead"},React__default.createElement(VolumeControl,{player:a})),React__default.createElement("div",{className:playername$29+"-hover-mute"},React__default.createElement("span",{className:playername$29+"-text-volume"},"Tắt tiếng"))))}}]),b}(React.Component),_applyDecoratedDescriptor$25(_class2$16.prototype,"hideShowOnAuto",[autobind],Object.getOwnPropertyDescriptor(_class2$16.prototype,"hideShowOnAuto"),_class2$16.prototype),_applyDecoratedDescriptor$25(_class2$16.prototype,"handlePlay",[autobind],Object.getOwnPropertyDescriptor(_class2$16.prototype,"handlePlay"),_class2$16.prototype),_applyDecoratedDescriptor$25(_class2$16.prototype,"update",[autobind],Object.getOwnPropertyDescriptor(_class2$16.prototype,"update"),_class2$16.prototype),_applyDecoratedDescriptor$25(_class2$16.prototype,"handleClick",[autobind],Object.getOwnPropertyDescriptor(_class2$16.prototype,"handleClick"),_class2$16.prototype),_class$42=_class2$16))||_class$42,_class$44,playername$31="ThanhNienPlayer",Loading=(_class$44=function(a){function b(a){classCallCheck(this,b);var c=possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.state={waiting:!1,loadingSizes:100},c.handleUnWaiting=throttle_1(c.handleUnWaiting.bind(c),300),c}return inherits(b,a),createClass(b,[{key:"componentDidMount",value:function(){var a=this.props.player;window.addEventListener("resize",this.handleResize),this.handleResize(),a.one("play",this.handleFirstWaiting),a.on("waiting",this.handleWaiting),a.on("stalled",this.handleWaiting),a.on(event$1.AD_START,this.handleWaiting),a.on("timeupdate",this.handleUnWaiting)}},{key:"componentWillUnmount",value:function(){var a=this.props.player;window.removeEventListener("resize",this.handleResize),a.off("play",this.handleFirstWaiting),a.off("waiting",this.handleWaiting),a.off("stalled",this.handleWaiting),a.off(event$1.AD_START,this.handleWaiting),a.off("timeupdate",this.handleUnWaiting),clearTimeout(this.waiting_delay)}},{key:"handleResize",value:function(){var a=this.props.player,b=a.el_.clientWidth;b<=790&&this.setState({loadingSizes:90}),b<=480&&this.setState({loadingSizes:60})}},{key:"handleFirstWaiting",value:function(){this.setState({waiting:!0})}},{key:"handleWaiting",value:function(){var a=this;this.waiting_delay||(this.waiting_delay=setTimeout(function(){this.waiting_delay=null,a.setState({waiting:!0})},700))}},{key:"handleUnWaiting",value:function(){clearTimeout(this.waiting_delay),this.waiting_delay=null,this.setState({waiting:!1})}},{key:"className",value:function(){var a=["loading"],b=this.state.waiting;return b||a.push("hidden"),a.join(" ")}},{key:"calculatePosition",value:function(){var a=this.props.player,b=this.state.loadingSizes,c=a.el_.clientHeight,d=a.el_.clientWidth;return{top:c/2-b/2-30,left:d/2-b/2,loadingSizes:b}}},{key:"render",value:function(){var a=this.props.player,b=a.options(),c=b.params,d=this.className(),e=this.calculatePosition(),f=e.top,g=e.left,h=e.loadingSizes;return c.audio?null:React__default.createElement("div",{className:d,onClick:this.handleClick},React__default.createElement("div",{style:{width:h,height:h,top:f,left:g},className:playername$31+"-loader-circle"}))}}]),b}(React.Component),_applyDecoratedDescriptor$27(_class$44.prototype,"handleResize",[autobind],Object.getOwnPropertyDescriptor(_class$44.prototype,"handleResize"),_class$44.prototype),_applyDecoratedDescriptor$27(_class$44.prototype,"handleFirstWaiting",[autobind],Object.getOwnPropertyDescriptor(_class$44.prototype,"handleFirstWaiting"),_class$44.prototype),_class$44),playername$32="ThanhNienPlayer",ErrorDisplay=function(a){function b(a){classCallCheck(this,b);var c=possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.state={message:null},c._updatePlayerError=c._updatePlayerError.bind(c),c}return inherits(b,a),createClass(b,[{key:"componentDidMount",value:function(){var a=this.props.player;a.on(event$1.PLAYER_ERROR,this._updatePlayerError)}},{key:"componentWillUnmount",value:function(){var a=this.props.player;a.off(event$1.PLAYER_ERROR,this._updatePlayerError)}},{key:"_updatePlayerError",value:function(a,b){this.setState({message:b.msg})}},{key:"render",value:function(){var a=this.state.message;return a?React__default.createElement("div",{className:playername$32+"-error-display"},React__default.createElement("div",{className:"error-display-message"},React__default.createElement("div",null,a))):null}}]),b}(React.Component),playername$33="ThanhNienPlayer",NotiDisplay=function(a){function b(a){classCallCheck(this,b);var c=possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.state={message:null},c._updatePlayerNoti=c._updatePlayerNoti.bind(c),c}return inherits(b,a),createClass(b,[{key:"componentDidMount",value:function(){var a=this.props.player;a.on(event$1.PLAYER_NOTI,this._updatePlayerNoti)}},{key:"componentWillUnmount",value:function(){var a=this.props.player;a.off(event$1.PLAYER_NOTI,this._updatePlayerNoti)}},{key:"_updatePlayerNoti",value:function(a,b){this.setState({message:b.msg})}},{key:"render",value:function(){var a=this.props.player,b=a.options().params.poster,c=b?"url("+b+")":null,d=this.state.message;return d?React__default.createElement("div",{className:playername$33+"-noti-display",style:{backgroundImage:c}},React__default.createElement("div",{className:"noti-display-message"},React__default.createElement("div",{style:{background:"black",width:"50%",margin:"auto"}},d))):null}}]),b}(React.Component),_class$11,_class2,_temp$7,DefaultSkin=(_temp$7=_class2=function(a){function b(a){classCallCheck(this,b);var c=possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));c.state={children:[React__default.createElement(Loading,{key:"loading",player:c.props.player}),React__default.createElement(Overlay,{key:"overlay",player:c.props.player,ref:function(a){c.overlay=a}}),React__default.createElement(ControlBar,{key:"controlbar",player:c.props.player,controlBarActiveChange:c.controlBarActiveChange,ref:function(a){c.controlBar=a}}),React__default.createElement(AnimationPlay,{key:"animationplay",player:c.props.player}),React__default.createElement(Ad,{key:"ads",player:c.props.player,ref:function(a){c.ad=a}}),React__default.createElement(InfoWaitPlay,{key:"videoinfo",player:c.props.player,ref:function(a){c.infoWaitPlay=a}}),React__default.createElement(VolumeAd,{key:"volume",player:c.props.player}),React__default.createElement(ImagesThumb,{key:"poster",player:c.props.player,ref:function(a){c.thumb=a}}),React__default.createElement(ErrorDisplay,{key:"errordisplay",player:c.props.player}),React__default.createElement(NotiDisplay,{key:"notidisplay",player:c.props.player})],is_playing:!1,is_has_started:!1,is_ended:!1,is_user_active:!1,is_controlbar_active:!1,is_scrubbing_progress:!1,is_scrubbing_volume:!1,userActivity_:!1,is_fullscreen:!1,is_hideControlBar:!1};var d=a.player,e=c;return c.userActive=throttle_1(c.userActive.bind(c),300),d.container=c,d.userActive=function(a){return void 0!==a?void(a?e.userActive():e.userInActive()):e.state.is_user_active},c}return inherits(b,a),createClass(b,[{key:"componentDidMount",value:function(){var a=this.props.player;a.overlay=ReactDOM.findDOMNode(this.overlay),a.one("play",this.handeFirstPlay),a.one("playing",this.handeFirstPlay),a.on("play",this.handlePlay),a.on("pause",this.handlePause),a.on("ended",this.handleEnded),a.on("useractive",this.userActive),a.on("fullscreenchange",this.handleFullscreenChange),a.on("scrubbing-progress-state-change",this.handleScrubbingProgressStateChange),a.on("scrubbing-volume-state-change",this.handleScrubbingVolumeStateChange),this.activityCheck_=setInterval(this.activityCheck,500)}},{key:"componentWillUnmount",value:function(){var a=this.props.player;a.off("play",this.handeFirstPlay),a.off("playing",this.handeFirstPlay),a.off("play",this.handlePlay),a.off("pause",this.handlePause),a.off("ended",this.handleEnded),a.off("useractive",this.userActive),a.off("fullscreenchange",this.handleFullscreenChange),a.off("scrubbing-progress-state-change",this.handleScrubbingProgressStateChange),a.off("scrubbing-volume-state-change",this.handleScrubbingVolumeStateChange),clearInterval(this.activityCheck_),clearTimeout(this.inactivityTimeout_)}},{key:"handeFirstPlay",value:function(){var a=this.props.player;a.off("play",this.handeFirstPlay),a.off("playing",this.handeFirstPlay),this.setState({is_has_started:!0})}},{key:"handlePlay",value:function(){this.setState({is_playing:!0,is_ended:!1})}},{key:"handlePause",value:function(){this.setState({is_playing:!1})}},{key:"handleEnded",value:function(){this.setState({is_playing:!1,is_ended:!0})}},{key:"handleFullscreenChange",value:function(){var a=this.props.player;a.isFullscreen()?(this.setState({is_fullscreen:!0}),a.addClass("player-fullscreen")):(this.setState({is_fullscreen:!1}),a.removeClass("player-fullscreen"))}},{key:"handleScrubbingProgressStateChange",value:function(a,b){this.setState({is_scrubbing_progress:b})}},{key:"handleScrubbingVolumeStateChange",value:function(a,b){this.setState({is_scrubbing_volume:b})}},{key:"className",value:function a(){var b=this.props,a=b.className,c=b.player,d=c.options(),e=d.params,f=this.state,g=f.is_playing,h=f.is_has_started,i=f.is_ended,j=f.is_user_active,k=f.is_scrubbing_volume,l=f.is_controlbar_active,m=f.is_fullscreen,n=f.is_hideControlBar,o=[a];return(n||e.control===!1)&&o.push("hide-control"),(h||e.filler===!1||e.audio)&&o.push("has-started"),g?o.push("playing"):o.push("paused"),i&&o.push("ended"),j||l||k?o.push("user-active"):o.push("user-inactive"),l&&o.push("controlbar-hover"),m&&o.push("fullscreen"),o.join(" ")}},{key:"activityCheck",value:function(){var a=this.state.userActivity_,b=this.props,c=b.inactivityTimeout,d=b.player,e=this;a&&(this.setState({userActivity_:!1}),d.clearTimeout(this.inactivityTimeout_),c>0&&(this.inactivityTimeout_=d.setTimeout(function(){var a=e.state.userActivity_;a||e.userInActive()},c)))}},{key:"userActive",value:function(){var a=this.props.player,b=this.state,c=b.is_user_active,d=b.userActivity_;c&&d||(this.setState({is_user_active:!0,userActivity_:!0}),a.trigger("player_useractive"),a.removeClass("player-user-inactive"),a.addClass("player-user-active"))}},{key:"userInActive",value:function(){var a=this.props.player,b=this.state,c=b.is_user_active,d=b.userActivity_;(c||d)&&(this.userActive.cancel(),this.setState({is_user_active:!1,userActivity_:!1}),a.trigger("player_userinactive"),a.removeClass("player-user-active"),a.addClass("player-user-inactive"),a.userActivity_=!1)}},{key:"handleKeyDown",value:function(a){var b=this.props.player;b.trigger(a)}},{key:"controlBarActiveChange",value:function(a){this.setState({is_controlbar_active:a})}},{key:"renderEl",value:function(){var a=this,b=this.className();return React__default.createElement("div",{id:"context-stats",className:b,onMouseEnter:this.userActive,onMouseLeave:this.userInActive,onMouseMove:this.userActive,onClick:this.userActive,tabIndex:"-1",role:"region","aria-label":"video player",ref:function(b){a.targetDiv=b}})}}]),b}(PlayerComponent),_class2.defaultProps={inactivityTimeout:2e3,className:""},_class$11=_temp$7,_applyDecoratedDescriptor$3(_class$11.prototype,"handeFirstPlay",[autobind],Object.getOwnPropertyDescriptor(_class$11.prototype,"handeFirstPlay"),_class$11.prototype),_applyDecoratedDescriptor$3(_class$11.prototype,"handlePlay",[autobind],Object.getOwnPropertyDescriptor(_class$11.prototype,"handlePlay"),_class$11.prototype),_applyDecoratedDescriptor$3(_class$11.prototype,"handlePause",[autobind],Object.getOwnPropertyDescriptor(_class$11.prototype,"handlePause"),_class$11.prototype),_applyDecoratedDescriptor$3(_class$11.prototype,"handleEnded",[autobind],Object.getOwnPropertyDescriptor(_class$11.prototype,"handleEnded"),_class$11.prototype),_applyDecoratedDescriptor$3(_class$11.prototype,"handleFullscreenChange",[autobind],Object.getOwnPropertyDescriptor(_class$11.prototype,"handleFullscreenChange"),_class$11.prototype),_applyDecoratedDescriptor$3(_class$11.prototype,"handleScrubbingProgressStateChange",[autobind],Object.getOwnPropertyDescriptor(_class$11.prototype,"handleScrubbingProgressStateChange"),_class$11.prototype),_applyDecoratedDescriptor$3(_class$11.prototype,"handleScrubbingVolumeStateChange",[autobind],Object.getOwnPropertyDescriptor(_class$11.prototype,"handleScrubbingVolumeStateChange"),_class$11.prototype),_applyDecoratedDescriptor$3(_class$11.prototype,"activityCheck",[autobind],Object.getOwnPropertyDescriptor(_class$11.prototype,"activityCheck"),_class$11.prototype),_applyDecoratedDescriptor$3(_class$11.prototype,"userInActive",[autobind],Object.getOwnPropertyDescriptor(_class$11.prototype,"userInActive"),_class$11.prototype),_applyDecoratedDescriptor$3(_class$11.prototype,"controlBarActiveChange",[autobind],Object.getOwnPropertyDescriptor(_class$11.prototype,"controlBarActiveChange"),_class$11.prototype),_class$11),_class$10,_temp2,Kenh14Skin=(_temp2=_class$10=function(a){function b(){var a,c,d,e;classCallCheck(this,b);for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];return c=d=possibleConstructorReturn(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(g))),d.state={children:[React__default.createElement(Loading,{key:"loading",player:d.props.player}),React__default.createElement(Overlay,{key:"overlay",player:d.props.player,ref:function(a){
d.overlay=a}}),React__default.createElement(ControlBar,{key:"controlbar",player:d.props.player,controlBarActiveChange:d.controlBarActiveChange,ref:function(a){d.controlBar=a}}),React__default.createElement(AnimationPlay,{key:"animationplay",player:d.props.player,ref:function(a){d.animation=a}}),React__default.createElement(Ad,{key:"ads",player:d.props.player,ref:function(a){d.ad=a}}),React__default.createElement(InfoWaitPlay,{key:"videoinfo",player:d.props.player,ref:function(a){d.infoWait=a}}),React__default.createElement(VolumeAd,{key:"volume",player:d.props.player}),React__default.createElement(ImagesThumb,{key:"poster",player:d.props.player,ref:function(a){d.thumb=a}}),React__default.createElement(ErrorDisplay,{key:"errordisplay",player:d.props.player}),React__default.createElement(NotiDisplay,{key:"notidisplay",player:d.props.player})],is_playing:!1,is_has_started:!1,is_ended:!1,is_user_active:!1,is_controlbar_active:!1,is_scrubbing_progress:!1,is_scrubbing_volume:!1,userActivity_:!1,is_fullscreen:!1,is_hideControlBar:!1},e=c,possibleConstructorReturn(d,e)}return inherits(b,a),b}(DefaultSkin),_class$10.propTypes={player:propTypes.object.isRequired,inactivityTimeout:propTypes.number},_class$10.defaultProps={inactivityTimeout:2e3},_temp2),Player=videojs.getComponent("Player"),playername$3="ThanhNienPlayer",Component$1=videojs.getComponent("Component"),PlayerSkin=withAd(Kenh14Skin),oriAddClass=Player.prototype.addClass,oriRemoveClass=Player.prototype.removeClass;Player.prototype.addClass=function(a){var b=new RegExp(playername$3+"|embed-iframe|default-skin|dimensions|player-.*");b.test(a)&&oriAddClass.call(this,a)},Player.prototype.removeClass=function(a){oriRemoveClass.call(this,a)};var CustomizeSkin=function(a){function b(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return classCallCheck(this,b),possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c))}return inherits(b,a),createClass(b,[{key:"dispose",value:function(){ReactDOM.unmountComponentAtNode(this.el_)}},{key:"createEl",value:function(){var a=this.player(),c=get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"createEl",this).call(this,"div",{className:playername$3+"-area-control"});return ReactDOM.render(React__default.createElement(PlayerSkin,{player:a}),c),c}}]),b}(Component$1);Component$1.registerComponent("CustomizeSkin",CustomizeSkin),videojs.log.level("off"),videojs.log=log,videojs.playerconfig=playerconfig,videojs.autobind=autobind,videojs.PropTypes=propTypes,videojs.getSkinComponent=PlayerComponent.getSkinComponent,videojs.agent=agent,videojs.Plugin=Plugin,videojs.store=store_legacy,videojs.Hls=Hls,videojs.util=util$3;var playername="ThanhNienPlayer",playerOptions={}||{},options_default=_extends({playsinline:!0,agent:agent,query:query$1,info:info,plugins:{attachPlugin:{}},children:["mediaLoader","customizeSkin"],params:{}},playerOptions);return vcplayer.plugin=videojs.plugin.bind(videojs),window[playername+"Core"]=videojs,window[playername]=vcplayer,window.vcReact=React__default,window.vcReactDOM=ReactDOM,vcplayer})}.bind({videojs:this.videojs,Hls:this.Hls,React:this.React?this.React:this.window.React,ReactDOM:this.ReactDOM?this.ReactDOM:this.window.ReactDOM,flvjs:window.flvjs,dashjs:window.dashjs,"aes-wasm":window["aes-wasm"]})()}).bind(a)();